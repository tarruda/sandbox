/*! For license information please see main.d2e86820.js.LICENSE.txt */
!function(){var e={575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},244:function(e,t,n){var r=n(913).default,i=n(575).default;e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t,n){"use strict";var r=n(5);e.exports.FENGARI_AUTHORS=r.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=r.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=r.FENGARI_RELEASE,e.exports.FENGARI_VERSION=r.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=r.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=r.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=r.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=r.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=r.luastring_eq,e.exports.luastring_indexOf=r.luastring_indexOf,e.exports.luastring_of=r.luastring_of,e.exports.to_jsstring=r.to_jsstring,e.exports.to_luastring=r.to_luastring,e.exports.to_uristring=r.to_uristring;var i=n(3),a=n(2),o=n(7),s=n(17);e.exports.luaconf=i,e.exports.lua=a,e.exports.lauxlib=o,e.exports.lualib=s},function(e,t,n){"use strict";var a,o,s;if(a="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){for(var t=0,n=e.length,r=new Uint8Array(n);n>t;)r[t]=e[t++];return r},"function"==typeof(new Uint8Array).indexOf)o=function(e,t,n){return e.indexOf(t,n)};else{var u=[].indexOf;if(0!==u.call(new Uint8Array(1),0))throw Error("missing .indexOf");o=function(e,t,n){return u.call(e,t,n)}}s="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return a(arguments)};var l=function(e){return e instanceof Uint8Array},c="cannot convert invalid utf8 to javascript string",f=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce((function(e,t){return e[t.charCodeAt(0)]=!0,e}),{}),h={},d=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){var n=h[e];if(l(n))return n}for(var r=e.length,i=Array(r),o=0,s=0;s<r;++s){var u=e.charCodeAt(s);if(u<=127)i[o++]=u;else if(u<=2047)i[o++]=192|u>>6,i[o++]=128|63&u;else{if(u>=55296&&u<=56319&&s+1<r){var c=e.charCodeAt(s+1);c>=56320&&c<=57343&&(s++,u=1024*(u-55296)+c+9216)}u<=65535?(i[o++]=224|u>>12,i[o++]=128|u>>6&63,i[o++]=128|63&u):(i[o++]=240|u>>18,i[o++]=128|u>>12&63,i[o++]=128|u>>6&63,i[o++]=128|63&u)}}return i=a(i),t&&(h[e]=i),i};e.exports.luastring_from=a,e.exports.luastring_indexOf=o,e.exports.luastring_of=s,e.exports.is_luastring=l,e.exports.luastring_eq=function(e,t){if(e!==t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1}return!0},e.exports.to_jsstring=function(e,t,n,r){if(!l(e))throw new TypeError("to_jsstring expects a Uint8Array");n=void 0===n?e.length:Math.min(e.length,n);for(var i="",a=void 0!==t?t:0;a<n;){var o=e[a++];if(o<128)i+=String.fromCharCode(o);else if(o<194||o>244){if(!r)throw RangeError(c);i+="\ufffd"}else if(o<=223){if(a>=n){if(!r)throw RangeError(c);i+="\ufffd";continue}var s=e[a++];if(128!=(192&s)){if(!r)throw RangeError(c);i+="\ufffd";continue}i+=String.fromCharCode(((31&o)<<6)+(63&s))}else if(o<=239){if(a+1>=n){if(!r)throw RangeError(c);i+="\ufffd";continue}var u=e[a++];if(128!=(192&u)){if(!r)throw RangeError(c);i+="\ufffd";continue}var f=e[a++];if(128!=(192&f)){if(!r)throw RangeError(c);i+="\ufffd";continue}var h=((15&o)<<12)+((63&u)<<6)+(63&f);if(h<=65535)i+=String.fromCharCode(h);else{var d=55296+((h-=65536)>>10),p=h%1024+56320;i+=String.fromCharCode(d,p)}}else{if(a+2>=n){if(!r)throw RangeError(c);i+="\ufffd";continue}var v=e[a++];if(128!=(192&v)){if(!r)throw RangeError(c);i+="\ufffd";continue}var g=e[a++];if(128!=(192&g)){if(!r)throw RangeError(c);i+="\ufffd";continue}var m=e[a++];if(128!=(192&m)){if(!r)throw RangeError(c);i+="\ufffd";continue}var y=((7&o)<<18)+((63&v)<<12)+((63&g)<<6)+(63&m),k=55296+((y-=65536)>>10),_=y%1024+56320;i+=String.fromCharCode(k,_)}}return i},e.exports.to_uristring=function(e){if(!l(e))throw new TypeError("to_uristring expects a Uint8Array");for(var t="",n=0;n<e.length;n++){var r=e[n];f[r]?t+=String.fromCharCode(r):t+="%"+(r<16?"0":"")+r.toString(16)}return t},e.exports.to_luastring=d,e.exports.from_userstring=function(e){if(!l(e)){if("string"!=typeof e)throw new TypeError("expects an array of bytes or javascript string");e=d(e)}return e};var p=d("\x1bLua");e.exports.LUA_SIGNATURE=p,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";var v={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};v.LUA_TSHRSTR=0|v.LUA_TSTRING,v.LUA_TLNGSTR=16|v.LUA_TSTRING,v.LUA_TNUMFLT=0|v.LUA_TNUMBER,v.LUA_TNUMINT=16|v.LUA_TNUMBER,v.LUA_TLCL=0|v.LUA_TFUNCTION,v.LUA_TLCF=16|v.LUA_TFUNCTION,v.LUA_TCCL=32|v.LUA_TFUNCTION;var g=-n(3).LUAI_MAXSTACK-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=g,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=v,e.exports.lua_Debug=function(){return r((function e(){i(this,e),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}))}(),e.exports.lua_upvalueindex=function(e){return g-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,t,n){"use strict";var r=n(1),i=n(18),a=n(11),o=n(8),s=n(12);e.exports.LUA_AUTHORS=r.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=r.LUA_COPYRIGHT,e.exports.LUA_ERRERR=r.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=r.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=r.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=r.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=r.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=r.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=r.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=r.LUA_HOOKLINE,e.exports.LUA_HOOKRET=r.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=r.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=r.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=r.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=r.LUA_MASKLINE,e.exports.LUA_MASKRET=r.LUA_MASKRET,e.exports.LUA_MINSTACK=r.LUA_MINSTACK,e.exports.LUA_MULTRET=r.LUA_MULTRET,e.exports.LUA_NUMTAGS=r.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=r.thread_status.LUA_OK,e.exports.LUA_OPADD=r.LUA_OPADD,e.exports.LUA_OPBAND=r.LUA_OPBAND,e.exports.LUA_OPBNOT=r.LUA_OPBNOT,e.exports.LUA_OPBOR=r.LUA_OPBOR,e.exports.LUA_OPBXOR=r.LUA_OPBXOR,e.exports.LUA_OPDIV=r.LUA_OPDIV,e.exports.LUA_OPEQ=r.LUA_OPEQ,e.exports.LUA_OPIDIV=r.LUA_OPIDIV,e.exports.LUA_OPLE=r.LUA_OPLE,e.exports.LUA_OPLT=r.LUA_OPLT,e.exports.LUA_OPMOD=r.LUA_OPMOD,e.exports.LUA_OPMUL=r.LUA_OPMUL,e.exports.LUA_OPPOW=r.LUA_OPPOW,e.exports.LUA_OPSHL=r.LUA_OPSHL,e.exports.LUA_OPSHR=r.LUA_OPSHR,e.exports.LUA_OPSUB=r.LUA_OPSUB,e.exports.LUA_OPUNM=r.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=r.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=r.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=r.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=r.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=r.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=r.LUA_SIGNATURE,e.exports.LUA_TNONE=r.constant_types.LUA_TNONE,e.exports.LUA_TNIL=r.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=r.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=r.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=r.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=r.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=r.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=r.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=r.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=r.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=r.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=r.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=r.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=r.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=r.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=r.thread_status.LUA_YIELD,e.exports.lua_Debug=r.lua_Debug,e.exports.lua_upvalueindex=r.lua_upvalueindex,e.exports.lua_absindex=i.lua_absindex,e.exports.lua_arith=i.lua_arith,e.exports.lua_atpanic=i.lua_atpanic,e.exports.lua_atnativeerror=i.lua_atnativeerror,e.exports.lua_call=i.lua_call,e.exports.lua_callk=i.lua_callk,e.exports.lua_checkstack=i.lua_checkstack,e.exports.lua_close=s.lua_close,e.exports.lua_compare=i.lua_compare,e.exports.lua_concat=i.lua_concat,e.exports.lua_copy=i.lua_copy,e.exports.lua_createtable=i.lua_createtable,e.exports.lua_dump=i.lua_dump,e.exports.lua_error=i.lua_error,e.exports.lua_gc=i.lua_gc,e.exports.lua_getallocf=i.lua_getallocf,e.exports.lua_getextraspace=i.lua_getextraspace,e.exports.lua_getfield=i.lua_getfield,e.exports.lua_getglobal=i.lua_getglobal,e.exports.lua_gethook=a.lua_gethook,e.exports.lua_gethookcount=a.lua_gethookcount,e.exports.lua_gethookmask=a.lua_gethookmask,e.exports.lua_geti=i.lua_geti,e.exports.lua_getinfo=a.lua_getinfo,e.exports.lua_getlocal=a.lua_getlocal,e.exports.lua_getmetatable=i.lua_getmetatable,e.exports.lua_getstack=a.lua_getstack,e.exports.lua_gettable=i.lua_gettable,e.exports.lua_gettop=i.lua_gettop,e.exports.lua_getupvalue=i.lua_getupvalue,e.exports.lua_getuservalue=i.lua_getuservalue,e.exports.lua_insert=i.lua_insert,e.exports.lua_isboolean=i.lua_isboolean,e.exports.lua_iscfunction=i.lua_iscfunction,e.exports.lua_isfunction=i.lua_isfunction,e.exports.lua_isinteger=i.lua_isinteger,e.exports.lua_islightuserdata=i.lua_islightuserdata,e.exports.lua_isnil=i.lua_isnil,e.exports.lua_isnone=i.lua_isnone,e.exports.lua_isnoneornil=i.lua_isnoneornil,e.exports.lua_isnumber=i.lua_isnumber,e.exports.lua_isproxy=i.lua_isproxy,e.exports.lua_isstring=i.lua_isstring,e.exports.lua_istable=i.lua_istable,e.exports.lua_isthread=i.lua_isthread,e.exports.lua_isuserdata=i.lua_isuserdata,e.exports.lua_isyieldable=o.lua_isyieldable,e.exports.lua_len=i.lua_len,e.exports.lua_load=i.lua_load,e.exports.lua_newstate=s.lua_newstate,e.exports.lua_newtable=i.lua_newtable,e.exports.lua_newthread=s.lua_newthread,e.exports.lua_newuserdata=i.lua_newuserdata,e.exports.lua_next=i.lua_next,e.exports.lua_pcall=i.lua_pcall,e.exports.lua_pcallk=i.lua_pcallk,e.exports.lua_pop=i.lua_pop,e.exports.lua_pushboolean=i.lua_pushboolean,e.exports.lua_pushcclosure=i.lua_pushcclosure,e.exports.lua_pushcfunction=i.lua_pushcfunction,e.exports.lua_pushfstring=i.lua_pushfstring,e.exports.lua_pushglobaltable=i.lua_pushglobaltable,e.exports.lua_pushinteger=i.lua_pushinteger,e.exports.lua_pushjsclosure=i.lua_pushjsclosure,e.exports.lua_pushjsfunction=i.lua_pushjsfunction,e.exports.lua_pushlightuserdata=i.lua_pushlightuserdata,e.exports.lua_pushliteral=i.lua_pushliteral,e.exports.lua_pushlstring=i.lua_pushlstring,e.exports.lua_pushnil=i.lua_pushnil,e.exports.lua_pushnumber=i.lua_pushnumber,e.exports.lua_pushstring=i.lua_pushstring,e.exports.lua_pushthread=i.lua_pushthread,e.exports.lua_pushvalue=i.lua_pushvalue,e.exports.lua_pushvfstring=i.lua_pushvfstring,e.exports.lua_rawequal=i.lua_rawequal,e.exports.lua_rawget=i.lua_rawget,e.exports.lua_rawgeti=i.lua_rawgeti,e.exports.lua_rawgetp=i.lua_rawgetp,e.exports.lua_rawlen=i.lua_rawlen,e.exports.lua_rawset=i.lua_rawset,e.exports.lua_rawseti=i.lua_rawseti,e.exports.lua_rawsetp=i.lua_rawsetp,e.exports.lua_register=i.lua_register,e.exports.lua_remove=i.lua_remove,e.exports.lua_replace=i.lua_replace,e.exports.lua_resume=o.lua_resume,e.exports.lua_rotate=i.lua_rotate,e.exports.lua_setallof=o.lua_setallof,e.exports.lua_setfield=i.lua_setfield,e.exports.lua_setglobal=i.lua_setglobal,e.exports.lua_sethook=a.lua_sethook,e.exports.lua_seti=i.lua_seti,e.exports.lua_setlocal=a.lua_setlocal,e.exports.lua_setmetatable=i.lua_setmetatable,e.exports.lua_settable=i.lua_settable,e.exports.lua_settop=i.lua_settop,e.exports.lua_setupvalue=i.lua_setupvalue,e.exports.lua_setuservalue=i.lua_setuservalue,e.exports.lua_status=i.lua_status,e.exports.lua_stringtonumber=i.lua_stringtonumber,e.exports.lua_toboolean=i.lua_toboolean,e.exports.lua_todataview=i.lua_todataview,e.exports.lua_tointeger=i.lua_tointeger,e.exports.lua_tointegerx=i.lua_tointegerx,e.exports.lua_tojsstring=i.lua_tojsstring,e.exports.lua_tolstring=i.lua_tolstring,e.exports.lua_tonumber=i.lua_tonumber,e.exports.lua_tonumberx=i.lua_tonumberx,e.exports.lua_topointer=i.lua_topointer,e.exports.lua_toproxy=i.lua_toproxy,e.exports.lua_tostring=i.lua_tostring,e.exports.lua_tothread=i.lua_tothread,e.exports.lua_touserdata=i.lua_touserdata,e.exports.lua_type=i.lua_type,e.exports.lua_typename=i.lua_typename,e.exports.lua_upvalueid=i.lua_upvalueid,e.exports.lua_upvaluejoin=i.lua_upvaluejoin,e.exports.lua_version=i.lua_version,e.exports.lua_xmove=i.lua_xmove,e.exports.lua_yield=o.lua_yield,e.exports.lua_yieldk=o.lua_yieldk,e.exports.lua_tocfunction=i.lua_tocfunction},function(e,t,n){"use strict";var r={},i=n(1),a=i.LUA_VERSION_MAJOR,o=i.LUA_VERSION_MINOR,s=i.to_luastring;e.exports.LUA_PATH_SEP=";",e.exports.LUA_PATH_MARK="?",e.exports.LUA_EXEC_DIR="!";var u=a+"."+o;e.exports.LUA_VDIR=u;e.exports.LUA_DIRSEP="/";var l="./lua/"+u+"/";e.exports.LUA_LDIR=l;var c=l;e.exports.LUA_JSDIR=c;var f=s(l+"?.lua;"+l+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=f;var h=s(c+"?.js;"+c+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=h;var d=r.LUA_COMPAT_FLOATSTRING||!1,p=r.LUAI_MAXSTACK||1e6,v=r.LUA_IDSIZE||59,g=r.LUAL_BUFFERSIZE||8192,m=function(e,t){for(var n=Math.min(3,Math.ceil(Math.abs(t)/1023)),r=e,i=0;i<n;i++)r*=Math.pow(2,Math.floor((t+i)/n));return r};e.exports.LUAI_MAXSTACK=p,e.exports.LUA_COMPAT_FLOATSTRING=d,e.exports.LUA_IDSIZE=v,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=g,e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var n=t.getUint32(0)>>>20&2047;0===n&&(t.setFloat64(0,e*Math.pow(2,64)),n=(t.getUint32(0)>>>20&2047)-64);var r=n-1022;return[m(e,-r),r]},e.exports.ldexp=m,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=-2147483648&&e<2147483648&&e},e.exports.luai_apicheck=function(e,t){if(!t)throw Error(t)}},function(e,t,n){"use strict";var r=n(3).luai_apicheck,i=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=i,e.exports.luai_apicheck=r||function(e,t){return i(t)},e.exports.api_check=function(e,t,n){return r(e,t&&n)},e.exports.LUAI_MAXCCALLS=200,e.exports.LUA_MINBUFFER=32,e.exports.luai_nummod=function(e,t,n){var r=t%n;return r*n<0&&(r+=n),r},e.exports.MAX_INT=2147483647,e.exports.MIN_INT=-2147483648},function(e,t,n){var r=n(1),i="Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+r.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=i,e.exports.FENGARI_RELEASE="Fengari 0.1.4",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=r.is_luastring,e.exports.luastring_eq=r.luastring_eq,e.exports.luastring_from=r.luastring_from,e.exports.luastring_indexOf=r.luastring_indexOf,e.exports.luastring_of=r.luastring_of,e.exports.to_jsstring=r.to_jsstring,e.exports.to_luastring=r.to_luastring,e.exports.to_uristring=r.to_uristring,e.exports.from_userstring=r.from_userstring},function(e,t,n){"use strict";var a=n(1),o=a.LUA_OPADD,s=a.LUA_OPBAND,u=a.LUA_OPBNOT,l=a.LUA_OPBOR,c=a.LUA_OPBXOR,f=a.LUA_OPDIV,h=a.LUA_OPIDIV,d=a.LUA_OPMOD,p=a.LUA_OPMUL,v=a.LUA_OPPOW,g=a.LUA_OPSHL,m=a.LUA_OPSHR,y=a.LUA_OPSUB,k=a.LUA_OPUNM,_=a.constant_types,b=_.LUA_NUMTAGS,w=_.LUA_TBOOLEAN,x=_.LUA_TCCL,A=_.LUA_TFUNCTION,S=_.LUA_TLCF,L=_.LUA_TLCL,O=_.LUA_TLIGHTUSERDATA,T=_.LUA_TLNGSTR,E=_.LUA_TNIL,C=_.LUA_TNUMBER,M=_.LUA_TNUMFLT,N=_.LUA_TNUMINT,R=_.LUA_TSHRSTR,P=_.LUA_TSTRING,I=_.LUA_TTABLE,D=_.LUA_TTHREAD,U=_.LUA_TUSERDATA,B=a.from_userstring,V=a.luastring_indexOf,F=a.luastring_of,z=a.to_jsstring,j=a.to_luastring,H=n(22),G=H.lisdigit,K=H.lisprint,W=H.lisspace,X=H.lisxdigit,q=n(11),Q=n(8),$=n(12),J=n(10),Y=J.luaS_bless,Z=J.luaS_new,ee=n(9),te=n(3),ne=te.LUA_COMPAT_FLOATSTRING,re=te.ldexp,ie=te.lua_integer2str,ae=te.lua_number2str,oe=n(15),se=n(4),ue=se.MAX_INT,le=se.luai_nummod,ce=se.lua_assert,fe=n(14),he=b,de=b+1,pe=function(){function e(t,n){i(this,e),this.type=t,this.value=n}return r(e,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(e){return this.type===e}},{key:"checktype",value:function(e){return this.ttnov()===e}},{key:"ttisnumber",value:function(){return this.checktype(C)}},{key:"ttisfloat",value:function(){return this.checktag(M)}},{key:"ttisinteger",value:function(){return this.checktag(N)}},{key:"ttisnil",value:function(){return this.checktag(E)}},{key:"ttisboolean",value:function(){return this.checktag(w)}},{key:"ttislightuserdata",value:function(){return this.checktag(O)}},{key:"ttisstring",value:function(){return this.checktype(P)}},{key:"ttisshrstring",value:function(){return this.checktag(R)}},{key:"ttislngstring",value:function(){return this.checktag(T)}},{key:"ttistable",value:function(){return this.checktag(I)}},{key:"ttisfunction",value:function(){return this.checktype(A)}},{key:"ttisclosure",value:function(){return(31&this.type)===A}},{key:"ttisCclosure",value:function(){return this.checktag(x)}},{key:"ttisLclosure",value:function(){return this.checktag(L)}},{key:"ttislcf",value:function(){return this.checktag(S)}},{key:"ttisfulluserdata",value:function(){return this.checktag(U)}},{key:"ttisthread",value:function(){return this.checktag(D)}},{key:"ttisdeadkey",value:function(){return this.checktag(de)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(e){this.type=M,this.value=e}},{key:"chgfltvalue",value:function(e){ce(this.type==M),this.value=e}},{key:"setivalue",value:function(e){this.type=N,this.value=e}},{key:"chgivalue",value:function(e){ce(this.type==N),this.value=e}},{key:"setnilvalue",value:function(){this.type=E,this.value=null}},{key:"setfvalue",value:function(e){this.type=S,this.value=e}},{key:"setpvalue",value:function(e){this.type=O,this.value=e}},{key:"setbvalue",value:function(e){this.type=w,this.value=e}},{key:"setsvalue",value:function(e){this.type=T,this.value=e}},{key:"setuvalue",value:function(e){this.type=U,this.value=e}},{key:"setthvalue",value:function(e){this.type=D,this.value=e}},{key:"setclLvalue",value:function(e){this.type=L,this.value=e}},{key:"setclCvalue",value:function(e){this.type=x,this.value=e}},{key:"sethvalue",value:function(e){this.type=I,this.value=e}},{key:"setdeadvalue",value:function(){this.type=de,this.value=null}},{key:"setfrom",value:function(e){this.type=e.type,this.value=e.value}},{key:"tsvalue",value:function(){return ce(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(e,t){return z(this.svalue(),e,t,!0)}}]),e}(),ve=function(e,t,n){e.stack[t].setsvalue(n)},ge=new pe(E,null);Object.freeze(ge),e.exports.luaO_nilobject=ge;var me=r((function e(t,n){i(this,e),this.id=t.l_G.id_counter++,this.p=null,this.nupvalues=n,this.upvals=new Array(n)})),ye=r((function e(t,n,r){for(i(this,e),this.id=t.l_G.id_counter++,this.f=n,this.nupvalues=r,this.upvalue=new Array(r);r--;)this.upvalue[r]=new pe(E,null)})),ke=r((function e(t,n){i(this,e),this.id=t.l_G.id_counter++,this.metatable=null,this.uservalue=new pe(E,null),this.len=n,this.data=Object.create(null)})),_e=j("..."),be=j('[string "'),we=j('"]'),xe=function(e){return G(e)?e-48:(223&e)-55},Ae=function(e,t){var n=1;if(ce(t<=1114111),t<128)e[7]=t;else{var r=63;do{e[8-n++]=128|63&t,t>>=6,r>>=1}while(t>r);e[8-n]=~r<<1|t}return n},Se=[46,120,88,110,78],Le={46:".",120:"x",88:"x",110:"n",78:"n"},Oe=Math.floor(ue/10),Te=ue%10,Ee=function(e,t){var n;if(t.ttisinteger())n=j(ie(t.value));else{var r=ae(t.value);!ne&&/^[-0123456789]+$/.test(r)&&(r+=".0"),n=j(r)}t.setsvalue(Y(e,n))},Ce=function(e,t){Q.luaD_inctop(e),ve(e,e.top-1,Z(e,t))},Me=function(e,t,n){for(var r,i=0,a=0,o=0;-1!=(r=V(t,37,a));){switch(Ce(e,t.subarray(a,r)),t[r+1]){case 115:var s=n[o++];if(null===s)s=j("(null)",!0);else{s=B(s);var u=V(s,0);-1!==u&&(s=s.subarray(0,u))}Ce(e,s);break;case 99:var l=n[o++];K(l)?Ce(e,F(l)):Ne(e,j("<\\%d>",!0),l);break;case 100:case 73:Q.luaD_inctop(e),e.stack[e.top-1].setivalue(n[o++]),Ee(e,e.stack[e.top-1]);break;case 102:Q.luaD_inctop(e),e.stack[e.top-1].setfltvalue(n[o++]),Ee(e,e.stack[e.top-1]);break;case 112:var c=n[o++];if(c instanceof $.lua_State||c instanceof ee.Table||c instanceof ke||c instanceof me||c instanceof ye)Ce(e,j("0x"+c.id.toString(16)));else switch(typeof c){case"undefined":Ce(e,j("undefined"));break;case"number":Ce(e,j("Number("+c+")"));break;case"string":Ce(e,j("String("+JSON.stringify(c)+")"));break;case"boolean":Ce(e,j(c?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===c){Ce(e,j("null"));break}case"function":var f=e.l_G.ids.get(c);f||(f=e.l_G.id_counter++,e.l_G.ids.set(c,f)),Ce(e,j("0x"+f.toString(16)));break;default:Ce(e,j("<id NYI>"))}break;case 85:var h=new Uint8Array(8),d=Ae(h,n[o++]);Ce(e,h.subarray(8-d));break;case 37:Ce(e,j("%",!0));break;default:q.luaG_runerror(e,j("invalid option '%%%c' to 'lua_pushfstring'"),t[r+1])}i+=2,a=r+2}return Q.luaD_checkstack(e,1),Ce(e,t.subarray(a)),i>0&&oe.luaV_concat(e,i+1),e.stack[e.top-1].svalue()},Ne=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Me(e,t,r)},Re=function(e,t,n,r){switch(t){case o:return n+r|0;case y:return n-r|0;case p:return oe.luaV_imul(n,r);case d:return oe.luaV_mod(e,n,r);case h:return oe.luaV_div(e,n,r);case s:return n&r;case l:return n|r;case c:return n^r;case g:return oe.luaV_shiftl(n,r);case m:return oe.luaV_shiftl(n,-r);case k:return 0-n|0;case u:return-1^n;default:ce(0)}},Pe=function(e,t,n,r){switch(t){case o:return n+r;case y:return n-r;case p:return n*r;case f:return n/r;case v:return Math.pow(n,r);case h:return Math.floor(n/r);case k:return-n;case d:return le(e,n,r);default:ce(0)}};e.exports.CClosure=ye,e.exports.LClosure=me,e.exports.LUA_TDEADKEY=de,e.exports.LUA_TPROTO=he,e.exports.LocVar=function(){return r((function e(){i(this,e),this.varname=null,this.startpc=NaN,this.endpc=NaN}))}(),e.exports.TValue=pe,e.exports.Udata=ke,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,t,n,r,i){var a="number"==typeof i?e.stack[i]:i;switch(t){case s:case l:case c:case g:case m:case u:var h,d;if(!1!==(h=oe.tointeger(n))&&!1!==(d=oe.tointeger(r)))return void a.setivalue(Re(e,t,h,d));break;case f:case v:var p,y;if(!1!==(p=oe.tonumber(n))&&!1!==(y=oe.tonumber(r)))return void a.setfltvalue(Pe(e,t,p,y));break;default:var k,_;if(n.ttisinteger()&&r.ttisinteger())return void a.setivalue(Re(e,t,n.value,r.value));if(!1!==(k=oe.tonumber(n))&&!1!==(_=oe.tonumber(r)))return void a.setfltvalue(Pe(e,t,k,_))}ce(null!==e),fe.luaT_trybinTM(e,n,r,i,t-o+fe.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){var n,r=e.length;if(61===e[0])r<t?(n=new Uint8Array(r-1)).set(e.subarray(1)):(n=new Uint8Array(t)).set(e.subarray(1,t+1));else if(64===e[0])r<=t?(n=new Uint8Array(r-1)).set(e.subarray(1)):((n=new Uint8Array(t)).set(_e),t-=_e.length,n.set(e.subarray(r-t),_e.length));else{n=new Uint8Array(t);var i=V(e,10);n.set(be);var a=be.length;r<(t-=be.length+_e.length+we.length)&&-1===i?(n.set(e,a),a+=e.length):(-1!==i&&(r=i),r>t&&(r=t),n.set(e.subarray(0,r),a),a+=r,n.set(_e,a),a+=_e.length),n.set(we,a),a+=we.length,n=n.subarray(0,a)}return n},e.exports.luaO_hexavalue=xe,e.exports.luaO_int2fb=function(e){var t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},e.exports.luaO_pushfstring=Ne,e.exports.luaO_pushvfstring=Me,e.exports.luaO_str2num=function(e,t){var n=function(e){for(var t,n=0,r=0,i=!0;W(e[n]);)n++;if(((t=45===e[n])||43===e[n])&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])for(;n<e.length&&G(e[n]);n++){var a=e[n]-48;if(r>=Oe&&(r>Oe||a>Te+t))return null;r=10*r+a|0,i=!1}else for(n+=2;n<e.length&&X(e[n]);n++)r=16*r+xe(e[n])|0,i=!1;for(;n<e.length&&W(e[n]);)n++;return i||n!==e.length&&0!==e[n]?null:{n:0|(t?-r:r),i:n}}(e);return null!==n?(t.setivalue(n.n),n.i+1):null!==(n=function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e[r];if(-1!==Se.indexOf(i)){n=i;break}}var a=Le[n];return"n"===a?null:function(e,t){var n="x"===t?function(e){for(var t,n=0,r=0,i=0,a=0,o=0,s=!1;W(e[n]);)n++;if(((t=45===e[n])||43===e[n])&&n++,48!==e[n]||120!==e[n+1]&&88!==e[n+1])return null;for(n+=2;;n++)if(46===e[n]){if(s)break;s=!0}else{if(!X(e[n]))break;0===i&&48===e[n]?a++:++i<=30?r=16*r+xe(e[n]):o++,s&&o--}if(a+i===0)return null;if(o*=4,112===e[n]||80===e[n]){var u,l=0;if(((u=45===e[++n])||43===e[n])&&n++,!G(e[n]))return null;for(;G(e[n]);)l=10*l+e[n++]-48;u&&(l=-l),o+=l}return t&&(r=-r),{n:re(r,o),i:n}}(e):function(e){try{e=z(e)}catch(e){return null}var t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;var n=parseFloat(t[0]);return isNaN(n)?null:{n:n,i:t[0].length}}(e);if(null===n)return null;for(;W(e[n.i]);)n.i++;return n.i===e.length||0===e[n.i]?n:null}(e,a)}(e))?(t.setfltvalue(n.n),n.i+1):0},e.exports.luaO_tostring=Ee,e.exports.luaO_utf8esc=Ae,e.exports.numarith=Pe,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new pe(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new pe(T,t)},e.exports.setobjs2s=function(e,t,n){e.stack[t].setfrom(e.stack[n])},e.exports.setobj2s=function(e,t,n){e.stack[t].setfrom(n)},e.exports.setsvalue2s=ve},function(e,t,n){"use strict";var a,o,s=n(3).LUAL_BUFFERSIZE,u=n(2),l=u.LUA_ERRERR,c=u.LUA_MULTRET,f=u.LUA_REGISTRYINDEX,h=u.LUA_SIGNATURE,d=u.LUA_TBOOLEAN,p=u.LUA_TLIGHTUSERDATA,v=u.LUA_TNIL,g=u.LUA_TNONE,m=u.LUA_TNUMBER,y=u.LUA_TSTRING,k=u.LUA_TTABLE,_=u.LUA_VERSION_NUM,b=u.lua_Debug,w=u.lua_absindex,x=u.lua_atpanic,A=u.lua_call,S=u.lua_checkstack,L=u.lua_concat,O=u.lua_copy,T=u.lua_createtable,E=u.lua_error,C=u.lua_getfield,M=u.lua_getinfo,N=u.lua_getmetatable,R=u.lua_getstack,P=u.lua_gettop,I=u.lua_insert,D=u.lua_isinteger,U=u.lua_isnil,B=u.lua_isnumber,V=u.lua_isstring,F=u.lua_istable,z=u.lua_len,j=u.lua_load,H=u.lua_newstate,G=u.lua_newtable,K=u.lua_next,W=u.lua_pcall,X=u.lua_pop,q=u.lua_pushboolean,Q=u.lua_pushcclosure,$=u.lua_pushcfunction,J=u.lua_pushfstring,Y=u.lua_pushinteger,Z=u.lua_pushliteral,ee=u.lua_pushlstring,te=u.lua_pushnil,ne=u.lua_pushstring,re=u.lua_pushvalue,ie=u.lua_pushvfstring,ae=u.lua_rawequal,oe=u.lua_rawget,se=u.lua_rawgeti,ue=u.lua_rawlen,le=u.lua_rawseti,ce=u.lua_remove,fe=u.lua_setfield,he=u.lua_setglobal,de=u.lua_setmetatable,pe=u.lua_settop,ve=u.lua_toboolean,ge=u.lua_tointeger,me=u.lua_tointegerx,ye=u.lua_tojsstring,ke=u.lua_tolstring,_e=u.lua_tonumber,be=u.lua_tonumberx,we=u.lua_topointer,xe=u.lua_tostring,Ae=u.lua_touserdata,Se=u.lua_type,Le=u.lua_typename,Oe=u.lua_version,Te=n(5),Ee=Te.from_userstring,Ce=Te.luastring_eq,Me=Te.to_luastring,Ne=Te.to_uristring,Re=l+1,Pe=Me("_LOADED"),Ie=Me("_PRELOAD"),De=Me("FILE*"),Ue=Me("__name"),Be=Me("__tostring"),Ve=new Uint8Array(0),Fe=r((function e(){i(this,e),this.L=null,this.b=Ve,this.n=0})),ze=function e(t,n,r){if(0===r||!F(t,-1))return 0;for(te(t);K(t,-2);){if(Se(t,-2)===y){if(ae(t,n,-1))return X(t,1),1;if(e(t,n,r-1))return ce(t,-2),Z(t,"."),I(t,-2),L(t,3),1}X(t,1)}return 0},je=function(e,t){var n=P(e);if(M(e,Me("f"),t),C(e,f,Pe),ze(e,n+1,2)){var r=xe(e,-1);return 95===r[0]&&71===r[1]&&46===r[2]&&(ne(e,r.subarray(3)),ce(e,-2)),O(e,-1,n+1),X(e,2),1}return pe(e,n),0},He=function(e,t){je(e,t)?(J(e,Me("function '%s'"),xe(e,-1)),ce(e,-2)):0!==t.namewhat.length?J(e,Me("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?Z(e,"main chunk"):t.what&&76===t.what[0]?J(e,Me("function <%s:%d>"),t.short_src,t.linedefined):Z(e,"?")},Ge=function(e){var t="PANIC: unprotected error in call to Lua API ("+ye(e,-1)+")";throw new Error(t)},Ke=function(e,t,n){var r=new b;return R(e,0,r)?(M(e,Me("n"),r),Ce(r.namewhat,Me("method"))&&0===--t?qe(e,Me("calling '%s' on bad self (%s)"),r.name,n):(null===r.name&&(r.name=je(e,r)?xe(e,-1):Me("?")),qe(e,Me("bad argument #%d to '%s' (%s)"),t,r.name,n))):qe(e,Me("bad argument #%d (%s)"),t,n)},We=function(e,t,n){var r;r=mt(e,t,Ue)===y?xe(e,-1):Se(e,t)===p?Me("light userdata",!0):Ze(e,t);var i=J(e,Me("%s expected, got %s"),n,r);return Ke(e,t,i)},Xe=function(e,t){var n=new b;R(e,t,n)&&(M(e,Me("Sl",!0),n),n.currentline>0)?J(e,Me("%s:%d: "),n.short_src,n.currentline):ne(e,Me(""))},qe=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Xe(e,1),ie(e,t,r),L(e,2),E(e)},Qe=function(e,t,n,r){return t?(q(e,1),1):(te(e),r?(i=r.message,a=-r.errno):(i="Success",a=0),n?J(e,Me("%s: %s"),n,Me(i)):ne(e,Me(i)),Y(e,a),3);var i,a},$e=function(e,t){return C(e,f,t)},Je=function(e,t,n){var r=Ae(e,t);return null!==r&&N(e,t)?($e(e,n),ae(e,-1,-2)||(r=null),X(e,2),r):null},Ye=function(e,t,n){We(e,t,Le(e,n))},Ze=function(e,t){return Le(e,Se(e,t))},et=function(e,t){var n=ke(e,t);return null!==n&&void 0!==n||Ye(e,t,y),n},tt=et,nt=function(e,t,n){return Se(e,t)<=0?null===n?null:Ee(n):et(e,t)},rt=nt,it=function(e,t){var n=be(e,t);return!1===n&&Ye(e,t,m),n},at=function(e,t){var n=me(e,t);return!1===n&&function(e,t){B(e,t)?Ke(e,t,Me("number has no integer representation",!0)):Ye(e,t,m)}(e,t),n},ot=function(e,t){var n=e.n+t;if(e.b.length<n){var r=Math.max(2*e.b.length,n),i=new Uint8Array(r);i.set(e.b),e.b=i}return e.b.subarray(e.n,n)},st=function(e,t){t.L=e,t.b=Ve},ut=function(e,t,n){n>0&&(t=Ee(t),ot(e,n).set(t.subarray(0,n)),ft(e,n))},lt=function(e,t){t=Ee(t),ut(e,t,t.length)},ct=function(e){ee(e.L,e.b,e.n),e.n=0,e.b=Ve},ft=function(e,t){e.n+=t},ht=function(e,t,n,r){return Se(e,n)<=0?r:t(e,n)},dt=function(e,t){var n=t.string;return t.string=null,n},pt=function(e,t,n,r,i){return j(e,dt,{string:t},r,i)},vt=function(e,t,n,r){return pt(e,t,0,r,null)},gt=function(e,t){return vt(e,t,t.length,t)},mt=function(e,t,n){if(N(e,t)){ne(e,n);var r=oe(e,-2);return r===v?X(e,2):ce(e,-2),r}return v},yt=function(e,t,n){return t=w(e,t),mt(e,t,n)!==v&&(re(e,t),A(e,1,1),!0)},kt=Me("%I"),_t=Me("%f"),bt=function(e,t,n){var r=n>>>0,i=t.length,a=e.length+1-i;e:for(;r<a;r++){for(var o=0;o<i;o++)if(e[r+o]!==t[o])continue e;return r}return-1},wt=function(e,t,n){return C(e,t,n)===k||(X(e,1),t=w(e,t),G(e),re(e,-1),fe(e,t,n),!1)},xt=function(e,t,n){for(var r in At(e,n,Me("too many upvalues",!0)),t){for(var i=0;i<n;i++)re(e,-n);Q(e,t[r],n),fe(e,-(n+2),Me(r))}X(e,n)},At=function(e,t,n){S(e,t)||(n?qe(e,Me("stack overflow (%s)"),n):qe(e,Me("stack overflow",!0)))},St=function(e,t,n,r){var i=r.message,a=xe(e,n).subarray(1);return J(e,Me("cannot %s %s: %s"),Me(t),a,Me(i)),ce(e,n),Re},Lt=[239,187,191],Ot=r((function e(){i(this,e),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0})),Tt=function(e,t){var n=t;if(null!==n.f&&n.n>0){var r=n.n;return n.n=0,n.f=n.f.subarray(n.pos),n.buff.subarray(0,r)}var i=n.f;return n.f=null,i};a=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},o=function(e,t,n){var r=new Ot,i=P(e)+1;if(null===t)throw new Error("Can't read stdin in the browser");J(e,Me("@%s"),t);var o=Ne(t),s=new XMLHttpRequest;if(s.open("GET",o,!1),"undefined"==typeof window&&(s.responseType="arraybuffer"),s.send(),!(s.status>=200&&s.status<=299))return r.err=s.status,St(e,"open",i,{message:"".concat(s.status,": ").concat(s.statusText)});"string"==typeof s.response?r.f=Me(s.response):r.f=new Uint8Array(s.response);var u=function(e){var t=function(e){var t;e.n=0;var n=0;do{if(null===(t=a(e))||t!==Lt[n])return t;n++,e.buff[e.n++]=t}while(n<Lt.length);return e.n=0,a(e)}(e);if(35===t){do{t=a(e)}while(t&&10!==t);return{skipped:!0,c:a(e)}}return{skipped:!1,c:t}}(r);u.c===h[0]&&t||u.skipped&&(r.buff[r.n++]=10),null!==u.c&&(r.buff[r.n++]=u.c);var l=j(e,Tt,r,xe(e,-1),n),c=r.err;return c?(pe(e,i),St(e,"read",i,c)):(ce(e,i),l)};var Et=function(e,t){return o(e,t,null)},Ct=function(e,t,n){var r=Oe(e);72!=n&&qe(e,Me("core and library have incompatible numeric types")),r!=Oe(null)?qe(e,Me("multiple Lua VMs detected")):r!==t&&qe(e,Me("version mismatch: app. needs %f, Lua core provides %f"),t,r)};e.exports.LUA_ERRFILE=Re,e.exports.LUA_FILEHANDLE=De,e.exports.LUA_LOADED_TABLE=Pe,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Ie,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Fe,e.exports.luaL_addchar=function(e,t){ot(e,1),e.b[e.n++]=t},e.exports.luaL_addlstring=ut,e.exports.luaL_addsize=ft,e.exports.luaL_addstring=lt,e.exports.luaL_addvalue=function(e){var t=e.L,n=xe(t,-1);ut(e,n,n.length),X(t,1)},e.exports.luaL_argcheck=function(e,t,n,r){t||Ke(e,n,r)},e.exports.luaL_argerror=Ke,e.exports.luaL_buffinit=st,e.exports.luaL_buffinitsize=function(e,t,n){return st(e,t),ot(t,n)},e.exports.luaL_callmeta=yt,e.exports.luaL_checkany=function(e,t){Se(e,t)===g&&Ke(e,t,Me("value expected",!0))},e.exports.luaL_checkinteger=at,e.exports.luaL_checklstring=et,e.exports.luaL_checknumber=it,e.exports.luaL_checkoption=function(e,t,n,r){for(var i=null!==n?rt(e,t,n):tt(e,t),a=0;r[a];a++)if(Ce(r[a],i))return a;return Ke(e,t,J(e,Me("invalid option '%s'"),i))},e.exports.luaL_checkstack=At,e.exports.luaL_checkstring=tt,e.exports.luaL_checktype=function(e,t,n){Se(e,t)!==n&&Ye(e,t,n)},e.exports.luaL_checkudata=function(e,t,n){var r=Je(e,t,n);return null===r&&We(e,t,n),r},e.exports.luaL_checkversion=function(e){Ct(e,_,72)},e.exports.luaL_checkversion_=Ct,e.exports.luaL_dofile=function(e,t){return Et(e,t)||W(e,0,c,0)},e.exports.luaL_dostring=function(e,t){return gt(e,t)||W(e,0,c,0)},e.exports.luaL_error=qe,e.exports.luaL_execresult=function(e,t){var n,r;if(null===t)return q(e,1),Z(e,"exit"),Y(e,0),3;if(t.status)n="exit",r=t.status;else{if(!t.signal)return Qe(e,0,null,t);n="signal",r=t.signal}return te(e),Z(e,n),Y(e,r),3},e.exports.luaL_fileresult=Qe,e.exports.luaL_getmetafield=mt,e.exports.luaL_getmetatable=$e,e.exports.luaL_getsubtable=wt,e.exports.luaL_gsub=function(e,t,n,r){var i,a=new Fe;for(st(e,a);(i=bt(t,n))>=0;)ut(a,t,i),lt(a,r),t=t.subarray(i+n.length);return lt(a,t),ct(a),xe(e,-1)},e.exports.luaL_len=function(e,t){z(e,t);var n=me(e,-1);return!1===n&&qe(e,Me("object length is not an integer",!0)),X(e,1),n},e.exports.luaL_loadbuffer=vt,e.exports.luaL_loadbufferx=pt,e.exports.luaL_loadfile=Et,e.exports.luaL_loadfilex=o,e.exports.luaL_loadstring=gt,e.exports.luaL_newlib=function(e,t){T(e),xt(e,t,0)},e.exports.luaL_newlibtable=function(e){T(e)},e.exports.luaL_newmetatable=function(e,t){return $e(e,t)!==v?0:(X(e,1),T(e,0,2),ne(e,t),fe(e,-2,Ue),re(e,-1),fe(e,f,t),1)},e.exports.luaL_newstate=function(){var e=H();return e&&x(e,Ge),e},e.exports.luaL_opt=ht,e.exports.luaL_optinteger=function(e,t,n){return ht(e,at,t,n)},e.exports.luaL_optlstring=nt,e.exports.luaL_optnumber=function(e,t,n){return ht(e,it,t,n)},e.exports.luaL_optstring=rt,e.exports.luaL_prepbuffer=function(e){return ot(e,s)},e.exports.luaL_prepbuffsize=ot,e.exports.luaL_pushresult=ct,e.exports.luaL_pushresultsize=function(e,t){ft(e,t),ct(e)},e.exports.luaL_ref=function(e,t){var n;return U(e,-1)?(X(e,1),-1):(t=w(e,t),se(e,t,0),n=ge(e,-1),X(e,1),0!==n?(se(e,t,n),le(e,t,0)):n=ue(e,t)+1,le(e,t,n),n)},e.exports.luaL_requiref=function(e,t,n,r){wt(e,f,Pe),C(e,-1,t),ve(e,-1)||(X(e,1),$(e,n),ne(e,t),A(e,1,1),re(e,-1),fe(e,-3,t)),ce(e,-2),r&&(re(e,-1),he(e,t))},e.exports.luaL_setfuncs=xt,e.exports.luaL_setmetatable=function(e,t){$e(e,t),de(e,-2)},e.exports.luaL_testudata=Je,e.exports.luaL_tolstring=function(e,t){if(yt(e,t,Be))V(e,-1)||qe(e,Me("'__tostring' must return a string"));else switch(Se(e,t)){case m:D(e,t)?J(e,kt,ge(e,t)):J(e,_t,_e(e,t));break;case y:re(e,t);break;case d:Z(e,ve(e,t)?"true":"false");break;case v:Z(e,"nil");break;default:var n=mt(e,t,Ue),r=n===y?xe(e,-1):Ze(e,t);J(e,Me("%s: %p"),r,we(e,t)),n!==v&&ce(e,-2)}return ke(e,-1)},e.exports.luaL_traceback=function(e,t,n,r){var i=new b,a=P(e),o=function(e){for(var t=new b,n=1,r=1;R(e,r,t);)n=r,r*=2;for(;n<r;){var i=Math.floor((n+r)/2);R(e,i,t)?n=i+1:r=i}return r-1}(t),s=o-r>21?10:-1;for(n&&J(e,Me("%s\n"),n),At(e,10,null),Z(e,"stack traceback:");R(t,r++,i);)0==s--?(Z(e,"\n\t..."),r=o-11+1):(M(t,Me("Slnt",!0),i),J(e,Me("\n\t%s:"),i.short_src),i.currentline>0&&Z(e,"".concat(i.currentline,":")),Z(e," in "),He(e,i),i.istailcall&&Z(e,"\n\t(...tail calls..)"),L(e,P(e)-a));L(e,P(e)-a)},e.exports.luaL_typename=Ze,e.exports.luaL_unref=function(e,t,n){n>=0&&(t=w(e,t),se(e,t,0),le(e,t,n),Y(e,n),le(e,t,0))},e.exports.luaL_where=Xe,e.exports.lua_writestringerror=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];do{var n=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(n[1]),t=n[2]}while(""!==t)}}},function(e,t,n){"use strict";var a=n(1),o=a.LUA_HOOKCALL,s=a.LUA_HOOKRET,u=a.LUA_HOOKTAILCALL,l=a.LUA_MASKCALL,c=a.LUA_MASKLINE,f=a.LUA_MASKRET,h=a.LUA_MINSTACK,d=a.LUA_MULTRET,p=a.LUA_SIGNATURE,v=a.constant_types,g=v.LUA_TCCL,m=v.LUA_TLCF,y=v.LUA_TLCL,k=v.LUA_TNIL,_=a.thread_status,b=_.LUA_ERRMEM,w=_.LUA_ERRERR,x=_.LUA_ERRRUN,A=_.LUA_ERRSYNTAX,S=_.LUA_OK,L=_.LUA_YIELD,O=a.lua_Debug,T=a.luastring_indexOf,E=a.to_luastring,C=n(18),M=n(11),N=n(13),R=n(4),P=R.api_check,I=R.lua_assert,D=R.LUAI_MAXCCALLS,U=n(6),B=n(16),V=n(23),F=n(12),z=n(10).luaS_newliteral,j=n(14),H=n(3).LUAI_MAXSTACK,G=n(36),K=n(15),W=n(19).MBuffer,X=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new U.TValue(k,null);else for(;e.top>t;)delete e.stack[--e.top]},q=function(e,t,n){for(var r=e.top;e.top<n+1;)e.stack[e.top++]=new U.TValue(k,null);switch(t){case b:U.setsvalue2s(e,n,z(e,"not enough memory"));break;case w:U.setsvalue2s(e,n,z(e,"error in error handling"));break;default:U.setobjs2s(e,n,r-1)}for(;e.top>n+1;)delete e.stack[--e.top]},Q=H+200,$=function(e,t){I(t<=H||t==Q),I(e.stack_last==e.stack.length-F.EXTRA_STACK),e.stack.length=t,e.stack_last=t-F.EXTRA_STACK},J=function(e,t){var n=e.stack.length;if(n>H)ue(e,w);else{var r=e.top+t+F.EXTRA_STACK,i=2*n;i>H&&(i=H),i<r&&(i=r),i>H?($(e,Q),M.luaG_runerror(e,E("stack overflow",!0))):$(e,i)}},Y=function(e,t){e.stack_last-e.top<=t&&J(e,t)},Z=function(e){var t=function(e){for(var t=e.top,n=e.ci;null!==n;n=n.previous)t<n.top&&(t=n.top);return I(t<=e.stack_last),t+1}(e),n=t+Math.floor(t/8)+2*F.EXTRA_STACK;n>H&&(n=H),e.stack.length>H&&F.luaE_freeCI(e),t<=H-F.EXTRA_STACK&&n<e.stack.length&&$(e,n)},ee=function e(t,n,r){var i=t.stack[n];switch(i.type){case g:case m:var a=i.type===g?i.value.f:i.value;Y(t,h);var s=F.luaE_extendCI(t);s.funcOff=n,s.nresults=r,s.func=i,s.top=t.top+h,I(s.top<=t.stack_last),s.callstatus=0,t.hookmask&l&&re(t,o,-1);var u=a(t);if("number"!=typeof u||u<0||(0|u)!==u)throw Error("invalid return value from JS function (expected integer)");return C.api_checknelems(t,u),te(t,s,t.top-u,u),!0;case y:var c,f=i.value.p,d=t.top-n-1,p=f.maxstacksize;if(Y(t,p),f.is_vararg)c=ae(t,f,d);else{for(;d<f.numparams;d++)t.stack[t.top++]=new U.TValue(k,null);c=n+1}var v=F.luaE_extendCI(t);return v.funcOff=n,v.nresults=r,v.func=i,v.l_base=c,v.top=c+p,X(t,v.top),v.l_code=f.code,v.l_savedpc=0,v.callstatus=F.CIST_LUA,t.hookmask&l&&ie(t,v),!1;default:return Y(t,1),oe(t,n,i),e(t,n,r)}},te=function(e,t,n,r){var i=t.nresults;e.hookmask&(f|c)&&(e.hookmask&f&&re(e,s,-1),e.oldpc=t.previous.l_savedpc);var a=t.funcOff;return e.ci=t.previous,e.ci.next=null,ne(e,n,a,r,i)},ne=function(e,t,n,r,i){switch(i){case 0:break;case 1:0===r?e.stack[n].setnilvalue():U.setobjs2s(e,n,t);break;case d:for(var a=0;a<r;a++)U.setobjs2s(e,n+a,t+a);for(var o=e.top;o>=n+r;o--)delete e.stack[o];return e.top=n+r,!1;default:var s;if(i<=r)for(s=0;s<i;s++)U.setobjs2s(e,n+s,t+s);else{for(s=0;s<r;s++)U.setobjs2s(e,n+s,t+s);for(;s<i;s++)n+s>=e.top?e.stack[n+s]=new U.TValue(k,null):e.stack[n+s].setnilvalue()}}for(var u=n+i,l=e.top;l>=u;l--)delete e.stack[l];return e.top=u,!0},re=function(e,t,n){var r=e.hook;if(r&&e.allowhook){var i=e.ci,a=e.top,o=i.top,s=new O;s.event=t,s.currentline=n,s.i_ci=i,Y(e,h),i.top=e.top+h,I(i.top<=e.stack_last),e.allowhook=0,i.callstatus|=F.CIST_HOOKED,r(e,s),I(!e.allowhook),e.allowhook=1,i.top=o,X(e,a),i.callstatus&=~F.CIST_HOOKED}},ie=function(e,t){var n=o;t.l_savedpc++,t.previous.callstatus&F.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==B.OpCodesI.OP_TAILCALL&&(t.callstatus|=F.CIST_TAIL,n=u),re(e,n,-1),t.l_savedpc--},ae=function(e,t,n){var r,i=t.numparams,a=e.top-n,o=e.top;for(r=0;r<i&&r<n;r++)U.pushobj2s(e,e.stack[a+r]),e.stack[a+r].setnilvalue();for(;r<i;r++)e.stack[e.top++]=new U.TValue(k,null);return o},oe=function(e,t,n){var r=j.luaT_gettmbyobj(e,n,j.TMS.TM_CALL);r.ttisfunction(r)||M.luaG_typeerror(e,n,E("call",!0)),U.pushobj2s(e,e.stack[e.top-1]);for(var i=e.top-2;i>t;i--)U.setobjs2s(e,i,i-1);U.setobj2s(e,t,r)},se=function(e,t,n){++e.nCcalls>=D&&function(e){e.nCcalls===D?M.luaG_runerror(e,E("JS stack overflow",!0)):e.nCcalls>=D+(D>>3)&&ue(e,w)}(e),ee(e,t,n)||K.luaV_execute(e),e.nCcalls--},ue=function e(t,n){if(t.errorJmp)throw t.errorJmp.status=n,t.errorJmp;var r=t.l_G;if(t.status=n,!r.mainthread.errorJmp){var i=r.panic;throw i&&(q(t,n,t.top),t.ci.top<t.top&&(t.ci.top=t.top),i(t)),new Error("Aborted ".concat(n))}r.mainthread.stack[r.mainthread.top++]=t.stack[t.top-1],e(r.mainthread,n)},le=function(e,t,n){var r=e.nCcalls,i={status:S,previous:e.errorJmp};e.errorJmp=i;try{t(e,n)}catch(t){if(i.status===S){var a=e.l_G.atnativeerror;if(a)try{if(i.status=S,C.lua_pushcfunction(e,a),C.lua_pushlightuserdata(e,t),me(e,e.top-2,1),0!==e.errfunc){var o=e.errfunc;U.pushobj2s(e,e.stack[e.top-1]),U.setobjs2s(e,e.top-2,o),me(e,e.top-2,1)}i.status=x}catch(e){i.status===S&&(i.status=-1)}else i.status=-1}}return e.errorJmp=i.previous,e.nCcalls=r,i.status},ce=function(e,t){var n=e.ci;I(null!==n.c_k&&0===e.nny),I(n.callstatus&F.CIST_YPCALL||t===L),n.callstatus&F.CIST_YPCALL&&(n.callstatus&=~F.CIST_YPCALL,e.errfunc=n.c_old_errfunc),n.nresults===d&&e.ci.top<e.top&&(e.ci.top=e.top);var r=(0,n.c_k)(e,t,n.c_ctx);C.api_checknelems(e,r),te(e,n,e.top-r,r)},fe=function(e,t){for(null!==t&&ce(e,t);e.ci!==e.base_ci;)e.ci.callstatus&F.CIST_LUA?(K.luaV_finishOp(e),K.luaV_execute(e)):ce(e,L)},he=function(e,t){var n=function(e){for(var t=e.ci;null!==t;t=t.previous)if(t.callstatus&F.CIST_YPCALL)return t;return null}(e);if(null===n)return 0;var r=n.extra;return N.luaF_close(e,r),q(e,t,r),e.ci=n,e.allowhook=n.callstatus&F.CIST_OAH,e.nny=0,Z(e),e.errfunc=n.c_old_errfunc,1},de=function(e,t,n){var r=z(e,t);if(0===n)U.pushsvalue2s(e,r),P(e,e.top<=e.ci.top,"stack overflow");else{for(var i=1;i<n;i++)delete e.stack[--e.top];U.setsvalue2s(e,e.top-1,r)}return x},pe=function(e,t){var n=e.top-t,r=e.ci;e.status===S?ee(e,n-1,d)||K.luaV_execute(e):(I(e.status===L),e.status=S,r.funcOff=r.extra,r.func=e.stack[r.funcOff],r.callstatus&F.CIST_LUA?K.luaV_execute(e):(null!==r.c_k&&(t=r.c_k(e,L,r.c_ctx),C.api_checknelems(e,t),n=e.top-t),te(e,r,n,t)),fe(e,null))},ve=function(e,t,n,r){var i=e.ci;return C.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?M.luaG_runerror(e,E("attempt to yield across a JS-call boundary",!0)):M.luaG_runerror(e,E("attempt to yield from outside a coroutine",!0))),e.status=L,i.extra=i.funcOff,i.callstatus&F.CIST_LUA?P(e,null===r,"hooks cannot continue after yielding"):(i.c_k=r,null!==r&&(i.c_ctx=n),i.funcOff=e.top-t-1,i.func=e.stack[i.funcOff],ue(e,L)),I(i.callstatus&F.CIST_HOOKED),0},ge=function(e,t,n,r,i){var a=e.ci,o=e.allowhook,s=e.nny,u=e.errfunc;e.errfunc=i;var l=le(e,t,n);return l!==S&&(N.luaF_close(e,r),q(e,l,r),e.ci=a,e.allowhook=o,e.nny=s,Z(e)),e.errfunc=u,l},me=function(e,t,n){e.nny++,se(e,t,n),e.nny--},ye=function(e,t,n){t&&-1===T(t,n[0])&&(U.luaO_pushfstring(e,E("attempt to load a %s chunk (mode is '%s')"),n,t),ue(e,A))},ke=function(e,t){var n,r=t.z.zgetc();r===p[0]?(ye(e,t.mode,E("binary",!0)),n=G.luaU_undump(e,t.z,t.name)):(ye(e,t.mode,E("text",!0)),n=V.luaY_parser(e,t.z,t.buff,t.dyd,t.name,r)),I(n.nupvalues===n.p.upvalues.length),N.luaF_initupvals(e,n)};e.exports.adjust_top=X,e.exports.luaD_call=se,e.exports.luaD_callnoyield=me,e.exports.luaD_checkstack=Y,e.exports.luaD_growstack=J,e.exports.luaD_hook=re,e.exports.luaD_inctop=function(e){Y(e,1),e.stack[e.top++]=new U.TValue(k,null)},e.exports.luaD_pcall=ge,e.exports.luaD_poscall=te,e.exports.luaD_precall=ee,e.exports.luaD_protectedparser=function(e,t,n,a){var o=new(function(){return r((function e(t,n,r){i(this,e),this.z=t,this.buff=new W,this.dyd=new V.Dyndata,this.mode=r,this.name=n}))}())(t,n,a);e.nny++;var s=ge(e,ke,o,e.top,e.errfunc);return e.nny--,s},e.exports.luaD_rawrunprotected=le,e.exports.luaD_reallocstack=$,e.exports.luaD_throw=ue,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,n){var r=e.nny;if(e.status===S){if(e.ci!==e.base_ci)return de(e,"cannot resume non-suspended coroutine",n)}else if(e.status!==L)return de(e,"cannot resume dead coroutine",n);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=D)return de(e,"JS stack overflow",n);e.nny=0,C.api_checknelems(e,e.status===S?n+1:n);var i=le(e,pe,n);if(-1===i)i=x;else{for(;i>L&&he(e,i);)i=le(e,fe,i);i>L?(e.status=i,q(e,i,e.top),e.ci.top=e.top):I(i===e.status)}return e.nny=r,e.nCcalls--,I(e.nCcalls===(t?t.nCcalls:0)),i},e.exports.lua_yield=function(e,t){ve(e,t,0,null)},e.exports.lua_yieldk=ve},function(e,t,n){"use strict";var a=n(1),o=a.constant_types,s=o.LUA_TBOOLEAN,u=o.LUA_TCCL,l=o.LUA_TLCF,c=o.LUA_TLCL,f=o.LUA_TLIGHTUSERDATA,h=o.LUA_TLNGSTR,d=o.LUA_TNIL,p=o.LUA_TNUMFLT,v=o.LUA_TNUMINT,g=o.LUA_TSHRSTR,m=o.LUA_TTABLE,y=o.LUA_TTHREAD,k=o.LUA_TUSERDATA,_=a.to_luastring,b=n(4).lua_assert,w=n(11),x=n(6),A=n(10),S=A.luaS_hashlongstr,L=A.TString,O=n(12),T=new WeakMap,E=function(e){var t=T.get(e);return t||(t={},T.set(e,t)),t},C=function(e,t){switch(t.type){case d:return w.luaG_runerror(e,_("table index is nil",!0));case p:if(isNaN(t.value))return w.luaG_runerror(e,_("table index is NaN",!0));case v:case s:case m:case c:case l:case u:case k:case y:return t.value;case g:case h:return S(t.tsvalue());case f:var n=t.value;switch(typeof n){case"string":return"*"+n;case"number":return"#"+n;case"boolean":return n?"?true":"?false";case"function":return E(n);case"object":if(n instanceof O.lua_State&&n.l_G===e.l_G||n instanceof M||n instanceof x.Udata||n instanceof x.LClosure||n instanceof x.CClosure)return E(n);default:return n}default:throw new Error("unknown key type: "+t.type)}},M=r((function e(t){i(this,e),this.id=t.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1})),N=function(e,t,n,r){e.dead_strong.clear(),e.dead_weak=void 0;var i=null,a={key:n,value:r,p:i=e.l,n:void 0};e.f||(e.f=a),i&&(i.n=a),e.strong.set(t,a),e.l=a},R=function(e,t){var n=e.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;var r=n.n,i=n.p;n.p=void 0,i&&(i.n=r),r&&(r.p=i),e.f===n&&(e.f=r),e.l===n&&(e.l=i),e.strong.delete(t),function(e){return"object"==typeof e?null!==e:"function"==typeof e}(t)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,n)):e.dead_strong.set(t,n)}},P=function(e,t){var n=e.strong.get(t);return n?n.value:x.luaO_nilobject},I=function(e,t){return b("number"==typeof t&&(0|t)===t),P(e,t)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_get=function(e,t,n){return b(n instanceof x.TValue),n.ttisnil()||n.ttisfloat()&&isNaN(n.value)?x.luaO_nilobject:P(t,C(e,n))},e.exports.luaH_getint=I,e.exports.luaH_getn=function(e){for(var t=0,n=e.strong.size+1;n-t>1;){var r=Math.floor((t+n)/2);I(e,r).ttisnil()?n=r:t=r}return t},e.exports.luaH_getstr=function(e,t){return b(t instanceof L),P(e,S(t))},e.exports.luaH_setfrom=function(e,t,n,r){b(n instanceof x.TValue);var i=C(e,n);if(r.ttisnil())R(t,i);else{var a=t.strong.get(i);if(a)a.value.setfrom(r);else{var o,s=n.value;o=n.ttisfloat()&&(0|s)===s?new x.TValue(v,s):new x.TValue(n.type,s);var u=new x.TValue(r.type,r.value);N(t,i,o,u)}}},e.exports.luaH_setint=function(e,t,n){b("number"==typeof t&&(0|t)===t&&n instanceof x.TValue);var r=t;if(n.ttisnil())R(e,r);else{var i=e.strong.get(r);if(i)i.value.setfrom(n);else{var a=new x.TValue(v,t),o=new x.TValue(n.type,n.value);N(e,r,a,o)}}},e.exports.luaH_new=function(e){return new M(e)},e.exports.luaH_next=function(e,t,n){var r,i=e.stack[n];if(i.type===d){if(!(r=t.f))return!1}else{var a=C(e,i);if(r=t.strong.get(a)){if(!(r=r.n))return!1}else{if(!(r=t.dead_weak&&t.dead_weak.get(a)||t.dead_strong.get(a)))return w.luaG_runerror(e,_("invalid key to 'next'"));do{if(!(r=r.n))return!1}while(r.key.ttisdeadkey())}}return x.setobj2s(e,n,r.key),x.setobj2s(e,n+1,r.value),!0},e.exports.Table=M},function(e,t,n){"use strict";var a=n(1),o=a.is_luastring,s=a.luastring_eq,u=a.luastring_from,l=a.to_luastring,c=n(4).lua_assert,f=function(){function e(t,n){i(this,e),this.hash=null,this.realstring=n}return r(e,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),e}(),h=function(e){c(o(e));for(var t=e.length,n="|",r=0;r<t;r++)n+=e[r].toString(16);return n},d=function(e,t){return c(t instanceof Uint8Array),new f(e,t)};e.exports.luaS_eqlngstr=function(e,t){return c(e instanceof f),c(t instanceof f),e==t||s(e.realstring,t.realstring)},e.exports.luaS_hash=h,e.exports.luaS_hashlongstr=function(e){return c(e instanceof f),null===e.hash&&(e.hash=h(e.getstr())),e.hash},e.exports.luaS_bless=d,e.exports.luaS_new=function(e,t){return d(e,u(t))},e.exports.luaS_newliteral=function(e,t){return d(e,l(t))},e.exports.TString=f},function(e,t,n){"use strict";var r=n(1),i=r.LUA_HOOKCOUNT,a=r.LUA_HOOKLINE,o=r.LUA_MASKCOUNT,s=r.LUA_MASKLINE,u=r.constant_types,l=u.LUA_TBOOLEAN,c=u.LUA_TNIL,f=u.LUA_TTABLE,h=r.thread_status,d=h.LUA_ERRRUN,p=h.LUA_YIELD,v=r.from_userstring,g=r.luastring_eq,m=r.luastring_indexOf,y=r.to_luastring,k=n(4),_=k.api_check,b=k.lua_assert,w=n(3).LUA_IDSIZE,x=n(18),A=n(8),S=n(13),L=n(20),O=n(6),T=n(16),E=n(12),C=n(9),M=n(14),N=n(15),R=function(e){return b(e.callstatus&E.CIST_LUA),e.l_savedpc-1},P=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[R(e)]:-1},I=function(e){if(e.status===p){var t=e.ci,n=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=n}},D=function(e,t){b(t<e.upvalues.length);var n=e.upvalues[t].name;return null===n?y("?",!0):n.getstr()},U=function(e,t,n){var r,i=null;if(t.callstatus&E.CIST_LUA){if(n<0)return function(e,t){var n=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-n?null:{pos:e.funcOff+n+t,name:y("(*vararg)",!0)}}(t,-n);r=t.l_base,i=S.luaF_getlocalname(t.func.value.p,n,R(t))}else r=t.funcOff+1;if(null===i){if(!((t===e.ci?e.top:t.next.funcOff)-r>=n&&n>0))return null;i=y("(*temporary)",!0)}return{pos:r+(n-1),name:i}},B=function(e,t){if(null===t||t instanceof O.CClosure)e.source=y("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=y("J",!0);else{var n=t.p;e.source=n.source?n.source.getstr():y("=?",!0),e.linedefined=n.linedefined,e.lastlinedefined=n.lastlinedefined,e.what=0===e.linedefined?y("main",!0):y("Lua",!0)}e.short_src=O.luaO_chunkid(e.source,w)},V=function(e,t){var n={name:null,funcname:null};return null===t?null:t.callstatus&E.CIST_FIN?(n.name=y("__gc",!0),n.funcname=y("metamethod",!0),n):!(t.callstatus&E.CIST_TAIL)&&t.previous.callstatus&E.CIST_LUA?H(e,t.previous):null},F=function(e,t,n){var r={name:null,funcname:null};if(T.ISK(n)){var i=e.k[T.INDEXK(n)];if(i.ttisstring())return r.name=i.svalue(),r}else{var a=j(e,t,n);if(a&&99===a.funcname[0])return a}return r.name=y("?",!0),r},z=function(e,t){return e<t?-1:e},j=function e(t,n,r){var i={name:S.luaF_getlocalname(t,r+1,n),funcname:null};if(i.name)return i.funcname=y("local",!0),i;var a=function(e,t,n){for(var r=-1,i=0,a=T.OpCodesI,o=0;o<t;o++){var s=e.code[o],u=s.A;switch(s.opcode){case a.OP_LOADNIL:var l=s.B;u<=n&&n<=u+l&&(r=z(o,i));break;case a.OP_TFORCALL:n>=u+2&&(r=z(o,i));break;case a.OP_CALL:case a.OP_TAILCALL:n>=u&&(r=z(o,i));break;case a.OP_JMP:var c=o+1+s.sBx;o<c&&c<=t&&c>i&&(i=c);break;default:T.testAMode(s.opcode)&&n===u&&(r=z(o,i))}}return r}(t,n,r),o=T.OpCodesI;if(-1!==a){var s=t.code[a];switch(s.opcode){case o.OP_MOVE:var u=s.B;if(u<s.A)return e(t,a,u);break;case o.OP_GETTABUP:case o.OP_GETTABLE:var l=s.C,c=s.B,f=s.opcode===o.OP_GETTABLE?S.luaF_getlocalname(t,c+1,a):D(t,c);return i.name=F(t,a,l).name,i.funcname=f&&g(f,L.LUA_ENV)?y("global",!0):y("field",!0),i;case o.OP_GETUPVAL:return i.name=D(t,s.B),i.funcname=y("upvalue",!0),i;case o.OP_LOADK:case o.OP_LOADKX:var h=s.opcode===o.OP_LOADK?s.Bx:t.code[a+1].Ax;if(t.k[h].ttisstring())return i.name=t.k[h].svalue(),i.funcname=y("constant",!0),i;break;case o.OP_SELF:var d=s.C;return i.name=F(t,a,d).name,i.funcname=y("method",!0),i}}return null},H=function(e,t){var n={name:null,funcname:null},r=0,i=t.func.value.p,a=R(t),o=i.code[a],s=T.OpCodesI;if(t.callstatus&E.CIST_HOOKED)return n.name=y("?",!0),n.funcname=y("hook",!0),n;switch(o.opcode){case s.OP_CALL:case s.OP_TAILCALL:return j(i,a,o.A);case s.OP_TFORCALL:return n.name=y("for iterator",!0),n.funcname=y("for iterator",!0),n;case s.OP_SELF:case s.OP_GETTABUP:case s.OP_GETTABLE:r=M.TMS.TM_INDEX;break;case s.OP_SETTABUP:case s.OP_SETTABLE:r=M.TMS.TM_NEWINDEX;break;case s.OP_ADD:r=M.TMS.TM_ADD;break;case s.OP_SUB:r=M.TMS.TM_SUB;break;case s.OP_MUL:r=M.TMS.TM_MUL;break;case s.OP_MOD:r=M.TMS.TM_MOD;break;case s.OP_POW:r=M.TMS.TM_POW;break;case s.OP_DIV:r=M.TMS.TM_DIV;break;case s.OP_IDIV:r=M.TMS.TM_IDIV;break;case s.OP_BAND:r=M.TMS.TM_BAND;break;case s.OP_BOR:r=M.TMS.TM_BOR;break;case s.OP_BXOR:r=M.TMS.TM_BXOR;break;case s.OP_SHL:r=M.TMS.TM_SHL;break;case s.OP_SHR:r=M.TMS.TM_SHR;break;case s.OP_UNM:r=M.TMS.TM_UNM;break;case s.OP_BNOT:r=M.TMS.TM_BNOT;break;case s.OP_LEN:r=M.TMS.TM_LEN;break;case s.OP_CONCAT:r=M.TMS.TM_CONCAT;break;case s.OP_EQ:r=M.TMS.TM_EQ;break;case s.OP_LT:r=M.TMS.TM_LT;break;case s.OP_LE:r=M.TMS.TM_LE;break;default:return null}return n.name=e.l_G.tmname[r].getstr(),n.funcname=y("metamethod",!0),n},G=function(e,t){var n=e.ci,r=null;if(n.callstatus&E.CIST_LUA){r=function(e,t,n){for(var r=t.func.value,i=0;i<r.nupvalues;i++)if(r.upvals[i]===n)return{name:D(r.p,i),funcname:y("upvalue",!0)};return null}(0,n,t);var i=function(e,t,n){for(var r=t.l_base;r<t.top;r++)if(e.stack[r]===n)return r;return!1}(e,n,t);!r&&i&&(r=j(n.func.value.p,R(n),i-n.l_base))}return r?O.luaO_pushfstring(e,y(" (%s '%s')",!0),r.funcname,r.name):y("",!0)},K=function(e,t,n){var r=M.luaT_objtypename(e,t);X(e,y("attempt to %s a %s value%s",!0),n,r,G(e,t))},W=function(e,t,n,r){var i;return i=n?O.luaO_chunkid(n.getstr(),w):y("?",!0),O.luaO_pushfstring(e,y("%s:%d: %s",!0),i,r,t)},X=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=e.ci,o=O.luaO_pushvfstring(e,t,r);a.callstatus&E.CIST_LUA&&W(e,o,a.func.value.p.source,P(a)),q(e)},q=function(e){if(0!==e.errfunc){var t=e.errfunc;O.pushobj2s(e,e.stack[e.top-1]),O.setobjs2s(e,e.top-2,t),A.luaD_callnoyield(e,e.top-2,1)}A.luaD_throw(e,d)};e.exports.luaG_addinfo=W,e.exports.luaG_concaterror=function(e,t,n){(t.ttisstring()||N.cvt2str(t))&&(t=n),K(e,t,y("concatenate",!0))},e.exports.luaG_errormsg=q,e.exports.luaG_opinterror=function(e,t,n,r){!1===N.tonumber(t)&&(n=t),K(e,n,r)},e.exports.luaG_ordererror=function(e,t,n){var r=M.luaT_objtypename(e,t),i=M.luaT_objtypename(e,n);g(r,i)?X(e,y("attempt to compare two %s values",!0),r):X(e,y("attempt to compare %s with %s",!0),r,i)},e.exports.luaG_runerror=X,e.exports.luaG_tointerror=function(e,t,n){!1===N.tointeger(t)&&(n=t),X(e,y("number%s has no integer representation",!0),G(e,n))},e.exports.luaG_traceexec=function(e){var t=e.ci,n=e.hookmask,r=0==--e.hookcount&&n&o;if(r)e.hookcount=e.basehookcount;else if(!(n&s))return;if(t.callstatus&E.CIST_HOOKYIELD)t.callstatus&=~E.CIST_HOOKYIELD;else{if(r&&A.luaD_hook(e,i,-1),n&s){var u=t.func.value.p,l=t.l_savedpc-1,c=0!==u.lineinfo.length?u.lineinfo[l]:-1;(0===l||t.l_savedpc<=e.oldpc||c!==(0!==u.lineinfo.length?u.lineinfo[e.oldpc-1]:-1))&&A.luaD_hook(e,a,c)}e.oldpc=t.l_savedpc,e.status===p&&(r&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=E.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],A.luaD_throw(e,p))}},e.exports.luaG_typeerror=K,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,n){var r,i,a,o;return t=v(t),I(e),62===t[0]?(a=null,o=e.stack[e.top-1],_(e,o.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(o=(a=n.i_ci).func,b(a.func.ttisfunction())),r=function(e,t,n,r,i){for(var a=1;t.length>0;t=t.subarray(1))switch(t[0]){case 83:B(n,r);break;case 108:n.currentline=i&&i.callstatus&E.CIST_LUA?P(i):-1;break;case 117:n.nups=null===r?0:r.nupvalues,null===r||r instanceof O.CClosure?(n.isvararg=!0,n.nparams=0):(n.isvararg=r.p.is_vararg,n.nparams=r.p.numparams);break;case 116:n.istailcall=i?i.callstatus&E.CIST_TAIL:0;break;case 110:var o=V(e,i);null===o?(n.namewhat=y("",!0),n.name=null):(n.namewhat=o.funcname,n.name=o.name);break;case 76:case 102:break;default:a=0}return a}(e,t,n,i=o.ttisclosure()?o.value:null,a),m(t,102)>=0&&(O.pushobj2s(e,o),_(e,e.top<=e.ci.top,"stack overflow")),I(e),m(t,76)>=0&&function(e,t){if(null===t||t instanceof O.CClosure)e.stack[e.top]=new O.TValue(c,null),x.api_incr_top(e);else{var n=t.p.lineinfo,r=C.luaH_new(e);e.stack[e.top]=new O.TValue(f,r),x.api_incr_top(e);for(var i=new O.TValue(l,!0),a=0;a<n.length;a++)C.luaH_setint(r,n[a],i)}}(e,i),r},e.exports.lua_getlocal=function(e,t,n){var r;if(I(e),null===t)r=e.stack[e.top-1].ttisLclosure()?S.luaF_getlocalname(e.stack[e.top-1].value.p,n,0):null;else{var i=U(e,t.i_ci,n);i?(r=i.name,O.pushobj2s(e,e.stack[i.pos]),_(e,e.top<=e.ci.top,"stack overflow")):r=null}return I(e),r},e.exports.lua_getstack=function(e,t,n){var r,i;if(t<0)return 0;for(r=e.ci;t>0&&r!==e.base_ci;r=r.previous)t--;return 0===t&&r!==e.base_ci?(i=1,n.i_ci=r):i=0,i},e.exports.lua_sethook=function(e,t,n,r){null!==t&&0!==n||(n=0,t=null),e.ci.callstatus&E.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=r,e.hookcount=e.basehookcount,e.hookmask=n},e.exports.lua_setlocal=function(e,t,n){var r;I(e);var i=U(e,t.i_ci,n);return i?(r=i.name,O.setobjs2s(e,i.pos,e.top-1),delete e.stack[--e.top]):r=null,I(e),r}},function(e,t,n){"use strict";var a=n(1),o=a.LUA_MINSTACK,s=a.LUA_RIDX_GLOBALS,u=a.LUA_RIDX_MAINTHREAD,l=a.constant_types,c=l.LUA_NUMTAGS,f=l.LUA_TNIL,h=l.LUA_TTABLE,d=l.LUA_TTHREAD,p=a.thread_status.LUA_OK,v=n(6),g=n(8),m=n(18),y=n(9),k=n(14),_=2*o,b=r((function e(){i(this,e),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN})),w=r((function e(t){i(this,e),this.id=t.id_counter++,this.base_ci=new b,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=t,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=p,this.errfunc=0})),x=function(e){e.ci.next=null},A=function(e,t){e.stack=new Array(_),e.top=0,e.stack_last=_-5;var n=e.base_ci;n.next=n.previous=null,n.callstatus=0,n.funcOff=e.top,n.func=e.stack[e.top],e.stack[e.top++]=new v.TValue(f,null),n.top=e.top+o,e.ci=n},S=function(e){e.ci=e.base_ci,x(e),e.stack=null},L=function(e){var t=e.l_G;A(e),function(e,t){var n=y.luaH_new(e);t.l_registry.sethvalue(n),y.luaH_setint(n,u,new v.TValue(d,e)),y.luaH_setint(n,s,new v.TValue(h,y.luaH_new(e)))}(e,t),k.luaT_init(e),t.version=m.lua_version(null)};e.exports.lua_State=w,e.exports.CallInfo=b,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){!function(e){S(e)}(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){var e=new(function(){return r((function e(){i(this,e),this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new v.TValue(f,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(k.TMS.TM_N),this.mt=new Array(c)}))}()),t=new w(e);return e.mainthread=t,g.luaD_rawrunprotected(t,L,null)!==p&&(t=null),t},e.exports.lua_newthread=function(e){var t=e.l_G,n=new w(t);return e.stack[e.top]=new v.TValue(d,n),m.api_incr_top(e),n.hookmask=e.hookmask,n.basehookcount=e.basehookcount,n.hook=e.hook,n.hookcount=n.basehookcount,A(n),n},e.exports.luaE_extendCI=function(e){var t=new b;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=x,e.exports.luaE_freethread=function(e,t){S(t)}},function(e,t,n){"use strict";var a=n(1).constant_types.LUA_TNIL,o=n(6);e.exports.MAXUPVAL=255,e.exports.Proto=function(){return r((function e(t){i(this,e),this.id=t.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}))}(),e.exports.luaF_findupval=function(e,t){return e.stack[t]},e.exports.luaF_close=function(e,t){for(var n=t;n<e.top;n++){var r=e.stack[n];e.stack[n]=new o.TValue(r.type,r.value)}},e.exports.luaF_getlocalname=function(e,t,n){for(var r=0;r<e.locvars.length&&e.locvars[r].startpc<=n;r++)if(n<e.locvars[r].endpc&&0==--t)return e.locvars[r].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(var n=0;n<t.nupvalues;n++)t.upvals[n]=new o.TValue(a,null)},e.exports.luaF_newLclosure=function(e,t){return new o.LClosure(e,t)}},function(e,t,n){"use strict";var r=n(1),i=r.constant_types,a=i.LUA_TTABLE,o=i.LUA_TUSERDATA,s=r.to_luastring,u=n(4).lua_assert,l=n(6),c=n(8),f=n(12),h=n(10),d=h.luaS_bless,p=h.luaS_new,v=n(9),g=n(11),m=n(15),y=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map((function(e){return s(e)})),k=function(e){return y[e+1]},_={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},b=s("__name",!0),w=function(e,t,n,r,i,a){var o=e.top;if(l.pushobj2s(e,t),l.pushobj2s(e,n),l.pushobj2s(e,r),a||l.pushobj2s(e,i),e.ci.callstatus&f.CIST_LUA?c.luaD_call(e,o,a):c.luaD_callnoyield(e,o,a),a){var s=e.stack[e.top-1];delete e.stack[--e.top],i.setfrom(s)}},x=function(e,t,n,r,i){var a=S(e,t,i);return a.ttisnil()&&(a=S(e,n,i)),!a.ttisnil()&&(w(e,a,t,n,r,1),!0)},A=function(e,t,n){var r=v.luaH_getstr(e,n);return u(t<=_.TM_EQ),r.ttisnil()?(e.flags|=1<<t,null):r},S=function(e,t,n){var r;switch(t.ttnov()){case a:case o:r=t.value.metatable;break;default:r=e.l_G.mt[t.ttnov()]}return r?v.luaH_getstr(r,e.l_G.tmname[n]):l.luaO_nilobject};e.exports.fasttm=function(e,t,n){return null===t||t.flags&1<<n?null:A(t,n,e.l_G.tmname[n])},e.exports.TMS=_,e.exports.luaT_callTM=w,e.exports.luaT_callbinTM=x,e.exports.luaT_trybinTM=function(e,t,n,r,i){if(!x(e,t,n,r,i))switch(i){case _.TM_CONCAT:return g.luaG_concaterror(e,t,n);case _.TM_BAND:case _.TM_BOR:case _.TM_BXOR:case _.TM_SHL:case _.TM_SHR:case _.TM_BNOT:var a=m.tonumber(t),o=m.tonumber(n);return!1!==a&&!1!==o?g.luaG_tointerror(e,t,n):g.luaG_opinterror(e,t,n,s("perform bitwise operation on",!0));default:return g.luaG_opinterror(e,t,n,s("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,t,n,r){var i=new l.TValue;return x(e,t,n,i,r)?!i.l_isfalse():null},e.exports.luaT_gettm=A,e.exports.luaT_gettmbyobj=S,e.exports.luaT_init=function(e){e.l_G.tmname[_.TM_INDEX]=new p(e,s("__index",!0)),e.l_G.tmname[_.TM_NEWINDEX]=new p(e,s("__newindex",!0)),e.l_G.tmname[_.TM_GC]=new p(e,s("__gc",!0)),e.l_G.tmname[_.TM_MODE]=new p(e,s("__mode",!0)),e.l_G.tmname[_.TM_LEN]=new p(e,s("__len",!0)),e.l_G.tmname[_.TM_EQ]=new p(e,s("__eq",!0)),e.l_G.tmname[_.TM_ADD]=new p(e,s("__add",!0)),e.l_G.tmname[_.TM_SUB]=new p(e,s("__sub",!0)),e.l_G.tmname[_.TM_MUL]=new p(e,s("__mul",!0)),e.l_G.tmname[_.TM_MOD]=new p(e,s("__mod",!0)),e.l_G.tmname[_.TM_POW]=new p(e,s("__pow",!0)),e.l_G.tmname[_.TM_DIV]=new p(e,s("__div",!0)),e.l_G.tmname[_.TM_IDIV]=new p(e,s("__idiv",!0)),e.l_G.tmname[_.TM_BAND]=new p(e,s("__band",!0)),e.l_G.tmname[_.TM_BOR]=new p(e,s("__bor",!0)),e.l_G.tmname[_.TM_BXOR]=new p(e,s("__bxor",!0)),e.l_G.tmname[_.TM_SHL]=new p(e,s("__shl",!0)),e.l_G.tmname[_.TM_SHR]=new p(e,s("__shr",!0)),e.l_G.tmname[_.TM_UNM]=new p(e,s("__unm",!0)),e.l_G.tmname[_.TM_BNOT]=new p(e,s("__bnot",!0)),e.l_G.tmname[_.TM_LT]=new p(e,s("__lt",!0)),e.l_G.tmname[_.TM_LE]=new p(e,s("__le",!0)),e.l_G.tmname[_.TM_CONCAT]=new p(e,s("__concat",!0)),e.l_G.tmname[_.TM_CALL]=new p(e,s("__call",!0))},e.exports.luaT_objtypename=function(e,t){var n;if(t.ttistable()&&null!==(n=t.value.metatable)||t.ttisfulluserdata()&&null!==(n=t.value.metatable)){var r=v.luaH_getstr(n,d(e,b));if(r.ttisstring())return r.svalue()}return k(t.ttnov())},e.exports.ttypename=k},function(e,t,n){"use strict";var r=n(1),i=r.LUA_MASKLINE,a=r.LUA_MASKCOUNT,o=r.LUA_MULTRET,s=r.constant_types,u=s.LUA_TBOOLEAN,l=s.LUA_TLCF,c=s.LUA_TLIGHTUSERDATA,f=s.LUA_TLNGSTR,h=s.LUA_TNIL,d=s.LUA_TNUMBER,p=s.LUA_TNUMFLT,v=s.LUA_TNUMINT,g=s.LUA_TSHRSTR,m=s.LUA_TTABLE,y=s.LUA_TUSERDATA,k=r.to_luastring,_=n(16),b=_.INDEXK,w=_.ISK,x=_.LFIELDS_PER_FLUSH,A=_.OpCodesI,S=A.OP_ADD,L=A.OP_BAND,O=A.OP_BNOT,T=A.OP_BOR,E=A.OP_BXOR,C=A.OP_CALL,M=A.OP_CLOSURE,N=A.OP_CONCAT,R=A.OP_DIV,P=A.OP_EQ,I=A.OP_EXTRAARG,D=A.OP_FORLOOP,U=A.OP_FORPREP,B=A.OP_GETTABLE,V=A.OP_GETTABUP,F=A.OP_GETUPVAL,z=A.OP_IDIV,j=A.OP_JMP,H=A.OP_LE,G=A.OP_LEN,K=A.OP_LOADBOOL,W=A.OP_LOADK,X=A.OP_LOADKX,q=A.OP_LOADNIL,Q=A.OP_LT,$=A.OP_MOD,J=A.OP_MOVE,Y=A.OP_MUL,Z=A.OP_NEWTABLE,ee=A.OP_NOT,te=A.OP_POW,ne=A.OP_RETURN,re=A.OP_SELF,ie=A.OP_SETLIST,ae=A.OP_SETTABLE,oe=A.OP_SETTABUP,se=A.OP_SETUPVAL,ue=A.OP_SHL,le=A.OP_SHR,ce=A.OP_SUB,fe=A.OP_TAILCALL,he=A.OP_TEST,de=A.OP_TESTSET,pe=A.OP_TFORCALL,ve=A.OP_TFORLOOP,ge=A.OP_UNM,me=A.OP_VARARG,ye=n(3),ke=ye.LUA_MAXINTEGER,_e=ye.LUA_MININTEGER,be=ye.lua_numbertointeger,we=n(4),xe=we.lua_assert,Ae=we.luai_nummod,Se=n(6),Le=n(13),Oe=n(12),Te=n(10),Ee=Te.luaS_bless,Ce=Te.luaS_eqlngstr,Me=Te.luaS_hashlongstr,Ne=n(8),Re=n(14),Pe=n(9),Ie=n(11),De=function(e,t,n){return t+n.A},Ue=function(e,t,n){return t+n.B},Be=function(e,t,n,r){return w(r.B)?n[b(r.B)]:e.stack[t+r.B]},Ve=function(e,t,n,r){return w(r.C)?n[b(r.C)]:e.stack[t+r.C]},Fe=function(e,t,n,r){var i=n.A;0!==i&&Le.luaF_close(e,t.l_base+i-1),t.l_savedpc+=n.sBx+r},ze=function(e,t){Fe(e,t,t.l_code[t.l_savedpc],1)},je=function(e,t,n){if(t.ttisnumber()&&n.ttisnumber())return Qe(t,n)?1:0;if(t.ttisstring()&&n.ttisstring())return Je(t.tsvalue(),n.tsvalue())<0?1:0;var r=Re.luaT_callorderTM(e,t,n,Re.TMS.TM_LT);return null===r&&Ie.luaG_ordererror(e,t,n),r?1:0},He=function(e,t,n){var r;return t.ttisnumber()&&n.ttisnumber()?$e(t,n)?1:0:t.ttisstring()&&n.ttisstring()?Je(t.tsvalue(),n.tsvalue())<=0?1:0:null!==(r=Re.luaT_callorderTM(e,t,n,Re.TMS.TM_LE))?r?1:0:(e.ci.callstatus|=Oe.CIST_LEQ,r=Re.luaT_callorderTM(e,n,t,Re.TMS.TM_LT),e.ci.callstatus^=Oe.CIST_LEQ,null===r&&Ie.luaG_ordererror(e,t,n),r?0:1)},Ge=function(e,t,n){if(t.ttype()!==n.ttype())return t.ttnov()!==n.ttnov()||t.ttnov()!==d?0:t.value===n.value?1:0;var r;switch(t.ttype()){case h:return 1;case u:return t.value==n.value?1:0;case c:case v:case p:case l:return t.value===n.value?1:0;case g:case f:return Ce(t.tsvalue(),n.tsvalue())?1:0;case y:case m:if(t.value===n.value)return 1;if(null===e)return 0;null===(r=Re.fasttm(e,t.value.metatable,Re.TMS.TM_EQ))&&(r=Re.fasttm(e,n.value.metatable,Re.TMS.TM_EQ));break;default:return t.value===n.value?1:0}if(null===r)return 0;var i=new Se.TValue;return Re.luaT_callTM(e,r,t,n,i,1),i.l_isfalse()?0:1},Ke=function(e,t){var n=!1,r=We(e,t<0?2:1);if(!1===r){var i=qe(e);if(!1===i)return!1;0<i?(r=ke,t<0&&(n=!0)):(r=_e,t>=0&&(n=!0))}return{stopnow:n,ilimit:r}},We=function e(t,n){if(t.ttisfloat()){var r=t.value,i=Math.floor(r);if(r!==i){if(0===n)return!1;n>1&&(i+=1)}return be(i)}if(t.ttisinteger())return t.value;if(ot(t)){var a=new Se.TValue;if(Se.luaO_str2num(t.svalue(),a)===t.vslen()+1)return e(a,n)}return!1},Xe=function(e){return e.ttisinteger()?e.value:We(e,0)},qe=function(e){if(e.ttnov()===d)return e.value;if(ot(e)){var t=new Se.TValue;if(Se.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},Qe=function(e,t){return e.value<t.value},$e=function(e,t){return e.value<=t.value},Je=function(e,t){var n=Me(e),r=Me(t);return n===r?0:n<r?-1:1},Ye=function(e,t,n){var r;switch(n.ttype()){case m:var i=n.value;if(null!==(r=Re.fasttm(e,i.metatable,Re.TMS.TM_LEN)))break;return void t.setivalue(Pe.luaH_getn(i));case g:case f:return void t.setivalue(n.vslen());default:(r=Re.luaT_gettmbyobj(e,n,Re.TMS.TM_LEN)).ttisnil()&&Ie.luaG_typeerror(e,n,k("get length of",!0))}Re.luaT_callTM(e,r,n,n,t,1)},Ze=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},et=function(e,t,n){return 0===n&&Ie.luaG_runerror(e,k("attempt to divide by zero")),0|Math.floor(t/n)},tt=function(e,t,n){return 0===n&&Ie.luaG_runerror(e,k("attempt to perform 'n%%0'")),t-Math.floor(t/n)*n|0},nt=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},rt=function(e,t,n,r){var i=e.cache;if(null!==i)for(var a=e.upvalues,o=a.length,s=0;s<o;s++){var u=a[s].instack?n[r+a[s].idx]:t[a[s].idx];if(i.upvals[s]!==u)return null}return i},it=function(e,t,n,r,i){var a=t.upvalues.length,o=t.upvalues,s=new Se.LClosure(e,a);s.p=t,e.stack[i].setclLvalue(s);for(var u=0;u<a;u++)o[u].instack?s.upvals[u]=Le.luaF_findupval(e,r+o[u].idx):s.upvals[u]=n[o[u].idx];t.cache=s},at=function(e){return e.ttisnumber()},ot=function(e){return e.ttisstring()},st=function(e,t){var n=e.stack[t];return!!n.ttisstring()||!!at(n)&&(Se.luaO_tostring(e,n),!0)},ut=function(e){return e.ttisstring()&&0===e.vslen()},lt=function(e,t,n,r){var i=0;do{var a=e.stack[t-n],o=a.vslen(),s=a.svalue();r.set(s,i),i+=o}while(--n>0)},ct=function(e,t){xe(t>=2);do{var n=e.top,r=2;if((e.stack[n-2].ttisstring()||at(e.stack[n-2]))&&st(e,n-1))if(ut(e.stack[n-1]))st(e,n-2);else if(ut(e.stack[n-2]))Se.setobjs2s(e,n-2,n-1);else{var i=e.stack[n-1].vslen();for(r=1;r<t&&st(e,n-r-1);r++)i+=e.stack[n-r-1].vslen();var a=new Uint8Array(i);lt(e,n,r,a);var o=Ee(e,a);Se.setsvalue2s(e,n-r,o)}else Re.luaT_trybinTM(e,e.stack[n-2],e.stack[n-1],e.stack[n-2],Re.TMS.TM_CONCAT);for(t-=r-1;e.top>n-(r-1);)delete e.stack[--e.top]}while(t>1)},ft=function(e,t,n,r){for(var i=0;i<2e3;i++){var a=void 0;if(t.ttistable()){var o=Pe.luaH_get(e,t.value,n);if(!o.ttisnil())return void Se.setobj2s(e,r,o);if(null===(a=Re.fasttm(e,t.value.metatable,Re.TMS.TM_INDEX)))return void e.stack[r].setnilvalue()}else(a=Re.luaT_gettmbyobj(e,t,Re.TMS.TM_INDEX)).ttisnil()&&Ie.luaG_typeerror(e,t,k("index",!0));if(a.ttisfunction())return void Re.luaT_callTM(e,a,t,n,e.stack[r],1);t=a}Ie.luaG_runerror(e,k("'__index' chain too long; possible loop",!0))},ht=function(e,t,n,r){for(var i=0;i<2e3;i++){var a=void 0;if(t.ttistable()){var o=t.value;if(!Pe.luaH_get(e,o,n).ttisnil()||null===(a=Re.fasttm(e,o.metatable,Re.TMS.TM_NEWINDEX)))return Pe.luaH_setfrom(e,o,n,r),void Pe.invalidateTMcache(o)}else(a=Re.luaT_gettmbyobj(e,t,Re.TMS.TM_NEWINDEX)).ttisnil()&&Ie.luaG_typeerror(e,t,k("index",!0));if(a.ttisfunction())return void Re.luaT_callTM(e,a,t,n,r,0);t=a}Ie.luaG_runerror(e,k("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=at,e.exports.cvt2num=ot,e.exports.luaV_gettable=ft,e.exports.luaV_concat=ct,e.exports.luaV_div=et,e.exports.luaV_equalobj=Ge,e.exports.luaV_execute=function(e){var t=e.ci;t.callstatus|=Oe.CIST_FRESH;e:for(;;){xe(t===e.ci);var n=t.func.value,r=n.p.k,s=t.l_base,u=t.l_code[t.l_savedpc++];e.hookmask&(i|a)&&Ie.luaG_traceexec(e);var l=De(0,s,u);switch(u.opcode){case J:Se.setobjs2s(e,l,Ue(0,s,u));break;case W:var c=r[u.Bx];Se.setobj2s(e,l,c);break;case X:xe(t.l_code[t.l_savedpc].opcode===I);var f=r[t.l_code[t.l_savedpc++].Ax];Se.setobj2s(e,l,f);break;case K:e.stack[l].setbvalue(0!==u.B),0!==u.C&&t.l_savedpc++;break;case q:for(var h=0;h<=u.B;h++)e.stack[l+h].setnilvalue();break;case F:var d=u.B;Se.setobj2s(e,l,n.upvals[d]);break;case V:var p=n.upvals[u.B],v=Ve(e,s,r,u);ft(e,p,v,l);break;case B:var g=e.stack[Ue(0,s,u)],m=Ve(e,s,r,u);ft(e,g,m,l);break;case oe:var y=n.upvals[u.A],_=Be(e,s,r,u),b=Ve(e,s,r,u);ht(e,y,_,b);break;case se:n.upvals[u.B].setfrom(e.stack[l]);break;case ae:var w=e.stack[l],A=Be(e,s,r,u),ye=Ve(e,s,r,u);ht(e,w,A,ye);break;case Z:e.stack[l].sethvalue(Pe.luaH_new(e));break;case re:var ke=Ue(0,s,u),_e=Ve(e,s,r,u);Se.setobjs2s(e,l+1,ke),ft(e,e.stack[ke],_e,l);break;case S:var be=void 0,we=void 0,Te=Be(e,s,r,u),Ee=Ve(e,s,r,u);Te.ttisinteger()&&Ee.ttisinteger()?e.stack[l].setivalue(Te.value+Ee.value|0):!1!==(be=qe(Te))&&!1!==(we=qe(Ee))?e.stack[l].setfltvalue(be+we):Re.luaT_trybinTM(e,Te,Ee,e.stack[l],Re.TMS.TM_ADD);break;case ce:var Ce=void 0,Me=void 0,We=Be(e,s,r,u),Qe=Ve(e,s,r,u);We.ttisinteger()&&Qe.ttisinteger()?e.stack[l].setivalue(We.value-Qe.value|0):!1!==(Ce=qe(We))&&!1!==(Me=qe(Qe))?e.stack[l].setfltvalue(Ce-Me):Re.luaT_trybinTM(e,We,Qe,e.stack[l],Re.TMS.TM_SUB);break;case Y:var $e=void 0,Je=void 0,at=Be(e,s,r,u),ot=Ve(e,s,r,u);at.ttisinteger()&&ot.ttisinteger()?e.stack[l].setivalue(Ze(at.value,ot.value)):!1!==($e=qe(at))&&!1!==(Je=qe(ot))?e.stack[l].setfltvalue($e*Je):Re.luaT_trybinTM(e,at,ot,e.stack[l],Re.TMS.TM_MUL);break;case $:var st=void 0,ut=void 0,lt=Be(e,s,r,u),dt=Ve(e,s,r,u);lt.ttisinteger()&&dt.ttisinteger()?e.stack[l].setivalue(tt(e,lt.value,dt.value)):!1!==(st=qe(lt))&&!1!==(ut=qe(dt))?e.stack[l].setfltvalue(Ae(e,st,ut)):Re.luaT_trybinTM(e,lt,dt,e.stack[l],Re.TMS.TM_MOD);break;case te:var pt,vt=void 0,gt=Be(e,s,r,u),mt=Ve(e,s,r,u);!1!==(pt=qe(gt))&&!1!==(vt=qe(mt))?e.stack[l].setfltvalue(Math.pow(pt,vt)):Re.luaT_trybinTM(e,gt,mt,e.stack[l],Re.TMS.TM_POW);break;case R:var yt,kt=void 0,_t=Be(e,s,r,u),bt=Ve(e,s,r,u);!1!==(yt=qe(_t))&&!1!==(kt=qe(bt))?e.stack[l].setfltvalue(yt/kt):Re.luaT_trybinTM(e,_t,bt,e.stack[l],Re.TMS.TM_DIV);break;case z:var wt=void 0,xt=void 0,At=Be(e,s,r,u),St=Ve(e,s,r,u);At.ttisinteger()&&St.ttisinteger()?e.stack[l].setivalue(et(e,At.value,St.value)):!1!==(wt=qe(At))&&!1!==(xt=qe(St))?e.stack[l].setfltvalue(Math.floor(wt/xt)):Re.luaT_trybinTM(e,At,St,e.stack[l],Re.TMS.TM_IDIV);break;case L:var Lt,Ot=void 0,Tt=Be(e,s,r,u),Et=Ve(e,s,r,u);!1!==(Lt=Xe(Tt))&&!1!==(Ot=Xe(Et))?e.stack[l].setivalue(Lt&Ot):Re.luaT_trybinTM(e,Tt,Et,e.stack[l],Re.TMS.TM_BAND);break;case T:var Ct,Mt=void 0,Nt=Be(e,s,r,u),Rt=Ve(e,s,r,u);!1!==(Ct=Xe(Nt))&&!1!==(Mt=Xe(Rt))?e.stack[l].setivalue(Ct|Mt):Re.luaT_trybinTM(e,Nt,Rt,e.stack[l],Re.TMS.TM_BOR);break;case E:var Pt,It=void 0,Dt=Be(e,s,r,u),Ut=Ve(e,s,r,u);!1!==(Pt=Xe(Dt))&&!1!==(It=Xe(Ut))?e.stack[l].setivalue(Pt^It):Re.luaT_trybinTM(e,Dt,Ut,e.stack[l],Re.TMS.TM_BXOR);break;case ue:var Bt,Vt=void 0,Ft=Be(e,s,r,u),zt=Ve(e,s,r,u);!1!==(Bt=Xe(Ft))&&!1!==(Vt=Xe(zt))?e.stack[l].setivalue(nt(Bt,Vt)):Re.luaT_trybinTM(e,Ft,zt,e.stack[l],Re.TMS.TM_SHL);break;case le:var jt,Ht=void 0,Gt=Be(e,s,r,u),Kt=Ve(e,s,r,u);!1!==(jt=Xe(Gt))&&!1!==(Ht=Xe(Kt))?e.stack[l].setivalue(nt(jt,-Ht)):Re.luaT_trybinTM(e,Gt,Kt,e.stack[l],Re.TMS.TM_SHR);break;case ge:var Wt=void 0,Xt=e.stack[Ue(0,s,u)];Xt.ttisinteger()?e.stack[l].setivalue(0|-Xt.value):!1!==(Wt=qe(Xt))?e.stack[l].setfltvalue(-Wt):Re.luaT_trybinTM(e,Xt,Xt,e.stack[l],Re.TMS.TM_UNM);break;case O:var qt=e.stack[Ue(0,s,u)];qt.ttisinteger()?e.stack[l].setivalue(~qt.value):Re.luaT_trybinTM(e,qt,qt,e.stack[l],Re.TMS.TM_BNOT);break;case ee:var Qt=e.stack[Ue(0,s,u)];e.stack[l].setbvalue(Qt.l_isfalse());break;case G:Ye(e,e.stack[l],e.stack[Ue(0,s,u)]);break;case N:var $t=u.B,Jt=u.C;e.top=s+Jt+1,ct(e,Jt-$t+1);var Yt=s+$t;Se.setobjs2s(e,l,Yt),Ne.adjust_top(e,t.top);break;case j:Fe(e,t,u,0);break;case P:Ge(e,Be(e,s,r,u),Ve(e,s,r,u))!==u.A?t.l_savedpc++:ze(e,t);break;case Q:je(e,Be(e,s,r,u),Ve(e,s,r,u))!==u.A?t.l_savedpc++:ze(e,t);break;case H:He(e,Be(e,s,r,u),Ve(e,s,r,u))!==u.A?t.l_savedpc++:ze(e,t);break;case he:(u.C?e.stack[l].l_isfalse():!e.stack[l].l_isfalse())?t.l_savedpc++:ze(e,t);break;case de:var Zt=Ue(0,s,u),en=e.stack[Zt];(u.C?en.l_isfalse():!en.l_isfalse())?t.l_savedpc++:(Se.setobjs2s(e,l,Zt),ze(e,t));break;case C:var tn=u.B,nn=u.C-1;if(0!==tn&&Ne.adjust_top(e,l+tn),!Ne.luaD_precall(e,l,nn)){t=e.ci;continue e}nn>=0&&Ne.adjust_top(e,t.top);break;case fe:var rn=u.B;if(0!==rn&&Ne.adjust_top(e,l+rn),!Ne.luaD_precall(e,l,o)){var an=e.ci,on=an.previous,sn=an.func,un=an.funcOff,ln=on.funcOff,cn=an.l_base+sn.value.p.numparams;n.p.p.length>0&&Le.luaF_close(e,on.l_base);for(var fn=0;un+fn<cn;fn++)Se.setobjs2s(e,ln+fn,un+fn);on.l_base=ln+(an.l_base-un),on.top=ln+(e.top-un),Ne.adjust_top(e,on.top),on.l_code=an.l_code,on.l_savedpc=an.l_savedpc,on.callstatus|=Oe.CIST_TAIL,on.next=null,t=e.ci=on,xe(e.top===on.l_base+e.stack[ln].value.p.maxstacksize);continue e}break;case ne:n.p.p.length>0&&Le.luaF_close(e,s);var hn=Ne.luaD_poscall(e,t,l,0!==u.B?u.B-1:e.top-l);if(t.callstatus&Oe.CIST_FRESH)return;t=e.ci,hn&&Ne.adjust_top(e,t.top),xe(t.callstatus&Oe.CIST_LUA),xe(t.l_code[t.l_savedpc-1].opcode===C);continue e;case D:if(e.stack[l].ttisinteger()){var dn=e.stack[l+2].value,pn=e.stack[l].value+dn|0,vn=e.stack[l+1].value;(0<dn?pn<=vn:vn<=pn)&&(t.l_savedpc+=u.sBx,e.stack[l].chgivalue(pn),e.stack[l+3].setivalue(pn))}else{var gn=e.stack[l+2].value,mn=e.stack[l].value+gn,yn=e.stack[l+1].value;(0<gn?mn<=yn:yn<=mn)&&(t.l_savedpc+=u.sBx,e.stack[l].chgfltvalue(mn),e.stack[l+3].setfltvalue(mn))}break;case U:var kn=void 0,_n=e.stack[l],bn=e.stack[l+1],wn=e.stack[l+2];if(_n.ttisinteger()&&wn.ttisinteger()&&(kn=Ke(bn,wn.value))){var xn=kn.stopnow?0:_n.value;bn.value=kn.ilimit,_n.value=xn-wn.value|0}else{var An,Sn,Ln;!1===(An=qe(bn))&&Ie.luaG_runerror(e,k("'for' limit must be a number",!0)),e.stack[l+1].setfltvalue(An),!1===(Sn=qe(wn))&&Ie.luaG_runerror(e,k("'for' step must be a number",!0)),e.stack[l+2].setfltvalue(Sn),!1===(Ln=qe(_n))&&Ie.luaG_runerror(e,k("'for' initial value must be a number",!0)),e.stack[l].setfltvalue(Ln-Sn)}t.l_savedpc+=u.sBx;break;case pe:var On=l+3;Se.setobjs2s(e,On+2,l+2),Se.setobjs2s(e,On+1,l+1),Se.setobjs2s(e,On,l),Ne.adjust_top(e,On+3),Ne.luaD_call(e,On,u.C),Ne.adjust_top(e,t.top),u=t.l_code[t.l_savedpc++],l=De(0,s,u),xe(u.opcode===ve);case ve:e.stack[l+1].ttisnil()||(Se.setobjs2s(e,l,l+1),t.l_savedpc+=u.sBx);break;case ie:var Tn=u.B,En=u.C;0===Tn&&(Tn=e.top-l-1),0===En&&(xe(t.l_code[t.l_savedpc].opcode===I),En=t.l_code[t.l_savedpc++].Ax);for(var Cn=e.stack[l].value,Mn=(En-1)*x+Tn;Tn>0;Tn--)Pe.luaH_setint(Cn,Mn--,e.stack[l+Tn]);Ne.adjust_top(e,t.top);break;case M:var Nn=n.p.p[u.Bx],Rn=rt(Nn,n.upvals,e.stack,s);null===Rn?it(e,Nn,n.upvals,s,l):e.stack[l].setclLvalue(Rn);break;case me:var Pn=void 0,In=u.B-1,Dn=s-t.funcOff-n.p.numparams-1;for(Dn<0&&(Dn=0),In<0&&(In=Dn,Ne.luaD_checkstack(e,Dn),Ne.adjust_top(e,l+Dn)),Pn=0;Pn<In&&Pn<Dn;Pn++)Se.setobjs2s(e,l+Pn,s-Dn+Pn);for(;Pn<In;Pn++)e.stack[l+Pn].setnilvalue();break;case I:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){var t=e.ci,n=t.l_base,r=t.l_code[t.l_savedpc-1],i=r.opcode;switch(i){case S:case ce:case Y:case R:case z:case L:case T:case E:case ue:case le:case $:case te:case ge:case O:case G:case V:case B:case re:Se.setobjs2s(e,n+r.A,e.top-1),delete e.stack[--e.top];break;case H:case Q:case P:var a=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Oe.CIST_LEQ&&(xe(i===H),t.callstatus^=Oe.CIST_LEQ,a=!a),xe(t.l_code[t.l_savedpc].opcode===j),a!==!!r.A&&t.l_savedpc++;break;case N:var o=e.top-1,s=o-1-(n+r.B);Se.setobjs2s(e,o-2,o),s>1&&(e.top=o-1,ct(e,s)),Se.setobjs2s(e,t.l_base+r.A,e.top-1),Ne.adjust_top(e,t.top);break;case pe:xe(t.l_code[t.l_savedpc].opcode===ve),Ne.adjust_top(e,t.top);break;case C:r.C-1>=0&&Ne.adjust_top(e,t.top)}},e.exports.luaV_imul=Ze,e.exports.luaV_lessequal=He,e.exports.luaV_lessthan=je,e.exports.luaV_mod=tt,e.exports.luaV_objlen=Ye,e.exports.luaV_rawequalobj=function(e,t){return Ge(null,e,t)},e.exports.luaV_shiftl=nt,e.exports.luaV_tointeger=We,e.exports.settable=ht,e.exports.tointeger=Xe,e.exports.tonumber=qe},function(e,t,n){"use strict";var r=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],i=function(e,t){return~(-1<<e)<<t},a=function(e,t){return~i(e,t)},o=function(e,t,n,r){return e.code=e.code&a(r,n)|t<<n&i(r,n),u(e)},s=function(e,t){return o(e,t,14,18)},u=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&i(6,0),A:e>>6&i(8,0),B:e>>23&i(9,0),C:e>>14&i(9,0),Bx:e>>14&i(18,0),Ax:e>>6&i(26,0),sBx:(e>>14&i(18,0))-131071};var t=e.code;return e.opcode=t>>0&i(6,0),e.A=t>>6&i(8,0),e.B=t>>23&i(9,0),e.C=t>>14&i(9,0),e.Bx=t>>14&i(18,0),e.Ax=t>>6&i(26,0),e.sBx=(t>>14&i(18,0))-131071,e};e.exports.BITRK=256,e.exports.CREATE_ABC=function(e,t,n,r){return u(e<<0|t<<6|n<<23|r<<14)},e.exports.CREATE_ABx=function(e,t,n){return u(e<<0|t<<6|n<<14)},e.exports.CREATE_Ax=function(e,t){return u(e<<0|t<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return-257&e},e.exports.ISK=function(e){return 256&e},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(e){return 256|e},e.exports.SETARG_A=function(e,t){return o(e,t,6,8)},e.exports.SETARG_Ax=function(e,t){return o(e,t,6,26)},e.exports.SETARG_B=function(e,t){return o(e,t,23,9)},e.exports.SETARG_Bx=s,e.exports.SETARG_C=function(e,t){return o(e,t,14,9)},e.exports.SETARG_sBx=function(e,t){return s(e,t+131071)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&a(6,0)|t<<0&i(6,0),u(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=u,e.exports.getBMode=function(e){return r[e]>>4&3},e.exports.getCMode=function(e){return r[e]>>2&3},e.exports.getOpMode=function(e){return 3&r[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&r[e]},e.exports.testTMode=function(e){return 128&r[e]}},function(e,t,n){"use strict";var r=n(2),i="_"+r.LUA_VERSION_MAJOR+"_"+r.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=i,e.exports.lua_assert=function(e){},e.exports.luaopen_base=n(24).luaopen_base,e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=n(25).luaopen_coroutine,e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=n(26).luaopen_table,e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=n(27).luaopen_os,e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=n(28).luaopen_string,e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=n(29).luaopen_utf8,e.exports.LUA_BITLIBNAME="bit32",e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=n(30).luaopen_math,e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=n(31).luaopen_debug,e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=n(32).luaopen_package,e.exports.LUA_FENGARILIBNAME="fengari",e.exports.luaopen_fengari=n(33).luaopen_fengari;var a=n(39);e.exports.luaL_openlibs=a.luaL_openlibs},function(e,t,n){"use strict";var r=n(1),i=r.LUA_MULTRET,a=r.LUA_OPBNOT,o=r.LUA_OPEQ,s=r.LUA_OPLE,u=r.LUA_OPLT,l=r.LUA_OPUNM,c=r.LUA_REGISTRYINDEX,f=r.LUA_RIDX_GLOBALS,h=r.LUA_VERSION_NUM,d=r.constant_types,p=d.LUA_NUMTAGS,v=d.LUA_TBOOLEAN,g=d.LUA_TCCL,m=d.LUA_TFUNCTION,y=d.LUA_TLCF,k=d.LUA_TLCL,_=d.LUA_TLIGHTUSERDATA,b=d.LUA_TLNGSTR,w=d.LUA_TNIL,x=d.LUA_TNONE,A=d.LUA_TNUMFLT,S=d.LUA_TNUMINT,L=d.LUA_TSHRSTR,O=d.LUA_TTABLE,T=d.LUA_TTHREAD,E=d.LUA_TUSERDATA,C=r.thread_status.LUA_OK,M=r.from_userstring,N=r.to_luastring,R=n(4).api_check,P=n(11),I=n(8),D=n(37).luaU_dump,U=n(13),B=n(6),V=n(12),F=n(10),z=F.luaS_bless,j=F.luaS_new,H=F.luaS_newliteral,G=n(14),K=n(3).LUAI_MAXSTACK,W=n(15),X=n(9),q=n(19).ZIO,Q=B.TValue,$=B.CClosure,J=function(e){e.top++,R(e,e.top<=e.ci.top,"stack overflow")},Y=function(e,t){R(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},Z=function(e){if(!e)throw TypeError("invalid argument")},ee=function(e){Z("number"==typeof e&&(0|e)===e)},te=function(e){return e!==B.luaO_nilobject},ne=function(e,t){var n=e.ci;if(t>0){var r=n.funcOff+t;return R(e,t<=n.top-(n.funcOff+1),"unacceptable index"),r>=e.top?B.luaO_nilobject:e.stack[r]}return t>c?(R(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===c?e.l_G.l_registry:(R(e,(t=c-t)<=U.MAXUPVAL+1,"upvalue index too large"),n.func.ttislcf()?B.luaO_nilobject:t<=n.func.value.nupvalues?n.func.value.upvalue[t-1]:B.luaO_nilobject)},re=function(e,t){var n=e.ci;if(t>0){var r=n.funcOff+t;return R(e,t<=n.top-(n.funcOff+1),"unacceptable index"),r>=e.top?null:r}if(t>c)return R(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},ie=function(e,t){var n,r=e.ci.funcOff;t>=0?(R(e,t<=e.stack_last-(r+1),"new top too large"),n=r+1+t):(R(e,-(t+1)<=e.top-(r+1),"invalid new top"),n=e.top+t+1),I.adjust_top(e,n)},ae=function(e,t){ie(e,-t-1)},oe=function(e,t,n){for(;t<n;t++,n--){var r=e.stack[t],i=new Q(r.type,r.value);B.setobjs2s(e,t,n),B.setobj2s(e,n,i)}},se=function(e,t,n){var r=e.top-1,i=re(e,t),a=e.stack[i];R(e,te(a)&&t>c,"index not in the stack"),R(e,(n>=0?n:-n)<=r-i+1,"invalid 'n'");var o=n>=0?r-n:i-n-1;oe(e,i,o),oe(e,o+1,e.top-1),oe(e,i,e.top-1)},ue=function(e,t,n){var r=ne(e,t);ne(e,n).setfrom(r)},le=function(e,t,n){if(Z("function"==typeof t),ee(n),0===n)e.stack[e.top]=new Q(y,t);else{Y(e,n),R(e,n<=U.MAXUPVAL,"upvalue index too large");for(var r=new $(e,t,n),i=0;i<n;i++)r.upvalue[i].setfrom(e.stack[e.top-n+i]);for(var a=1;a<n;a++)delete e.stack[--e.top];n>0&&--e.top,e.stack[e.top].setclCvalue(r)}J(e)},ce=le,fe=function(e,t){le(e,t,0)},he=fe,de=function(e,t,n){var r=j(e,M(n));Y(e,1),B.pushsvalue2s(e,r),R(e,e.top<=e.ci.top,"stack overflow"),W.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},pe=function(e,t){de(e,X.luaH_getint(e.l_G.l_registry.value,f),t)},ve=function(e,t,n){var r=j(e,M(n));return B.pushsvalue2s(e,r),R(e,e.top<=e.ci.top,"stack overflow"),W.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},ge=function(e,t,n){var r=ne(e,t);return ee(n),R(e,r.ttistable(),"table expected"),B.pushobj2s(e,X.luaH_getint(r.value,n)),R(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},me=function(e,t,n){var r=new B.TValue(O,X.luaH_new(e));e.stack[e.top]=r,J(e)},ye=function(e,t,n){switch(ee(n),t.ttype()){case g:var r=t.value;return 1<=n&&n<=r.nupvalues?{name:N("",!0),val:r.upvalue[n-1]}:null;case k:var i=t.value,a=i.p;if(!(1<=n&&n<=a.upvalues.length))return null;var o=a.upvalues[n-1].name;return{name:o?o.getstr():N("(*no name)",!0),val:i.upvals[n-1]};default:return null}},ke=function(e,t){var n=ne(e,t);if(!n.ttisstring()){if(!W.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.svalue()},_e=ke,be=function(e,t){return W.tointeger(ne(e,t))},we=function(e,t){return W.tonumber(ne(e,t))},xe=new WeakMap,Ae=function(e,t){I.luaD_callnoyield(e,t.funcOff,t.nresults)},Se=function(e,t){var n=ne(e,t);return te(n)?n.ttnov():x},Le=N("?"),Oe=function(e,t,n){R(e,n===i||e.ci.top-e.top>=n-t,"results from function overflow current stack size")},Te=function(e,t,n,r,a){R(e,null===a||!(e.ci.callstatus&V.CIST_LUA),"cannot use continuations inside hooks"),Y(e,t+1),R(e,e.status===C,"cannot do calls on non-normal thread"),Oe(e,t,n);var o=e.top-(t+1);null!==a&&0===e.nny?(e.ci.c_k=a,e.ci.c_ctx=r,I.luaD_call(e,o,n)):I.luaD_callnoyield(e,o,n),n===i&&e.ci.top<e.top&&(e.ci.top=e.top)},Ee=function(e,t,n,r,a,o){var s,u;R(e,null===o||!(e.ci.callstatus&V.CIST_LUA),"cannot use continuations inside hooks"),Y(e,t+1),R(e,e.status===C,"cannot do calls on non-normal thread"),Oe(e,t,n),u=0===r?0:re(e,r);var l=e.top-(t+1);if(null===o||e.nny>0){var c={funcOff:l,nresults:n};s=I.luaD_pcall(e,Ae,c,l,u)}else{var f=e.ci;f.c_k=o,f.c_ctx=a,f.extra=l,f.c_old_errfunc=e.errfunc,e.errfunc=u,f.callstatus&=~V.CIST_OAH|e.allowhook,f.callstatus|=V.CIST_YPCALL,I.luaD_call(e,l,n),f.callstatus&=~V.CIST_YPCALL,e.errfunc=f.c_old_errfunc,s=C}return n===i&&e.ci.top<e.top&&(e.ci.top=e.top),s},Ce=function(e,t,n){var r=ne(e,t);R(e,r.ttisLclosure(),"Lua function expected");var i=r.value;return ee(n),R(e,1<=n&&n<=i.p.upvalues.length,"invalid upvalue index"),{f:i,i:n-1}};e.exports.api_incr_top=J,e.exports.api_checknelems=Y,e.exports.lua_absindex=function(e,t){return t>0||t<=c?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==l&&t!==a?Y(e,2):(Y(e,1),B.pushobj2s(e,e.stack[e.top-1]),R(e,e.top<=e.ci.top,"stack overflow")),B.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){var n=e.l_G.panic;return e.l_G.panic=t,n},e.exports.lua_atnativeerror=function(e,t){var n=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,n},e.exports.lua_call=function(e,t,n){Te(e,t,n,0,null)},e.exports.lua_callk=Te,e.exports.lua_checkstack=function(e,t){var n,r=e.ci;return R(e,t>=0,"negative 'n'"),e.stack_last-e.top>t?n=!0:e.top+V.EXTRA_STACK>K-t?n=!1:(I.luaD_growstack(e,t),n=!0),n&&r.top<e.top+t&&(r.top=e.top+t),n},e.exports.lua_compare=function(e,t,n,r){var i=ne(e,t),a=ne(e,n),l=0;if(te(i)&&te(a))switch(r){case o:l=W.luaV_equalobj(e,i,a);break;case u:l=W.luaV_lessthan(e,i,a);break;case s:l=W.luaV_lessequal(e,i,a);break;default:R(e,!1,"invalid option")}return l},e.exports.lua_concat=function(e,t){Y(e,t),t>=2?W.luaV_concat(e,t):0===t&&(B.pushsvalue2s(e,z(e,N("",!0))),R(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=ue,e.exports.lua_createtable=me,e.exports.lua_dump=function(e,t,n,r){Y(e,1);var i=e.stack[e.top-1];return i.ttisLclosure()?D(e,i.value.p,t,n,r):1},e.exports.lua_error=function(e){Y(e,1),P.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,t,n){return ve(e,ne(e,t),n)},e.exports.lua_getglobal=function(e,t){return ve(e,X.luaH_getint(e.l_G.l_registry.value,f),t)},e.exports.lua_geti=function(e,t,n){var r=ne(e,t);return ee(n),e.stack[e.top]=new Q(S,n),J(e),W.luaV_gettable(e,r,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){var n,r=ne(e,t),i=!1;switch(r.ttnov()){case O:case E:n=r.value.metatable;break;default:n=e.l_G.mt[r.ttnov()]}return null!==n&&void 0!==n&&(e.stack[e.top]=new Q(O,n),J(e),i=!0),i},e.exports.lua_gettable=function(e,t){var n=ne(e,t);return W.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,n){var r=ye(0,ne(e,t),n);if(r){var i=r.name,a=r.val;return B.pushobj2s(e,a),R(e,e.top<=e.ci.top,"stack overflow"),i}return null},e.exports.lua_getuservalue=function(e,t){var n=ne(e,t);R(e,n.ttisfulluserdata(),"full userdata expected");var r=n.value.uservalue;return e.stack[e.top]=new Q(r.type,r.value),J(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){se(e,t,1)},e.exports.lua_isboolean=function(e,t){return Se(e,t)===v},e.exports.lua_iscfunction=function(e,t){var n=ne(e,t);return n.ttislcf(n)||n.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return Se(e,t)===m},e.exports.lua_isinteger=function(e,t){return ne(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return Se(e,t)===_},e.exports.lua_isnil=function(e,t){return Se(e,t)===w},e.exports.lua_isnone=function(e,t){return Se(e,t)===x},e.exports.lua_isnoneornil=function(e,t){return Se(e,t)<=0},e.exports.lua_isnumber=function(e,t){return!1!==W.tonumber(ne(e,t))},e.exports.lua_isproxy=function(e,t){var n=xe.get(e);return!!n&&(null===t||t.l_G===n)},e.exports.lua_isstring=function(e,t){var n=ne(e,t);return n.ttisstring()||W.cvt2str(n)},e.exports.lua_istable=function(e,t){return ne(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return Se(e,t)===T},e.exports.lua_isuserdata=function(e,t){var n=ne(e,t);return n.ttisfulluserdata(n)||n.ttislightuserdata()},e.exports.lua_len=function(e,t){var n=ne(e,t),r=new Q;W.luaV_objlen(e,r,n),e.stack[e.top]=r,J(e)},e.exports.lua_load=function(e,t,n,r,i){r=r?M(r):Le,null!==i&&(i=M(i));var a=new q(e,t,n),o=I.luaD_protectedparser(e,a,r,i);if(o===C){var s=e.stack[e.top-1].value;if(s.nupvalues>=1){var u=X.luaH_getint(e.l_G.l_registry.value,f);s.upvals[0].setfrom(u)}}return o},e.exports.lua_newtable=function(e){me(e)},e.exports.lua_newuserdata=function(e,t){var n=function(e,t){return new B.Udata(e,t)}(e,t);return e.stack[e.top]=new B.TValue(E,n),J(e),n.data},e.exports.lua_next=function(e,t){var n=ne(e,t);return R(e,n.ttistable(),"table expected"),e.stack[e.top]=new Q,X.luaH_next(e,n.value,e.top-1)?(J(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,n,r){return Ee(e,t,n,r,0,null)},e.exports.lua_pcallk=Ee,e.exports.lua_pop=ae,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new Q(v,!!t),J(e)},e.exports.lua_pushcclosure=le,e.exports.lua_pushcfunction=fe,e.exports.lua_pushfstring=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t=M(t),B.luaO_pushvfstring(e,t,r)},e.exports.lua_pushglobaltable=function(e){ge(e,c,f)},e.exports.lua_pushinteger=function(e,t){ee(t),e.stack[e.top]=new Q(S,t),J(e)},e.exports.lua_pushjsclosure=ce,e.exports.lua_pushjsfunction=he,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new Q(_,t),J(e)},e.exports.lua_pushliteral=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new Q(w,null),e.top++;else{Z("string"==typeof t);var n=H(e,t);B.pushsvalue2s(e,n),t=n.getstr()}return R(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushlstring=function(e,t,n){var r;return ee(n),0===n?(t=N("",!0),r=z(e,t)):(t=M(t),R(e,t.length>=n,"invalid length to lua_pushlstring"),r=j(e,t.subarray(0,n))),B.pushsvalue2s(e,r),R(e,e.top<=e.ci.top,"stack overflow"),r.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new Q(w,null),J(e)},e.exports.lua_pushnumber=function(e,t){Z("number"==typeof t),e.stack[e.top]=new Q(A,t),J(e)},e.exports.lua_pushstring=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new Q(w,null),e.top++;else{var n=j(e,M(t));B.pushsvalue2s(e,n),t=n.getstr()}return R(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new Q(T,e),J(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){B.pushobj2s(e,ne(e,t)),R(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,t,n){return t=M(t),B.luaO_pushvfstring(e,t,n)},e.exports.lua_rawequal=function(e,t,n){var r=ne(e,t),i=ne(e,n);return te(r)&&te(i)?W.luaV_equalobj(null,r,i):0},e.exports.lua_rawget=function(e,t){var n=ne(e,t);return R(e,n.ttistable(n),"table expected"),B.setobj2s(e,e.top-1,X.luaH_get(e,n.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=ge,e.exports.lua_rawgetp=function(e,t,n){var r=ne(e,t);R(e,r.ttistable(),"table expected");var i=new Q(_,n);return B.pushobj2s(e,X.luaH_get(e,r.value,i)),R(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){var n=ne(e,t);switch(n.ttype()){case L:case b:return n.vslen();case E:return n.value.len;case O:return X.luaH_getn(n.value);default:return 0}},e.exports.lua_rawset=function(e,t){Y(e,2);var n=ne(e,t);R(e,n.ttistable(),"table expected");var r=e.stack[e.top-2],i=e.stack[e.top-1];X.luaH_setfrom(e,n.value,r,i),X.invalidateTMcache(n.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,n){ee(n),Y(e,1);var r=ne(e,t);R(e,r.ttistable(),"table expected"),X.luaH_setint(r.value,n,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,n){Y(e,1);var r=ne(e,t);R(e,r.ttistable(),"table expected");var i=new Q(_,n),a=e.stack[e.top-1];X.luaH_setfrom(e,r.value,i,a),delete e.stack[--e.top]},e.exports.lua_register=function(e,t,n){fe(e,n),pe(e,t)},e.exports.lua_remove=function(e,t){se(e,t,-1),ae(e,1)},e.exports.lua_replace=function(e,t){ue(e,-1,t),ae(e,1)},e.exports.lua_rotate=se,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,t,n){de(e,ne(e,t),n)},e.exports.lua_setglobal=pe,e.exports.lua_seti=function(e,t,n){ee(n),Y(e,1);var r=ne(e,t);e.stack[e.top]=new Q(S,n),J(e),W.settable(e,r,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){var n;Y(e,1);var r=ne(e,t);switch(e.stack[e.top-1].ttisnil()?n=null:(R(e,e.stack[e.top-1].ttistable(),"table expected"),n=e.stack[e.top-1].value),r.ttnov()){case E:case O:r.value.metatable=n;break;default:e.l_G.mt[r.ttnov()]=n}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,t){Y(e,2);var n=ne(e,t);W.settable(e,n,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=ie,e.exports.lua_setupvalue=function(e,t,n){var r=ne(e,t);Y(e,1);var i=ye(0,r,n);if(i){var a=i.name;return i.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],a}return null},e.exports.lua_setuservalue=function(e,t){Y(e,1);var n=ne(e,t);R(e,n.ttisfulluserdata(),"full userdata expected"),n.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){var n=new Q,r=B.luaO_str2num(t,n);return 0!==r&&(e.stack[e.top]=n,J(e)),r},e.exports.lua_toboolean=function(e,t){return!ne(e,t).l_isfalse()},e.exports.lua_tocfunction=function(e,t){var n=ne(e,t);return n.ttislcf()||n.ttisCclosure()?n.value:null},e.exports.lua_todataview=function(e,t){var n=ke(e,t);return new DataView(n.buffer,n.byteOffset,n.byteLength)},e.exports.lua_tointeger=function(e,t){var n=be(e,t);return!1===n?0:n},e.exports.lua_tointegerx=be,e.exports.lua_tojsstring=function(e,t){var n=ne(e,t);if(!n.ttisstring()){if(!W.cvt2str(n))return null;B.luaO_tostring(e,n)}return n.jsstring()},e.exports.lua_tolstring=ke,e.exports.lua_tonumber=function(e,t){var n=we(e,t);return!1===n?0:n},e.exports.lua_tonumberx=we,e.exports.lua_topointer=function(e,t){var n=ne(e,t);switch(n.ttype()){case O:case k:case g:case y:case T:case E:case _:return n.value;default:return null}},e.exports.lua_toproxy=function(e,t){var n=ne(e,t);return function(e,t,n){var r=function(r){R(r,r instanceof V.lua_State&&e===r.l_G,"must be from same global state"),r.stack[r.top]=new Q(t,n),J(r)};return xe.set(r,e),r}(e.l_G,n.type,n.value)},e.exports.lua_tostring=_e,e.exports.lua_tothread=function(e,t){var n=ne(e,t);return n.ttisthread()?n.value:null},e.exports.lua_touserdata=function(e,t){var n=ne(e,t);switch(n.ttnov()){case E:return n.value.data;case _:return n.value;default:return null}},e.exports.lua_type=Se,e.exports.lua_typename=function(e,t){return R(e,x<=t&&t<p,"invalid tag"),G.ttypename(t)},e.exports.lua_upvalueid=function(e,t,n){var r=ne(e,t);switch(r.ttype()){case k:var i=Ce(e,t,n);return i.f.upvals[i.i];case g:var a=r.value;return R(e,(0|n)===n&&n>0&&n<=a.nupvalues,"invalid upvalue index"),a.upvalue[n-1];default:return R(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,t,n,r,i){var a=Ce(e,t,n),o=Ce(e,r,i),s=o.f.upvals[o.i];a.f.upvals[a.i]=s},e.exports.lua_version=function(e){return null===e?h:e.l_G.version},e.exports.lua_xmove=function(e,t,n){if(e!==t){Y(e,n),R(e,e.l_G===t.l_G,"moving among independent states"),R(e,t.ci.top-t.top>=n,"stack overflow"),e.top-=n;for(var r=0;r<n;r++)t.stack[t.top]=new B.TValue,B.setobj2s(t,t.top,e.stack[e.top+r]),delete e.stack[e.top+r],t.top++}}},function(e,t,n){"use strict";var a=n(4).lua_assert,o=function(e){var t=e.reader(e.L,e.data);if(null===t)return-1;a(t instanceof Uint8Array,"Should only load binary of array of bytes");var n=t.length;return 0===n?-1:(e.buffer=t,e.off=0,e.n=n-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=o,e.exports.luaZ_read=function(e,t,n,r){for(;r;){if(0===e.n){if(-1===o(e))return r;e.n++,e.off--}for(var i=r<=e.n?r:e.n,a=0;a<i;a++)t[n++]=e.buffer[e.off++];e.n-=i,0===e.n&&(e.buffer=null),r-=i}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,t,n){var r=new Uint8Array(n);t.buffer&&r.set(t.buffer),t.buffer=r},e.exports.MBuffer=function(){return r((function e(){i(this,e),this.buffer=null,this.n=0}))}(),e.exports.ZIO=function(){function e(t,n,r){i(this,e),this.L=t,a("function"==typeof n,"ZIO requires a reader"),this.reader=n,this.data=r,this.n=0,this.buffer=null,this.off=0}return r(e,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:o(this)}}]),e}()},function(e,t,n){"use strict";var a=n(1),o=a.constant_types,s=o.LUA_TBOOLEAN,u=o.LUA_TLNGSTR,l=a.thread_status.LUA_ERRSYNTAX,c=a.to_luastring,f=n(4),h=f.LUA_MINBUFFER,d=f.MAX_INT,p=f.lua_assert,v=n(11),g=n(8),m=n(22),y=m.lisdigit,k=m.lislalnum,_=m.lislalpha,b=m.lisspace,w=m.lisxdigit,x=n(6),A=n(10),S=A.luaS_bless,L=A.luaS_hash,O=A.luaS_hashlongstr,T=A.luaS_new,E=n(9),C=n(19),M=C.EOZ,N=C.luaZ_buffer,R=C.luaZ_buffremove,P=C.luaZ_resetbuffer,I=C.luaZ_resizebuffer,D=c("_ENV",!0),U=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((function(e,t){return c(e)})),B=r((function e(){i(this,e),this.r=NaN,this.i=NaN,this.ts=null})),V=r((function e(){i(this,e),this.token=NaN,this.seminfo=new B})),F=function(e,t){var n=e.buff;if(n.n+1>n.buffer.length){n.buffer.length>=d/2&&J(e,c("lexical element too long",!0),0);var r=2*n.buffer.length;I(e.L,n,r)}n.buffer[n.n++]=t<0?255+t+1:t},z=function(e,t){if(t<257)return x.luaO_pushfstring(e.L,c("'%c'",!0),t);var n=U[t-257];return t<289?x.luaO_pushfstring(e.L,c("'%s'",!0),n):n},j=function(e){return 10===e.current||13===e.current},H=function(e){e.current=e.z.zgetc()},G=function(e){F(e,e.current),H(e)},K=new x.TValue(s,!0),W=function(e,t){var n=e.L,r=T(n,t),i=e.h.strong.get(O(r));if(i)r=i.key.tsvalue();else{var a=new x.TValue(u,r);E.luaH_setfrom(n,e.h,a,K)}return r},X=function(e){var t=e.current;p(j(e)),H(e),j(e)&&e.current!==t&&H(e),++e.linenumber>=d&&J(e,c("chunk has too many lines",!0),0)},q=function(e,t){return e.current===t&&(H(e),!0)},Q=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(G(e),!0)},$=function(e,t){var n="Ee",r=e.current;for(p(y(e.current)),G(e),48===r&&Q(e,"xX")&&(n="Pp");;)if(Q(e,n)&&Q(e,"-+"),w(e.current))G(e);else{if(46!==e.current)break;G(e)}var i=new x.TValue;return 0===x.luaO_str2num(N(e.buff),i)&&J(e,c("malformed number",!0),290),i.ttisinteger()?(t.i=i.value,291):(p(i.ttisfloat()),t.r=i.value,290)},J=function(e,t,n){t=v.luaG_addinfo(e.L,t,e.source,e.linenumber),n&&x.luaO_pushfstring(e.L,c("%s near %s"),t,function(e,t){switch(t){case 292:case 293:case 290:case 291:return x.luaO_pushfstring(e.L,c("'%s'",!0),N(e.buff));default:return z(e,t)}}(e,n)),g.luaD_throw(e.L,l)},Y=function(e){var t=0,n=e.current;for(p(91===n||93===n),G(e);61===e.current;)G(e),t++;return e.current===n?t:-t-1},Z=function(e,t,n){var r=e.linenumber;G(e),j(e)&&X(e);for(var i=!1;!i;)switch(e.current){case M:J(e,c("unfinished long ".concat(t?"string":"comment"," (starting at line ").concat(r,")")),289);break;case 93:Y(e)===n&&(G(e),i=!0);break;case 10:case 13:F(e,10),X(e),t||P(e.buff);break;default:t?G(e):H(e)}t&&(t.ts=W(e,e.buff.buffer.subarray(2+n,e.buff.n-(2+n))))},ee=function(e,t,n){t||(e.current!==M&&G(e),J(e,n,293))},te=function(e){return G(e),ee(e,w(e.current),c("hexadecimal digit expected",!0)),x.luaO_hexavalue(e.current)},ne=function(e){var t=te(e);return t=(t<<4)+te(e),R(e.buff,2),t},re=function(e){for(var t=new Uint8Array(x.UTF8BUFFSZ),n=x.luaO_utf8esc(t,function(e){var t=4;G(e),ee(e,123===e.current,c("missing '{'",!0));var n=te(e);for(G(e);w(e.current);)t++,n=(n<<4)+x.luaO_hexavalue(e.current),ee(e,n<=1114111,c("UTF-8 value too large",!0)),G(e);return ee(e,125===e.current,c("missing '}'",!0)),H(e),R(e.buff,t),n}(e));n>0;n--)F(e,t[x.UTF8BUFFSZ-n])},ie=function(e){var t,n=0;for(t=0;t<3&&y(e.current);t++)n=10*n+e.current-48,G(e);return ee(e,n<=255,c("decimal escape too large",!0)),R(e.buff,t),n},ae=function(e,t,n){for(G(e);e.current!==t;)switch(e.current){case M:J(e,c("unfinished string",!0),289);break;case 10:case 13:J(e,c("unfinished string",!0),293);break;case 92:var r=void 0,i=void 0;switch(G(e),e.current){case 97:i=7,r="read_save";break;case 98:i=8,r="read_save";break;case 102:i=12,r="read_save";break;case 110:i=10,r="read_save";break;case 114:i=13,r="read_save";break;case 116:i=9,r="read_save";break;case 118:i=11,r="read_save";break;case 120:i=ne(e),r="read_save";break;case 117:re(e),r="no_save";break;case 10:case 13:X(e),i=10,r="only_save";break;case 92:case 34:case 39:i=e.current,r="read_save";break;case M:r="no_save";break;case 122:for(R(e.buff,1),H(e);b(e.current);)j(e)?X(e):H(e);r="no_save";break;default:ee(e,y(e.current),c("invalid escape sequence",!0)),i=ie(e),r="only_save"}"read_save"===r&&H(e),"read_save"!==r&&"only_save"!==r||(R(e.buff,1),F(e,i));break;default:G(e)}G(e),n.ts=W(e,e.buff.buffer.subarray(1,e.buff.n-1))},oe=Object.create(null);U.forEach((function(e,t){return oe[L(e)]=t}));var se=function(e,t){for(P(e.buff);;)switch(p("number"==typeof e.current),e.current){case 10:case 13:X(e);break;case 32:case 12:case 9:case 11:H(e);break;case 45:if(H(e),45!==e.current)return 45;if(H(e),91===e.current){var n=Y(e);if(P(e.buff),n>=0){Z(e,null,n),P(e.buff);break}}for(;!j(e)&&e.current!==M;)H(e);break;case 91:var r=Y(e);return r>=0?(Z(e,t,r),293):(-1!==r&&J(e,c("invalid long string delimiter",!0),293),91);case 61:return H(e),q(e,61)?282:61;case 60:return H(e),q(e,61)?284:q(e,60)?286:60;case 62:return H(e),q(e,61)?283:q(e,62)?287:62;case 47:return H(e),q(e,47)?279:47;case 126:return H(e),q(e,61)?285:126;case 58:return H(e),q(e,58)?288:58;case 34:case 39:return ae(e,e.current,t),293;case 46:return G(e),q(e,46)?q(e,46)?281:280:y(e.current)?$(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return $(e,t);case M:return 289;default:if(_(e.current)){do{G(e)}while(k(e.current));var i=W(e,N(e.buff));t.ts=i;var a=oe[O(i)];return void 0!==a&&a<=22?a+257:292}var o=e.current;return H(e),o}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=D,e.exports.LexState=function(){return r((function e(){i(this,e),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new V,this.lookahead=new V,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}))}(),e.exports.RESERVED={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},e.exports.isreserved=function(e){var t=oe[O(e)];return void 0!==t&&t<=22},e.exports.luaX_lookahead=function(e){return p(289===e.lookahead.token),e.lookahead.token=se(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=W,e.exports.luaX_next=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=se(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,t,n,r,i){t.t={token:0,seminfo:new B},t.L=e,t.current=i,t.lookahead={token:289,seminfo:new B},t.z=n,t.fs=null,t.linenumber=1,t.lastline=1,t.source=r,t.envn=S(e,D),I(e,t.buff,h)},e.exports.luaX_syntaxerror=function(e,t){J(e,t,e.t.token)},e.exports.luaX_token2str=z,e.exports.luaX_tokens=U},function(e,t,n){"use strict";var r,i,a,o=n(0),s=o.lua,u=o.lauxlib,l=o.lualib,c=o.to_luastring,f=s.LUA_MULTRET,h=s.LUA_OK,d=s.LUA_REGISTRYINDEX,p=s.LUA_RIDX_MAINTHREAD,v=s.LUA_TBOOLEAN,g=(s.LUA_TFUNCTION,s.LUA_TLIGHTUSERDATA),m=s.LUA_TNIL,y=s.LUA_TNONE,k=s.LUA_TNUMBER,_=s.LUA_TSTRING,b=(s.LUA_TTABLE,s.LUA_TTHREAD,s.LUA_TUSERDATA),w=s.lua_atnativeerror,x=s.lua_call,A=s.lua_getfield,S=s.lua_gettable,L=s.lua_gettop,O=s.lua_isnil,T=s.lua_isproxy,E=s.lua_newuserdata,C=s.lua_pcall,M=s.lua_pop,N=s.lua_pushboolean,R=s.lua_pushcfunction,P=s.lua_pushinteger,I=s.lua_pushlightuserdata,D=s.lua_pushliteral,U=s.lua_pushnil,B=s.lua_pushnumber,V=s.lua_pushstring,F=s.lua_pushvalue,z=s.lua_rawgeti,j=s.lua_rawgetp,H=s.lua_rawsetp,G=s.lua_rotate,K=s.lua_setfield,W=s.lua_settable,X=s.lua_settop,q=s.lua_toboolean,Q=s.lua_tojsstring,$=s.lua_tonumber,J=s.lua_toproxy,Y=s.lua_tothread,Z=s.lua_touserdata,ee=s.lua_type,te=u.luaL_argerror,ne=u.luaL_checkany,re=u.luaL_checkoption,ie=u.luaL_checkstack,ae=u.luaL_checkudata,oe=u.luaL_error,se=u.luaL_getmetafield,ue=u.luaL_newlib,le=u.luaL_newmetatable,ce=u.luaL_requiref,fe=u.luaL_setfuncs,he=u.luaL_setmetatable,de=u.luaL_testudata,pe=u.luaL_tolstring,ve=l.luaopen_base,ge="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if("undefined"!=typeof Reflect)r=Reflect.apply,i=Reflect.construct,a=Reflect.deleteProperty;else{var me=Function.apply,ye=Function.bind;r=function(e,t,n){return me.call(e,t,n)},i=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(ye.apply(e,n))},a=Function("t","k","delete t[k]")}var ke=String.prototype.concat.bind(""),_e=function(e){return"object"==typeof e?null!==e:"function"==typeof e},be=c("js object"),we=function(e,t){var n=de(e,t,be);return n?n.data:void 0},xe=function(e,t){return ae(e,t,be).data},Ae=function(e,t){E(e).data=t,he(e,be)},Se=function(e){z(e,d,p);var t=Y(e,-1);return M(e,1),t},Le=new WeakMap,Oe=function(e,t){switch(typeof t){case"undefined":U(e);break;case"number":B(e,t);break;case"string":V(e,c(t));break;case"boolean":N(e,t);break;case"symbol":I(e,t);break;case"function":if(T(t,e)){t(e);break}case"object":if(null===t){if(j(e,d,null)!==b)throw Error("js library not loaded into lua_State");break}default:var n=Le.get(Se(e));if(!n)throw Error("js library not loaded into lua_State");var r=n.get(t);r?r(e):(Ae(e,t),r=J(e,-1),n.set(t,r))}},Te=function(e){var t=Z(e,1);return Oe(e,t),1},Ee=function(e,t){switch(ee(e,t)){case y:case m:return;case v:return q(e,t);case g:return Z(e,t);case k:return $(e,t);case _:return Q(e,t);case b:var n=we(e,t);if(void 0!==n)return n;default:return Ve(e,J(e,t))}},Ce=function(e,t){var n=C(e,t,1,0),r=Ee(e,-1);if(M(e,1),n===h)return r;throw r},Me=function(e,t,n,r,i){if(!_e(r))throw new TypeError("`args` argument must be an object");var a=+r.length;a>=0||(a=0),ie(e,2+a,null);var o=L(e);t(e),Oe(e,n);for(var s=0;s<a;s++)Oe(e,r[s]);if(C(e,1+a,i,0)===h){for(var u=L(e)-o,l=new Array(u),c=0;c<u;c++)l[c]=Ee(e,o+c+1);return X(e,o),l}var f=Ee(e,-1);throw X(e,o),f},Ne=function(e){return S(e,1),1},Re=function(e,t,n){return ie(e,3,null),R(e,Ne),t(e),Oe(e,n),Ce(e,2)},Pe=function(e,t,n){if(ie(e,3,null),R(e,Ne),t(e),Oe(e,n),C(e,2,1,0)===h){var r=O(e,-1);return M(e,1),!r}var i=Ee(e,-1);throw M(e,1),i},Ie=function(e,t,n,r){if(ie(e,4,null),R(e,(function(e){return W(e,1),0})),t(e),Oe(e,n),Oe(e,r),C(e,3,0,0)!==h){var i=Ee(e,-1);throw M(e,1),i}},De=function(e,t,n){if(ie(e,4,null),R(e,(function(e){return W(e,1),0})),t(e),Oe(e,n),U(e),C(e,3,0,0)!==h){var r=Ee(e,-1);throw M(e,1),r}},Ue=function(e,t){return ie(e,2,null),R(e,(function(e){return pe(e,1),1})),t(e),Ce(e,1)},Be=function(){var e=this.L;ie(e,3,null);var t=L(e);if(this.iter(e),this.state(e),this.last(e),C(e,2,f,0)===h){var n;if(this.last=J(e,t+1),O(e,-1))n={done:!0,value:void 0};else{for(var r=L(e)-t,i=new Array(r),a=0;a<r;a++)i[a]=Ee(e,t+a+1);n={done:!1,value:i}}return X(e,t),n}var o=Ee(e,-1);throw M(e,1),o},Ve=function(e,t){var n=Se(e),r=function(){return Me(n,t,this,arguments,1)[0]};r.apply=function(e,r){return Me(n,t,e,r,1)[0]},r.invoke=function(e,r){return Me(n,t,e,r,f)},r.get=function(e){return Re(n,t,e)},r.has=function(e){return Pe(n,t,e)},r.set=function(e,r){return Ie(n,t,e,r)},r.delete=function(e){return De(n,t,e)},r.toString=function(){return Ue(n,t)},"function"==typeof Symbol&&(r[Symbol.toStringTag]="Fengari object",r[Symbol.iterator]=function(){return function(e,t){if(ie(e,1,null),R(e,(function(e){return ce(e,c("_G"),ve,0),A(e,-1,c("pairs")),t(e),x(e,1,3),3})),C(e,0,3,0)===h){var n=J(e,-3),r=J(e,-2),i=J(e,-1);return M(e,3),{L:e,iter:n,state:r,last:i,next:Be}}var a=Ee(e,-1);throw M(e,1),a}(n,t)},Symbol.toPrimitive&&(r[Symbol.toPrimitive]=function(e){if("string"===e)return Ue(n,t)}));var i=Le.get(n);if(!i)throw Error("js library not loaded into lua_State");return i.set(r,t),r},Fe={new:function(e){for(var t=Ee(e,1),n=L(e)-1,r=new Array(n),a=0;a<n;a++)r[a]=Ee(e,a+2);return Oe(e,i(t,r)),1},tonumber:function(e){var t=Ee(e,1);return B(e,+t),1},tostring:function(e){var t=Ee(e,1);return D(e,ke(t)),1},instanceof:function(e){var t=Ee(e,1),n=Ee(e,2);return N(e,t instanceof n),1},typeof:function(e){var t=Ee(e,1);return D(e,typeof t),1}};if("function"==typeof Symbol&&Symbol.iterator){var ze=function(e){var t=Ee(e,1).next();return t.done?0:(Oe(e,t.value),1)};Fe.of=function(e){var t=function(e,t){var n=xe(e,t),i=n[Symbol.iterator];i||te(e,t,c("object not iterable"));var a=r(i,n,[]);return _e(a)||te(e,t,c("Result of the Symbol.iterator method is not an object")),a}(e,1);return R(e,ze),Oe(e,t),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var je=Symbol("lua_State"),He=Symbol("fengari-proxy"),Ge={apply:function(e,t,n){return Me(e[je],e[He],t,n,1)[0]},construct:function(e,t){var n=e[je],r=e[He],i=t.length;ie(n,2+i,null),r(n);var a=L(n);if(se(n,a,c("construct"))===m)throw M(n,1),new TypeError("not a constructor");G(n,a,1);for(var o=0;o<i;o++)Oe(n,t[o]);return Ce(n,1+i)},defineProperty:function(e,t,n){var r=e[je],i=e[He];return ie(r,4,null),i(r),se(r,-1,c("defineProperty"))===m?(M(r,1),!1):(G(r,-2,1),Oe(r,t),Oe(r,n),Ce(r,3))},deleteProperty:function(e,t){return De(e[je],e[He],t)},get:function(e,t){return Re(e[je],e[He],t)},getOwnPropertyDescriptor:function(e,t){var n=e[je],r=e[He];if(ie(n,3,null),r(n),se(n,-1,c("getOwnPropertyDescriptor"))!==m)return G(n,-2,1),Oe(n,t),Ce(n,2);M(n,1)},getPrototypeOf:function(e){var t=e[je],n=e[He];return ie(t,2,null),n(t),se(t,-1,c("getPrototypeOf"))===m?(M(t,1),null):(G(t,-2,1),Ce(t,1))},has:function(e,t){return Pe(e[je],e[He],t)},ownKeys:function(e){var t=e[je],n=e[He];if(ie(t,2,null),n(t),se(t,-1,c("ownKeys"))===m)throw M(t,1),Error("ownKeys unknown for fengari object");return G(t,-2,1),Ce(t,1)},set:function(e,t,n){return Ie(e[je],e[He],t,n),!0},setPrototypeOf:function(e,t){var n=e[je],r=e[He];return ie(n,3,null),r(n),se(n,-1,c("setPrototypeOf"))===m?(M(n,1),!1):(G(n,-2,1),Oe(n,t),Ce(n,2))}},Ke=Function("return ()=>void 0;"),We=function(e,t,n){var r,i=Se(e);switch(n){case"function":r=function(){var e=function(){}.bind();return delete e.length,delete e.name,e}();break;case"arrow_function":r=function(){var e=Ke();return delete e.length,delete e.name,e}();break;case"object":r={};break;default:throw TypeError("invalid type to createproxy")}return r[He]=t,r[je]=i,new Proxy(r,Ge)},Xe=["function","arrow_function","object"],qe=Xe.map((function(e){return c(e)}));Fe.createproxy=function(e){ne(e,1);var t=Xe[re(e,2,qe[0],qe)],n=We(e,J(e,1),t);return Oe(e,n),1}}var Qe={__index:function(e){var t=xe(e,1),n=Ee(e,2);return Oe(e,t[n]),1},__newindex:function(e){var t=xe(e,1),n=Ee(e,2),r=Ee(e,3);return void 0===r?a(t,n):t[n]=r,0},__tostring:function(e){var t=xe(e,1),n=ke(t);return V(e,c(n)),1},__call:function(e){var t,n=xe(e,1),i=L(e)-1,a=new Array(Math.max(0,i-1));if(i>0&&(t=Ee(e,2),i-- >0))for(var o=0;o<i;o++)a[o]=Ee(e,o+3);return Oe(e,r(n,t,a)),1},__pairs:function(e){var t,n,i,a,o=xe(e,1);if("function"!=typeof Symbol||void 0===(t=o[Symbol.for("__pairs")]))n=function(e){if(!(this.index>=this.keys.length)){var t=this.keys[this.index++];return[t,this.object[t]]}},i={object:o,keys:Object.keys(o),index:0};else{var s=r(t,o,[]);void 0===s&&oe(e,c("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(n=s.iter)&&oe(e,c("bad '__pairs' result (object.iter is missing)")),i=s.state,a=s.first}return R(e,(function(){var t=Ee(e,1),i=Ee(e,2),a=r(n,t,[i]);if(void 0===a)return 0;Array.isArray(a)||oe(e,c("bad iterator result (Array or undefined expected)")),ie(e,a.length,null);for(var o=0;o<a.length;o++)Oe(e,a[o]);return a.length})),Oe(e,i),Oe(e,a),3},__len:function(e){var t,n,i=xe(e,1);return n="function"!=typeof Symbol||void 0===(t=i[Symbol.for("__len")])?i.length:r(t,i,[]),Oe(e,n),1}};e.exports.FENGARI_INTEROP_VERSION="0.1",e.exports.FENGARI_INTEROP_VERSION_NUM=1,e.exports.FENGARI_INTEROP_RELEASE="0.1.2",e.exports.checkjs=xe,e.exports.testjs=we,e.exports.pushjs=Ae,e.exports.push=Oe,e.exports.tojs=Ee,e.exports.luaopen_js=function(e){return Le.set(Se(e),new WeakMap),w(e,Te),ue(e,Fe),D(e,"0.1"),K(e,-2,c("_VERSION")),P(e,1),K(e,-2,c("_VERSION_NUM")),D(e,"0.1.2"),K(e,-2,c("_RELEASE")),le(e,be),fe(e,Qe,0),M(e,1),Ae(e,null),F(e,-1),H(e,d,null),K(e,-2,c("null")),Oe(e,ge),K(e,-2,c("global")),1}},function(e,t,n){"use strict";var r=(0,n(1).luastring_of)(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return 0!=(2&r[e+1])},e.exports.lislalnum=function(e){return 0!=(3&r[e+1])},e.exports.lislalpha=function(e){return 0!=(1&r[e+1])},e.exports.lisprint=function(e){return 0!=(4&r[e+1])},e.exports.lisspace=function(e){return 0!=(8&r[e+1])},e.exports.lisxdigit=function(e){return 0!=(16&r[e+1])}},function(e,t,n){"use strict";var a=n(1),o=a.LUA_MULTRET,s=a.to_luastring,u=n(35),l=u.BinOpr,c=l.OPR_ADD,f=l.OPR_AND,h=l.OPR_BAND,d=l.OPR_BOR,p=l.OPR_BXOR,v=l.OPR_CONCAT,g=l.OPR_DIV,m=l.OPR_EQ,y=l.OPR_GE,k=l.OPR_GT,_=l.OPR_IDIV,b=l.OPR_LE,w=l.OPR_LT,x=l.OPR_MOD,A=l.OPR_MUL,S=l.OPR_NE,L=l.OPR_NOBINOPR,O=l.OPR_OR,T=l.OPR_POW,E=l.OPR_SHL,C=l.OPR_SHR,M=l.OPR_SUB,N=u.UnOpr,R=N.OPR_BNOT,P=N.OPR_LEN,I=N.OPR_MINUS,D=N.OPR_NOT,U=N.OPR_NOUNOPR,B=u.NO_JUMP,V=u.getinstruction,F=u.luaK_checkstack,z=u.luaK_codeABC,j=u.luaK_codeABx,H=u.luaK_codeAsBx,G=u.luaK_codek,K=u.luaK_concat,W=u.luaK_dischargevars,X=u.luaK_exp2RK,q=u.luaK_exp2anyreg,Q=u.luaK_exp2anyregup,$=u.luaK_exp2nextreg,J=u.luaK_exp2val,Y=u.luaK_fixline,Z=u.luaK_getlabel,ee=u.luaK_goiffalse,te=u.luaK_goiftrue,ne=u.luaK_indexed,re=u.luaK_infix,ie=u.luaK_intK,ae=u.luaK_jump,oe=u.luaK_jumpto,se=u.luaK_nil,ue=u.luaK_patchclose,le=u.luaK_patchlist,ce=u.luaK_patchtohere,fe=u.luaK_posfix,he=u.luaK_prefix,de=u.luaK_reserveregs,pe=u.luaK_ret,ve=u.luaK_self,ge=u.luaK_setlist,me=u.luaK_setmultret,ye=u.luaK_setoneret,ke=u.luaK_setreturns,_e=u.luaK_storevar,be=u.luaK_stringK,we=n(8),xe=n(13),Ae=n(20),Se=n(4),Le=Se.LUAI_MAXCCALLS,Oe=Se.MAX_INT,Te=Se.lua_assert,Ee=n(6),Ce=n(16),Me=Ce.OpCodesI,Ne=Me.OP_CALL,Re=Me.OP_CLOSURE,Pe=Me.OP_FORLOOP,Ie=Me.OP_FORPREP,De=Me.OP_GETUPVAL,Ue=Me.OP_MOVE,Be=Me.OP_NEWTABLE,Ve=Me.OP_SETTABLE,Fe=Me.OP_TAILCALL,ze=Me.OP_TFORCALL,je=Me.OP_TFORLOOP,He=Me.OP_VARARG,Ge=Ce.LFIELDS_PER_FLUSH,Ke=Ce.SETARG_B,We=Ce.SETARG_C,Xe=Ce.SET_OPCODE,qe=n(10),Qe=qe.luaS_eqlngstr,$e=qe.luaS_new,Je=qe.luaS_newliteral,Ye=n(9),Ze=xe.Proto,et=Ae.RESERVED,tt=function(e){return e===it.VCALL||e===it.VVARARG},nt=function(e,t){return Qe(e,t)},rt=r((function e(){i(this,e),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN})),it={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},at=function(){function e(){i(this,e),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return r(e,[{key:"to",value:function(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}]),e}(),ot=r((function e(){i(this,e),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN})),st=r((function e(){i(this,e),this.arr=[],this.n=NaN,this.size=NaN})),ut=function(e,t){e.t.token=0,Ae.luaX_syntaxerror(e,t)},lt=function(e,t){Ae.luaX_syntaxerror(e,Ee.luaO_pushfstring(e.L,s("%s expected",!0),Ae.luaX_token2str(e,t)))},ct=function(e,t,n,r){t>n&&function(e,t,n){var r=e.ls.L,i=e.f.linedefined,a=0===i?s("main function",!0):Ee.luaO_pushfstring(r,s("function at line %d",!0),i),o=Ee.luaO_pushfstring(r,s("too many %s (limit is %d) in %s",!0),n,t,a);Ae.luaX_syntaxerror(e.ls,o)}(e,n,r)},ft=function(e,t){return e.t.token===t&&(Ae.luaX_next(e),!0)},ht=function(e,t){e.t.token!==t&&lt(e,t)},dt=function(e,t){ht(e,t),Ae.luaX_next(e)},pt=function(e,t,n){t||Ae.luaX_syntaxerror(e,n)},vt=function(e,t,n,r){ft(e,t)||(r===e.linenumber?lt(e,t):Ae.luaX_syntaxerror(e,Ee.luaO_pushfstring(e.L,s("%s expected (to close %s at line %d)"),Ae.luaX_token2str(e,t),Ae.luaX_token2str(e,n),r)))},gt=function(e){ht(e,et.TK_NAME);var t=e.t.seminfo.ts;return Ae.luaX_next(e),t},mt=function(e,t,n){e.f=e.t=B,e.k=t,e.u.info=n},yt=function(e,t,n){mt(t,it.VK,be(e.fs,n))},kt=function(e,t){yt(e,t,gt(e))},_t=function(e,t){var n=e.fs,a=e.dyd,o=function(e,t){var n=e.fs,r=n.f;return r.locvars[n.nlocvars]=new Ee.LocVar,r.locvars[n.nlocvars].varname=t,n.nlocvars++}(e,t);ct(n,a.actvar.n+1-n.firstlocal,200,s("local variables",!0)),a.actvar.arr[a.actvar.n]=new(function(){return r((function e(){i(this,e),this.idx=NaN}))}()),a.actvar.arr[a.actvar.n].idx=o,a.actvar.n++},bt=function(e,t){_t(e,Ae.luaX_newstring(e,s(t,!0)))},wt=function(e,t){var n=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Te(n<e.nlocvars),e.f.locvars[n]},xt=function(e,t){var n=e.fs;for(n.nactvar=n.nactvar+t;t;t--)wt(n,n.nactvar-t).startpc=n.pc},At=function(e,t,n){var r=e.f;return ct(e,e.nups+1,xe.MAXUPVAL,s("upvalues",!0)),r.upvalues[e.nups]={instack:n.k===it.VLOCAL,idx:n.u.info,name:t},e.nups++},St=function e(t,n,r,i){if(null===t)mt(r,it.VVOID,0);else{var a=function(e,t){for(var n=e.nactvar-1;n>=0;n--)if(nt(t,wt(e,n).varname))return n;return-1}(t,n);if(a>=0)mt(r,it.VLOCAL,a),i||function(e,t){for(var n=e.bl;n.nactvar>t;)n=n.previous;n.upval=1}(t,a);else{var o=function(e,t){for(var n=e.f.upvalues,r=0;r<e.nups;r++)if(nt(n[r].name,t))return r;return-1}(t,n);if(o<0){if(e(t.prev,n,r,0),r.k===it.VVOID)return;o=At(t,n,r)}mt(r,it.VUPVAL,o)}}},Lt=function(e,t){var n=gt(e),r=e.fs;if(St(r,n,t,1),t.k===it.VVOID){var i=new at;St(r,e.envn,t,1),Te(t.k!==it.VVOID),yt(e,i,n),ne(r,t,i)}},Ot=function(e,t,n,r){var i=e.fs,a=t-n;if(tt(r.k))++a<0&&(a=0),ke(i,r,a),a>1&&de(i,a-1);else if(r.k!==it.VVOID&&$(i,r),a>0){var o=i.freereg;de(i,a),se(i,o,a)}n>t&&(e.fs.freereg-=n-t)},Tt=function(e){var t=e.L;++t.nCcalls,ct(e.fs,t.nCcalls,Le,s("JS levels",!0))},Et=function(e){return e.L.nCcalls--},Ct=function(e,t,n){var r=e.fs,i=e.dyd.gt,a=i.arr[t];if(Te(nt(a.name,n.name)),a.nactvar<n.nactvar){var o=wt(r,a.nactvar).varname,u=Ee.luaO_pushfstring(e.L,s("<goto %s> at line %d jumps into the scope of local '%s'"),a.name.getstr(),a.line,o.getstr());ut(e,u)}le(r,a.pc,n.pc);for(var l=t;l<i.n-1;l++)i.arr[l]=i.arr[l+1];i.n--},Mt=function(e,t){for(var n=e.fs.bl,r=e.dyd,i=r.gt.arr[t],a=n.firstlabel;a<r.label.n;a++){var o=r.label.arr[a];if(nt(o.name,i.name))return i.nactvar>o.nactvar&&(n.upval||r.label.n>n.firstlabel)&&ue(e.fs,i.pc,o.nactvar),Ct(e,t,o),!0}return!1},Nt=function(e,t,n,a,o){var s=t.n;return t.arr[s]=new(function(){return r((function e(){i(this,e),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}))}()),t.arr[s].name=n,t.arr[s].line=a,t.arr[s].nactvar=e.fs.nactvar,t.arr[s].pc=o,t.n=s+1,s},Rt=function(e,t){for(var n=e.dyd.gt,r=e.fs.bl.firstgoto;r<n.n;)nt(n.arr[r].name,t.name)?Ct(e,r,t):r++},Pt=function(e,t,n){t.isloop=n,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Te(e.freereg===e.nactvar)},It=function(e,t,n){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=B,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;var r=t.f;r.source=e.source,r.maxstacksize=2,Pt(t,n,!1)},Dt=function(e){var t=e.bl,n=e.ls;if(t.previous&&t.upval){var r=ae(e);ue(e,r,t.nactvar),ce(e,r)}t.isloop&&function(e){var t=Je(e.L,"break"),n=Nt(e,e.dyd.label,t,0,e.fs.pc);Rt(e,e.dyd.label.arr[n])}(n),e.bl=t.previous,function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)wt(e,--e.nactvar).endpc=e.pc}(e,t.nactvar),Te(t.nactvar===e.nactvar),e.freereg=e.nactvar,n.dyd.label.n=t.firstlabel,t.previous?function(e,t){for(var n=t.firstgoto,r=e.ls.dyd.gt;n<r.n;){var i=r.arr[n];i.nactvar>t.nactvar&&(t.upval&&ue(e,i.pc,t.nactvar),i.nactvar=t.nactvar),Mt(e.ls,n)||n++}}(e,t):t.firstgoto<n.dyd.gt.n&&function(e,t){var n=Ae.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";n=Ee.luaO_pushfstring(e.L,s(n),t.name.getstr(),t.line),ut(e,n)}(n,n.dyd.gt.arr[t.firstgoto])},Ut=function(e){var t=e.fs;pe(t,0,0),Dt(t),Te(null===t.bl),e.fs=t.prev},Bt=function(e,t){switch(e.t.token){case et.TK_ELSE:case et.TK_ELSEIF:case et.TK_END:case et.TK_EOS:return!0;case et.TK_UNTIL:return t;default:return!1}},Vt=function(e){for(;!Bt(e,1);){if(e.t.token===et.TK_RETURN)return void cn(e);cn(e)}},Ft=function(e,t){var n=e.fs,r=new at;Q(n,t),Ae.luaX_next(e),kt(e,r),ne(n,t,r)},zt=function(e,t){Ae.luaX_next(e),Zt(e,t),J(e.fs,t),dt(e,93)},jt=function(e,t){var n=e.fs,r=e.fs.freereg,i=new at,a=new at;e.t.token===et.TK_NAME?(ct(n,t.nh,Oe,s("items in a constructor",!0)),kt(e,i)):zt(e,i),t.nh++,dt(e,61);var o=X(n,i);Zt(e,a),z(n,Ve,t.t.u.info,o,X(n,a)),n.freereg=r},Ht=function(e,t){t.v.k!==it.VVOID&&($(e,t.v),t.v.k=it.VVOID,t.tostore===Ge&&(ge(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Gt=function(e,t){Zt(e,t.v),ct(e.fs,t.na,Oe,s("items in a constructor",!0)),t.na++,t.tostore++},Kt=function(e,t){switch(e.t.token){case et.TK_NAME:61!==Ae.luaX_lookahead(e)?Gt(e,t):jt(e,t);break;case 91:jt(e,t);break;default:Gt(e,t)}},Wt=function(e,t){var n=e.fs,a=e.linenumber,s=z(n,Be,0,0,0),u=new(function(){return r((function e(){i(this,e),this.v=new at,this.t=new at,this.nh=NaN,this.na=NaN,this.tostore=NaN}))}());u.na=u.nh=u.tostore=0,u.t=t,mt(t,it.VRELOCABLE,s),mt(u.v,it.VVOID,0),$(e.fs,t),dt(e,123);do{if(Te(u.v.k===it.VVOID||u.tostore>0),125===e.t.token)break;Ht(n,u),Kt(e,u)}while(ft(e,44)||ft(e,59));vt(e,125,123,a),function(e,t){0!==t.tostore&&(tt(t.v.k)?(me(e,t.v),ge(e,t.t.u.info,t.na,o),t.na--):(t.v.k!==it.VVOID&&$(e,t.v),ge(e,t.t.u.info,t.na,t.tostore)))}(n,u),Ke(n.f.code[s],Ee.luaO_int2fb(u.na)),We(n.f.code[s],Ee.luaO_int2fb(u.nh))},Xt=function(e,t,n,r){var i=new ot,a=new rt;i.f=function(e){var t=e.L,n=new Ze(t),r=e.fs;return r.f.p[r.np++]=n,n}(e),i.f.linedefined=r,It(e,i,a),dt(e,40),n&&(bt(e,"self"),xt(e,1)),function(e){var t=e.fs,n=t.f,r=0;if(n.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case et.TK_NAME:_t(e,gt(e)),r++;break;case et.TK_DOTS:Ae.luaX_next(e),n.is_vararg=!0;break;default:Ae.luaX_syntaxerror(e,s("<name> or '...' expected",!0))}}while(!n.is_vararg&&ft(e,44));xt(e,r),n.numparams=t.nactvar,de(t,t.nactvar)}(e),dt(e,41),Vt(e),i.f.lastlinedefined=e.linenumber,vt(e,et.TK_END,et.TK_FUNCTION,r),function(e,t){var n=e.fs.prev;mt(t,it.VRELOCABLE,j(n,Re,0,n.np-1)),$(n,t)}(e,t),Ut(e)},qt=function(e,t){var n=1;for(Zt(e,t);ft(e,44);)$(e.fs,t),Zt(e,t),n++;return n},Qt=function(e,t,n){var r,i=e.fs,a=new at;switch(e.t.token){case 40:Ae.luaX_next(e),41===e.t.token?a.k=it.VVOID:(qt(e,a),me(i,a)),vt(e,41,40,n);break;case 123:Wt(e,a);break;case et.TK_STRING:yt(e,a,e.t.seminfo.ts),Ae.luaX_next(e);break;default:Ae.luaX_syntaxerror(e,s("function arguments expected",!0))}Te(t.k===it.VNONRELOC);var u=t.u.info;tt(a.k)?r=o:(a.k!==it.VVOID&&$(i,a),r=i.freereg-(u+1)),mt(t,it.VCALL,z(i,Ne,u,r+1,2)),Y(i,n),i.freereg=u+1},$t=function(e,t){var n=e.fs,r=e.linenumber;for(function(e,t){switch(e.t.token){case 40:var n=e.linenumber;return Ae.luaX_next(e),Zt(e,t),vt(e,41,40,n),void W(e.fs,t);case et.TK_NAME:return void Lt(e,t);default:Ae.luaX_syntaxerror(e,s("unexpected symbol",!0))}}(e,t);;)switch(e.t.token){case 46:Ft(e,t);break;case 91:var i=new at;Q(n,t),zt(e,i),ne(n,t,i);break;case 58:var a=new at;Ae.luaX_next(e),kt(e,a),ve(n,t,a),Qt(e,t,r);break;case 40:case et.TK_STRING:case 123:$(n,t),Qt(e,t,r);break;default:return}},Jt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Yt=function e(t,n,r){Tt(t);var i=function(e){switch(e){case et.TK_NOT:return D;case 45:return I;case 126:return R;case 35:return P;default:return U}}(t.t.token);if(i!==U){var a=t.linenumber;Ae.luaX_next(t),e(t,n,12),he(t.fs,i,n,a)}else!function(e,t){switch(e.t.token){case et.TK_FLT:mt(t,it.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case et.TK_INT:mt(t,it.VKINT,0),t.u.ival=e.t.seminfo.i;break;case et.TK_STRING:yt(e,t,e.t.seminfo.ts);break;case et.TK_NIL:mt(t,it.VNIL,0);break;case et.TK_TRUE:mt(t,it.VTRUE,0);break;case et.TK_FALSE:mt(t,it.VFALSE,0);break;case et.TK_DOTS:var n=e.fs;pt(e,n.f.is_vararg,s("cannot use '...' outside a vararg function",!0)),mt(t,it.VVARARG,z(n,He,0,1,0));break;case 123:return void Wt(e,t);case et.TK_FUNCTION:return Ae.luaX_next(e),void Xt(e,t,0,e.linenumber);default:return void $t(e,t)}Ae.luaX_next(e)}(t,n);for(var o=function(e){switch(e){case 43:return c;case 45:return M;case 42:return A;case 37:return x;case 94:return T;case 47:return g;case et.TK_IDIV:return _;case 38:return h;case 124:return d;case 126:return p;case et.TK_SHL:return E;case et.TK_SHR:return C;case et.TK_CONCAT:return v;case et.TK_NE:return S;case et.TK_EQ:return m;case 60:return w;case et.TK_LE:return b;case 62:return k;case et.TK_GE:return y;case et.TK_AND:return f;case et.TK_OR:return O;default:return L}}(t.t.token);o!==L&&Jt[o].left>r;){var u=new at,l=t.linenumber;Ae.luaX_next(t),re(t.fs,o,n);var N=e(t,u,Jt[o].right);fe(t.fs,o,n,u,l),o=N}return Et(t),o},Zt=function(e,t){Yt(e,t,0)},en=function(e){var t=e.fs,n=new rt;Pt(t,n,0),Vt(e),Dt(t)},tn=r((function e(){i(this,e),this.prev=null,this.v=new at})),nn=function e(t,n,r){var i=new at;if(pt(t,function(e){return it.VLOCAL<=e&&e<=it.VINDEXED}(n.v.k),s("syntax error",!0)),ft(t,44)){var a=new tn;a.prev=n,$t(t,a.v),a.v.k!==it.VINDEXED&&function(e,t,n){for(var r=e.fs,i=r.freereg,a=!1;t;t=t.prev)t.v.k===it.VINDEXED&&(t.v.u.ind.vt===n.k&&t.v.u.ind.t===n.u.info&&(a=!0,t.v.u.ind.vt=it.VLOCAL,t.v.u.ind.t=i),n.k===it.VLOCAL&&t.v.u.ind.idx===n.u.info&&(a=!0,t.v.u.ind.idx=i));if(a){var o=n.k===it.VLOCAL?Ue:De;z(r,o,i,n.u.info,0),de(r,1)}}(t,n,a.v),ct(t.fs,r+t.L.nCcalls,Le,s("JS levels",!0)),e(t,a,r+1)}else{dt(t,61);var o=qt(t,i);if(o===r)return ye(t.fs,i),void _e(t.fs,n.v,i);Ot(t,r,o,i)}mt(i,it.VNONRELOC,t.fs.freereg-1),_e(t.fs,n.v,i)},rn=function(e){var t=new at;return Zt(e,t),t.k===it.VNIL&&(t.k=it.VFALSE),te(e.fs,t),t.f},an=function(e,t){var n,r=e.linenumber;ft(e,et.TK_GOTO)?n=gt(e):(Ae.luaX_next(e),n=Je(e.L,"break"));var i=Nt(e,e.dyd.gt,n,r,t);Mt(e,i)},on=function(e,t,n){var r,i=e.fs,a=e.dyd.label;!function(e,t,n){for(var r=e.bl.firstlabel;r<t.n;r++)if(nt(n,t.arr[r].name)){var i=Ee.luaO_pushfstring(e.ls.L,s("label '%s' already defined on line %d",!0),n.getstr(),t.arr[r].line);ut(e.ls,i)}}(i,a,t),dt(e,et.TK_DBCOLON),r=Nt(e,a,t,n,Z(i)),function(e){for(;59===e.t.token||e.t.token===et.TK_DBCOLON;)cn(e)}(e),Bt(e,0)&&(a.arr[r].nactvar=i.bl.nactvar),Rt(e,a.arr[r])},sn=function(e){var t=new at;return Zt(e,t),$(e.fs,t),Te(t.k===it.VNONRELOC),t.u.info},un=function(e,t,n,r,i){var a,o=new rt,s=e.fs;xt(e,3),dt(e,et.TK_DO);var u=i?H(s,Ie,t,B):ae(s);Pt(s,o,0),xt(e,r),de(s,r),en(e),Dt(s),ce(s,u),i?a=H(s,Pe,t,B):(z(s,ze,t,0,r),Y(s,n),a=H(s,je,t+2,B)),le(s,a,u+1),Y(s,n)},ln=function(e,t){var n,r=new rt,i=e.fs,a=new at;if(Ae.luaX_next(e),Zt(e,a),dt(e,et.TK_THEN),e.t.token===et.TK_GOTO||e.t.token===et.TK_BREAK){for(ee(e.fs,a),Pt(i,r,!1),an(e,a.t);ft(e,59););if(Bt(e,0))return Dt(i),t;n=ae(i)}else te(e.fs,a),Pt(i,r,!1),n=a.f;return Vt(e),Dt(i),e.t.token!==et.TK_ELSE&&e.t.token!==et.TK_ELSEIF||(t=K(i,t,ae(i))),ce(i,n),t},cn=function(e){var t=e.linenumber;switch(Tt(e),e.t.token){case 59:Ae.luaX_next(e);break;case et.TK_IF:!function(e,t){var n=e.fs,r=B;for(r=ln(e,r);e.t.token===et.TK_ELSEIF;)r=ln(e,r);ft(e,et.TK_ELSE)&&en(e),vt(e,et.TK_END,et.TK_IF,t),ce(n,r)}(e,t);break;case et.TK_WHILE:!function(e,t){var n=e.fs,r=new rt;Ae.luaX_next(e);var i=Z(n),a=rn(e);Pt(n,r,1),dt(e,et.TK_DO),en(e),oe(n,i),vt(e,et.TK_END,et.TK_WHILE,t),Dt(n),ce(n,a)}(e,t);break;case et.TK_DO:Ae.luaX_next(e),en(e),vt(e,et.TK_END,et.TK_DO,t);break;case et.TK_FOR:!function(e,t){var n=e.fs,r=new rt;Pt(n,r,1),Ae.luaX_next(e);var i=gt(e);switch(e.t.token){case 61:!function(e,t,n){var r=e.fs,i=r.freereg;bt(e,"(for index)"),bt(e,"(for limit)"),bt(e,"(for step)"),_t(e,t),dt(e,61),sn(e),dt(e,44),sn(e),ft(e,44)?sn(e):(G(r,r.freereg,ie(r,1)),de(r,1)),un(e,i,n,1,1)}(e,i,t);break;case 44:case et.TK_IN:!function(e,t){var n=e.fs,r=new at,i=4,a=n.freereg;for(bt(e,"(for generator)"),bt(e,"(for state)"),bt(e,"(for control)"),_t(e,t);ft(e,44);)_t(e,gt(e)),i++;dt(e,et.TK_IN);var o=e.linenumber;Ot(e,3,qt(e,r),r),F(n,3),un(e,a,o,i-3,0)}(e,i);break;default:Ae.luaX_syntaxerror(e,s("'=' or 'in' expected",!0))}vt(e,et.TK_END,et.TK_FOR,t),Dt(n)}(e,t);break;case et.TK_REPEAT:!function(e,t){var n=e.fs,r=Z(n),i=new rt,a=new rt;Pt(n,i,1),Pt(n,a,0),Ae.luaX_next(e),Vt(e),vt(e,et.TK_UNTIL,et.TK_REPEAT,t);var o=rn(e);a.upval&&ue(n,o,a.nactvar),Dt(n),le(n,o,r),Dt(n)}(e,t);break;case et.TK_FUNCTION:!function(e,t){var n=new at,r=new at;Ae.luaX_next(e);var i=function(e,t){var n=0;for(Lt(e,t);46===e.t.token;)Ft(e,t);return 58===e.t.token&&(n=1,Ft(e,t)),n}(e,n);Xt(e,r,i,t),_e(e.fs,n,r),Y(e.fs,t)}(e,t);break;case et.TK_LOCAL:Ae.luaX_next(e),ft(e,et.TK_FUNCTION)?function(e){var t=new at,n=e.fs;_t(e,gt(e)),xt(e,1),Xt(e,t,0,e.linenumber),wt(n,t.u.info).startpc=n.pc}(e):function(e){var t,n=0,r=new at;do{_t(e,gt(e)),n++}while(ft(e,44));ft(e,61)?t=qt(e,r):(r.k=it.VVOID,t=0),Ot(e,n,t,r),xt(e,n)}(e);break;case et.TK_DBCOLON:Ae.luaX_next(e),on(e,gt(e),t);break;case et.TK_RETURN:Ae.luaX_next(e),function(e){var t,n,r=e.fs,i=new at;Bt(e,1)||59===e.t.token?t=n=0:(n=qt(e,i),tt(i.k)?(me(r,i),i.k===it.VCALL&&1===n&&(Xe(V(r,i),Fe),Te(V(r,i).A===r.nactvar)),t=r.nactvar,n=o):1===n?t=q(r,i):($(r,i),t=r.nactvar,Te(n===r.freereg-t))),pe(r,t,n),ft(e,59)}(e);break;case et.TK_BREAK:case et.TK_GOTO:an(e,ae(e.fs));break;default:!function(e){var t=e.fs,n=new tn;$t(e,n.v),61===e.t.token||44===e.t.token?(n.prev=null,nn(e,n,1)):(pt(e,n.v.k===it.VCALL,s("syntax error",!0)),We(V(t,n.v),1))}(e)}Te(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,Et(e)};e.exports.Dyndata=function(){return r((function e(){i(this,e),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new st,this.label=new st}))}(),e.exports.expkind=it,e.exports.expdesc=at,e.exports.luaY_parser=function(e,t,n,r,i,a){var o=new Ae.LexState,s=new ot,u=xe.luaF_newLclosure(e,1);return we.luaD_inctop(e),e.stack[e.top-1].setclLvalue(u),o.h=Ye.luaH_new(e),we.luaD_inctop(e),e.stack[e.top-1].sethvalue(o.h),s.f=u.p=new Ze(e),s.f.source=$e(e,i),o.buff=n,o.dyd=r,r.actvar.n=r.gt.n=r.label.n=0,Ae.luaX_setinput(e,o,t,s.f.source,a),function(e,t){var n=new rt,r=new at;It(e,t,n),t.f.is_vararg=!0,mt(r,it.VLOCAL,0),At(t,e.envn,r),Ae.luaX_next(e),Vt(e),ht(e,et.TK_EOS),Ut(e)}(o,s),Te(!s.prev&&1===s.nups&&!o.fs),Te(0===r.actvar.n&&0===r.gt.n&&0===r.label.n),delete e.stack[--e.top],u},e.exports.vkisinreg=function(e){return e===it.VNONRELOC||e===it.VLOCAL}},function(e,t,n){"use strict";var r,i,a=n(2),o=a.LUA_MULTRET,s=a.LUA_OK,u=a.LUA_TFUNCTION,l=a.LUA_TNIL,c=a.LUA_TNONE,f=a.LUA_TNUMBER,h=a.LUA_TSTRING,d=a.LUA_TTABLE,p=a.LUA_VERSION,v=a.LUA_YIELD,g=a.lua_call,m=a.lua_callk,y=a.lua_concat,k=a.lua_error,_=a.lua_getglobal,b=a.lua_geti,w=a.lua_getmetatable,x=a.lua_gettop,A=a.lua_insert,S=a.lua_isnil,L=a.lua_isnone,O=a.lua_isstring,T=a.lua_load,E=a.lua_next,C=a.lua_pcallk,M=a.lua_pop,N=a.lua_pushboolean,R=a.lua_pushcfunction,P=a.lua_pushglobaltable,I=a.lua_pushinteger,D=a.lua_pushliteral,U=a.lua_pushnil,B=a.lua_pushstring,V=a.lua_pushvalue,F=a.lua_rawequal,z=a.lua_rawget,j=a.lua_rawlen,H=a.lua_rawset,G=a.lua_remove,K=a.lua_replace,W=a.lua_rotate,X=a.lua_setfield,q=a.lua_setmetatable,Q=a.lua_settop,$=a.lua_setupvalue,J=a.lua_stringtonumber,Y=a.lua_toboolean,Z=a.lua_tolstring,ee=a.lua_tostring,te=a.lua_type,ne=a.lua_typename,re=n(7),ie=re.luaL_argcheck,ae=re.luaL_checkany,oe=re.luaL_checkinteger,se=re.luaL_checkoption,ue=re.luaL_checkstack,le=re.luaL_checktype,ce=re.luaL_error,fe=re.luaL_getmetafield,he=re.luaL_loadbufferx,de=re.luaL_loadfile,pe=re.luaL_loadfilex,ve=re.luaL_optinteger,ge=re.luaL_optstring,me=re.luaL_setfuncs,ye=re.luaL_tolstring,ke=re.luaL_where,_e=n(5),be=_e.to_jsstring,we=_e.to_luastring;if("function"==typeof TextDecoder){var xe="",Ae=new TextDecoder("utf-8");r=function(e){xe+=Ae.decode(e,{stream:!0})};var Se=new Uint8Array(0);i=function(){xe+=Ae.decode(Se),console.log(xe),xe=""}}else{var Le=[];r=function(t){try{t=be(t)}catch(e){var n=new Uint8Array(t.length);n.set(t),t=n}Le.push(t)},i=function(){console.log.apply(console.log,Le),Le=[]}}var Oe=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map((function(e){return we(e)})),Te=function(e){return le(e,1,d),Q(e,2),E(e,1)?2:(U(e),1)},Ee=function(e){var t=oe(e,2)+1;return I(e,t),b(e,1,t)===l?1:2},Ce=function(e){var t=ve(e,2,1);return Q(e,1),te(e,1)===h&&t>0&&(ke(e,t),V(e,1),y(e,2)),k(e)},Me=function(e,t,n){return t!==s&&t!==v?(N(e,0),V(e,-2),2):x(e)-n},Ne=function(e,t,n){return t===s?(0!==n&&(V(e,n),$(e,-2,1)||M(e,1)),1):(U(e),A(e,-2),2)},Re=function(e,t){return ue(e,2,"too many nested functions"),V(e,1),g(e,0,1),S(e,-1)?(M(e,1),null):(O(e,-1)||ce(e,we("reader function must return a string")),K(e,5),ee(e,5))},Pe=function(e,t,n){return x(e)-1},Ie={assert:function(e){return Y(e,1)?x(e):(ae(e,1),G(e,1),D(e,"assertion failed!"),Q(e,1),Ce(e))},collectgarbage:function(e){se(e,1,"collect",Oe),ve(e,2,0),ce(e,we("lua_gc not implemented"))},dofile:function(e){var t=ge(e,1,null);return Q(e,1),de(e,t)!==s?k(e):(m(e,0,o,0,Pe),Pe(e))},error:Ce,getmetatable:function(e){return ae(e,1),w(e,1)?(fe(e,1,we("__metatable",!0)),1):(U(e),1)},ipairs:function(e){return ae(e,1),R(e,Ee),V(e,1),I(e,0),3},load:function(e){var t,n=ee(e,1),r=ge(e,3,"bt"),i=L(e,4)?0:4;if(null!==n){var a=ge(e,2,n);t=he(e,n,n.length,a,r)}else{var o=ge(e,2,"=(load)");le(e,1,u),Q(e,5),t=T(e,Re,null,o,r)}return Ne(e,t,i)},loadfile:function(e){var t=ge(e,1,null),n=ge(e,2,null),r=L(e,3)?0:3,i=pe(e,t,n);return Ne(e,i,r)},next:Te,pairs:function(e){return function(e,t,n,r){return ae(e,1),fe(e,1,t)===l?(R(e,r),V(e,1),U(e)):(V(e,1),g(e,1,3)),3}(e,we("__pairs",!0),0,Te)},pcall:function(e){ae(e,1),N(e,1),A(e,1);var t=C(e,x(e)-2,o,0,0,Me);return Me(e,t,0)},print:function(e){var t=x(e);_(e,we("tostring",!0));for(var n=1;n<=t;n++){V(e,-1),V(e,n),g(e,1,1);var a=Z(e,-1);if(null===a)return ce(e,we("'tostring' must return a string to 'print'"));n>1&&r(we("\t")),r(a),M(e,1)}return i(),0},rawequal:function(e){return ae(e,1),ae(e,2),N(e,F(e,1,2)),1},rawget:function(e){return le(e,1,d),ae(e,2),Q(e,2),z(e,1),1},rawlen:function(e){var t=te(e,1);return ie(e,t===d||t===h,1,"table or string expected"),I(e,j(e,1)),1},rawset:function(e){return le(e,1,d),ae(e,2),ae(e,3),Q(e,3),H(e,1),1},select:function(e){var t=x(e);if(te(e,1)===h&&35===ee(e,1)[0])return I(e,t-1),1;var n=oe(e,1);return n<0?n=t+n:n>t&&(n=t),ie(e,1<=n,1,"index out of range"),t-n},setmetatable:function(e){var t=te(e,2);return le(e,1,d),ie(e,t===l||t===d,2,"nil or table expected"),fe(e,1,we("__metatable",!0))!==l?ce(e,we("cannot change a protected metatable")):(Q(e,2),q(e,1),1)},tonumber:function(e){if(te(e,2)<=0){if(ae(e,1),te(e,1)===f)return Q(e,1),1;var t=ee(e,1);if(null!==t&&J(e,t)===t.length+1)return 1}else{var n=oe(e,2);le(e,1,h);var r=ee(e,1);ie(e,2<=n&&n<=36,2,"base out of range");var i=function(e,t){try{e=be(e)}catch(e){return null}var n=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(e);if(!n)return null;var r=parseInt(n[1]+n[2],t);return isNaN(r)?null:0|r}(r,n);if(null!==i)return I(e,i),1}return U(e),1},tostring:function(e){return ae(e,1),ye(e,1),1},type:function(e){var t=te(e,1);return ie(e,t!==c,1,"value expected"),B(e,ne(e,t)),1},xpcall:function(e){var t=x(e);le(e,2,u),N(e,1),V(e,1),W(e,3,2);var n=C(e,t-2,o,2,2,Me);return Me(e,n,2)}};e.exports.luaopen_base=function(e){return P(e),me(e,Ie,0),V(e,-1),X(e,-2,we("_G")),D(e,p),X(e,-2,we("_VERSION")),1}},function(e,t,n){"use strict";var r=n(2),i=r.LUA_OK,a=r.LUA_TFUNCTION,o=r.LUA_TSTRING,s=r.LUA_YIELD,u=r.lua_Debug,l=r.lua_checkstack,c=r.lua_concat,f=r.lua_error,h=r.lua_getstack,d=r.lua_gettop,p=r.lua_insert,v=r.lua_isyieldable,g=r.lua_newthread,m=r.lua_pop,y=r.lua_pushboolean,k=r.lua_pushcclosure,_=r.lua_pushliteral,b=r.lua_pushthread,w=r.lua_pushvalue,x=r.lua_resume,A=r.lua_status,S=r.lua_tothread,L=r.lua_type,O=r.lua_upvalueindex,T=r.lua_xmove,E=r.lua_yield,C=n(7),M=C.luaL_argcheck,N=C.luaL_checktype,R=C.luaL_newlib,P=C.luaL_where,I=function(e){var t=S(e,1);return M(e,t,1,"thread expected"),t},D=function(e,t,n){if(!l(t,n))return _(e,"too many arguments to resume"),-1;if(A(t)===i&&0===d(t))return _(e,"cannot resume dead coroutine"),-1;T(e,t,n);var r=x(t,e,n);if(r===i||r===s){var a=d(t);return l(e,a+1)?(T(t,e,a),a):(m(t,a),_(e,"too many results to resume"),-1)}return T(t,e,1),-1},U=function(e){var t=S(e,O(1)),n=D(e,t,d(e));return n<0?(L(e,-1)===o&&(P(e,1),p(e,-2),c(e,2)),f(e)):n},B=function(e){N(e,1,a);var t=g(e);return w(e,1),T(e,t,1),1},V={create:B,isyieldable:function(e){return y(e,v(e)),1},resume:function(e){var t=I(e),n=D(e,t,d(e)-1);return n<0?(y(e,0),p(e,-2),2):(y(e,1),p(e,-(n+1)),n+1)},running:function(e){return y(e,b(e)),2},status:function(e){var t=I(e);if(e===t)_(e,"running");else switch(A(t)){case s:_(e,"suspended");break;case i:var n=new u;h(t,0,n)>0?_(e,"normal"):0===d(t)?_(e,"dead"):_(e,"suspended");break;default:_(e,"dead")}return 1},wrap:function(e){return B(e),k(e,U,1),1},yield:function(e){return E(e,d(e))}};e.exports.luaopen_coroutine=function(e){return R(e,V),1}},function(e,t,n){"use strict";var r=n(3).LUA_MAXINTEGER,i=n(2),a=i.LUA_OPEQ,o=i.LUA_OPLT,s=i.LUA_TFUNCTION,u=i.LUA_TNIL,l=i.LUA_TTABLE,c=i.lua_call,f=i.lua_checkstack,h=i.lua_compare,d=i.lua_createtable,p=i.lua_geti,v=i.lua_getmetatable,g=i.lua_gettop,m=i.lua_insert,y=i.lua_isnil,k=i.lua_isnoneornil,_=i.lua_isstring,b=i.lua_pop,w=i.lua_pushinteger,x=i.lua_pushnil,A=i.lua_pushstring,S=i.lua_pushvalue,L=i.lua_rawget,O=i.lua_setfield,T=i.lua_seti,E=i.lua_settop,C=i.lua_toboolean,M=i.lua_type,N=n(7),R=N.luaL_Buffer,P=N.luaL_addlstring,I=N.luaL_addvalue,D=N.luaL_argcheck,U=N.luaL_buffinit,B=N.luaL_checkinteger,V=N.luaL_checktype,F=N.luaL_error,z=N.luaL_len,j=N.luaL_newlib,H=N.luaL_opt,G=N.luaL_optinteger,K=N.luaL_optlstring,W=N.luaL_pushresult,X=N.luaL_typename,q=n(17),Q=n(5).to_luastring,$=function(e,t,n){return A(e,t),L(e,-n)!==u},J=function(e,t,n){if(M(e,t)!==l){var r=1;!v(e,t)||1&n&&!$(e,Q("__index",!0),++r)||2&n&&!$(e,Q("__newindex",!0),++r)||4&n&&!$(e,Q("__len",!0),++r)?V(e,t,l):b(e,r)}},Y=function(e,t,n){return J(e,t,4|n),z(e,t)},Z=function(e,t,n){p(e,1,n),_(e,-1)||F(e,Q("invalid value (%s) at index %d in table for 'concat'"),X(e,-1),n),I(t)},ee=function(e,t,n){T(e,1,t),T(e,1,n)},te=function(e,t,n){if(y(e,2))return h(e,t,n,o);S(e,2),S(e,t-1),S(e,n-2),c(e,2,1);var r=C(e,-1);return b(e,1),r},ne=function(e,t,n){for(var r=t,i=n-1;;){for(;p(e,1,++r),te(e,-1,-2);)r==n-1&&F(e,Q("invalid order function for sorting")),b(e,1);for(;p(e,1,--i),te(e,-3,-1);)i<r&&F(e,Q("invalid order function for sorting")),b(e,1);if(i<r)return b(e,1),ee(e,n-1,r),r;ee(e,r,i)}},re=function(e,t,n){var r=Math.floor((t-e)/4),i=n%(2*r)+(e+r);return q.lua_assert(e+r<=i&&i<=t-r),i},ie=function e(t,n,r,i){for(;n<r;){if(p(t,1,n),p(t,1,r),te(t,-1,-2)?ee(t,n,r):b(t,2),r-n==1)return;var a=void 0,o=void 0;if(a=r-n<100||0===i?Math.floor((n+r)/2):re(n,r,i),p(t,1,a),p(t,1,n),te(t,-2,-1)?ee(t,a,n):(b(t,1),p(t,1,r),te(t,-1,-2)?ee(t,a,r):b(t,2)),r-n==2)return;p(t,1,a),S(t,-1),p(t,1,r-1),ee(t,a,r-1),(a=ne(t,n,r))-n<r-a?(e(t,n,a-1,i),o=a-n,n=a+1):(e(t,a+1,r,i),o=r-a,r=a-1),(r-n)/128>o&&(i=Math.floor(4294967296*Math.random()))}},ae={concat:function(e){var t=Y(e,1,1),n=K(e,2,""),r=n.length,i=G(e,3,1);t=G(e,4,t);var a=new R;for(U(e,a);i<t;i++)Z(e,a,i),P(a,n,r);return i===t&&Z(e,a,i),W(a),1},insert:function(e){var t,n=Y(e,1,3)+1;switch(g(e)){case 2:t=n;break;case 3:t=B(e,2),D(e,1<=t&&t<=n,2,"position out of bounds");for(var r=n;r>t;r--)p(e,1,r-1),T(e,1,r);break;default:return F(e,"wrong number of arguments to 'insert'")}return T(e,1,t),0},move:function(e){var t=B(e,2),n=B(e,3),i=B(e,4),o=k(e,5)?1:5;if(J(e,1,1),J(e,o,2),n>=t){D(e,t>0||n<r+t,3,"too many elements to move");var s=n-t+1;if(D(e,i<=r-s+1,4,"destination wrap around"),i>n||i<=t||1!==o&&1!==h(e,1,o,a))for(var u=0;u<s;u++)p(e,1,t+u),T(e,o,i+u);else for(var l=s-1;l>=0;l--)p(e,1,t+l),T(e,o,i+l)}return S(e,o),1},pack:function(e){var t=g(e);d(e,t,1),m(e,1);for(var n=t;n>=1;n--)T(e,1,n);return w(e,t),O(e,1,Q("n")),1},remove:function(e){var t=Y(e,1,3),n=G(e,2,t);for(n!==t&&D(e,1<=n&&n<=t+1,1,"position out of bounds"),p(e,1,n);n<t;n++)p(e,1,n+1),T(e,1,n);return x(e),T(e,1,n),1},sort:function(e){var t=Y(e,1,3);return t>1&&(D(e,t<r,1,"array too big"),k(e,2)||V(e,2,s),E(e,2),ie(e,1,t,0)),0},unpack:function(e){var t=G(e,2,1),n=H(e,B,3,z(e,1));if(t>n)return 0;var r=n-t;if(r>=Number.MAX_SAFE_INTEGER||!f(e,++r))return F(e,Q("too many results to unpack"));for(;t<n;t++)p(e,1,t);return p(e,1,n),r}};e.exports.luaopen_table=function(e){return j(e,ae),1}},function(e,t,n){"use strict";var r=n(2),i=r.LUA_TNIL,a=r.LUA_TTABLE,o=(r.lua_close,r.lua_createtable),s=r.lua_getfield,u=(r.lua_isboolean,r.lua_isnoneornil),l=r.lua_pop,c=(r.lua_pushboolean,r.lua_pushfstring),f=r.lua_pushinteger,h=(r.lua_pushliteral,r.lua_pushnil,r.lua_pushnumber),d=(r.lua_pushstring,r.lua_setfield),p=r.lua_settop,v=(r.lua_toboolean,r.lua_tointegerx),g=n(7),m=g.luaL_Buffer,y=g.luaL_addchar,k=g.luaL_addstring,_=g.luaL_argerror,b=g.luaL_buffinit,w=g.luaL_checkinteger,x=(g.luaL_checkstring,g.luaL_checktype),A=g.luaL_error,S=(g.luaL_execresult,g.luaL_fileresult,g.luaL_newlib),L=(g.luaL_optinteger,g.luaL_optlstring),O=(g.luaL_optstring,g.luaL_pushresult),T=n(5),E=T.luastring_eq,C=(T.to_jsstring,T.to_luastring),M=C("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),N=function(e,t,n){f(e,n),d(e,-2,C(t,!0))},R=function(e,t,n){N(e,"sec",n?t.getUTCSeconds():t.getSeconds()),N(e,"min",n?t.getUTCMinutes():t.getMinutes()),N(e,"hour",n?t.getUTCHours():t.getHours()),N(e,"day",n?t.getUTCDate():t.getDate()),N(e,"month",(n?t.getUTCMonth():t.getMonth())+1),N(e,"year",n?t.getUTCFullYear():t.getFullYear()),N(e,"wday",(n?t.getUTCDay():t.getDay())+1),N(e,"yday",Math.floor((t-new Date(t.getFullYear(),0,0))/864e5))},P=Number.MAX_SAFE_INTEGER/2,I=function(e,t,n,r){var a=s(e,-1,C(t,!0)),o=v(e,-1);if(!1===o){if(a!==i)return A(e,C("field '%s' is not an integer"),t);if(n<0)return A(e,C("field '%s' missing in date table"),t);o=n}else{if(!(-P<=o&&o<=P))return A(e,C("field '%s' is out-of-bound"),t);o-=r}return l(e,1),o},D={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e){return C(e)})),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return C(e)})),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(e){return C(e)})),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(e){return C(e)})),AM:C("AM"),PM:C("PM"),am:C("am"),pm:C("pm"),formats:{c:C("%a %b %e %H:%M:%S %Y"),D:C("%m/%d/%y"),F:C("%Y-%m-%d"),R:C("%H:%M"),r:C("%I:%M:%S %p"),T:C("%H:%M:%S"),X:C("%T"),x:C("%D")}},U=function(e,t){var n=e.getDay();"monday"===t&&(0===n?n=6:n--);var r=(e-new Date(e.getFullYear(),0,1))/864e5;return Math.floor((r+7-n)/7)},B=function(e,t,n){t<10&&y(e,n),k(e,C(String(t)))},V=function e(t,n,r,i){for(var a=0;a<r.length;)if(37!==r[a])y(n,r[a++]);else{var o=F(t,r,++a);switch(r[a]){case 37:y(n,37);break;case 65:k(n,D.days[i.getDay()]);break;case 66:k(n,D.months[i.getMonth()]);break;case 67:B(n,Math.floor(i.getFullYear()/100),48);break;case 68:e(t,n,D.formats.D,i);break;case 70:e(t,n,D.formats.F,i);break;case 72:B(n,i.getHours(),48);break;case 73:B(n,(i.getHours()+11)%12+1,48);break;case 77:B(n,i.getMinutes(),48);break;case 80:k(n,i.getHours()<12?D.am:D.pm);break;case 82:e(t,n,D.formats.R,i);break;case 83:B(n,i.getSeconds(),48);break;case 84:e(t,n,D.formats.T,i);break;case 85:B(n,U(i,"sunday"),48);break;case 87:B(n,U(i,"monday"),48);break;case 88:e(t,n,D.formats.X,i);break;case 89:k(n,C(String(i.getFullYear())));break;case 90:var s=i.toString().match(/\(([\w\s]+)\)/);s&&k(n,C(s[1]));break;case 97:k(n,D.shortDays[i.getDay()]);break;case 98:case 104:k(n,D.shortMonths[i.getMonth()]);break;case 99:e(t,n,D.formats.c,i);break;case 100:B(n,i.getDate(),48);break;case 101:B(n,i.getDate(),32);break;case 106:var u=Math.floor((i-new Date(i.getFullYear(),0,1))/864e5);u<100&&(u<10&&y(n,48),y(n,48)),k(n,C(String(u)));break;case 107:B(n,i.getHours(),32);break;case 108:B(n,(i.getHours()+11)%12+1,32);break;case 109:B(n,i.getMonth()+1,48);break;case 110:y(n,10);break;case 112:k(n,i.getHours()<12?D.AM:D.PM);break;case 114:e(t,n,D.formats.r,i);break;case 115:k(n,C(String(Math.floor(i/1e3))));break;case 116:y(n,8);break;case 117:var l=i.getDay();k(n,C(String(0===l?7:l)));break;case 119:k(n,C(String(i.getDay())));break;case 120:e(t,n,D.formats.x,i);break;case 121:B(n,i.getFullYear()%100,48);break;case 122:var c=i.getTimezoneOffset();c>0?y(n,45):(c=-c,y(n,43)),B(n,Math.floor(c/60),48),B(n,c%60,48)}a+=o}},F=function(e,t,n){for(var r=M,i=0,a=1;i<r.length&&a<=t.length-n;i+=a)if(r[i]==="|".charCodeAt(0))a++;else if(E(t.subarray(n,n+a),r.subarray(i,i+a)))return a;_(e,1,c(e,C("invalid conversion specifier '%%%s'"),t))},z=function(e,t){return w(e,t)},j={date:function(e){var t=L(e,1,"%c"),n=u(e,2)?new Date:new Date(1e3*z(e,2)),r=!1,i=0;if(t[i]==="!".charCodeAt(0)&&(r=!0,i++),t[i]==="*".charCodeAt(0)&&t[i+1]==="t".charCodeAt(0))o(e,0,9),R(e,n,r);else{new Uint8Array(4)[0]="%".charCodeAt(0);var a=new m;b(e,a),V(e,a,t,n),O(a)}return 1},difftime:function(e){var t=z(e,1),n=z(e,2);return h(e,t-n),1},time:function(e){var t;return u(e,1)?t=new Date:(x(e,1,a),p(e,1),t=new Date(I(e,"year",-1,0),I(e,"month",-1,1),I(e,"day",-1,0),I(e,"hour",12,0),I(e,"min",0,0),I(e,"sec",0,0)),R(e,t)),f(e,Math.floor(t/1e3)),1},clock:function(e){return h(e,performance.now()/1e3),1}};e.exports.luaopen_os=function(e){return S(e,j),1}},function(e,t,n){"use strict";var a=n(38).sprintf,o=n(3),s=o.LUA_INTEGER_FMT,u=o.LUA_INTEGER_FRMLEN,l=o.LUA_MININTEGER,c=o.LUA_NUMBER_FMT,f=o.LUA_NUMBER_FRMLEN,h=o.frexp,d=o.lua_getlocaledecpoint,p=n(2),v=p.LUA_TBOOLEAN,g=p.LUA_TFUNCTION,m=p.LUA_TNIL,y=p.LUA_TNUMBER,k=p.LUA_TSTRING,_=p.LUA_TTABLE,b=p.lua_call,w=p.lua_createtable,x=p.lua_dump,A=p.lua_gettable,S=p.lua_gettop,L=p.lua_isinteger,O=p.lua_isstring,T=p.lua_pop,E=p.lua_pushcclosure,C=p.lua_pushinteger,M=p.lua_pushlightuserdata,N=p.lua_pushliteral,R=p.lua_pushlstring,P=p.lua_pushnil,I=p.lua_pushnumber,D=p.lua_pushstring,U=p.lua_pushvalue,B=p.lua_remove,V=p.lua_setfield,F=p.lua_setmetatable,z=p.lua_settop,j=p.lua_toboolean,H=p.lua_tointeger,G=p.lua_tonumber,K=p.lua_tostring,W=p.lua_touserdata,X=p.lua_type,q=p.lua_upvalueindex,Q=n(7),$=Q.luaL_Buffer,J=Q.luaL_addchar,Y=Q.luaL_addlstring,Z=Q.luaL_addsize,ee=Q.luaL_addstring,te=Q.luaL_addvalue,ne=Q.luaL_argcheck,re=Q.luaL_argerror,ie=Q.luaL_buffinit,ae=Q.luaL_buffinitsize,oe=Q.luaL_checkinteger,se=Q.luaL_checknumber,ue=Q.luaL_checkstack,le=Q.luaL_checkstring,ce=Q.luaL_checktype,fe=Q.luaL_error,he=Q.luaL_newlib,de=Q.luaL_optinteger,pe=Q.luaL_optstring,ve=Q.luaL_prepbuffsize,ge=Q.luaL_pushresult,me=Q.luaL_pushresultsize,ye=Q.luaL_tolstring,ke=Q.luaL_typename,_e=n(17),be=n(5),we=be.luastring_eq,xe=be.luastring_indexOf,Ae=be.to_jsstring,Se=be.to_luastring,Le="%".charCodeAt(0),Oe=function(e){var t=xe(e,0);return t>-1?t:e.length},Te=function(e,t){return e>=0?e:0-e>t?0:t+e+1},Ee=function(e,t,n,r){return Y(r,t,n),0},Ce=f.length+1,Me=function(e,t,n){var r=function(e){if(Object.is(e,1/0))return Se("inf");if(Object.is(e,-1/0))return Se("-inf");if(Number.isNaN(e))return Se("nan");if(0===e){var t=a(c+"x0p+0",e);return Object.is(e,-0)&&(t="-"+t),Se(t)}var n="",r=h(e),i=r[0],o=r[1];return i<0&&(n+="-",i=-i),n+="0x",n+=(2*i).toString(16),n+=a("p%+d",o-=1),Se(n)}(n);if(65===t[Ce])for(var i=0;i<r.length;i++){var o=r[i];o>=97&&(r[i]=223&o)}else 97!==t[Ce]&&fe(e,Se("modifiers for format '%%a'/'%%A' not implemented"));return r},Ne=Se("-+ #0"),Re=function(e){return 97<=e&&e<=122||65<=e&&e<=90},Pe=function(e){return 48<=e&&e<=57},Ie=function(e){return 0<=e&&e<=31||127===e},De=function(e){return 33<=e&&e<=126},Ue=function(e){return 97<=e&&e<=122},Be=function(e){return 65<=e&&e<=90},Ve=function(e){return 97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57},Fe=function(e){return De(e)&&!Ve(e)},ze=function(e){return 32===e||e>=9&&e<=13},je=function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},He=function(e,t,n){switch(X(e,n)){case k:var r=K(e,n);!function(e,t,n){J(e,34);for(var r=0;n--;){if(34===t[r]||92===t[r]||10===t[r])J(e,92),J(e,t[r]);else if(Ie(t[r])){var i=""+t[r];Pe(t[r+1])&&(i="0".repeat(3-i.length)+i),ee(e,Se("\\"+i))}else J(e,t[r]);r++}J(e,34)}(t,r,r.length);break;case y:var i;if(L(e,n)){var o=H(e,n);i=Se(a(o===l?"0x%"+u+"x":s,o))}else{var c=G(e,n);!function(e){if(xe(e,46)<0){var t=d(),n=xe(e,t);n&&(e[n]=46)}}(i=Me(e,Se("%".concat(u,"a")),c))}ee(t,i);break;case m:case v:ye(e,n),te(t);break;default:re(e,n,Se("value has no literal form"))}},Ge=function(e,t,n,r){for(var i=n;0!==t[i]&&xe(Ne,t[i])>=0;)i++;i-n>=Ne.length&&fe(e,Se("invalid format (repeated flags)")),Pe(t[i])&&i++,Pe(t[i])&&i++,46===t[i]&&(Pe(t[++i])&&i++,Pe(t[i])&&i++),Pe(t[i])&&fe(e,Se("invalid format (width or precision too long)")),r[0]=37;for(var a=0;a<i-n+1;a++)r[a+1]=t[n+a];return i},Ke=function(e,t){for(var n=e.length,r=t.length,i=e[n-1],a=0;a<r;a++)e[a+n-1]=t[a];e[n+r-1]=i},We=r((function e(t){i(this,e),this.L=t,this.islittle=!0,this.maxalign=1})),Xe=Pe,qe=function(e,t){if(e.off>=e.s.length||!Xe(e.s[e.off]))return t;var n=0;do{n=10*n+(e.s[e.off++]-48)}while(e.off<e.s.length&&Xe(e.s[e.off])&&n<=214748363.8);return n},Qe=function(e,t,n){var r=qe(t,n);return(r>16||r<=0)&&fe(e.L,Se("integral size (%d) out of limits [1,%d]"),r,16),r},$e=function(e,t){var n={opt:t.s[t.off++],size:0};switch(n.opt){case 98:return n.size=1,n.opt=0,n;case 66:return n.size=1,n.opt=1,n;case 104:return n.size=2,n.opt=0,n;case 72:return n.size=2,n.opt=1,n;case 108:case 106:return n.size=4,n.opt=0,n;case 76:case 74:case 84:return n.size=4,n.opt=1,n;case 102:return n.size=4,n.opt=2,n;case 100:case 110:return n.size=8,n.opt=2,n;case 105:return n.size=Qe(e,t,4),n.opt=0,n;case 73:return n.size=Qe(e,t,4),n.opt=1,n;case 115:return n.size=Qe(e,t,4),n.opt=4,n;case 99:return n.size=qe(t,-1),-1===n.size&&fe(e.L,Se("missing size for format option 'c'")),n.opt=3,n;case 122:return n.opt=5,n;case 120:return n.size=1,n.opt=6,n;case 88:return n.opt=7,n;case 32:break;case 60:case 61:e.islittle=!0;break;case 62:e.islittle=!1;break;case 33:e.maxalign=Qe(e,t,8);break;default:fe(e.L,Se("invalid format option '%c'"),n.opt)}return n.opt=8,n},Je=function(e,t,n){var r={opt:NaN,size:NaN,ntoalign:NaN},i=$e(e,n);r.size=i.size,r.opt=i.opt;var a=r.size;if(7===r.opt)if(n.off>=n.s.length||0===n.s[n.off])re(e.L,1,Se("invalid next option for option 'X'"));else{var o=$e(e,n);a=o.size,3!==(o=o.opt)&&0!==a||re(e.L,1,Se("invalid next option for option 'X'"))}return a<=1||3===r.opt?r.ntoalign=0:(a>e.maxalign&&(a=e.maxalign),0!=(a&a-1)&&re(e.L,1,Se("format asks for alignment not power of 2")),r.ntoalign=a-(t&a-1)&a-1),r},Ye=function(e,t,n,r,i){var a=ve(e,r);a[n?0:r-1]=255&t;for(var o=1;o<r;o++)t>>=8,a[n?o:r-1-o]=255&t;if(i&&r>4)for(var s=4;s<r;s++)a[n?s:r-1-s]=255;Z(e,r)},Ze=function(e,t,n,r,i){for(var a=0,o=r<=4?r:4,s=o-1;s>=0;s--)a<<=8,a|=t[n?s:r-1-s];if(r<4){if(i){var u=1<<8*r-1;a=(a^u)-u}}else if(r>4)for(var l=!i||a>=0?0:255,c=o;c<r;c++)t[n?c:r-1-c]!==l&&fe(e,Se("%d-byte integer does not fit into Lua Integer"),r);return a},et=function(e,t,n,r){_e.lua_assert(t.length>=r);for(var i=new DataView(new ArrayBuffer(r)),a=0;a<r;a++)i.setUint8(a,t[a],n);return 4==r?i.getFloat32(0,n):i.getFloat64(0,n)},tt=Se("^$*+?.([%-"),nt=r((function e(t){i(this,e),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=t,this.matchdepth=NaN,this.level=NaN,this.capture=[]})),rt=function(e,t){switch(e.p[t++]){case Le:return t===e.p_end&&fe(e.L,Se("malformed pattern (ends with '%%')")),t+1;case 91:94===e.p[t]&&t++;do{t===e.p_end&&fe(e.L,Se("malformed pattern (missing ']')")),e.p[t++]===Le&&t<e.p_end&&t++}while(93!==e.p[t]);return t+1;default:return t}},it=function(e,t){switch(t){case 97:return Re(e);case 65:return!Re(e);case 99:return Ie(e);case 67:return!Ie(e);case 100:return Pe(e);case 68:return!Pe(e);case 103:return De(e);case 71:return!De(e);case 108:return Ue(e);case 76:return!Ue(e);case 112:return Fe(e);case 80:return!Fe(e);case 115:return ze(e);case 83:return!ze(e);case 117:return Be(e);case 85:return!Be(e);case 119:return Ve(e);case 87:return!Ve(e);case 120:return je(e);case 88:return!je(e);case 122:return 0===e;case 90:return 0!==e;default:return t===e}},at=function(e,t,n,r){var i=!0;for(94===e.p[n+1]&&(i=!1,n++);++n<r;)if(e.p[n]===Le){if(n++,it(t,e.p[n]))return i}else if(45===e.p[n+1]&&n+2<r){if(n+=2,e.p[n-2]<=t&&t<=e.p[n])return i}else if(e.p[n]===t)return i;return!i},ot=function(e,t,n,r){if(t>=e.src_end)return!1;var i=e.src[t];switch(e.p[n]){case 46:return!0;case Le:return it(i,e.p[n+1]);case 91:return at(e,i,n,r-1);default:return e.p[n]===i}},st=function(e,t,n){if(n>=e.p_end-1&&fe(e.L,Se("malformed pattern (missing arguments to '%%b'")),e.src[t]!==e.p[n])return null;for(var r=e.p[n],i=e.p[n+1],a=1;++t<e.src_end;)if(e.src[t]===i){if(0==--a)return t+1}else e.src[t]===r&&a++;return null},ut=function(e,t,n,r){for(var i=0;ot(e,t+i,n,r);)i++;for(;i>=0;){var a=dt(e,t+i,r+1);if(a)return a;i--}return null},lt=function(e,t,n,r){for(;;){var i=dt(e,t,r+1);if(null!==i)return i;if(!ot(e,t,n,r))return null;t++}},ct=function(e,t,n,r){var i,a=e.level;return a>=32&&fe(e.L,Se("too many captures")),e.capture[a]=e.capture[a]?e.capture[a]:{},e.capture[a].init=t,e.capture[a].len=r,e.level=a+1,null===(i=dt(e,t,n))&&e.level--,i},ft=function(e,t,n){var r,i=function(e){var t=e.level;for(t--;t>=0;t--)if(-1===e.capture[t].len)return t;return fe(e.L,Se("invalid pattern capture"))}(e);return e.capture[i].len=t-e.capture[i].init,null===(r=dt(e,t,n))&&(e.capture[i].len=-1),r},ht=function(e,t,n){n=function(e,t){return(t-=49)<0||t>=e.level||-1===e.capture[t].len?fe(e.L,Se("invalid capture index %%%d"),t+1):t}(e,n);var r=e.capture[n].len;return e.src_end-t>=r&&function(e,t,n,r,i){return we(e.subarray(t,t+i),n.subarray(r,r+i))}(e.src,e.capture[n].init,e.src,t,r)?t+r:null},dt=function e(t,n,r){var i=!1,a=!0;for(0==t.matchdepth--&&fe(t.L,Se("pattern too complex"));a||i;)if(a=!1,r!==t.p_end)switch(i?void 0:t.p[r]){case 40:n=41===t.p[r+1]?ct(t,n,r+2,-2):ct(t,n,r+1,-1);break;case 41:n=ft(t,n,r+1);break;case 36:if(r+1!==t.p_end){i=!0;break}n=t.src.length-n==0?n:null;break;case Le:switch(t.p[r+1]){case 98:null!==(n=st(t,n,r+2))&&(r+=4,a=!0);break;case 102:r+=2,91!==t.p[r]&&fe(t.L,Se("missing '[' after '%%f' in pattern"));var o=rt(t,r),s=n===t.src_init?0:t.src[n-1];if(!at(t,s,r,o-1)&&at(t,n===t.src_end?0:t.src[n],r,o-1)){r=o,a=!0;break}n=null;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(n=ht(t,n,t.p[r+1]))&&(r+=2,a=!0);break;default:i=!0}break;default:i=!1;var u=rt(t,r);if(ot(t,n,r,u))switch(t.p[u]){case 63:var l;null!==(l=e(t,n+1,u+1))?n=l:(r=u+1,a=!0);break;case 43:n++;case 42:n=ut(t,n,r,u);break;case 45:n=lt(t,n,r,u);break;default:n++,r=u,a=!0}else{if(42===t.p[u]||63===t.p[u]||45===t.p[u]){r=u+1,a=!0;break}n=null}}return t.matchdepth++,n},pt=function(e,t,n,r){if(t>=e.level)0===t?R(e.L,e.src.subarray(n,r),r-n):fe(e.L,Se("invalid capture index %%%d"),t+1);else{var i=e.capture[t].len;-1===i&&fe(e.L,Se("unfinished capture")),-2===i?C(e.L,e.capture[t].init-e.src_init+1):R(e.L,e.src.subarray(e.capture[t].init),i)}},vt=function(e,t,n){var r=0===e.level&&e.src.subarray(t)?1:e.level;ue(e.L,r,"too many captures");for(var i=0;i<r;i++)pt(e,i,t,n);return r},gt=function(e,t,n,r,i,a){e.L=t,e.matchdepth=200,e.src=n,e.src_init=0,e.src_end=r,e.p=i,e.p_end=a},mt=function(e){e.level=0,_e.lua_assert(200===e.matchdepth)},yt=function(e,t){var n=le(e,1),r=le(e,2),i=n.length,a=r.length,o=Te(de(e,3,1),i);if(o<1)o=1;else if(o>i+1)return P(e),1;if(t&&(j(e,4)||function(e,t){for(var n=0;n<t;n++)if(-1!==xe(tt,e[n]))return!1;return!0}(r,a))){var s=function(e,t,n){var r=0,i=t.length;if(0===i)return r;for(;-1!==(r=e.indexOf(t[0],r));r++)if(we(e.subarray(r,r+i),t))return r;return-1}(n.subarray(o-1),r);if(s>-1)return C(e,o+s),C(e,o+s+a-1),2}else{var u=new nt(e),l=o-1,c=94===r[0];c&&(r=r.subarray(1),a--),gt(u,e,n,i,r,a);do{var f;if(mt(u),null!==(f=dt(u,l,0)))return t?(C(e,l+1),C(e,f),vt(u,null,0)+2):vt(u,l,f)}while(l++<u.src_end&&!c)}return P(e),1},kt=function(e){var t=W(e,q(3));t.ms.L=e;for(var n=t.src;n<=t.ms.src_end;n++){var r;if(mt(t.ms),null!==(r=dt(t.ms,n,t.p))&&r!==t.lastmatch)return t.src=t.lastmatch=r,vt(t.ms,n,r)}return 0},_t=function(e,t,n,r,i){var a=e.L;switch(i){case g:U(a,3);var o=vt(e,n,r);b(a,o,1);break;case _:pt(e,0,n,r),A(a,3);break;default:return void function(e,t,n,r){for(var i=e.L,a=K(i,3),o=a.length,s=0;s<o;s++)a[s]!==Le?J(t,a[s]):Pe(a[++s])?48===a[s]?Y(t,e.src.subarray(n,r),r-n):(pt(e,a[s]-49,n,r),ye(i,-1),B(i,-2),te(t)):(a[s]!==Le&&fe(i,Se("invalid use of '%c' in replacement string"),Le),J(t,a[s]))}(e,t,n,r)}j(a,-1)?O(a,-1)||fe(a,Se("invalid replacement value (a %s)"),ke(a,-1)):(T(a,1),R(a,e.src.subarray(n,r),r-n)),te(t)},bt={byte:function(e){var t=le(e,1),n=t.length,r=Te(de(e,2,1),n),i=Te(de(e,3,r),n);if(r<1&&(r=1),i>n&&(i=n),r>i)return 0;if(i-r>=Number.MAX_SAFE_INTEGER)return fe(e,"string slice too long");var a=i-r+1;ue(e,a,"string slice too long");for(var o=0;o<a;o++)C(e,t[r+o-1]);return a},char:function(e){for(var t=S(e),n=new $,r=ae(e,n,t),i=1;i<=t;i++){var a=oe(e,i);ne(e,a>=0&&a<=255,"value out of range"),r[i-1]=a}return me(n,t),1},dump:function(e){var t=new $,n=j(e,2);return ce(e,1,g),z(e,1),ie(e,t),0!==x(e,Ee,t,n)?fe(e,Se("unable to dump given function")):(ge(t),1)},find:function(e){return yt(e,1)},format:function(e){var t=S(e),n=1,r=le(e,n),i=0,o=new $;for(ie(e,o);i<r.length;)if(r[i]!==Le)J(o,r[i++]);else if(r[++i]===Le)J(o,r[i++]);else{var s=[];switch(++n>t&&re(e,n,Se("no value")),i=Ge(e,r,i,s),String.fromCharCode(r[i++])){case"c":J(o,oe(e,n));break;case"d":case"i":case"o":case"u":case"x":case"X":var l=oe(e,n);Ke(s,Se(u,!0)),ee(o,Se(a(String.fromCharCode.apply(String,s),l)));break;case"a":case"A":Ke(s,Se(u,!0)),ee(o,Me(e,s,se(e,n)));break;case"e":case"E":case"f":case"g":case"G":var c=se(e,n);Ke(s,Se(u,!0)),ee(o,Se(a(String.fromCharCode.apply(String,s),c)));break;case"q":He(e,o,n);break;case"s":var f=ye(e,n);s.length<=2||0===s[2]?te(o):(ne(e,f.length===Oe(f),n,"string contains zeros"),xe(s,46)<0&&f.length>=100?te(o):(ee(o,Se(a(String.fromCharCode.apply(String,s),Ae(f)))),T(e,1)));break;default:return fe(e,Se("invalid option '%%%c' to 'format'"),r[i-1])}}return ge(o),1},gmatch:function(e){var t=le(e,1),n=le(e,2),a=t.length,o=n.length;z(e,2);var s=new(function(){return r((function e(){i(this,e),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new nt}))}());return M(e,s),gt(s.ms,e,t,a,n,o),s.src=0,s.p=0,s.lastmatch=null,E(e,kt,3),1},gsub:function(e){var t=le(e,1),n=t.length,r=le(e,2),i=r.length,a=null,o=X(e,3),s=de(e,4,n+1),u=94===r[0],l=0,c=new nt(e),f=new $;for(ne(e,o===y||o===k||o===g||o===_,3,"string/function/table expected"),ie(e,f),u&&(r=r.subarray(1),i--),gt(c,e,t,n,r,i),t=0,r=0;l<s;){var h;if(mt(c),null!==(h=dt(c,t,r))&&h!==a)l++,_t(c,f,t,h,o),t=a=h;else{if(!(t<c.src_end))break;J(f,c.src[t++])}if(u)break}return Y(f,c.src.subarray(t,c.src_end),c.src_end-t),ge(f),C(e,l),2},len:function(e){return C(e,le(e,1).length),1},lower:function(e){for(var t=le(e,1),n=t.length,r=new Uint8Array(n),i=0;i<n;i++){var a=t[i];Be(a)&&(a|=32),r[i]=a}return D(e,r),1},match:function(e){return yt(e,0)},pack:function(e){var t=new $,n=new We(e),r={s:le(e,1),off:0},i=1,a=0;for(P(e),ie(e,t);r.off<r.s.length;){var o=Je(n,a,r),s=o.opt,u=o.size,l=o.ntoalign;for(a+=l+u;l-- >0;)J(t,0);switch(i++,s){case 0:var c=oe(e,i);if(u<4){var f=1<<8*u-1;ne(e,-f<=c&&c<f,i,"integer overflow")}Ye(t,c,n.islittle,u,c<0);break;case 1:var h=oe(e,i);u<4&&ne(e,h>>>0<1<<8*u,i,"unsigned overflow"),Ye(t,h>>>0,n.islittle,u,!1);break;case 2:var d=ve(t,u),p=se(e,i),v=new DataView(d.buffer,d.byteOffset,d.byteLength);4===u?v.setFloat32(0,p,n.islittle):v.setFloat64(0,p,n.islittle),Z(t,u);break;case 3:var g=le(e,i),m=g.length;for(ne(e,m<=u,i,"string longer than given size"),Y(t,g,m);m++<u;)J(t,0);break;case 4:var y=le(e,i),k=y.length;ne(e,u>=4||k<1<<8*u,i,"string length does not fit in given size"),Ye(t,k,n.islittle,u,0),Y(t,y,k),a+=k;break;case 5:var _=le(e,i),b=_.length;ne(e,xe(_,0)<0,i,"strings contains zeros"),Y(t,_,b),J(t,0),a+=b+1;break;case 6:J(t,0);case 7:case 8:i--}}return ge(t),1},packsize:function(e){for(var t=new We(e),n={s:le(e,1),off:0},r=0;n.off<n.s.length;){var i=Je(t,r,n),a=i.opt,o=i.size,s=i.ntoalign;switch(ne(e,r<=2147483647-(o+=s),1,"format result too large"),r+=o,a){case 4:case 5:re(e,1,"variable-length format")}}return C(e,r),1},rep:function(e){var t=le(e,1),n=t.length,r=oe(e,2),i=pe(e,3,""),a=i.length;if(r<=0)N(e,"");else{if(n+a<n||n+a>2147483647/r)return fe(e,Se("resulting string too large"));for(var o=r*n+(r-1)*a,s=new $,u=ae(e,s,o),l=0;r-- >1;)u.set(t,l),l+=n,a>0&&(u.set(i,l),l+=a);u.set(t,l),me(s,o)}return 1},reverse:function(e){for(var t=le(e,1),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t[n-1-i];return D(e,r),1},sub:function(e){var t=le(e,1),n=t.length,r=Te(oe(e,2),n),i=Te(de(e,3,-1),n);return r<1&&(r=1),i>n&&(i=n),r<=i?D(e,t.subarray(r-1,r-1+(i-r+1))):N(e,""),1},unpack:function(e){var t=new We(e),n={s:le(e,1),off:0},r=le(e,2),i=r.length,a=Te(de(e,3,1),i)-1,o=0;for(ne(e,a<=i&&a>=0,3,"initial position out of string");n.off<n.s.length;){var s=Je(t,a,n),u=s.opt,l=s.size,c=s.ntoalign;switch(a+c+l>i&&re(e,2,Se("data string too short")),a+=c,ue(e,2,"too many results"),o++,u){case 0:case 1:var f=Ze(e,r.subarray(a),t.islittle,l,0===u);C(e,f);break;case 2:var h=et(0,r.subarray(a),t.islittle,l);I(e,h);break;case 3:D(e,r.subarray(a,a+l));break;case 4:var d=Ze(e,r.subarray(a),t.islittle,l,0);ne(e,a+d+l<=i,2,"data string too short"),D(e,r.subarray(a+l,a+l+d)),a+=d;break;case 5:var p=xe(r,0,a);-1===p&&(p=r.length-a),D(e,r.subarray(a,p)),a=p+1;break;case 7:case 6:case 8:o--}a+=l}return C(e,a+1),o+1},upper:function(e){for(var t=le(e,1),n=t.length,r=new Uint8Array(n),i=0;i<n;i++){var a=t[i];Ue(a)&&(a&=223),r[i]=a}return D(e,r),1}};e.exports.luaopen_string=function(e){return he(e,bt),function(e){w(e,0,1),N(e,""),U(e,-2),F(e,-2),T(e,1),U(e,-2),V(e,-2,Se("__index",!0)),T(e,1)}(e),1}},function(e,t,n){"use strict";var r=n(2),i=r.lua_gettop,a=r.lua_pushcfunction,o=r.lua_pushfstring,s=r.lua_pushinteger,u=r.lua_pushnil,l=r.lua_pushstring,c=r.lua_pushvalue,f=r.lua_setfield,h=r.lua_tointeger,d=n(7),p=d.luaL_Buffer,v=d.luaL_addvalue,g=d.luaL_argcheck,m=d.luaL_buffinit,y=d.luaL_checkinteger,k=d.luaL_checkstack,_=d.luaL_checkstring,b=d.luaL_error,w=d.luaL_newlib,x=d.luaL_optinteger,A=d.luaL_pushresult,S=n(5),L=S.luastring_of,O=S.to_luastring,T=function(e){return 128===(192&e)},E=function(e,t){return e>=0?e:0-e>t?0:t+e+1},C=[255,127,2047,65535],M=function(e,t){var n=e[t],r=0;if(n<128)r=n;else{for(var i=0;64&n;){var a=e[t+ ++i];if(128!=(192&a))return null;r=r<<6|63&a,n<<=1}if(r|=(127&n)<<5*i,i>3||r>1114111||r<=C[i])return null;t+=i}return{code:r,pos:t+1}},N=O("%U"),R=function(e,t){var n=y(e,t);g(e,0<=n&&n<=1114111,t,"value out of range"),o(e,N,n)},P=function(e){var t=_(e,1),n=t.length,r=h(e,2)-1;if(r<0)r=0;else if(r<n)for(r++;T(t[r]);)r++;if(r>=n)return 0;var i=M(t,r);return null===i||T(t[i.pos])?b(e,O("invalid UTF-8 code")):(s(e,r+1),s(e,i.code),2)},I={char:function(e){var t=i(e);if(1===t)R(e,1);else{var n=new p;m(e,n);for(var r=1;r<=t;r++)R(e,r),v(n);A(n)}return 1},codepoint:function(e){var t=_(e,1),n=E(x(e,2,1),t.length),r=E(x(e,3,n),t.length);if(g(e,n>=1,2,"out of range"),g(e,r<=t.length,3,"out of range"),n>r)return 0;if(r-n>=Number.MAX_SAFE_INTEGER)return b(e,"string slice too long");var i=r-n+1;for(k(e,i,"string slice too long"),i=0,n-=1;n<r;){var a=M(t,n);if(null===a)return b(e,"invalid UTF-8 code");s(e,a.code),n=a.pos,i++}return i},codes:function(e){return _(e,1),a(e,P),c(e,1),s(e,0),3},len:function(e){var t=0,n=_(e,1),r=n.length,i=E(x(e,2,1),r),a=E(x(e,3,-1),r);for(g(e,1<=i&&--i<=r,2,"initial position out of string"),g(e,--a<r,3,"final position out of string");i<=a;){var o=M(n,i);if(null===o)return u(e),s(e,i+1),2;i=o.pos,t++}return s(e,t),1},offset:function(e){var t=_(e,1),n=y(e,2),r=n>=0?1:t.length+1;if(r=E(x(e,3,r),t.length),g(e,1<=r&&--r<=t.length,3,"position out of range"),0===n)for(;r>0&&T(t[r]);)r--;else if(T(t[r])&&b(e,"initial position is a continuation byte"),n<0)for(;n<0&&r>0;){do{r--}while(r>0&&T(t[r]));n++}else for(n--;n>0&&r<t.length;){do{r++}while(T(t[r]));n--}return 0===n?s(e,r+1):u(e),1}},D=L(91,0,45,127,194,45,244,93,91,128,45,191,93,42);e.exports.luaopen_utf8=function(e){return w(e,I),l(e,D),f(e,-2,O("charpattern",!0)),1}},function(e,t,n){"use strict";var r,i=n(2),a=i.LUA_OPLT,o=i.LUA_TNUMBER,s=i.lua_compare,u=i.lua_gettop,l=i.lua_isinteger,c=i.lua_isnoneornil,f=i.lua_pushboolean,h=i.lua_pushinteger,d=i.lua_pushliteral,p=i.lua_pushnil,v=i.lua_pushnumber,g=i.lua_pushvalue,m=i.lua_setfield,y=i.lua_settop,k=i.lua_tointeger,_=i.lua_tointegerx,b=i.lua_type,w=n(7),x=w.luaL_argcheck,A=w.luaL_argerror,S=w.luaL_checkany,L=w.luaL_checkinteger,O=w.luaL_checknumber,T=w.luaL_error,E=w.luaL_newlib,C=w.luaL_optnumber,M=n(3),N=M.LUA_MAXINTEGER,R=M.LUA_MININTEGER,P=M.lua_numbertointeger,I=n(5).to_luastring,D=function(){return r=1103515245*r+12345&2147483647},U=function(e,t){var n=P(t);!1!==n?h(e,n):v(e,t)},B={abs:function(e){if(l(e,1)){var t=k(e,1);t<0&&(t=0|-t),h(e,t)}else v(e,Math.abs(O(e,1)));return 1},acos:function(e){return v(e,Math.acos(O(e,1))),1},asin:function(e){return v(e,Math.asin(O(e,1))),1},atan:function(e){var t=O(e,1),n=C(e,2,1);return v(e,Math.atan2(t,n)),1},ceil:function(e){return l(e,1)?y(e,1):U(e,Math.ceil(O(e,1))),1},cos:function(e){return v(e,Math.cos(O(e,1))),1},deg:function(e){return v(e,O(e,1)*(180/Math.PI)),1},exp:function(e){return v(e,Math.exp(O(e,1))),1},floor:function(e){return l(e,1)?y(e,1):U(e,Math.floor(O(e,1))),1},fmod:function(e){if(l(e,1)&&l(e,2)){var t=k(e,2);0===t?A(e,2,"zero"):h(e,k(e,1)%t|0)}else{var n=O(e,1),r=O(e,2);v(e,n%r)}return 1},log:function(e){var t,n=O(e,1);if(c(e,2))t=Math.log(n);else{var r=O(e,2);t=2===r?Math.log2(n):10===r?Math.log10(n):Math.log(n)/Math.log(r)}return v(e,t),1},max:function(e){var t=u(e),n=1;x(e,t>=1,1,"value expected");for(var r=2;r<=t;r++)s(e,n,r,a)&&(n=r);return g(e,n),1},min:function(e){var t=u(e),n=1;x(e,t>=1,1,"value expected");for(var r=2;r<=t;r++)s(e,r,n,a)&&(n=r);return g(e,n),1},modf:function(e){if(l(e,1))y(e,1),v(e,0);else{var t=O(e,1),n=t<0?Math.ceil(t):Math.floor(t);U(e,n),v(e,t===n?0:t-n)}return 2},rad:function(e){return v(e,O(e,1)*(Math.PI/180)),1},random:function(e){var t,n,i=void 0===r?Math.random():D()/2147483648;switch(u(e)){case 0:return v(e,i),1;case 1:t=1,n=L(e,1);break;case 2:t=L(e,1),n=L(e,2);break;default:return T(e,"wrong number of arguments")}return x(e,t<=n,1,"interval is empty"),x(e,t>=0||n<=N+t,1,"interval too large"),i*=n-t+1,h(e,Math.floor(i)+t),1},randomseed:function(e){return function(e){0==(r=0|e)&&(r=1)}(O(e,1)),D(),0},sin:function(e){return v(e,Math.sin(O(e,1))),1},sqrt:function(e){return v(e,Math.sqrt(O(e,1))),1},tan:function(e){return v(e,Math.tan(O(e,1))),1},tointeger:function(e){var t=_(e,1);return!1!==t?h(e,t):(S(e,1),p(e)),1},type:function(e){return b(e,1)===o?l(e,1)?d(e,"integer"):d(e,"float"):(S(e,1),p(e)),1},ult:function(e){var t=L(e,1),n=L(e,2);return f(e,t>=0?n<0||t<n:n<0&&t<n),1}};e.exports.luaopen_math=function(e){return E(e,B),v(e,Math.PI),m(e,-2,I("pi",!0)),v(e,1/0),m(e,-2,I("huge",!0)),h(e,N),m(e,-2,I("maxinteger",!0)),h(e,R),m(e,-2,I("mininteger",!0)),1}},function(e,t,n){"use strict";var r,i=n(2),a=i.LUA_MASKCALL,o=i.LUA_MASKCOUNT,s=i.LUA_MASKLINE,u=i.LUA_MASKRET,l=i.LUA_REGISTRYINDEX,c=i.LUA_TFUNCTION,f=i.LUA_TNIL,h=i.LUA_TTABLE,d=i.LUA_TUSERDATA,p=i.lua_Debug,v=i.lua_call,g=i.lua_checkstack,m=i.lua_gethook,y=i.lua_gethookcount,k=i.lua_gethookmask,_=i.lua_getinfo,b=i.lua_getlocal,w=i.lua_getmetatable,x=i.lua_getstack,A=i.lua_getupvalue,S=i.lua_getuservalue,L=i.lua_insert,O=i.lua_iscfunction,T=i.lua_isfunction,E=i.lua_isnoneornil,C=i.lua_isthread,M=i.lua_newtable,N=i.lua_pcall,R=i.lua_pop,P=i.lua_pushboolean,I=i.lua_pushfstring,D=i.lua_pushinteger,U=i.lua_pushlightuserdata,B=i.lua_pushliteral,V=i.lua_pushnil,F=i.lua_pushstring,z=i.lua_pushvalue,j=i.lua_rawgetp,H=i.lua_rawsetp,G=i.lua_rotate,K=i.lua_setfield,W=i.lua_sethook,X=i.lua_setlocal,q=i.lua_setmetatable,Q=i.lua_settop,$=i.lua_setupvalue,J=i.lua_setuservalue,Y=i.lua_tojsstring,Z=i.lua_toproxy,ee=i.lua_tostring,te=i.lua_tothread,ne=i.lua_touserdata,re=i.lua_type,ie=i.lua_upvalueid,ae=i.lua_upvaluejoin,oe=i.lua_xmove,se=n(7),ue=se.luaL_argcheck,le=se.luaL_argerror,ce=se.luaL_checkany,fe=se.luaL_checkinteger,he=se.luaL_checkstring,de=se.luaL_checktype,pe=se.luaL_error,ve=se.luaL_loadbuffer,ge=se.luaL_newlib,me=se.luaL_optinteger,ye=se.luaL_optstring,ke=se.luaL_traceback,_e=se.lua_writestringerror,be=n(17),we=n(5),xe=we.luastring_indexOf,Ae=we.to_luastring,Se=function(e,t,n){e===t||g(t,n)||pe(e,Ae("stack overflow",!0))},Le=function(e){return C(e,1)?{arg:1,thread:te(e,1)}:{arg:0,thread:e}},Oe=function(e,t,n){F(e,n),K(e,-2,t)},Te=function(e,t,n){D(e,n),K(e,-2,t)},Ee=function(e,t,n){P(e,n),K(e,-2,t)},Ce=function(e,t,n){e==t?G(e,-2,1):oe(t,e,1),K(e,-2,n)},Me=function(e,t){var n=fe(e,2);de(e,1,c);var r=t?A(e,1,n):$(e,1,n);return null===r?0:(F(e,r),L(e,-(t+1)),t+1)},Ne=function(e,t,n){var r=fe(e,n);return de(e,t,c),ue(e,null!==A(e,t,r),n,"invalid upvalue index"),r},Re=Ae("__hooks__",!0),Pe=["call","return","line","count","tail call"].map((function(e){return Ae(e)})),Ie=function(e,t){j(e,l,Re);var n=ne(e,-1).get(e);n&&(n(e),F(e,Pe[t.event]),t.currentline>=0?D(e,t.currentline):V(e),be.lua_assert(_(e,Ae("lS"),t)),v(e,2,0))},De={gethook:function(e){var t=Le(e).thread,n=new Uint8Array(5),r=k(t),i=m(t);return null===i?V(e):i!==Ie?B(e,"external hook"):(j(e,l,Re),ne(e,-1).get(t)(e)),F(e,function(e,t){var n=0;return e&a&&(t[n++]=99),e&u&&(t[n++]=114),e&s&&(t[n++]=108),t.subarray(0,n)}(r,n)),D(e,y(t)),3},getinfo:function(e){var t=new p,n=Le(e),r=n.arg,i=n.thread,a=ye(e,r+2,"flnStu");if(Se(e,i,3),T(e,r+1))a=I(e,Ae(">%s"),a),z(e,r+1),oe(e,i,1);else if(!x(i,fe(e,r+1),t))return V(e),1;return _(i,a,t)||le(e,r+2,"invalid option"),M(e),xe(a,83)>-1&&(Oe(e,Ae("source",!0),t.source),Oe(e,Ae("short_src",!0),t.short_src),Te(e,Ae("linedefined",!0),t.linedefined),Te(e,Ae("lastlinedefined",!0),t.lastlinedefined),Oe(e,Ae("what",!0),t.what)),xe(a,108)>-1&&Te(e,Ae("currentline",!0),t.currentline),xe(a,117)>-1&&(Te(e,Ae("nups",!0),t.nups),Te(e,Ae("nparams",!0),t.nparams),Ee(e,Ae("isvararg",!0),t.isvararg)),xe(a,110)>-1&&(Oe(e,Ae("name",!0),t.name),Oe(e,Ae("namewhat",!0),t.namewhat)),xe(a,116)>-1&&Ee(e,Ae("istailcall",!0),t.istailcall),xe(a,76)>-1&&Ce(e,i,Ae("activelines",!0)),xe(a,102)>-1&&Ce(e,i,Ae("func",!0)),1},getlocal:function(e){var t=Le(e),n=t.thread,r=t.arg,i=new p,a=fe(e,r+2);if(T(e,r+1))return z(e,r+1),F(e,b(e,null,a)),1;var o=fe(e,r+1);if(!x(n,o,i))return le(e,r+1,"level out of range");Se(e,n,1);var s=b(n,i,a);return s?(oe(n,e,1),F(e,s),G(e,-2,1),2):(V(e),1)},getmetatable:function(e){return ce(e,1),w(e,1)||V(e),1},getregistry:function(e){return z(e,l),1},getupvalue:function(e){return Me(e,1)},getuservalue:function(e){return re(e,1)!==d?V(e):S(e,1),1},sethook:function(e){var t,n,r,i,h=Le(e),d=h.thread,p=h.arg;if(E(e,p+1))Q(e,p+1),r=null,t=0,n=0;else{var v=he(e,p+2);de(e,p+1,c),n=me(e,p+3,0),r=Ie,t=function(e,t){var n=0;return xe(e,99)>-1&&(n|=a),xe(e,114)>-1&&(n|=u),xe(e,108)>-1&&(n|=s),t>0&&(n|=o),n}(v,n)}j(e,l,Re)===f?(i=new WeakMap,U(e,i),H(e,l,Re)):i=ne(e,-1);var g=Z(e,p+1);return i.set(d,g),W(d,r,t,n),0},setlocal:function(e){var t=Le(e),n=t.thread,r=t.arg,i=new p,a=fe(e,r+1),o=fe(e,r+2);if(!x(n,a,i))return le(e,r+1,"level out of range");ce(e,r+3),Q(e,r+3),Se(e,n,1),oe(e,n,1);var s=X(n,i,o);return null===s&&R(n,1),F(e,s),1},setmetatable:function(e){var t=re(e,2);return ue(e,t==f||t==h,2,"nil or table expected"),Q(e,2),q(e,1),1},setupvalue:function(e){return ce(e,3),Me(e,0)},setuservalue:function(e){return de(e,1,d),ce(e,2),Q(e,2),J(e,1),1},traceback:function(e){var t=Le(e),n=t.thread,r=t.arg,i=ee(e,r+1);if(null!==i||E(e,r+1)){var a=me(e,r+2,e===n?1:0);ke(e,n,i,a)}else z(e,r+1);return 1},upvalueid:function(e){var t=Ne(e,1,2);return U(e,ie(e,1,t)),1},upvaluejoin:function(e){var t=Ne(e,1,2),n=Ne(e,3,4);return ue(e,!O(e,1),1,"Lua function expected"),ue(e,!O(e,3),3,"Lua function expected"),ae(e,1,t,3,n),0}};"undefined"!=typeof window&&(r=function(){var e=prompt("lua_debug>","");return null!==e?e:""}),r&&(De.debug=function(e){for(;;){var t=r();if("cont"===t)return 0;if(0!==t.length){var n=Ae(t);(ve(e,n,n.length,Ae("=(debug command)",!0))||N(e,0,0,0))&&_e(Y(e,-1),"\n"),Q(e,0)}}}),e.exports.luaopen_debug=function(e){return ge(e,De),1}},function(e,t,n){"use strict";var r,i,a=n(3),o=a.LUA_DIRSEP,s=a.LUA_EXEC_DIR,u=a.LUA_JSPATH_DEFAULT,l=a.LUA_PATH_DEFAULT,c=a.LUA_PATH_MARK,f=a.LUA_PATH_SEP,h=n(2),d=h.LUA_OK,p=h.LUA_REGISTRYINDEX,v=h.LUA_TNIL,g=h.LUA_TTABLE,m=h.lua_callk,y=h.lua_createtable,k=h.lua_getfield,_=h.lua_insert,b=h.lua_isfunction,w=h.lua_isnil,x=h.lua_isstring,A=h.lua_newtable,S=h.lua_pop,L=h.lua_pushboolean,O=h.lua_pushcclosure,T=h.lua_pushcfunction,E=h.lua_pushfstring,C=h.lua_pushglobaltable,M=h.lua_pushlightuserdata,N=h.lua_pushliteral,R=h.lua_pushlstring,P=h.lua_pushnil,I=h.lua_pushstring,D=h.lua_pushvalue,U=h.lua_rawgeti,B=h.lua_rawgetp,V=h.lua_rawseti,F=h.lua_rawsetp,z=h.lua_remove,j=h.lua_setfield,H=h.lua_setmetatable,G=h.lua_settop,K=h.lua_toboolean,W=h.lua_tostring,X=h.lua_touserdata,q=h.lua_upvalueindex,Q=n(7),$=Q.LUA_LOADED_TABLE,J=Q.LUA_PRELOAD_TABLE,Y=Q.luaL_Buffer,Z=Q.luaL_addvalue,ee=Q.luaL_buffinit,te=Q.luaL_checkstring,ne=Q.luaL_error,re=Q.luaL_getsubtable,ie=Q.luaL_gsub,ae=Q.luaL_len,oe=Q.luaL_loadfile,se=Q.luaL_newlib,ue=Q.luaL_optstring,le=Q.luaL_pushresult,ce=Q.luaL_setfuncs,fe=n(17),he=n(5),de=he.luastring_indexOf,pe=he.to_jsstring,ve=he.to_luastring,ge=he.to_uristring,me=n(0),ye="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),ke=ve("__JSLIBS__"),_e=o,be=o,we=ve("luaopen_"),xe=ve("_"),Ae=ve("\x01");r=function(e,t,n){t=ge(t);var r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(),r.status<200||r.status>=300)return I(e,ve("".concat(r.status,": ").concat(r.statusText))),null;var i,a=r.response;/\/\/[#@] sourceURL=/.test(a)||(a+=" //# sourceURL="+t);try{i=Function("fengari",a)}catch(t){return I(e,ve("".concat(t.name,": ").concat(t.message))),null}var o=i(me);return"function"==typeof o||"object"==typeof o&&null!==o?o:void 0===o?ye:(I(e,ve("library returned unexpected type (".concat(typeof o,")"))),null)},i=function(e){e=ge(e);var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.status>=200&&t.status<=299};var Se=function(e,t,n){var i=Te(e,t);if(null===i){if(null===(i=r(e,t,(n[0],"*".charCodeAt(0)))))return 1;Ee(e,t,i)}if(n[0]==="*".charCodeAt(0))return L(e,1),0;var a=function(e,t,n){var r=t[pe(n)];return r&&"function"==typeof r?r:(E(e,ve("undefined symbol: %s"),n),null)}(e,i,n);return null===a?2:(T(e,a),0)},Le=ye,Oe=function(e,t,n,r){var i="".concat(n).concat(fe.LUA_VERSUFFIX);I(e,ve(i));var a=Le[i];void 0===a&&(a=Le[n]),void 0===a||function(e){k(e,p,ve("LUA_NOENV"));var t=K(e,-1);return S(e,1),t}(e)?I(e,r):(a=ie(e,ve(a),ve(f+f,!0),ve(f+pe(Ae)+f,!0)),ie(e,a,Ae,r),z(e,-2)),j(e,-3,t),S(e,1)},Te=function(e,t){B(e,p,ke),k(e,-1,t);var n=X(e,-1);return S(e,2),n},Ee=function(e,t,n){B(e,p,ke),M(e,n),D(e,-1),j(e,-3,t),V(e,-2,ae(e,-2)+1),S(e,1)},Ce=function(e,t){for(;t[0]===f.charCodeAt(0);)t=t.subarray(1);if(0===t.length)return null;var n=de(t,f.charCodeAt(0));return n<0&&(n=t.length),R(e,t,n),t.subarray(n)},Me=function(e,t,n,r,a){var o=new Y;for(ee(e,o),0!==r[0]&&(t=ie(e,t,r,a));null!==(n=Ce(e,n));){var s=ie(e,W(e,-1),ve(c,!0),t);if(z(e,-2),i(s))return s;E(e,ve("\n\tno file '%s'"),s),z(e,-2),Z(o)}return le(o),null},Ne=function(e,t,n,r){k(e,q(1),n);var i=W(e,-1);return null===i&&ne(e,ve("'package.%s' must be a string"),n),Me(e,t,i,ve("."),r)},Re=function(e,t,n){return t?(I(e,n),2):ne(e,ve("error loading module '%s' from file '%s':\n\t%s"),W(e,1),n,W(e,-1))},Pe=function(e){var t=te(e,1),n=Ne(e,t,ve("path",!0),ve(be,!0));return null===n?1:Re(e,oe(e,n)===d,n)},Ie=function(e,t,n){var r;n=ie(e,n,ve("."),xe);var i=de(n,"-".charCodeAt(0));if(i>=0){r=R(e,n,i),r=E(e,ve("%s%s"),we,r);var a=Se(e,t,r);if(2!==a)return a;n=i+1}return r=E(e,ve("%s%s"),we,n),Se(e,t,r)},De=function(e){var t=te(e,1),n=Ne(e,t,ve("jspath",!0),ve(_e,!0));return null===n?1:Re(e,0===Ie(e,n,t),n)},Ue=function(e){var t,n=te(e,1),r=de(n,".".charCodeAt(0));if(r<0)return 0;R(e,n,r);var i=Ne(e,W(e,-1),ve("jspath",!0),ve(_e,!0));return null===i?1:0!==(t=Ie(e,i,n))?2!=t?Re(e,0,i):(I(e,ve("\n\tno module '%s' in file '%s'"),n,i),1):(I(e,i),2)},Be=function(e){var t=te(e,1);return k(e,p,J),k(e,-1,t)===v&&E(e,ve("\n\tno field package.preload['%s']"),t),1},Ve=function e(t,n,r){for(;n===d?(U(t,3,r.i)===v&&(S(t,1),le(r.msg),ne(t,ve("module '%s' not found:%s"),r.name,W(t,-1))),I(t,r.name),m(t,1,2,r,e)):n=d,!b(t,-2);r.i++)x(t,-2)?(S(t,1),Z(r.msg)):S(t,2);return r.k(t,d,r.ctx)},Fe=function(e,t,n){return I(e,n),_(e,-2),m(e,2,1,n,ze),ze(e,d,n)},ze=function(e,t,n){var r=n;return w(e,-1)||j(e,2,r),k(e,2,r)==v&&(L(e,1),D(e,-1),j(e,2,r)),1},je={loadlib:function(e){var t=te(e,1),n=te(e,2),r=Se(e,t,n);return 0===r?1:(P(e),_(e,-2),N(e,1===r?"open":"init"),3)},searchpath:function(e){return null!==Me(e,te(e,1),te(e,2),ue(e,3,"."),ue(e,4,o))?1:(P(e),_(e,-2),2)}},He={require:function(e){var t=te(e,1);return G(e,1),k(e,p,$),k(e,2,t),K(e,-1)?1:(S(e,1),function(e,t,n,r){var i=new Y;return ee(e,i),k(e,q(1),ve("searchers",!0))!==g&&ne(e,ve("'package.searchers' must be a table")),Ve(e,d,{name:t,i:1,msg:i,ctx:n,k:r})}(e,t,t,Fe))}};e.exports.luaopen_package=function(e){return function(e){A(e),y(e,0,1),H(e,-2),F(e,p,ke)}(e),se(e,je),function(e){var t=[Be,Pe,De,Ue,null];y(e);for(var n=0;t[n];n++)D(e,-2),O(e,t[n],1),V(e,-2,n+1);j(e,-2,ve("searchers",!0))}(e),Oe(e,ve("path",!0),"LUA_PATH",l),Oe(e,ve("jspath",!0),"LUA_JSPATH",u),N(e,o+"\n"+f+"\n"+c+"\n"+s+"\n-\n"),j(e,-2,ve("config",!0)),re(e,p,$),j(e,-2,ve("loaded",!0)),re(e,p,J),j(e,-2,ve("preload",!0)),C(e),D(e,-2),ce(e,He,1),S(e,1),1}},function(e,t,n){var r=n(2),i=r.lua_pushinteger,a=r.lua_pushliteral,o=r.lua_setfield,s=n(7).luaL_newlib,u=n(5),l=u.FENGARI_AUTHORS,c=u.FENGARI_COPYRIGHT,f=u.FENGARI_RELEASE,h=u.FENGARI_VERSION,d=u.FENGARI_VERSION_MAJOR,p=u.FENGARI_VERSION_MINOR,v=u.FENGARI_VERSION_NUM,g=u.FENGARI_VERSION_RELEASE,m=u.to_luastring;e.exports.luaopen_fengari=function(e){return s(e,{}),a(e,l),o(e,-2,m("AUTHORS")),a(e,c),o(e,-2,m("COPYRIGHT")),a(e,f),o(e,-2,m("RELEASE")),a(e,h),o(e,-2,m("VERSION")),a(e,d),o(e,-2,m("VERSION_MAJOR")),a(e,p),o(e,-2,m("VERSION_MINOR")),i(e,v),o(e,-2,m("VERSION_NUM")),a(e,g),o(e,-2,m("VERSION_RELEASE")),1}},function(e,t,n){"use strict";n.r(t),n.d(t,"L",(function(){return M})),n.d(t,"load",(function(){return N}));var r=n(0);n.d(t,"FENGARI_AUTHORS",(function(){return r.FENGARI_AUTHORS})),n.d(t,"FENGARI_COPYRIGHT",(function(){return r.FENGARI_COPYRIGHT})),n.d(t,"FENGARI_RELEASE",(function(){return r.FENGARI_RELEASE})),n.d(t,"FENGARI_VERSION",(function(){return r.FENGARI_VERSION})),n.d(t,"FENGARI_VERSION_MAJOR",(function(){return r.FENGARI_VERSION_MAJOR})),n.d(t,"FENGARI_VERSION_MINOR",(function(){return r.FENGARI_VERSION_MINOR})),n.d(t,"FENGARI_VERSION_NUM",(function(){return r.FENGARI_VERSION_NUM})),n.d(t,"FENGARI_VERSION_RELEASE",(function(){return r.FENGARI_VERSION_RELEASE})),n.d(t,"luastring_eq",(function(){return r.luastring_eq})),n.d(t,"luastring_indexOf",(function(){return r.luastring_indexOf})),n.d(t,"luastring_of",(function(){return r.luastring_of})),n.d(t,"to_jsstring",(function(){return r.to_jsstring})),n.d(t,"to_luastring",(function(){return r.to_luastring})),n.d(t,"to_uristring",(function(){return r.to_uristring})),n.d(t,"lua",(function(){return r.lua})),n.d(t,"lauxlib",(function(){return r.lauxlib})),n.d(t,"lualib",(function(){return r.lualib}));var i=n(21);n.d(t,"interop",(function(){return i}));var a=r.lua,o=a.LUA_ERRRUN,s=a.LUA_ERRSYNTAX,u=a.LUA_OK,l=a.LUA_VERSION_MAJOR,c=a.LUA_VERSION_MINOR,f=a.lua_Debug,h=a.lua_getinfo,d=a.lua_getstack,p=a.lua_gettop,v=a.lua_insert,g=a.lua_pcall,m=a.lua_pop,y=a.lua_pushcfunction,k=a.lua_pushstring,_=a.lua_remove,b=a.lua_setglobal,w=a.lua_tojsstring,x=r.lauxlib,A=x.luaL_loadbuffer,S=x.luaL_newstate,L=x.luaL_requiref,O=i.checkjs,T=i.luaopen_js,E=i.push,C=i.tojs,M=S();function N(e,t){if("string"==typeof e)e=Object(r.to_luastring)(e);else if(!(e instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");t=t?Object(r.to_luastring)(t):null;var n,i=A(M,e,null,t);if(n=i===s?new SyntaxError(w(M,-1)):C(M,-1),m(M,1),i!==u)throw n;return n}if(r.lualib.luaL_openlibs(M),L(M,Object(r.to_luastring)("js"),T,1),m(M,1),k(M,Object(r.to_luastring)(r.FENGARI_COPYRIGHT)),b(M,Object(r.to_luastring)("_COPYRIGHT")),"undefined"!=typeof document&&document instanceof HTMLDocument){var R=function(e){switch(e){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},P=function(e){var t=new f;return d(e,2,t)&&h(e,Object(r.to_luastring)("Sl"),t),E(e,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:w(e,1),error:C(e,1),filename:t.short_src?Object(r.to_jsstring)(t.short_src):void 0,lineno:t.currentline>0?t.currentline:void 0})),1},I=function(e,t,n){var r,i=A(M,t,null,n);if(i===s){var a=w(M,-1),l=e.src?e.src:document.location,c=void 0,f=new SyntaxError(a,l,c);r=new ErrorEvent("error",{message:a,error:f,filename:l,lineno:c})}else if(i===u){var h=p(M);y(M,P),v(M,h),Object.defineProperty(document,"currentScript",{value:e,configurable:!0}),i=g(M,0,0,h),delete document.currentScript,_(M,h),i===o&&(r=O(M,-1))}i!==u&&(void 0===r&&(r=new ErrorEvent("error",{message:w(M,-1),error:C(M,-1)})),m(M,1),window.dispatchEvent(r)&&console.error("uncaught exception",r.error))},D=function(e,t,n){if(e.status>=200&&e.status<300){var i=e.response;i="string"==typeof i?Object(r.to_luastring)(e.response):new Uint8Array(i),I(t,i,n)}else t.dispatchEvent(new Event("error"))},U=/^(.*?\/.*?)([\t ]*;.*)?$/,B=/^(\d+)\.(\d+)$/,V=function(e){if("SCRIPT"===e.tagName){var t=U.exec(e.type);if(t){var n=t[1];if("application/lua"===n||"text/lua"===n){if(e.hasAttribute("lua-version")){var i=B.exec(e.getAttribute("lua-version"));if(!i||i[1]!==l||i[2]!==c)return}!function(e){if(e.src){var t=Object(r.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async)if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:R(e.crossorigin),redirect:"follow",integrity:e.integrity}).then((function(e){if(e.ok)return e.arrayBuffer();throw new Error("unable to fetch")})).then((function(n){var r=new Uint8Array(n);I(e,r,t)})).catch((function(t){e.dispatchEvent(new Event("error"))}));else{var n=new XMLHttpRequest;n.open("GET",e.src,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&D(n,e,t)},n.send()}else{var i=new XMLHttpRequest;i.open("GET",e.src,!1),i.send(),D(i,e,t)}}else{var a=Object(r.to_luastring)(e.innerHTML),o=e.id?Object(r.to_luastring)("="+e.id):a;I(e,a,o)}}(e)}}}};"undefined"!=typeof MutationObserver?new MutationObserver((function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.addedNodes.length;i++)V(r.addedNodes[i])})).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted");Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),V)}},function(e,t,n){"use strict";var r=n(1),i=r.LUA_MULTRET,a=r.LUA_OPADD,o=r.LUA_OPBAND,s=r.LUA_OPBNOT,u=r.LUA_OPBOR,l=r.LUA_OPBXOR,c=r.LUA_OPDIV,f=r.LUA_OPIDIV,h=r.LUA_OPMOD,d=r.LUA_OPSHL,p=r.LUA_OPSHR,v=r.LUA_OPUNM,g=r.constant_types,m=g.LUA_TBOOLEAN,y=g.LUA_TLIGHTUSERDATA,k=g.LUA_TLNGSTR,_=g.LUA_TNIL,b=g.LUA_TNUMFLT,w=g.LUA_TNUMINT,x=g.LUA_TTABLE,A=r.to_luastring,S=n(4).lua_assert,L=n(20),O=n(6),T=n(16),E=n(23),C=n(9),M=n(15),N=T.OpCodesI,R=O.TValue,P={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},I={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},D=function(e){return e.t!==e.f},U=function(e,t){var n=E.expkind;if(D(e))return!1;switch(e.k){case n.VKINT:return!t||new R(w,e.u.ival);case n.VKFLT:return!t||new R(b,e.u.nval);default:return!1}},B=function(e,t,n){var r,i=t+n-1;if(e.pc>e.lasttarget&&(r=e.f.code[e.pc-1]).opcode===N.OP_LOADNIL){var a=r.A,o=a+r.B;if(a<=t&&t<=o+1||t<=a&&a<=i+1)return a<t&&(t=a),o>i&&(i=o),T.SETARG_A(r,t),void T.SETARG_B(r,i-t)}ee(e,N.OP_LOADNIL,t,n-1,0)},V=function(e,t){return e.f.code[t.u.info]},F=function(e,t){var n=e.f.code[t].sBx;return-1===n?-1:t+1+n},z=function(e,t,n){var r=e.f.code[t],i=n-(t+1);S(-1!==n),Math.abs(i)>T.MAXARG_sBx&&L.luaX_syntaxerror(e.ls,A("control structure too long",!0)),T.SETARG_sBx(r,i)},j=function(e,t,n){if(-1===n)return t;if(-1===t)t=n;else{for(var r=t,i=F(e,r);-1!==i;)i=F(e,r=i);z(e,r,n)}return t},H=function(e){var t=e.jpc;e.jpc=-1;var n=ne(e,N.OP_JMP,0,-1);return j(e,n,t)},G=function(e,t,n,r,i){return ee(e,t,n,r,i),H(e)},K=function(e){return e.lasttarget=e.pc,e.pc},W=function(e,t){return t>=1&&T.testTMode(e.f.code[t-1].opcode)?t-1:t},X=function(e,t){return e.f.code[W(e,t)]},q=function(e,t,n){var r=W(e,t),i=e.f.code[r];return i.opcode===N.OP_TESTSET&&(n!==T.NO_REG&&n!==i.B?T.SETARG_A(i,n):e.f.code[r]=T.CREATE_ABC(N.OP_TEST,i.B,0,i.C),!0)},Q=function(e,t){for(;-1!==t;t=F(e,t))q(e,t,T.NO_REG)},$=function(e,t,n,r,i){for(;-1!==t;){var a=F(e,t);q(e,t,r)?z(e,t,n):z(e,t,i),t=a}},J=function(e,t){K(e),e.jpc=j(e,e.jpc,t)},Y=function(e,t,n){n===e.pc?J(e,t):(S(n<e.pc),$(e,t,n,T.NO_REG,n))},Z=function(e,t){var n=e.f;return function(e){$(e,e.jpc,e.pc,T.NO_REG,e.pc),e.jpc=-1}(e),n.code[e.pc]=t,n.lineinfo[e.pc]=e.ls.lastline,e.pc++},ee=function(e,t,n,r,i){return S(T.getOpMode(t)===T.iABC),S(T.getBMode(t)!==T.OpArgN||0===r),S(T.getCMode(t)!==T.OpArgN||0===i),S(n<=T.MAXARG_A&&r<=T.MAXARG_B&&i<=T.MAXARG_C),Z(e,T.CREATE_ABC(t,n,r,i))},te=function(e,t,n,r){return S(T.getOpMode(t)===T.iABx||T.getOpMode(t)===T.iAsBx),S(T.getCMode(t)===T.OpArgN),S(n<=T.MAXARG_A&&r<=T.MAXARG_Bx),Z(e,T.CREATE_ABx(t,n,r))},ne=function(e,t,n,r){return te(e,t,n,r+T.MAXARG_sBx)},re=function(e,t){return S(t<=T.MAXARG_Ax),Z(e,T.CREATE_Ax(N.OP_EXTRAARG,t))},ie=function(e,t,n){if(n<=T.MAXARG_Bx)return te(e,N.OP_LOADK,t,n);var r=te(e,N.OP_LOADKX,t,0);return re(e,n),r},ae=function(e,t){var n=e.freereg+t;n>e.f.maxstacksize&&(n>=255&&L.luaX_syntaxerror(e.ls,A("function or expression needs too many registers",!0)),e.f.maxstacksize=n)},oe=function(e,t){ae(e,t),e.freereg+=t},se=function(e,t){!T.ISK(t)&&t>=e.nactvar&&(e.freereg--,S(t===e.freereg))},ue=function(e,t){t.k===E.expkind.VNONRELOC&&se(e,t.u.info)},le=function(e,t,n){var r=t.k===E.expkind.VNONRELOC?t.u.info:-1,i=n.k===E.expkind.VNONRELOC?n.u.info:-1;r>i?(se(e,r),se(e,i)):(se(e,i),se(e,r))},ce=function(e,t,n){var r=e.f,i=C.luaH_get(e.L,e.ls.h,t);if(i.ttisinteger()){var a=i.value;if(a<e.nk&&r.k[a].ttype()===n.ttype()&&r.k[a].value===n.value)return a}var o=e.nk;return C.luaH_setfrom(e.L,e.ls.h,t,new O.TValue(w,o)),r.k[o]=n,e.nk++,o},fe=function(e,t){var n=new R(y,t),r=new R(w,t);return ce(e,n,r)},he=function(e,t){var n=new R(b,t);return ce(e,n,n)},de=function(e,t){var n=new R(m,t);return ce(e,n,n)},pe=function(e,t,n){var r=E.expkind;if(t.k===r.VCALL)T.SETARG_C(V(e,t),n+1);else if(t.k===r.VVARARG){var a=V(e,t);T.SETARG_B(a,n+1),T.SETARG_A(a,e.freereg),oe(e,1)}else S(n===i)},ve=function(e,t){var n=E.expkind;t.k===n.VCALL?(S(2===V(e,t).C),t.k=n.VNONRELOC,t.u.info=V(e,t).A):t.k===n.VVARARG&&(T.SETARG_B(V(e,t),2),t.k=n.VRELOCABLE)},ge=function(e,t){var n=E.expkind;switch(t.k){case n.VLOCAL:t.k=n.VNONRELOC;break;case n.VUPVAL:t.u.info=ee(e,N.OP_GETUPVAL,0,t.u.info,0),t.k=n.VRELOCABLE;break;case n.VINDEXED:var r;se(e,t.u.ind.idx),t.u.ind.vt===n.VLOCAL?(se(e,t.u.ind.t),r=N.OP_GETTABLE):(S(t.u.ind.vt===n.VUPVAL),r=N.OP_GETTABUP),t.u.info=ee(e,r,0,t.u.ind.t,t.u.ind.idx),t.k=n.VRELOCABLE;break;case n.VVARARG:case n.VCALL:ve(e,t)}},me=function(e,t,n,r){return K(e),ee(e,N.OP_LOADBOOL,t,n,r)},ye=function(e,t,n){var r=E.expkind;switch(ge(e,t),t.k){case r.VNIL:B(e,n,1);break;case r.VFALSE:case r.VTRUE:ee(e,N.OP_LOADBOOL,n,t.k===r.VTRUE,0);break;case r.VK:ie(e,n,t.u.info);break;case r.VKFLT:ie(e,n,he(e,t.u.nval));break;case r.VKINT:ie(e,n,fe(e,t.u.ival));break;case r.VRELOCABLE:var i=V(e,t);T.SETARG_A(i,n);break;case r.VNONRELOC:n!==t.u.info&&ee(e,N.OP_MOVE,n,t.u.info,0);break;default:return void S(t.k===r.VJMP)}t.u.info=n,t.k=r.VNONRELOC},ke=function(e,t){t.k!==E.expkind.VNONRELOC&&(oe(e,1),ye(e,t,e.freereg-1))},_e=function(e,t){for(;-1!==t;t=F(e,t))if(X(e,t).opcode!==N.OP_TESTSET)return!0;return!1},be=function(e,t,n){var r=E.expkind;if(ye(e,t,n),t.k===r.VJMP&&(t.t=j(e,t.t,t.u.info)),D(t)){var i,a=-1,o=-1;if(_e(e,t.t)||_e(e,t.f)){var s=t.k===r.VJMP?-1:H(e);a=me(e,n,0,1),o=me(e,n,1,0),J(e,s)}i=K(e),$(e,t.f,i,n,a),$(e,t.t,i,n,o)}t.f=t.t=-1,t.u.info=n,t.k=r.VNONRELOC},we=function(e,t){ge(e,t),ue(e,t),oe(e,1),be(e,t,e.freereg-1)},xe=function(e,t){if(ge(e,t),t.k===E.expkind.VNONRELOC){if(!D(t))return t.u.info;if(t.u.info>=e.nactvar)return be(e,t,t.u.info),t.u.info}return we(e,t),t.u.info},Ae=function(e,t){D(t)?xe(e,t):ge(e,t)},Se=function(e,t){var n=E.expkind,r=!1;switch(Ae(e,t),t.k){case n.VTRUE:t.u.info=de(e,!0),r=!0;break;case n.VFALSE:t.u.info=de(e,!1),r=!0;break;case n.VNIL:t.u.info=function(e){var t=new R(_,null),n=new R(x,e.ls.h);return ce(e,n,t)}(e),r=!0;break;case n.VKINT:t.u.info=fe(e,t.u.ival),r=!0;break;case n.VKFLT:t.u.info=he(e,t.u.nval),r=!0;break;case n.VK:r=!0}return r&&(t.k=n.VK,t.u.info<=T.MAXINDEXRK)?T.RKASK(t.u.info):xe(e,t)},Le=function(e,t){var n=X(e,t.u.info);S(T.testTMode(n.opcode)&&n.opcode!==N.OP_TESTSET&&n.opcode!==N.OP_TEST),T.SETARG_A(n,!n.A)},Oe=function(e,t,n){if(t.k===E.expkind.VRELOCABLE){var r=V(e,t);if(r.opcode===N.OP_NOT)return e.pc--,G(e,N.OP_TEST,r.B,0,!n)}return ke(e,t),ue(e,t),G(e,N.OP_TESTSET,T.NO_REG,t.u.info,n)},Te=function(e,t){var n,r=E.expkind;switch(ge(e,t),t.k){case r.VJMP:Le(e,t),n=t.u.info;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:n=-1;break;default:n=Oe(e,t,0)}t.f=j(e,t.f,n),J(e,t.t),t.t=-1},Ee=function(e,t){var n,r=E.expkind;switch(ge(e,t),t.k){case r.VJMP:n=t.u.info;break;case r.VNIL:case r.VFALSE:n=-1;break;default:n=Oe(e,t,1)}t.t=j(e,t.t,n),J(e,t.f),t.f=-1},Ce=function(e,t,n){var r,i,a=E.expkind;if(!(r=U(t,!0))||!(i=U(n,!0))||!function(e,t,n){switch(e){case o:case u:case l:case d:case p:case s:return!1!==M.tointeger(t)&&!1!==M.tointeger(n);case c:case f:case h:return 0!==n.value;default:return 1}}(e,r,i))return 0;var v=new R;if(O.luaO_arith(null,e,r,i,v),v.ttisinteger())t.k=a.VKINT,t.u.ival=v.value;else{var g=v.value;if(isNaN(g)||0===g)return!1;t.k=a.VKFLT,t.u.nval=g}return!0},Me=function(e,t,n,r,i){var a=Se(e,r),o=Se(e,n);le(e,n,r),n.u.info=ee(e,t,0,o,a),n.k=E.expkind.VRELOCABLE,Ne(e,i)},Ne=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=P,e.exports.NO_JUMP=-1,e.exports.UnOpr=I,e.exports.getinstruction=V,e.exports.luaK_checkstack=ae,e.exports.luaK_code=Z,e.exports.luaK_codeABC=ee,e.exports.luaK_codeABx=te,e.exports.luaK_codeAsBx=ne,e.exports.luaK_codek=ie,e.exports.luaK_concat=j,e.exports.luaK_dischargevars=ge,e.exports.luaK_exp2RK=Se,e.exports.luaK_exp2anyreg=xe,e.exports.luaK_exp2anyregup=function(e,t){(t.k!==E.expkind.VUPVAL||D(t))&&xe(e,t)},e.exports.luaK_exp2nextreg=we,e.exports.luaK_exp2val=Ae,e.exports.luaK_fixline=Ne,e.exports.luaK_getlabel=K,e.exports.luaK_goiffalse=Ee,e.exports.luaK_goiftrue=Te,e.exports.luaK_indexed=function(e,t,n){var r=E.expkind;S(!D(t)&&(E.vkisinreg(t.k)||t.k===r.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=Se(e,n),t.u.ind.vt=t.k===r.VUPVAL?r.VUPVAL:r.VLOCAL,t.k=r.VINDEXED},e.exports.luaK_infix=function(e,t,n){switch(t){case P.OPR_AND:Te(e,n);break;case P.OPR_OR:Ee(e,n);break;case P.OPR_CONCAT:we(e,n);break;case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:U(n,!1)||Se(e,n);break;default:Se(e,n)}},e.exports.luaK_intK=fe,e.exports.luaK_jump=H,e.exports.luaK_jumpto=function(e,t){return Y(e,H(e),t)},e.exports.luaK_nil=B,e.exports.luaK_numberK=he,e.exports.luaK_patchclose=function(e,t,n){for(n++;-1!==t;t=F(e,t)){var r=e.f.code[t];S(r.opcode===N.OP_JMP&&(0===r.A||r.A>=n)),T.SETARG_A(r,n)}},e.exports.luaK_patchlist=Y,e.exports.luaK_patchtohere=J,e.exports.luaK_posfix=function(e,t,n,r,i){var o=E.expkind;switch(t){case P.OPR_AND:S(-1===n.t),ge(e,r),r.f=j(e,r.f,n.f),n.to(r);break;case P.OPR_OR:S(-1===n.f),ge(e,r),r.t=j(e,r.t,n.t),n.to(r);break;case P.OPR_CONCAT:Ae(e,r);var s=V(e,r);r.k===o.VRELOCABLE&&s.opcode===N.OP_CONCAT?(S(n.u.info===s.B-1),ue(e,n),T.SETARG_B(s,n.u.info),n.k=o.VRELOCABLE,n.u.info=r.u.info):(we(e,r),Me(e,N.OP_CONCAT,n,r,i));break;case P.OPR_ADD:case P.OPR_SUB:case P.OPR_MUL:case P.OPR_DIV:case P.OPR_IDIV:case P.OPR_MOD:case P.OPR_POW:case P.OPR_BAND:case P.OPR_BOR:case P.OPR_BXOR:case P.OPR_SHL:case P.OPR_SHR:Ce(t+a,n,r)||Me(e,t+N.OP_ADD,n,r,i);break;case P.OPR_EQ:case P.OPR_LT:case P.OPR_LE:case P.OPR_NE:case P.OPR_GT:case P.OPR_GE:!function(e,t,n,r){var i,a=E.expkind;n.k===a.VK?i=T.RKASK(n.u.info):(S(n.k===a.VNONRELOC),i=n.u.info);var o=Se(e,r);switch(le(e,n,r),t){case P.OPR_NE:n.u.info=G(e,N.OP_EQ,0,i,o);break;case P.OPR_GT:case P.OPR_GE:var s=t-P.OPR_NE+N.OP_EQ;n.u.info=G(e,s,1,o,i);break;default:var u=t-P.OPR_EQ+N.OP_EQ;n.u.info=G(e,u,1,i,o)}n.k=a.VJMP}(e,t,n,r)}return n},e.exports.luaK_prefix=function(e,t,n,r){var i=new E.expdesc;switch(i.k=E.expkind.VKINT,i.u.ival=i.u.nval=i.u.info=0,i.t=-1,i.f=-1,t){case I.OPR_MINUS:case I.OPR_BNOT:if(Ce(t+v,n,i))break;case I.OPR_LEN:!function(e,t,n,r){var i=xe(e,n);ue(e,n),n.u.info=ee(e,t,0,i,0),n.k=E.expkind.VRELOCABLE,Ne(e,r)}(e,t+N.OP_UNM,n,r);break;case I.OPR_NOT:!function(e,t){var n=E.expkind;switch(ge(e,t),t.k){case n.VNIL:case n.VFALSE:t.k=n.VTRUE;break;case n.VK:case n.VKFLT:case n.VKINT:case n.VTRUE:t.k=n.VFALSE;break;case n.VJMP:Le(e,t);break;case n.VRELOCABLE:case n.VNONRELOC:ke(e,t),ue(e,t),t.u.info=ee(e,N.OP_NOT,0,t.u.info,0),t.k=n.VRELOCABLE}var r=t.f;t.f=t.t,t.t=r,Q(e,t.f),Q(e,t.t)}(e,n)}},e.exports.luaK_reserveregs=oe,e.exports.luaK_ret=function(e,t,n){ee(e,N.OP_RETURN,t,n+1,0)},e.exports.luaK_self=function(e,t,n){xe(e,t);var r=t.u.info;ue(e,t),t.u.info=e.freereg,t.k=E.expkind.VNONRELOC,oe(e,2),ee(e,N.OP_SELF,t.u.info,r,Se(e,n)),ue(e,n)},e.exports.luaK_setlist=function(e,t,n,r){var a=(n-1)/T.LFIELDS_PER_FLUSH+1,o=r===i?0:r;S(0!==r&&r<=T.LFIELDS_PER_FLUSH),a<=T.MAXARG_C?ee(e,N.OP_SETLIST,t,o,a):a<=T.MAXARG_Ax?(ee(e,N.OP_SETLIST,t,o,0),re(e,a)):L.luaX_syntaxerror(e.ls,A("constructor too long",!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(e,t){pe(e,t,i)},e.exports.luaK_setoneret=ve,e.exports.luaK_setreturns=pe,e.exports.luaK_storevar=function(e,t,n){var r=E.expkind;switch(t.k){case r.VLOCAL:return ue(e,n),void be(e,n,t.u.info);case r.VUPVAL:var i=xe(e,n);ee(e,N.OP_SETUPVAL,i,t.u.info,0);break;case r.VINDEXED:var a=t.u.ind.vt===r.VLOCAL?N.OP_SETTABLE:N.OP_SETTABUP,o=Se(e,n);ee(e,a,t.u.ind.t,t.u.ind.idx,o)}ue(e,n)},e.exports.luaK_stringK=function(e,t){var n=new R(k,t);return ce(e,n,n)}},function(e,t,n){"use strict";var a=n(1),o=a.LUA_SIGNATURE,s=a.constant_types,u=s.LUA_TBOOLEAN,l=s.LUA_TLNGSTR,c=s.LUA_TNIL,f=s.LUA_TNUMFLT,h=s.LUA_TNUMINT,d=s.LUA_TSHRSTR,p=a.thread_status.LUA_ERRSYNTAX,v=a.is_luastring,g=a.luastring_eq,m=a.to_luastring,y=n(8),k=n(13),_=n(6),b=n(16),w=b.MAXARG_sBx,x=b.POS_A,A=b.POS_Ax,S=b.POS_B,L=b.POS_Bx,O=b.POS_C,T=b.POS_OP,E=b.SIZE_A,C=b.SIZE_Ax,M=b.SIZE_B,N=b.SIZE_Bx,R=b.SIZE_C,P=b.SIZE_OP,I=n(4).lua_assert,D=n(10).luaS_bless,U=n(19),B=U.luaZ_read,V=U.ZIO,F=[25,147,13,10,26,10],z=function(){function e(t,n,r){i(this,e),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,I(n instanceof V,"BytecodeParser only operates on a ZIO"),I(v(r)),64===r[0]||61===r[0]?this.name=r.subarray(1):r[0]==o[0]?this.name=m("binary string",!0):this.name=r,this.L=t,this.Z=n,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return r(e,[{key:"read",value:function(e){var t=new Uint8Array(e);return 0!==B(this.Z,t,0,e)&&this.error("truncated"),t}},{key:"LoadByte",value:function(){return 0!==B(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"LoadInt",value:function(){return 0!==B(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadNumber",value:function(){return 0!==B(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"LoadInteger",value:function(){return 0!==B(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadSize_t",value:function(){return this.LoadInteger()}},{key:"LoadString",value:function(){var e=this.LoadByte();return 255===e&&(e=this.LoadSize_t()),0===e?null:D(this.L,this.read(e-1))}},{key:"LoadCode",value:function(t){for(var n=this.LoadInt(),r=e,i=0;i<n;i++){0!==B(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");var a=this.dv.getUint32(0,!0);t.code[i]={code:a,opcode:a>>T&r.MASK1(P,0),A:a>>x&r.MASK1(E,0),B:a>>S&r.MASK1(M,0),C:a>>O&r.MASK1(R,0),Bx:a>>L&r.MASK1(N,0),Ax:a>>A&r.MASK1(C,0),sBx:(a>>L&r.MASK1(N,0))-w}}}},{key:"LoadConstants",value:function(e){for(var t=this.LoadInt(),n=0;n<t;n++){var r=this.LoadByte();switch(r){case c:e.k.push(new _.TValue(c,null));break;case u:e.k.push(new _.TValue(u,0!==this.LoadByte()));break;case f:e.k.push(new _.TValue(f,this.LoadNumber()));break;case h:e.k.push(new _.TValue(h,this.LoadInteger()));break;case d:case l:e.k.push(new _.TValue(l,this.LoadString()));break;default:this.error("unrecognized constant '".concat(r,"'"))}}}},{key:"LoadProtos",value:function(e){for(var t=this.LoadInt(),n=0;n<t;n++)e.p[n]=new k.Proto(this.L),this.LoadFunction(e.p[n],e.source)}},{key:"LoadUpvalues",value:function(e){for(var t=this.LoadInt(),n=0;n<t;n++)e.upvalues[n]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}},{key:"LoadDebug",value:function(e){for(var t=this.LoadInt(),n=0;n<t;n++)e.lineinfo[n]=this.LoadInt();t=this.LoadInt();for(var r=0;r<t;r++)e.locvars[r]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};t=this.LoadInt();for(var i=0;i<t;i++)e.upvalues[i].name=this.LoadString()}},{key:"LoadFunction",value:function(e,t){e.source=this.LoadString(),null===e.source&&(e.source=t),e.linedefined=this.LoadInt(),e.lastlinedefined=this.LoadInt(),e.numparams=this.LoadByte(),e.is_vararg=0!==this.LoadByte(),e.maxstacksize=this.LoadByte(),this.LoadCode(e),this.LoadConstants(e),this.LoadUpvalues(e),this.LoadProtos(e),this.LoadDebug(e)}},{key:"checkliteral",value:function(e,t){var n=this.read(e.length);g(n,e)||this.error(t)}},{key:"checkHeader",value:function(){this.checkliteral(o.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(F,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(e){_.luaO_pushfstring(this.L,m("%s: %s precompiled chunk"),this.name,m(e)),y.luaD_throw(this.L,p)}},{key:"checksize",value:function(e,t,n){e!==t&&this.error("".concat(n," size mismatch in"))}}],[{key:"MASK1",value:function(e,t){return~(-1<<e)<<t}}]),e}();e.exports.luaU_undump=function(e,t,n){var r=new z(e,t,n);r.checkHeader();var i=k.luaF_newLclosure(e,r.LoadByte());return y.luaD_inctop(e),e.stack[e.top-1].setclLvalue(i),i.p=new k.Proto(e),r.LoadFunction(i.p,null),I(i.nupvalues===i.p.upvalues.length),i}},function(e,t,n){"use strict";var a=n(1),o=a.LUA_SIGNATURE,s=a.LUA_VERSION_MAJOR,u=a.LUA_VERSION_MINOR,l=a.constant_types,c=l.LUA_TBOOLEAN,f=l.LUA_TLNGSTR,h=l.LUA_TNIL,d=l.LUA_TNUMFLT,p=l.LUA_TNUMINT,v=l.LUA_TSHRSTR,g=a.luastring_of,m=g(25,147,13,10,26,10),y=16*Number(s)+Number(u),k=function(e,t,n){0===n.status&&t>0&&(n.status=n.writer(n.L,e,t,n.data))},_=function(e,t){k(g(e),1,t)},b=function(e,t){var n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);var r=new Uint8Array(n);k(r,4,t)},w=function(e,t){var n=new ArrayBuffer(4);new DataView(n).setInt32(0,e,!0);var r=new Uint8Array(n);k(r,4,t)},x=function(e,t){var n=new ArrayBuffer(8);new DataView(n).setFloat64(0,e,!0);var r=new Uint8Array(n);k(r,8,t)},A=function(e,t){if(null===e)_(0,t);else{var n=e.tsslen()+1,r=e.getstr();n<255?_(n,t):(_(255,t),w(n,t)),k(r,n-1,t)}},S=function e(t,n,r){r.strip||t.source===n?A(null,r):A(t.source,r),b(t.linedefined,r),b(t.lastlinedefined,r),_(t.numparams,r),_(t.is_vararg?1:0,r),_(t.maxstacksize,r),function(e,t){var n=e.code.map((function(e){return e.code}));b(n.length,t);for(var r=0;r<n.length;r++)b(n[r],t)}(t,r),function(e,t){var n=e.k.length;b(n,t);for(var r=0;r<n;r++){var i=e.k[r];switch(_(i.ttype(),t),i.ttype()){case h:break;case c:_(i.value?1:0,t);break;case d:x(i.value,t);break;case p:w(i.value,t);break;case v:case f:A(i.tsvalue(),t)}}}(t,r),function(e,t){var n=e.upvalues.length;b(n,t);for(var r=0;r<n;r++)_(e.upvalues[r].instack?1:0,t),_(e.upvalues[r].idx,t)}(t,r),function(t,n){var r=t.p.length;b(r,n);for(var i=0;i<r;i++)e(t.p[i],t.source,n)}(t,r),function(e,t){var n=t.strip?0:e.lineinfo.length;b(n,t);for(var r=0;r<n;r++)b(e.lineinfo[r],t);n=t.strip?0:e.locvars.length,b(n,t);for(var i=0;i<n;i++)A(e.locvars[i].varname,t),b(e.locvars[i].startpc,t),b(e.locvars[i].endpc,t);n=t.strip?0:e.upvalues.length,b(n,t);for(var a=0;a<n;a++)A(e.upvalues[a].name,t)}(t,r)};e.exports.luaU_dump=function(e,t,n,a,s){var u=new(function(){return r((function e(){i(this,e),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}))}());return u.L=e,u.writer=n,u.data=a,u.strip=s,u.status=0,function(e){k(o,o.length,e),_(y,e),_(0,e),k(m,m.length,e),_(4,e),_(4,e),_(4,e),_(4,e),_(8,e),w(22136,e),x(370.5,e)}(u),_(t.upvalues.length,u),S(t,null,u),u.status}},function(e,t,n){var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function a(e){return function(e,t){var n,r,o,s,u,l,c,f,h,d=1,p=e.length,v="";for(r=0;r<p;r++)if("string"==typeof e[r])v+=e[r];else if(Array.isArray(e[r])){if((s=e[r])[2])for(n=t[d],o=0;o<s[2].length;o++){if(!n.hasOwnProperty(s[2][o]))throw new Error(a('[sprintf] property "%s" does not exist',s[2][o]));n=n[s[2][o]]}else n=s[1]?t[s[1]]:t[d++];if(i.not_type.test(s[8])&&i.not_primitive.test(s[8])&&n instanceof Function&&(n=n()),i.numeric_arg.test(s[8])&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(i.number.test(s[8])&&(f=n>=0),s[8]){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s[6]?parseInt(s[6]):0);break;case"e":n=s[7]?parseFloat(n).toExponential(s[7]):parseFloat(n).toExponential();break;case"f":n=s[7]?parseFloat(n).toFixed(s[7]):parseFloat(n);break;case"g":n=s[7]?String(Number(n.toPrecision(s[7]))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s[7]?n.substring(0,s[7]):n;break;case"t":n=String(!!n),n=s[7]?n.substring(0,s[7]):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s[7]?n.substring(0,s[7]):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s[7]?n.substring(0,s[7]):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(s[8])?v+=n:(!i.number.test(s[8])||f&&!s[3]?h="":(h=f?"+":"-",n=n.toString().replace(i.sign,"")),l=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(h+n).length,u=s[6]&&c>0?l.repeat(c):"",v+=s[5]?h+n+u:"0"===l?h+u+n:u+h+n)}return v}(function(e){if(s[e])return s[e];for(var t,n=e,r=[],a=0;n;){if(null!==(t=i.text.exec(n)))r.push(t[0]);else if(null!==(t=i.modulo.exec(n)))r.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var o=[],u=t[2],l=[];if(null===(l=i.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o.push(l[1]);""!==(u=u.substring(l[0].length));)if(null!==(l=i.key_access.exec(u)))o.push(l[1]);else{if(null===(l=i.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");o.push(l[1])}t[2]=o}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return s[e]=r}(e),arguments)}function o(e,t){return a.apply(null,[e].concat(t||[]))}var s=Object.create(null);t.sprintf=a,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=o,void 0===(r=function(){return{sprintf:a,vsprintf:o}}.call(t,n,t,e))||(e.exports=r))}()},function(e,t,n){"use strict";var r=n(2).lua_pop,i=n(7).luaL_requiref,a=n(5).to_luastring,o={};e.exports.luaL_openlibs=function(e){for(var t in o)i(e,a(t),o[t],1),r(e,1)};var s=n(17),u=n(24).luaopen_base,l=n(25).luaopen_coroutine,c=n(31).luaopen_debug,f=n(30).luaopen_math,h=n(32).luaopen_package,d=n(27).luaopen_os,p=n(28).luaopen_string,v=n(26).luaopen_table,g=n(29).luaopen_utf8;o._G=u,o[s.LUA_LOADLIBNAME]=h,o[s.LUA_COLIBNAME]=l,o[s.LUA_TABLIBNAME]=v,o[s.LUA_OSLIBNAME]=d,o[s.LUA_STRLIBNAME]=p,o[s.LUA_MATHLIBNAME]=f,o[s.LUA_UTF8LIBNAME]=g,o[s.LUA_DBLIBNAME]=c;var m=n(33).luaopen_fengari;o[s.LUA_FENGARILIBNAME]=m}])},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,U=Object.assign;function B(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var V=!1;function F(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case S:return"Profiler";case A:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case L:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Y(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Ae=null;function Se(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Le(e){xe?Ae?Ae.push(e):Ae=[e]:xe=e}function Oe(){if(xe){var e=xe,t=Ae;if(Ae=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Ce=!1;function Me(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Te(e,t,n)}finally{Ce=!1,(null!==xe||null!==Ae)&&(Ee(),Oe())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Re=!1}function Ie(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Ue=null,Be=!1,Ve=null,Fe={onError:function(e){De=!0,Ue=e}};function ze(e,t,n,r,i,a,o,s,u){De=!1,Ue=null,Ie.apply(Fe,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(je(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,At,St,Lt=!1,Ot=[],Tt=null,Et=null,Ct=null,Mt=new Map,Nt=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Vt(e,t,n){Bt(e)&&n.delete(t)}function Ft(){Lt=!1,null!==Tt&&Bt(Tt)&&(Tt=null),null!==Et&&Bt(Et)&&(Et=null),null!==Ct&&Bt(Ct)&&(Ct=null),Mt.forEach(Vt),Nt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Lt||(Lt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function jt(e){function t(t){return zt(t,e)}if(0<Ot.length){zt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Et&&zt(Et,e),null!==Ct&&zt(Ct,e),Mt.forEach(t),Nt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Rt.shift()}var Ht=_.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=Ht.transition;Ht.transition=null;try{kt=1,Xt(e,t,n,r)}finally{kt=i,Ht.transition=a}}function Wt(e,t,n,r){var i=kt,a=Ht.transition;Ht.transition=null;try{kt=4,Xt(e,t,n,r)}finally{kt=i,Ht.transition=a}}function Xt(e,t,n,r){if(Gt){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,qt,n),It(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,i),!0;case"dragenter":return Et=Dt(Et,e,t,n,r,i),!0;case"mouseover":return Ct=Dt(Ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Mt.set(a,Dt(Mt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Nt.set(a,Dt(Nt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Qt(e,t,n,r))&&Gr(e,t,r,qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var qt=null;function Qt(e,t,n,r){if(qt=null,null!==(e=yi(e=be(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=U({},ln,{view:0,detail:0}),hn=an(fn),dn=U({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),gn=an(U({},fn,{relatedTarget:0})),mn=an(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(yn),_n=an(U({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return An}var Ln=U({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=an(Ln),Tn=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=an(U({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Cn=an(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=an(Mn),Rn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,In=null;c&&"documentMode"in document&&(In=document.documentMode);var Dn=c&&"TextEvent"in window&&!In,Un=c&&(!Pn||In&&8<In&&11>=In),Bn=String.fromCharCode(32),Vn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Le(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function qn(e){Br(e,0)}function Qn(e){if(X(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(c){var Yn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Xn)){var t=[];Kn(t,Xn,e,be(e)),Me(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Xn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,kr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ar={};function Sr(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return xr[e]=n[t];return e}c&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Lr=Sr("animationend"),Or=Sr("animationiteration"),Tr=Sr("animationstart"),Er=Sr("transitionend"),Cr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Cr.set(e,t),u(t,[e])}for(var Rr=0;Rr<Mr.length;Rr++){var Pr=Mr[Rr];Nr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Nr(Lr,"onAnimationEnd"),Nr(Or,"onAnimationIteration"),Nr(Tr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Er,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(ze.apply(this,arguments),De){if(!De)throw Error(a(198));var c=Ue;De=!1,Ue=null,Be||(Be=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ur(i,s,l),a=u}}}if(Be)throw e=Ve,Be=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Fr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Me((function(){var r=a,i=be(n),o=[];e:{var s=Cr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=On;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=En;break;case Lr:case Or:case Tr:u=mn;break;case Er:u=Cn;break;case"scroll":u=hn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ne(p,h))&&c.push(Kr(p,v,d)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(f=je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:_i(u),d=null==l?s:_i(l),(s=new c(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=d,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(h=l,p=0,d=c=u;d;d=Xr(d))p++;for(d=0,v=h;v;v=Xr(v))d++;for(;0<p-d;)c=Xr(c),p--;for(;0<d-p;)h=Xr(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Xr(c),h=Xr(h)}c=null}else c=null;null!==u&&qr(o,s,u,c,!1),null!==l&&null!==f&&qr(o,f,l,c,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=$n;else if(Gn(s))if(Jn)g=or;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?_i(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Fn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(y=en()):(Yt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(m=Wr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),y?k.data=y:null!==(y=zn(n))&&(k.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=en(),Zt=Yt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Br(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ne(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Ne(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ne(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=Ne(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,gi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],xi=-1;function Ai(e){return{current:e}}function Si(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Li(e,t){xi++,wi[xi]=e.current,e.current=t}var Oi={},Ti=Ai(Oi),Ei=Ai(!1),Ci=Oi;function Mi(e,t){var n=e.type.contextTypes;if(!n)return Oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ei),Si(Ti)}function Pi(e,t,n){if(Ti.current!==Oi)throw Error(a(168));Li(Ti,t),Li(Ei,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return U({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oi,Ci=Ti.current,Li(Ti,e),Li(Ei,Ei.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ii(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,Si(Ei),Si(Ti),Li(Ti,e)):Si(Ei),Li(Ei,n)}var Bi=null,Vi=!1,Fi=!1;function zi(e){null===Bi?Bi=[e]:Bi.push(e)}function ji(){if(!Fi&&null!==Bi){Fi=!0;var e=0,t=kt;try{var n=Bi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Vi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Xe(Ze,ji),i}finally{kt=t,Fi=!1}}return null}var Hi=_.ReactCurrentBatchConfig;function Gi(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ki=Ai(null),Wi=null,Xi=null,qi=null;function Qi(){qi=Xi=Wi=null}function $i(e){var t=Ki.current;Si(Ki),e._currentValue=t}function Ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){Wi=e,qi=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Xi){if(null===Wi)throw Error(a(308));Xi=e,Wi.dependencies={lanes:0,firstContext:e}}else Xi=Xi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tl(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function sa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ua(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,c=l=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ru|=o,e.lanes=o,e.memoizedState=f}}function la(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ca=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ju(),i=Yu(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zu(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ju(),i=Yu(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zu(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ju(),r=Yu(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zu(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function pa(e,t,n){var r=!1,i=Oi,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Ni(t)?Ci:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):Oi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ca,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Ni(t)?Ci:Ti.current,i.context=Mi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ma=[],ya=0,ka=null,_a=0,ba=[],wa=0,xa=null,Aa=1,Sa="";function La(e,t){ma[ya++]=_a,ma[ya++]=ka,ka=e,_a=t}function Oa(e,t,n){ba[wa++]=Aa,ba[wa++]=Sa,ba[wa++]=xa,xa=e;var r=Aa;e=Sa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Aa=1<<32-ot(t)+i|n<<i|r,Sa=a+e}else Aa=1<<a|n<<i|r,Sa=e}function Ta(e){null!==e.return&&(La(e,1),Oa(e,1,0))}function Ea(e){for(;e===ka;)ka=ma[--ya],ma[ya]=null,_a=ma[--ya],ma[ya]=null;for(;e===xa;)xa=ba[--wa],ba[wa]=null,Sa=ba[--wa],ba[wa]=null,Aa=ba[--wa],ba[wa]=null}var Ca=null,Ma=null,Na=!1,Ra=null;function Pa(e,t){var n=Cl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ia(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ca=e,Ma=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ca=e,Ma=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Aa,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ca=e,Ma=null,!0);default:return!1}}function Da(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Ua(e){if(Na){var t=Ma;if(t){var n=t;if(!Ia(e,t)){if(Da(e))throw Error(a(418));t=li(n.nextSibling);var r=Ca;t&&Ia(e,t)?Pa(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ca=e)}}else{if(Da(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ca=e}}}function Ba(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ca=e}function Va(e){if(e!==Ca)return!1;if(!Na)return Ba(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Ma)){if(Da(e)){for(e=Ma;e;)e=li(e.nextSibling);throw Error(a(418))}for(;t;)Pa(e,t),t=li(t.nextSibling)}if(Ba(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ma=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ma=null}}else Ma=Ca?li(e.stateNode.nextSibling):null;return!0}function Fa(){Ma=Ca=null,Na=!1}function za(e){null===Ra?Ra=[e]:Ra.push(e)}function ja(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ca&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Dl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===N&&Ga(a)===t.type)?((r=i(t,n.props)).ref=ja(e,t,n),r.return=e,r):((r=Rl(n.type,n.key,n.props,null,e.mode,r)).ref=ja(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Rl(t.type,t.key,t.props,null,e.mode,n)).ref=ja(e,null,t),n.return=e,n;case w:return(t=Ul(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?l(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case N:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||I(n))return null!==i?null:f(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||I(r))return f(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,f=a,v=a=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=g);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m,f=g}if(v===s.length)return n(i,f),Na&&La(i,v),l;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return Na&&La(i,v),l}for(f=r(i,f);v<s.length;v++)null!==(g=p(f,i,v,s[v],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(i,e)})),Na&&La(i,v),l}function g(i,s,u,l){var c=I(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var f=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var k=d(i,v,y.value,l);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,g),null===f?c=k:f.sibling=k,f=k,v=m}if(y.done)return n(i,v),Na&&La(i,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,l))&&(s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return Na&&La(i,g),c}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),Na&&La(i,g),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&Ga(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=ja(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=Pl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Rl(o.type,o.key,o.props,null,r.mode,u)).ref=ja(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ul(o,r.mode,u)).return=r,r=a}return s(r);case N:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(I(o))return g(r,a,o,u);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Dl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Wa=Ka(!0),Xa=Ka(!1),qa={},Qa=Ai(qa),$a=Ai(qa),Ja=Ai(qa);function Ya(e){if(e===qa)throw Error(a(174));return e}function Za(e,t){switch(Li(Ja,t),Li($a,e),Li(Qa,qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Qa),Li(Qa,t)}function eo(){Si(Qa),Si($a),Si(Ja)}function to(e){Ya(Ja.current);var t=Ya(Qa.current),n=ue(t,e.type);t!==n&&(Li($a,e),Li(Qa,n))}function no(e){$a.current===e&&(Si(Qa),Si($a))}var ro=Ai(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var so=_.ReactCurrentDispatcher,uo=_.ReactCurrentBatchConfig,lo=0,co=null,fo=null,ho=null,po=!1,vo=!1,go=0,mo=0;function yo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _o(e,t,n,r,i,o){if(lo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:is,e=n(r,i),vo){o=0;do{if(vo=!1,go=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,so.current=as,e=n(r,i)}while(vo)}if(so.current=ns,t=null!==fo&&null!==fo.next,lo=0,ho=fo=co=null,po=!1,t)throw Error(a(300));return e}function bo(){var e=0!==go;return go=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?co.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?co.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?co.memoizedState=ho=e:ho=ho.next=e}return ho}function Ao(e,t){return"function"===typeof t?t(e):t}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var f=c.lane;if((lo&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,co.lanes|=f,Ru|=f}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,co.lanes|=o,Ru|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Lo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Oo(){}function To(e,t){var n=co,r=xo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Vo(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Po(9,Co.bind(null,n,r,i,t),void 0,null),null===Lu)throw Error(a(349));0!==(30&lo)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Zu(e,1,-1)}function Mo(e,t,n){return n((function(){No(t)&&Zu(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ro(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,co,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Io(){return xo().memoizedState}function Do(e,t,n,r){var i=wo();co.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Po(t,n,a,r))}co.flags|=e,i.memoizedState=Po(1|t,n,a,r)}function Bo(e,t){return Do(8390656,8,e,t)}function Vo(e,t){return Uo(2048,8,e,t)}function Fo(e,t){return Uo(4,2,e,t)}function zo(e,t){return Uo(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,jo.bind(null,t,e),n)}function Go(){}function Ko(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&lo)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),co.lanes|=n,Ru|=n,e.baseState=!0),t)}function qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{kt=n,uo.transition=r}}function Qo(){return xo().memoizedState}function $o(e,t,n){var r=Yu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e)?Zo(t,n):(es(e,t,n),null!==(e=Zu(e,r,n=Ju()))&&ts(e,t,r))}function Jo(e,t,n){var r=Yu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Zo(t,i);else{es(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o))return}catch(u){}null!==(e=Zu(e,r,n=Ju()))&&ts(e,t,r)}}function Yo(e){var t=e.alternate;return e===co||null!==t&&t===co}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tl(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:Zi,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:Zi,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Ro,useDebugValue:Go,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=qo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,i=wo();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Lu)throw Error(a(349));0!==(30&lo)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Lu.identifierPrefix;if(Na){var n=Sa;t=":"+t+"R"+(n=(Aa&~(1<<32-ot(Aa)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},is={readContext:Zi,useCallback:Ko,useContext:Zi,useEffect:Vo,useImperativeHandle:Ho,useInsertionEffect:Fo,useLayoutEffect:zo,useMemo:Wo,useReducer:So,useRef:Io,useState:function(){return So(Ao)},useDebugValue:Go,useDeferredValue:function(e){return Xo(xo(),fo.memoizedState,e)},useTransition:function(){return[So(Ao)[0],xo().memoizedState]},useMutableSource:Oo,useSyncExternalStore:To,useId:Qo,unstable_isNewReconciler:!1},as={readContext:Zi,useCallback:Ko,useContext:Zi,useEffect:Vo,useImperativeHandle:Ho,useInsertionEffect:Fo,useLayoutEffect:zo,useMemo:Wo,useReducer:Lo,useRef:Io,useState:function(){return Lo(Ao)},useDebugValue:Go,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Xo(t,fo.memoizedState,e)},useTransition:function(){return[Lo(Ao)[0],xo().memoizedState]},useMutableSource:Oo,useSyncExternalStore:To,useId:Qo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,ls,cs,fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zu||(zu=!0,ju=r),ss(0,t)},n}function ds(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ss(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Al.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function ms(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ks(e,t,n){var r=t.pendingProps;switch(Ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Ni(t.type)&&Ri(),ys(t),null;case 3:return r=t.stateNode,eo(),Si(Ei),Si(Ti),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Ra&&(al(Ra),Ra=null))),ys(t),null;case 5:no(t);var i=Ya(Ja.current);if(n=t.type,null!==e&&null!=t.stateNode)ls(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return ys(t),null}if(e=Ya(Qa.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)Vr(Ir[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,us(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)Vr(Ir[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&k(e,o,c,u))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)cs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ja.current),Ya(Qa.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Ca))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return ys(t),null;case 13:if(Si(ro),r=t.memoizedState,Na&&null!==Ma&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ma;r;)r=li(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Ra&&(al(Ra),Ra=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Mu&&(Mu=3):pl())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&jr(t.stateNode.containerInfo),ys(t),null;case 10:return $i(t.type._context),ys(t),null;case 19:if(Si(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)ms(o,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=io(e))){for(t.flags|=128,ms(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Li(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vu&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ms(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Na)return ys(t),null}else 2*Je()-o.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Li(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return cl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Eu)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ls=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Qa.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Vr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},cs=function(e,t,n,r){n!==r&&(t.flags|=4)};var _s=_.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Wa(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=_o(e,t,n,r,a,i),n=bo(),null===e||bs?(Na&&n&&Ta(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function As(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ml(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Nl(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ls(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Li(Cu,Eu),Eu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Li(Cu,Eu),Eu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Li(Cu,Eu),Eu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Li(Cu,Eu),Eu|=r;return ws(e,t,i,n),t.child}function Os(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Ni(n)?Ci:Ti.current;return a=Mi(t,a),Yi(t,i),n=_o(e,t,n,r,a,i),r=bo(),null===e||bs?(Na&&r&&Ta(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Es(e,t,n,r,i){if(Ni(n)){var a=!0;Di(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Zi(l):l=Mi(t,l=Ni(n)?Ci:Ti.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&va(t,o,r,l),ta=!1;var h=t.memoizedState;o.state=h,ua(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ei.current||ta?("function"===typeof c&&(fa(t,n,c,r),u=t.memoizedState),(s=ta||da(t,n,s,r,h,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Gi(t.type,s),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Zi(u):u=Mi(t,u=Ni(n)?Ci:Ti.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&va(t,o,r,u),ta=!1,h=t.memoizedState,o.state=h,ua(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ei.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(l=ta||da(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Os(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Gs(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Wa(t,e.child,null,a),t.child=Wa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Za(e,t.containerInfo)}function Ns(e,t,n,r,i){return Fa(),za(i),t.flags|=256,ws(e,t,n,r),t.child}var Rs={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Is(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ds(e,t,n){var r,i=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Li(ro,1&o),null===e)return Ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Il(o,i,0,null),e=Pl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Rs,e):Us(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Fs(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=Il({mode:"visible",children:i.children},o,0,null),(s=Pl(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&Wa(t,e.child,null,n),t.child.memoizedState=Ps(n),t.memoizedState=Rs,s);if(0===(1&t.mode))t=Fs(e,t,n,null);else if("$!"===r.data)t=Fs(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),bs||i){if(null!==(i=Lu)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,Zu(e,i,-1))}pl(),t=Fs(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ll.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ma=li(r.nextSibling),Ca=t,Na=!0,Ra=null,null!==n&&(ba[wa++]=Aa,ba[wa++]=Sa,ba[wa++]=xa,Aa=n.id,Sa=n.overflow,xa=t),(t=Us(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Vs(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Is(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i):(n=Bs(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Vs(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Is(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i):(n=Bs(e,t,i.children,n),t.memoizedState=null,n)}function Us(e,t){return(t=Il({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){var i=e.child;return e=i.sibling,n=Nl(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vs(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Nl(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Nl(o,r):(r=Pl(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Fs(e,t,n,r){return null!==r&&za(r),Wa(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ji(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Hs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Li(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){switch(Ea(t),t.tag){case 1:return Ni(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Si(Ei),Si(Ti),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Si(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ro),null;case 4:return eo(),null;case 10:return $i(t.type._context),null;case 22:case 23:return cl(),null;default:return null}}var Ws=!1,Xs=!1,qs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xl(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){xl(e,t,r)}}var Ys=!1;function Zs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Js(t,n,a)}i=i.next}while(i!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function iu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function au(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(au(e,t,n),e=e.sibling;null!==e;)au(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function lu(e,t,n){for(n=n.child;null!==n;)cu(e,t,n),n=n.sibling}function cu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||$s(n,t);case 6:var r=su,i=uu;su=null,lu(e,t,n),uu=i,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(su,n.stateNode));break;case 4:r=su,i=uu,su=n.stateNode.containerInfo,uu=!0,lu(e,t,n),su=r,uu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Js(n,t,o),i=i.next}while(i!==r)}lu(e,t,n);break;case 1:if(!Xs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){xl(n,t,s)}lu(e,t,n);break;case 21:lu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,lu(e,t,n),Xs=r):lu(e,t,n);break;default:lu(e,t,n)}}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qs),t.forEach((function(t){var r=Ol.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(a(160));cu(o,s,i),su=null,uu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){xl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hu(t,e),pu(e),4&r){try{Zs(3,e,e.return),eu(3,e)}catch(v){xl(e,e.return,v)}try{Zs(5,e,e.return)}catch(v){xl(e,e.return,v)}}break;case 1:hu(t,e),pu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(hu(t,e),pu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xl(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),ke(u,s);var c=ke(u,o);for(s=0;s<l.length;s+=2){var f=l[s],h=l[s+1];"style"===f?ge(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,c)}switch(u){case"input":Y(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xl(e,e.return,v)}}break;case 6:if(hu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(a(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(v){xl(e,e.return,v)}}break;case 3:if(hu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(v){xl(e,e.return,v)}break;case 4:default:hu(t,e),pu(e);break;case 13:hu(t,e),pu(e),8192&(c=e.child).flags&&null!==c.memoizedState&&(null===c.alternate||null===c.alternate.memoizedState)&&(Bu=Je()),4&r&&fu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(f=Xs)||c,hu(t,e),Xs=f):hu(t,e),pu(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(v){xl(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xl(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!c&&0!==(1&e.mode))for(Qs=e,e=e.child;null!==e;){for(c=Qs=e;null!==Qs;){switch(h=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:Zs(4,f,f.return);break;case 1:if($s(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xl(d,p,v)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){yu(c);continue}}null!==h?(h.return=f,Qs=h):yu(c)}e=e.sibling}}break;case 19:hu(t,e),pu(e),4&r&&fu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ou(e,iu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;au(e,iu(e),o);break;default:throw Error(a(161))}}catch(s){xl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Qs=e,gu(e,t,n)}function gu(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ws;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ws;var l=Xs;if(Ws=o,(Xs=u)&&!l)for(Qs=i;null!==Qs;)u=(o=Qs).child,22===o.tag&&null!==o.memoizedState?ku(i):null!==u?(u.return=o,Qs=u):ku(i);for(;null!==a;)Qs=a,gu(a,t,n),a=a.sibling;Qs=i,Ws=s,Xs=l}mu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):mu(e)}}function mu(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Gi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&la(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}la(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&tu(t)}catch(d){xl(t,t.return,d)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function yu(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function ku(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){xl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){xl(t,i,u)}}var a=t.return;try{tu(t)}catch(u){xl(t,a,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){xl(t,o,u)}}}catch(u){xl(t,t.return,u)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var _u,bu=Math.ceil,wu=_.ReactCurrentDispatcher,xu=_.ReactCurrentOwner,Au=_.ReactCurrentBatchConfig,Su=0,Lu=null,Ou=null,Tu=0,Eu=0,Cu=Ai(0),Mu=0,Nu=null,Ru=0,Pu=0,Iu=0,Du=null,Uu=null,Bu=0,Vu=1/0,Fu=null,zu=!1,ju=null,Hu=null,Gu=!1,Ku=null,Wu=0,Xu=0,qu=null,Qu=-1,$u=0;function Ju(){return 0!==(6&Su)?Je():-1!==Qu?Qu:Qu=Je()}function Yu(e){return 0===(1&e.mode)?1:0!==(2&Su)&&0!==Tu?Tu&-Tu:null!==Hi.transition?(0===$u&&($u=vt()),$u):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Zu(e,t,n){if(50<Xu)throw Xu=0,qu=null,Error(a(185));var r=el(e,t);return null===r?null:(mt(r,t,n),0!==(2&Su)&&r===Lu||(r===Lu&&(0===(2&Su)&&(Pu|=t),4===Mu&&ol(r,Tu)),nl(r,n),1===t&&0===Su&&0===(1&e.mode)&&(Vu=Je()+500,Vi&&ji())),r)}function el(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tl(e){return(null!==Lu||null!==ea)&&0!==(1&e.mode)&&0===(2&Su)}function nl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Lu?Tu:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(sl.bind(null,e)):zi(sl.bind(null,e)),oi((function(){0===Su&&ji()})),n=null;else{switch(_t(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tl(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if(Qu=-1,$u=0,0!==(6&Su))throw Error(a(327));var n=e.callbackNode;if(bl()&&e.callbackNode!==n)return null;var r=ht(e,e===Lu?Tu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Su;Su|=2;var o=dl();for(Lu===e&&Tu===t||(Fu=null,Vu=Je()+500,fl(e,t));;)try{ml();break}catch(u){hl(e,u)}Qi(),wu.current=o,Su=i,null!==Ou?t=0:(Lu=null,Tu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=il(e,i))),1===t)throw n=Nu,fl(e,0),ol(e,r),nl(e,Je()),n;if(6===t)ol(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t))throw n=Nu,fl(e,0),ol(e,r),nl(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_l(e,Uu,Fu);break;case 3:if(ol(e,r),(130023424&r)===r&&10<(t=Bu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Ju(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,Uu,Fu),t);break}_l(e,Uu,Fu);break;case 4:if(ol(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bu(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,Uu,Fu),r);break}_l(e,Uu,Fu);break;default:throw Error(a(329))}}}return nl(e,Je()),e.callbackNode===n?rl.bind(null,e):null}function il(e,t){var n=Du;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Uu,Uu=n,null!==t&&al(t)),e}function al(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function ol(e,t){for(t&=~Iu,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sl(e){if(0!==(6&Su))throw Error(a(327));bl();var t=ht(e,0);if(0===(1&t))return nl(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Nu,fl(e,0),ol(e,t),nl(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,Uu,Fu),nl(e,Je()),null}function ul(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(Vu=Je()+500,Vi&&ji())}}function ll(e){null!==Ku&&0===Ku.tag&&0===(6&Su)&&bl();var t=Su;Su|=1;var n=Au.transition,r=kt;try{if(Au.transition=null,kt=1,e)return e()}finally{kt=r,Au.transition=n,0===(6&(Su=t))&&ji()}}function cl(){Eu=Cu.current,Si(Cu)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(Ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:eo(),Si(Ei),Si(Ti),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Si(ro);break;case 10:$i(r.type._context);break;case 22:case 23:cl()}n=n.return}if(Lu=e,Ou=e=Nl(e.current,null),Tu=Eu=t,Mu=0,Nu=null,Iu=Pu=Ru=0,Uu=Du=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hl(e,t){for(;;){var n=Ou;try{if(Qi(),so.current=ns,po){for(var r=co.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(lo=0,ho=fo=co=null,vo=!1,go=0,xu.current=null,null===n||null===n.return){Mu=1,Nu=t,Ou=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Tu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ps(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){ps(o,c,t),pl();break e}l=Error(a(426))}else if(Na&&1&u.mode){var m=vs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),za(l);break e}}o=l,4!==Mu&&(Mu=2),null===Du?Du=[o]:Du.push(o),l=os(l,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,sa(u,hs(0,l,t));break e;case 1:o=l;var y=u.type,k=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){u.flags|=65536,t&=-t,u.lanes|=t,sa(u,ds(u,o,t));break e}}u=u.return}while(null!==u)}kl(n)}catch(_){t=_,Ou===n&&null!==n&&(Ou=n=n.return);continue}break}}function dl(){var e=wu.current;return wu.current=ns,null===e?ns:e}function pl(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Lu||0===(268435455&Ru)&&0===(268435455&Pu)||ol(Lu,Tu)}function vl(e,t){var n=Su;Su|=2;var r=dl();for(Lu===e&&Tu===t||(Fu=null,fl(e,t));;)try{gl();break}catch(i){hl(e,i)}if(Qi(),Su=n,wu.current=r,null!==Ou)throw Error(a(261));return Lu=null,Tu=0,Mu}function gl(){for(;null!==Ou;)yl(Ou)}function ml(){for(;null!==Ou&&!Qe();)yl(Ou)}function yl(e){var t=_u(e.alternate,e,Eu);e.memoizedProps=e.pendingProps,null===t?kl(e):Ou=t,xu.current=null}function kl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ks(n,t,Eu)))return void(Ou=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Ou=n);if(null===e)return Mu=6,void(Ou=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ou=t);Ou=t=e}while(null!==t);0===Mu&&(Mu=5)}function _l(e,t,n){var r=kt,i=Au.transition;try{Au.transition=null,kt=1,function(e,t,n,r){do{bl()}while(null!==Ku);if(0!==(6&Su))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Lu&&(Ou=Lu=null,Tu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Tl(tt,(function(){return bl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Au.transition,Au.transition=null;var s=kt;kt=1;var u=Su;Su|=4,xu.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++f===r&&(l=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,k=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Gi(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var _=t.stateNode.containerInfo;if(1===_.nodeType)_.textContent="";else if(9===_.nodeType){var b=_.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(w){xl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}v=Ys,Ys=!1}(e,n),du(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,vu(n,e,i),$e(),Su=u,kt=s,Au.transition=o}else e.current=n;if(Gu&&(Gu=!1,Ku=e,Wu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(zu)throw zu=!1,e=ju,ju=null,e;0!==(1&Wu)&&0!==e.tag&&bl(),0!==(1&(o=e.pendingLanes))?e===qu?Xu++:(Xu=0,qu=e):Xu=0,ji()}(e,t,n,r)}finally{Au.transition=i,kt=r}return null}function bl(){if(null!==Ku){var e=_t(Wu),t=Au.transition,n=kt;try{if(Au.transition=null,kt=16>e?16:e,null===Ku)var r=!1;else{if(e=Ku,Ku=null,Wu=0,0!==(6&Su))throw Error(a(331));var i=Su;for(Su|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Qs=c;null!==Qs;){var f=Qs;switch(f.tag){case 0:case 11:case 15:Zs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Qs=h;else for(;null!==Qs;){var d=(f=Qs).sibling,p=f.return;if(nu(f),f===c){Qs=null;break}if(null!==d){d.return=p,Qs=d;break}Qs=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:Zs(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var k=e.current;for(Qs=k;null!==Qs;){var _=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Qs=_;else e:for(s=k;null!==Qs;){if(0!==(2048&(u=Qs).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(w){xl(u,u.return,w)}if(u===s){Qs=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,Qs=b;break e}Qs=u.return}}if(Su=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Au.transition=t}}return!1}function wl(e,t,n){aa(e,t=hs(0,t=os(n,t),1)),t=Ju(),null!==(e=el(e,1))&&(mt(e,1,t),nl(e,t))}function xl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){aa(t,e=ds(t,e=os(n,e),1)),e=Ju(),null!==(t=el(t,1))&&(mt(t,1,e),nl(t,e));break}}t=t.return}}function Al(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ju(),e.pingedLanes|=e.suspendedLanes&n,Lu===e&&(Tu&n)===n&&(4===Mu||3===Mu&&(130023424&Tu)===Tu&&500>Je()-Bu?fl(e,0):Iu|=n),nl(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Ju();null!==(e=el(e,t))&&(mt(e,t,n),nl(e,n))}function Ll(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sl(e,n)}function Ol(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sl(e,n)}function Tl(e,t){return Xe(e,t)}function El(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cl(e,t,n,r){return new El(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Cl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ml(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Pl(n.children,i,o,t);case A:s=8,i|=8;break;case S:return(e=Cl(12,n,t,2|i)).elementType=S,e.lanes=o,e;case E:return(e=Cl(13,n,t,i)).elementType=E,e.lanes=o,e;case C:return(e=Cl(19,n,t,i)).elementType=C,e.lanes=o,e;case R:return Il(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case L:s=10;break e;case O:s=9;break e;case T:s=11;break e;case M:s=14;break e;case N:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Cl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=Cl(7,e,r,t)).lanes=n,e}function Il(e,t,n,r){return(e=Cl(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={},e}function Dl(e,t,n){return(e=Cl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=Cl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,i,a,o,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Cl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Fl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zl(e){if(!e)return Oi;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ii(e,n,t)}return t}function jl(e,t,n,r,i,a,o,s,u){return(e=Vl(n,r,!0,e,0,a,0,s,u)).context=zl(null),n=e.current,(a=ia(r=Ju(),i=Yu(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,mt(e,i,r),nl(e,r),e}function Hl(e,t,n,r){var i=t.current,a=Ju(),o=Yu(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zu(i,o,a))&&oa(e,i,o),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),Fa();break;case 5:to(t);break;case 1:Ni(t.type)&&Di(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Li(Ki,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Li(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Li(ro,1&ro.current),null!==(e=Gs(e,t,n))?e.sibling:null);Li(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Li(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ls(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,Na&&0!==(1048576&t.flags)&&Oa(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Mi(t,Ti.current);Yi(t,n),i=_o(null,t,r,e,i,n);var o=bo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ta(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ml(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(r),e=Gi(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=As(null,t,r,Gi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),ua(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ns(e,t,r,n,i=Error(a(424)));break e}for(Ma=li(t.stateNode.containerInfo.firstChild),Ca=t,Na=!0,Ra=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Gs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Os(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&Ua(t),null;case 13:return Ds(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Li(Ki,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ei.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=ia(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ji(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ji(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=Zi(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=Gi(r=t.type,t.pendingProps),As(e,t,r,i=Gi(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Di(t)):e=!1,Yi(t,n),pa(t,r,i),ga(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Ls(e,t,n)}throw Error(a(156,t.tag))};var Xl="function"===typeof reportError?reportError:function(e){console.error(e)};function ql(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yl(){}function Zl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gl(o);s.call(e)}}Hl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gl(o);a.call(e)}}var o=jl(t,r,e,0,null,!1,0,"",Yl);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),ll(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gl(u);s.call(e)}}var u=Vl(e,0,!1,null,0,!1,0,"",Yl);return e._reactRootContainer=u,e[pi]=u.current,jr(8===e.nodeType?e.parentNode:e),ll((function(){Hl(t,u,n,r)})),u}(n,t,e,i,r);return Gl(o)}Ql.prototype.render=ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hl(e,t,null,null)},Ql.prototype.unmount=ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ll((function(){Hl(null,e,null,null)})),t[pi]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ut(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nl(t,Je()),0===(6&Su)&&(Vu=Je()+500,ji()))}break;case 13:var r=Ju();ll((function(){return Zu(e,1,r)})),Wl(e,1)}},wt=function(e){13===e.tag&&(Zu(e,134217728,Ju()),Wl(e,134217728))},xt=function(e){if(13===e.tag){var t=Ju(),n=Yu(e);Zu(e,n,t),Wl(e,n)}},At=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));X(r),Y(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=ul,Ee=ll;var ec={usingClientEntryPoint:!1,Events:[ki,_i,bi,Le,Oe,ul]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(a(200));return Fl(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(a(299));var n=!1,r="",i=Xl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return ll(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(a(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=jl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ql(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(a(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(a(40));return!!e._reactRootContainer&&(ll((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zl(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.jsx=l,t.jsxs=l},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var _=k.prototype=new y;_.constructor=k,v(_,m.prototype),_.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!A.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function E(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+T(u,0):a,b(o)?(i="",null!=e&&(i=e.replace(O,"$&/")+"/"),E(o,t,i,"",(function(e){return e}))):null!=o&&(L(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(O,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",b(e))for(var l=0;l<e.length;l++){var c=a+T(s=e[l],l);u+=E(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=E(s=s.value,t,i,c=a+T(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},R={transition:null},P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!L(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=L,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function b(e){if(g=!1,_(e),!v)if(null!==r(l))v=!0,R(w);else{var t=r(c);null!==t&&P(b,t.startTime-e)}}function w(e,n){v=!1,g&&(g=!1,y(L),L=-1),p=!0;var a=d;try{for(_(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!E());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),_(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&P(b,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,A=!1,S=null,L=-1,O=5,T=-1;function E(){return!(t.unstable_now()-T<O)}function C(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?x():(A=!1,S=null)}}else A=!1}if("function"===typeof k)x=function(){k(C)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,N=M.port2;M.port1.onmessage=C,x=function(){N.postMessage(null)}}else x=function(){m(C,0)};function R(e){S=e,A||(A=!0,x())}function P(e,n){L=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(g?(y(L),L=-1):g=!0,P(b,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,R(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".3461f4bf.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="lua-fluent-bit-online-playground:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var f=l[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/sandbox/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunklua_fluent_bit_online_playground=self.webpackChunklua_fluent_bit_online_playground||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{VERSION:function(){return Qp},after:function(){return Sm},all:function(){return Km},allKeys:function(){return sg},any:function(){return Wm},assign:function(){return Sg},before:function(){return Lm},bind:function(){return dm},bindAll:function(){return gm},chain:function(){return lm},chunk:function(){return Ty},clone:function(){return Eg},collect:function(){return Vm},compact:function(){return my},compose:function(){return Am},constant:function(){return Hv},contains:function(){return Xm},countBy:function(){return sy},create:function(){return Tg},debounce:function(){return bm},default:function(){return My},defaults:function(){return Lg},defer:function(){return km},delay:function(){return ym},detect:function(){return Dm},difference:function(){return ky},drop:function(){return vy},each:function(){return Bm},escape:function(){return Jg},every:function(){return Km},extend:function(){return Ag},extendOwn:function(){return Sg},filter:function(){return Hm},find:function(){return Dm},findIndex:function(){return Cm},findKey:function(){return Tm},findLastIndex:function(){return Mm},findWhere:function(){return Um},first:function(){return py},flatten:function(){return yy},foldl:function(){return zm},foldr:function(){return jm},forEach:function(){return Bm},functions:function(){return wg},get:function(){return Pg},groupBy:function(){return ay},has:function(){return Ig},head:function(){return py},identity:function(){return Dg},include:function(){return Xm},includes:function(){return Xm},indexBy:function(){return oy},indexOf:function(){return Pm},initial:function(){return dy},inject:function(){return zm},intersection:function(){return xy},invert:function(){return bg},invoke:function(){return qm},isArguments:function(){return Fv},isArray:function(){return Uv},isArrayBuffer:function(){return Tv},isBoolean:function(){return kv},isDataView:function(){return Dv},isDate:function(){return Av},isElement:function(){return _v},isEmpty:function(){return Zv},isEqual:function(){return og},isError:function(){return Lv},isFinite:function(){return zv},isFunction:function(){return Mv},isMap:function(){return vg},isMatch:function(){return eg},isNaN:function(){return jv},isNull:function(){return mv},isNumber:function(){return xv},isObject:function(){return gv},isRegExp:function(){return Sv},isSet:function(){return mg},isString:function(){return wv},isSymbol:function(){return Ov},isTypedArray:function(){return Qv},isUndefined:function(){return yv},isWeakMap:function(){return gg},isWeakSet:function(){return yg},iteratee:function(){return zg},keys:function(){return Yv},last:function(){return gy},lastIndexOf:function(){return Im},map:function(){return Vm},mapObject:function(){return Hg},matcher:function(){return Ug},matches:function(){return Ug},max:function(){return Jm},memoize:function(){return mm},methods:function(){return wg},min:function(){return Ym},mixin:function(){return Cy},negate:function(){return xm},noop:function(){return Gg},now:function(){return qg},object:function(){return Ly},omit:function(){return hy},once:function(){return Om},pairs:function(){return _g},partial:function(){return hm},partition:function(){return uy},pick:function(){return fy},pluck:function(){return Qm},property:function(){return Bg},propertyOf:function(){return Kg},random:function(){return Xg},range:function(){return Oy},reduce:function(){return zm},reduceRight:function(){return jm},reject:function(){return Gm},rest:function(){return vy},restArguments:function(){return vv},result:function(){return om},sample:function(){return ty},select:function(){return Hm},shuffle:function(){return ny},size:function(){return ly},some:function(){return Wm},sortBy:function(){return ry},sortedIndex:function(){return Nm},tail:function(){return vy},take:function(){return py},tap:function(){return Cg},template:function(){return am},templateSettings:function(){return Zg},throttle:function(){return _m},times:function(){return Wg},toArray:function(){return ey},toPath:function(){return Mg},transpose:function(){return Ay},unescape:function(){return Yg},union:function(){return wy},uniq:function(){return by},unique:function(){return by},uniqueId:function(){return um},unzip:function(){return Ay},values:function(){return kg},where:function(){return $m},without:function(){return _y},wrap:function(){return wm},zip:function(){return Sy}});var t=n(791),r=n(250);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function d(){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=h(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var w=function(){function e(){k(this,e)}return b(e,[{key:"lineAt",value:function(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)}},{key:"line",value:function(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)}},{key:"replace",value:function(e,t,n){var r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),A.from(r,this.length-(t-e)+n.length)}},{key:"append",value:function(e){return this.replace(this.length,this.length,e)}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=[];return this.decompose(e,t,n,0),A.from(n,t-e)}},{key:"eq",value:function(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;for(var t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new T(this),i=new T(e),a=t,o=t;;){if(r.next(a),i.next(a),a=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}},{key:"iter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new T(this,e)}},{key:"iterRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new E(this,e,t)}},{key:"iterLines",value:function(e,t){var n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);var r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new C(n)}},{key:"toString",value:function(){return this.sliceString(0)}},{key:"toJSON",value:function(){var e=[];return this.flatten(e),e}}],[{key:"of",value:function(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new x(t):A.from(x.split(t,[])):e.empty}}]),e}(),x=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S(e);return k(this,n),(r=t.call(this)).text=e,r.length=i,r}return b(n,[{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}},{key:"lineInner",value:function(e,t,n,r){for(var i=0;;i++){var a=this.text[i],o=r+a.length;if((t?n:o)>=e)return new M(r,o,n,a);r=o+1,n++}}},{key:"decompose",value:function(e,t,r,i){var a=e<=0&&t>=this.length?this:new n(O(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&i){var o=r.pop(),s=L(a.text,o.text.slice(),0,a.length);if(s.length<=32)r.push(new n(s,o.length+a.length));else{var u=s.length>>1;r.push(new n(s.slice(0,u)),new n(s.slice(u)))}}else r.push(a)}},{key:"replace",value:function(e,t,r){if(!(r instanceof n))return d(f(n.prototype),"replace",this).call(this,e,t,r);var i=L(this.text,L(r.text,O(this.text,0,e)),t),a=this.length+r.length-(t-e);return i.length<=32?new n(i,a):A.from(n.split(i,[]),a)}},{key:"sliceString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,a=0;i<=t&&a<this.text.length;a++){var o=this.text[a],s=i+o.length;i>e&&a&&(r+=n),e<s&&t>i&&(r+=o.slice(Math.max(0,e-i),t-i)),i=s+1}return r}},{key:"flatten",value:function(e){var t,n=s(this.text);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"scanIdentical",value:function(){return 0}}],[{key:"split",value:function(e,t){var r,i=[],a=-1,o=s(e);try{for(o.s();!(r=o.n()).done;){var u=r.value;i.push(u),a+=u.length+1,32==i.length&&(t.push(new n(i,a)),i=[],a=-1)}}catch(l){o.e(l)}finally{o.f()}return a>-1&&t.push(new n(i,a)),t}}]),n}(w),A=function(e){v(n,e);var t=y(n);function n(e,r){var i;k(this,n),(i=t.call(this)).children=e,i.length=r,i.lines=0;var a,o=s(e);try{for(o.s();!(a=o.n()).done;){var u=a.value;i.lines+=u.lines}}catch(l){o.e(l)}finally{o.f()}return i}return b(n,[{key:"lineInner",value:function(e,t,n,r){for(var i=0;;i++){var a=this.children[i],o=r+a.length,s=n+a.lines-1;if((t?s:o)>=e)return a.lineInner(e,t,n,r);r=o+1,n=s+1}}},{key:"decompose",value:function(e,t,n,r){for(var i=0,a=0;a<=t&&i<this.children.length;i++){var o=this.children[i],s=a+o.length;if(e<=s&&t>=a){var u=r&((a<=e?1:0)|(s>=t?2:0));a>=e&&s<=t&&!u?n.push(o):o.decompose(e-a,t-a,n,u)}a=s+1}}},{key:"replace",value:function(e,t,r){if(r.lines<this.lines)for(var i=0,a=0;i<this.children.length;i++){var o=this.children[i],s=a+o.length;if(e>=a&&t<=s){var u=o.replace(e-a,t-a,r),l=this.lines-o.lines+u.lines;if(u.lines<l>>4&&u.lines>l>>6){var c=this.children.slice();return c[i]=u,new n(c,this.length-(t-e)+r.length)}return d(f(n.prototype),"replace",this).call(this,a,s,u)}a=s+1}return d(f(n.prototype),"replace",this).call(this,e,t,r)}},{key:"sliceString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n",r="",i=0,a=0;i<this.children.length&&a<=t;i++){var o=this.children[i],s=a+o.length;a>e&&i&&(r+=n),e<s&&t>a&&(r+=o.sliceString(e-a,t-a,n)),a=s+1}return r}},{key:"flatten",value:function(e){var t,n=s(this.children);try{for(n.s();!(t=n.n()).done;){t.value.flatten(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"scanIdentical",value:function(e,t){if(!(e instanceof n))return 0;for(var r=0,i=o(t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1],4),a=i[0],s=i[1],u=i[2],l=i[3];;a+=t,s+=t){if(a==u||s==l)return r;var c=this.children[a],f=e.children[s];if(c!=f)return r+c.scanIdentical(f,t);r+=c.length+1}}}],[{key:"from",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce((function(e,t){return e+t.length+1}),-1),i=0,a=s(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;i+=o.lines}}catch(S){a.e(S)}finally{a.f()}if(i<32){var u,l=[],c=s(e);try{for(c.s();!(u=c.n()).done;){var f=u.value;f.flatten(l)}}catch(S){c.e(S)}finally{c.f()}return new x(l,r)}var h=Math.max(32,i>>5),d=h<<1,p=h>>1,v=[],g=0,m=-1,y=[];function k(e){var t;if(e.lines>d&&e instanceof n){var r,i=s(e.children);try{for(i.s();!(r=i.n()).done;){k(r.value)}}catch(S){i.e(S)}finally{i.f()}}else e.lines>p&&(g>p||!g)?(_(),v.push(e)):e instanceof x&&g&&(t=y[y.length-1])instanceof x&&e.lines+t.lines<=32?(g+=e.lines,m+=e.length+1,y[y.length-1]=new x(t.text.concat(e.text),t.length+1+e.length)):(g+e.lines>h&&_(),g+=e.lines,m+=e.length+1,y.push(e))}function _(){0!=g&&(v.push(1==y.length?y[0]:n.from(y,m)),m=-1,g=y.length=0)}var b,w=s(e);try{for(w.s();!(b=w.n()).done;){var A=b.value;k(A)}}catch(S){w.e(S)}finally{w.f()}return _(),1==v.length?v[0]:new n(v,r)}}]),n}(w);function S(e){var t,n=-1,r=s(e);try{for(r.s();!(t=r.n()).done;){n+=t.value.length+1}}catch(i){r.e(i)}finally{r.f()}return n}function L(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9,i=0,a=0,o=!0;a<e.length&&i<=r;a++){var s=e[a],u=i+s.length;u>=n&&(u>r&&(s=s.slice(0,r-i)),i<n&&(s=s.slice(n-i)),o?(t[t.length-1]+=s,o=!1):t.push(s)),i=u+1}return t}function O(e,t,n){return L(e,[""],t,n)}w.empty=new x([""],0);var T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;k(this,e),this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[n>0?1:(t instanceof x?t.text.length:t.children.length)<<1]}return b(e,[{key:"nextInner",value:function(e,t){for(this.done=this.lineBreak=!1;;){var n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],a=i>>1,o=r instanceof x?r.text.length:r.children.length;if(a==(t>0?o:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof x){var s=r.text[a+(t<0?-1:0)];if(this.offsets[n]+=t,s.length>Math.max(0,e))return this.value=0==e?s:t>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{var u=r.children[a+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof x?u.text.length:u.children.length)<<1))}}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}]),e}(),E=function(){function e(t,n,r){k(this,e),this.value="",this.done=!1,this.cursor=new T(t,n>r?-1:1),this.pos=n>r?t.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}return b(e,[{key:"nextInner",value:function(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);var n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;var r=this.cursor.next(e).value;return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}},{key:"lineBreak",get:function(){return this.cursor.lineBreak&&""!=this.value}}]),e}(),C=function(){function e(t){k(this,e),this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}return b(e,[{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.inner.next(e),n=t.done,r=t.lineBreak,i=t.value;return n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}},{key:"lineBreak",get:function(){return!1}}]),e}();"undefined"!=typeof Symbol&&(w.prototype[Symbol.iterator]=function(){return this.iter()},T.prototype[Symbol.iterator]=E.prototype[Symbol.iterator]=C.prototype[Symbol.iterator]=function(){return this});for(var M=function(){function e(t,n,r,i){k(this,e),this.from=t,this.to=n,this.number=r,this.text=i}return b(e,[{key:"length",get:function(){return this.to-this.from}}]),e}(),N="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((function(e){return e?parseInt(e,36):1})),R=1;R<N.length;R++)N[R]+=N[R-1];function P(e){for(var t=1;t<N.length;t+=2)if(N[t]>e)return N[t-1]<=e;return!1}function I(e){return e>=127462&&e<=127487}function D(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(n?U:B)(e,t,r)}function U(e,t,n){if(t==e.length)return t;t&&V(e.charCodeAt(t))&&F(e.charCodeAt(t-1))&&t--;var r=z(e,t);for(t+=H(r);t<e.length;){var i=z(e,t);if(8205==r||8205==i||n&&P(i))t+=H(i),r=i;else{if(!I(i))break;for(var a=0,o=t-2;o>=0&&I(z(e,o));)a++,o-=2;if(a%2==0)break;t+=2}}return t}function B(e,t,n){for(;t>0;){var r=U(e,t-2,n);if(r<t)return r;t--}return 0}function V(e){return e>=56320&&e<57344}function F(e){return e>=55296&&e<56320}function z(e,t){var n=e.charCodeAt(t);if(!F(n)||t+1==e.length)return n;var r=e.charCodeAt(t+1);return V(r)?r-56320+(n-55296<<10)+65536:n}function j(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function H(e){return e<65536?1:2}var G=/\r\n?|\n/,K=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(K||(K={})),W=function(){function e(t){k(this,e),this.sections=t}return b(e,[{key:"length",get:function(){for(var e=0,t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}},{key:"newLength",get:function(){for(var e=0,t=0;t<this.sections.length;t+=2){var n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}},{key:"iterGaps",value:function(e){for(var t=0,n=0,r=0;t<this.sections.length;){var i=this.sections[t++],a=this.sections[t++];a<0?(e(n,r,i),r+=i):r+=a,n+=i}}},{key:"iterChangedRanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(this,e,t)}},{key:"invertedDesc",get:function(){for(var t=[],n=0;n<this.sections.length;){var r=this.sections[n++],i=this.sections[n++];i<0?t.push(r,i):t.push(i,r)}return new e(t)}},{key:"composeDesc",value:function(e){return this.empty?e:e.empty?this:Y(this,e)}},{key:"mapDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:J(this,e,t)}},{key:"mapPos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K.Simple,r=0,i=0,a=0;a<this.sections.length;){var o=this.sections[a++],s=this.sections[a++],u=r+o;if(s<0){if(u>e)return i+(e-r);i+=o}else{if(n!=K.Simple&&u>=e&&(n==K.TrackDel&&r<e&&u>e||n==K.TrackBefore&&r<e||n==K.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!o)return e==r||t<0?i:i+s;i+=s}r=u}if(e>r)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(r));return i}},{key:"touchesRange",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=0,r=0;n<this.sections.length&&r<=t;){var i=this.sections[n++],a=this.sections[n++],o=r+i;if(a>=0&&r<=t&&o>=e)return!(r<e&&o>t)||"cover";r=o}return!1}},{key:"toString",value:function(){for(var e="",t=0;t<this.sections.length;){var n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}},{key:"toJSON",value:function(){return this.sections}}],[{key:"fromJSON",value:function(t){if(!Array.isArray(t)||t.length%2||t.some((function(e){return"number"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeDesc");return new e(t)}},{key:"create",value:function(t){return new e(t)}}]),e}(),X=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).inserted=r,i}return b(n,[{key:"apply",value:function(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return $(this,(function(t,n,r,i,a){return e=e.replace(r,r+(n-t),a)}),!1),e}},{key:"mapDesc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return J(this,e,t,!0)}},{key:"invert",value:function(e){for(var t=this.sections.slice(),r=[],i=0,a=0;i<t.length;i+=2){var o=t[i],s=t[i+1];if(s>=0){t[i]=s,t[i+1]=o;for(var u=i>>1;r.length<u;)r.push(w.empty);r.push(o?e.slice(a,a+o):w.empty)}a+=o}return new n(t,r)}},{key:"compose",value:function(e){return this.empty?e:e.empty?this:Y(this,e,!0)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:J(this,e,t,!0)}},{key:"iterChanges",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(this,e,t)}},{key:"desc",get:function(){return W.create(this.sections)}},{key:"filter",value:function(e){var t=[],r=[],i=[],a=new Z(this);e:for(var o=0,s=0;;){for(var u=o==e.length?1e9:e[o++];s<u||s==u&&0==a.len;){if(a.done)break e;var l=Math.min(a.len,u-s);q(i,l,-1);var c=-1==a.ins?-1:0==a.off?a.ins:0;q(t,l,c),c>0&&Q(r,t,a.text),a.forward(l),s+=l}for(var f=e[o++];s<f;){if(a.done)break e;var h=Math.min(a.len,f-s);q(t,h,-1),q(i,h,-1==a.ins?-1:0==a.off?a.ins:0),a.forward(h),s+=h}}return{changes:new n(t,r),filtered:W.create(i)}}},{key:"toJSON",value:function(){for(var e=[],t=0;t<this.sections.length;t+=2){var n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}}],[{key:"of",value:function(e,t,r){var i=[],a=[],o=0,u=null;function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||i.length){o<t&&q(i,t-o,-1);var r=new n(i,a);u=u?u.compose(r.map(u)):r,i=[],a=[],o=0}}return function e(c){if(Array.isArray(c)){var f,h=s(c);try{for(h.s();!(f=h.n()).done;){e(f.value)}}catch(k){h.e(k)}finally{h.f()}}else if(c instanceof n){if(c.length!=t)throw new RangeError("Mismatched change set length (got ".concat(c.length,", expected ").concat(t,")"));l(),u=u?u.compose(c.map(u)):c}else{var d=c.from,p=c.to,v=void 0===p?d:p,g=c.insert;if(d>v||d<0||v>t)throw new RangeError("Invalid change range ".concat(d," to ").concat(v," (in doc of length ").concat(t,")"));var m=g?"string"==typeof g?w.of(g.split(r||G)):g:w.empty,y=m.length;if(d==v&&0==y)return;d<o&&l(),d>o&&q(i,d-o,-1),q(i,v-d,y),Q(a,i,m),o=v}}(e),l(!u),u}},{key:"empty",value:function(e){return new n(e?[e,-1]:[],[])}},{key:"fromJSON",value:function(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");for(var t=[],r=[],i=0;i<e.length;i++){var a=e[i];if("number"==typeof a)t.push(a,-1);else{if(!Array.isArray(a)||"number"!=typeof a[0]||a.some((function(e,t){return t&&"string"!=typeof e})))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==a.length)t.push(a[0],0);else{for(;r.length<i;)r.push(w.empty);r[i]=w.of(a.slice(1)),t.push(a[0],r[i].length)}}}return new n(t,r)}},{key:"createSet",value:function(e,t){return new n(e,t)}}]),n}(W);function q(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0==t&&n<=0)){var i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}}function Q(e,t,n){if(0!=n.length){var r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(w.empty);e.push(n)}}}function $(e,t,n){for(var r=e.inserted,i=0,a=0,o=0;o<e.sections.length;){var s=e.sections[o++],u=e.sections[o++];if(u<0)i+=s,a+=s;else{for(var l=i,c=a,f=w.empty;l+=s,c+=u,u&&r&&(f=f.append(r[o-2>>1])),!(n||o==e.sections.length||e.sections[o+1]<0);)s=e.sections[o++],u=e.sections[o++];t(i,l,a,c,f),i=l,a=c}}}function J(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],a=r?[]:null,o=new Z(e),s=new Z(t),u=0,l=0;;)if(-1==o.ins)u+=o.len,o.next();else if(-1==s.ins&&l<u){var c=Math.min(s.len,u-l);s.forward(c),q(i,c,-1),l+=c}else if(s.ins>=0&&(o.done||l<u||l==u&&(s.len<o.len||s.len==o.len&&!n))){for(q(i,s.ins,-1);u>l&&!o.done&&u+o.len<l+s.len;)u+=o.len,o.next();l+=s.len,s.next()}else{if(!(o.ins>=0)){if(o.done&&s.done)return a?X.createSet(i,a):W.create(i);throw new Error("Mismatched change set lengths")}for(var f=0,h=u+o.len;;)if(s.ins>=0&&l>u&&l+s.len<h)f+=s.ins,l+=s.len,s.next();else{if(!(-1==s.ins&&l<h))break;var d=Math.min(s.len,h-l);f+=d,s.forward(d),l+=d}q(i,f,o.ins),a&&Q(a,i,o.text),u=h,o.next()}}function Y(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=n?[]:null,a=new Z(e),o=new Z(t),s=!1;;){if(a.done&&o.done)return i?X.createSet(r,i):W.create(r);if(0==a.ins)q(r,a.len,0,s),a.next();else if(0!=o.len||o.done){if(a.done||o.done)throw new Error("Mismatched change set lengths");var u=Math.min(a.len2,o.len),l=r.length;if(-1==a.ins){var c=-1==o.ins?-1:o.off?0:o.ins;q(r,u,c,s),i&&c&&Q(i,r,o.text)}else-1==o.ins?(q(r,a.off?0:a.len,u,s),i&&Q(i,r,a.textBit(u))):(q(r,a.off?0:a.len,o.off?0:o.ins,s),i&&!o.off&&Q(i,r,o.text));s=(a.ins>u||o.ins>=0&&o.len>u)&&(s||r.length>l),a.forward2(u),o.forward(u)}else q(r,0,o.ins,s),i&&Q(i,r,o.text),o.next()}}var Z=function(){function e(t){k(this,e),this.set=t,this.i=0,this.next()}return b(e,[{key:"next",value:function(){var e=this.set.sections;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return this.ins<0?this.len:this.ins}},{key:"text",get:function(){var e=this.set.inserted,t=this.i-2>>1;return t>=e.length?w.empty:e[t]}},{key:"textBit",value:function(e){var t=this.set.inserted,n=this.i-2>>1;return n>=t.length&&!e?w.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}},{key:"forward",value:function(e){e==this.len?this.next():(this.len-=e,this.off+=e)}},{key:"forward2",value:function(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}]),e}(),ee=function(){function e(t,n,r){k(this,e),this.from=t,this.to=n,this.flags=r}return b(e,[{key:"anchor",get:function(){return 16&this.flags?this.to:this.from}},{key:"head",get:function(){return 16&this.flags?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return 4&this.flags?-1:8&this.flags?1:0}},{key:"bidiLevel",get:function(){var e=3&this.flags;return 3==e?null:e}},{key:"goalColumn",get:function(){var e=this.flags>>5;return 33554431==e?void 0:e}},{key:"map",value:function(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?n=r=t.mapPos(this.from,i):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new e(n,r,this.flags)}},{key:"extend",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return te.range(e,t);var n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return te.range(this.anchor,n)}},{key:"eq",value:function(e){return this.anchor==e.anchor&&this.head==e.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return te.range(e.anchor,e.head)}},{key:"create",value:function(t,n,r){return new e(t,n,r)}}]),e}(),te=function(){function e(t,n){k(this,e),this.ranges=t,this.mainIndex=n}return b(e,[{key:"map",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return t.empty?this:e.create(this.ranges.map((function(e){return e.map(t,n)})),this.mainIndex)}},{key:"eq",value:function(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}},{key:"main",get:function(){return this.ranges[this.mainIndex]}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new e([this.main],0)}},{key:"addRange",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.create([t].concat(this.ranges),n?0:this.mainIndex+1)}},{key:"replaceRange",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,r=this.ranges.slice();return r[n]=t,e.create(r,this.mainIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map((function(e){return e.toJSON()})),main:this.mainIndex}}}],[{key:"fromJSON",value:function(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new e(t.ranges.map((function(e){return ee.fromJSON(e)})),t.main)}},{key:"single",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return new e([e.range(t,n)],0)}},{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==t.length)throw new RangeError("A selection needs at least one range");for(var r=0,i=0;i<t.length;i++){var a=t[i];if(a.empty?a.from<=r:a.from<r)return e.normalized(t.slice(),n);r=a.to}return new e(t,n)}},{key:"cursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return ee.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!==r&&void 0!==r?r:33554431)<<5)}},{key:"range",value:function(e,t,n){var r=(null!==n&&void 0!==n?n:33554431)<<5;return t<e?ee.create(t,e,24|r):ee.create(e,t,r|(t>e?4:0))}},{key:"normalized",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t[n];t.sort((function(e,t){return e.from-t.from})),n=t.indexOf(r);for(var i=1;i<t.length;i++){var a=t[i],o=t[i-1];if(a.empty?a.from<=o.to:a.from<o.to){var s=o.from,u=Math.max(a.to,o.to);i<=n&&n--,t.splice(--i,2,a.anchor>a.head?e.range(u,s):e.range(s,u))}}return new e(t,n)}}]),e}();function ne(e,t){var n,r=s(e.ranges);try{for(r.s();!(n=r.n()).done;){if(n.value.to>t)throw new RangeError("Selection points outside of document")}}catch(i){r.e(i)}finally{r.f()}}var re=0,ie=function(){function e(t,n,r,i,a){k(this,e),this.combine=t,this.compareInput=n,this.compare=r,this.isStatic=i,this.extensions=a,this.id=re++,this.default=t([])}return b(e,[{key:"of",value:function(e){return new oe([],this,0,e)}},{key:"compute",value:function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oe(e,this,1,t)}},{key:"computeN",value:function(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new oe(e,this,2,t)}},{key:"from",value:function(e,t){return t||(t=function(e){return e}),this.compute([e],(function(n){return t(n.field(e))}))}}],[{key:"define",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t.combine||function(e){return e},t.compareInput||function(e,t){return e===t},t.compare||(t.combine?function(e,t){return e===t}:ae),!!t.static,t.enables)}}]),e}();function ae(e,t){return e==t||e.length==t.length&&e.every((function(e,n){return e===t[n]}))}var oe=function(){function e(t,n,r,i){k(this,e),this.dependencies=t,this.facet=n,this.type=r,this.value=i,this.id=re++}return b(e,[{key:"dynamicSlot",value:function(e){var t,n,r=this,i=this.value,a=this.facet.compareInput,o=this.id,u=e[o]>>1,l=2==this.type,c=!1,f=!1,h=[],d=s(this.dependencies);try{for(d.s();!(n=d.n()).done;){var p=n.value;"doc"==p?c=!0:"selection"==p?f=!0:0==(1&(null!==(t=e[p.id])&&void 0!==t?t:1))&&h.push(e[p.id])}}catch(v){d.e(v)}finally{d.f()}return{create:function(e){return e.values[u]=i(e),1},update:function(e,t){if(c&&t.docChanged||f&&(t.docChanged||t.selection)||ue(e,h)){var n=i(e);if(l?!se(n,e.values[u],a):!a(n,e.values[u]))return e.values[u]=n,1}return 0},reconfigure:function(e,t){var n=i(e),s=t.config.address[o];if(null!=s){var c=we(t,s);if(r.dependencies.every((function(n){return n instanceof ie?t.facet(n)===e.facet(n):!(n instanceof ce)||t.field(n,!1)==e.field(n,!1)}))||(l?se(n,c,a):a(n,c)))return e.values[u]=c,0}return e.values[u]=n,1}}}}]),e}();function se(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function ue(e,t){var n,r=!1,i=s(t);try{for(i.s();!(n=i.n()).done;){1&be(e,n.value)&&(r=!0)}}catch(a){i.e(a)}finally{i.f()}return r}var le=ie.define({static:!0}),ce=function(){function e(t,n,r,i,a){k(this,e),this.id=t,this.createF=n,this.updateF=r,this.compareF=i,this.spec=a,this.provides=void 0}return b(e,[{key:"create",value:function(e){var t=this,n=e.facet(le).find((function(e){return e.field==t}));return((null===n||void 0===n?void 0:n.create)||this.createF)(e)}},{key:"slot",value:function(e){var t=this,n=e[this.id]>>1;return{create:function(e){return e.values[n]=t.create(e),1},update:function(e,r){var i=e.values[n],a=t.updateF(i,r);return t.compareF(i,a)?0:(e.values[n]=a,1)},reconfigure:function(e,r){return null!=r.config.address[t.id]?(e.values[n]=r.field(t),0):(e.values[n]=t.create(e),1)}}}},{key:"init",value:function(e){return[this,le.of({field:this,create:e})]}},{key:"extension",get:function(){return this}}],[{key:"define",value:function(t){var n=new e(re++,t.create,t.update,t.compare||function(e,t){return e===t},t);return t.provide&&(n.provides=t.provide(n)),n}}]),e}(),fe=4,he=3,de=2,pe=1;function ve(e){return function(t){return new me(t,e)}}var ge={highest:ve(0),high:ve(pe),default:ve(de),low:ve(he),lowest:ve(fe)},me=b((function e(t,n){k(this,e),this.inner=t,this.prec=n})),ye=function(){function e(){k(this,e)}return b(e,[{key:"of",value:function(e){return new ke(this,e)}},{key:"reconfigure",value:function(t){return e.reconfigure.of({compartment:this,extension:t})}},{key:"get",value:function(e){return e.config.compartments.get(this)}}]),e}(),ke=b((function e(t,n){k(this,e),this.compartment=t,this.inner=n})),_e=function(){function e(t,n,r,i,a,o){for(k(this,e),this.base=t,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=a,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}return b(e,[{key:"staticFacet",value:function(e){var t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}}],[{key:"resolve",value:function(t,n,r){var i,a=[],o=Object.create(null),u=new Map,l=s(function(e,t,n){var r=[[],[],[],[],[]],i=new Map;function a(e,o){var u=i.get(e);if(null!=u){if(u<=o)return;var l=r[u].indexOf(e);l>-1&&r[u].splice(l,1),e instanceof ke&&n.delete(e.compartment)}if(i.set(e,o),Array.isArray(e)){var c,f=s(e);try{for(f.s();!(c=f.n()).done;){a(c.value,o)}}catch(p){f.e(p)}finally{f.f()}}else if(e instanceof ke){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");var h=t.get(e.compartment)||e.inner;n.set(e.compartment,h),a(h,o)}else if(e instanceof me)a(e.inner,e.prec);else if(e instanceof ce)r[o].push(e),e.provides&&a(e.provides,o);else if(e instanceof oe)r[o].push(e),e.facet.extensions&&a(e.facet.extensions,o);else{var d=e.extension;if(!d)throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));a(d,o)}}return a(e,de),r.reduce((function(e,t){return e.concat(t)}))}(t,n,u));try{for(l.s();!(i=l.n()).done;){var c=i.value;c instanceof ce?a.push(c):(o[c.facet.id]||(o[c.facet.id]=[])).push(c)}}catch(_){l.e(_)}finally{l.f()}for(var f=Object.create(null),h=[],d=[],p=function(){var e=g[v];f[e.id]=d.length<<1,d.push((function(t){return e.slot(t)}))},v=0,g=a;v<g.length;v++)p();var m=null===r||void 0===r?void 0:r.config.facets,y=function(e){var t=o[e],n=t[0].facet,i=m&&m[e]||[];if(t.every((function(e){return 0==e.type})))if(f[n.id]=h.length<<1|1,ae(i,t))h.push(r.facet(n));else{var a=n.combine(t.map((function(e){return e.value})));h.push(r&&n.compare(a,r.facet(n))?r.facet(n):a)}else{var u,l=s(t);try{var c=function(){var e=u.value;0==e.type?(f[e.id]=h.length<<1|1,h.push(e.value)):(f[e.id]=d.length<<1,d.push((function(t){return e.dynamicSlot(t)})))};for(l.s();!(u=l.n()).done;)c()}catch(_){l.e(_)}finally{l.f()}f[n.id]=d.length<<1,d.push((function(e){return function(e,t,n){var r=n.map((function(t){return e[t.id]})),i=n.map((function(e){return e.type})),a=r.filter((function(e){return!(1&e)})),o=e[t.id]>>1;function u(e){for(var n=[],a=0;a<r.length;a++){var o=we(e,r[a]);if(2==i[a]){var u,l=s(o);try{for(l.s();!(u=l.n()).done;){var c=u.value;n.push(c)}}catch(_){l.e(_)}finally{l.f()}}else n.push(o)}return t.combine(n)}return{create:function(e){var t,n=s(r);try{for(n.s();!(t=n.n()).done;)be(e,t.value)}catch(_){n.e(_)}finally{n.f()}return e.values[o]=u(e),1},update:function(e,n){if(!ue(e,a))return 0;var r=u(e);return t.compare(r,e.values[o])?0:(e.values[o]=r,1)},reconfigure:function(e,i){var a=ue(e,r),s=i.config.facets[t.id],l=i.facet(t);if(s&&!a&&ae(n,s))return e.values[o]=l,0;var c=u(e);return t.compare(c,l)?(e.values[o]=l,0):(e.values[o]=c,1)}}}(e,n,t)}))}};for(var k in o)y(k);return new e(t,u,d.map((function(e){return e(f)})),f,h,o)}}]),e}();function be(e,t){if(1&t)return 2;var n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;var i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function we(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}var xe=ie.define(),Ae=ie.define({combine:function(e){return e.some((function(e){return e}))},static:!0}),Se=ie.define({combine:function(e){return e.length?e[0]:void 0},static:!0}),Le=ie.define(),Oe=ie.define(),Te=ie.define(),Ee=ie.define({combine:function(e){return!!e.length&&e[0]}}),Ce=function(){function e(t,n){k(this,e),this.type=t,this.value=n}return b(e,null,[{key:"define",value:function(){return new Me}}]),e}(),Me=function(){function e(){k(this,e)}return b(e,[{key:"of",value:function(e){return new Ce(this,e)}}]),e}(),Ne=function(){function e(t){k(this,e),this.map=t}return b(e,[{key:"of",value:function(e){return new Re(this,e)}}]),e}(),Re=function(){function e(t,n){k(this,e),this.type=t,this.value=n}return b(e,[{key:"map",value:function(t){var n=this.type.map(this.value,t);return void 0===n?void 0:n==this.value?this:new e(this.type,n)}},{key:"is",value:function(e){return this.type==e}}],[{key:"define",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Ne(e.map||function(e){return e})}},{key:"mapEffects",value:function(e,t){if(!e.length)return e;var n,r=[],i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.map(t);a&&r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r}}]),e}();Re.reconfigure=Re.define(),Re.appendConfig=Re.define();var Pe=function(){function e(t,n,r,i,a,o){k(this,e),this.startState=t,this.changes=n,this.selection=r,this.effects=i,this.annotations=a,this.scrollIntoView=o,this._doc=null,this._state=null,r&&ne(r,n.newLength),a.some((function(t){return t.type==e.time}))||(this.annotations=a.concat(e.time.of(Date.now())))}return b(e,[{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||this.startState.selection.map(this.changes)}},{key:"state",get:function(){return this._state||this.startState.applyTransaction(this),this._state}},{key:"annotation",value:function(e){var t,n=s(this.annotations);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.type==e)return r.value}}catch(i){n.e(i)}finally{n.f()}}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"reconfigured",get:function(){return this.startState.config!=this.state.config}},{key:"isUserEvent",value:function(t){var n=this.annotation(e.userEvent);return!(!n||!(n==t||n.length>t.length&&n.slice(0,t.length)==t&&"."==n[t.length]))}}],[{key:"create",value:function(t,n,r,i,a,o){return new e(t,n,r,i,a,o)}}]),e}();function Ie(e,t){for(var n=[],r=0,i=0;;){var a=void 0,o=void 0;if(r<e.length&&(i==t.length||t[i]>=e[r]))a=e[r++],o=e[r++];else{if(!(i<t.length))return n;a=t[i++],o=t[i++]}!n.length||n[n.length-1]<a?n.push(a,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function De(e,t,n){var r,i,a,o;return n?(i=t.changes,a=X.empty(t.changes.length),o=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),a=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(i)),{changes:o,selection:t.selection?t.selection.map(a):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Re.mapEffects(e.effects,i).concat(Re.mapEffects(t.effects,a)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Ue(e,t,n){var r=t.selection,i=Fe(t.annotations);return t.userEvent&&(i=i.concat(Pe.userEvent.of(t.userEvent))),{changes:t.changes instanceof X?t.changes:X.of(t.changes||[],n,e.facet(Se)),selection:r&&(r instanceof te?r:te.single(r.anchor,r.head)),effects:Fe(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function Be(e,t,n){var r=Ue(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(var i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);var a=!!t[i].sequential;r=De(r,Ue(e,t[i],a?r.changes.newLength:e.doc.length),a)}var o=Pe.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){for(var t=e.startState,n=t.facet(Te),r=e,i=n.length-1;i>=0;i--){var a=n[i](e);a&&Object.keys(a).length&&(r=De(e,Ue(t,a,e.changes.newLength),!0))}return r==e?e:Pe.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){var t,n=e.startState,r=!0,i=s(n.facet(Le));try{for(i.s();!(t=i.n()).done;){var a=(0,t.value)(e);if(!1===a){r=!1;break}Array.isArray(a)&&(r=!0===r?a:Ie(r,a))}}catch(d){i.e(d)}finally{i.f()}if(!0!==r){var o,u;if(!1===r)u=e.changes.invertedDesc,o=X.empty(n.doc.length);else{var l=e.changes.filter(r);o=l.changes,u=l.filtered.invertedDesc}e=Pe.create(n,o,e.selection&&e.selection.map(u),Re.mapEffects(e.effects,u),e.annotations,e.scrollIntoView)}for(var c=n.facet(Oe),f=c.length-1;f>=0;f--){var h=c[f](e);e=h instanceof Pe?h:Array.isArray(h)&&1==h.length&&h[0]instanceof Pe?h[0]:Be(n,Fe(h),!1)}return e}(o):o)}Pe.time=Ce.define(),Pe.userEvent=Ce.define(),Pe.addToHistory=Ce.define(),Pe.remote=Ce.define();var Ve=[];function Fe(e){return null==e?Ve:Array.isArray(e)?e:[e]}var ze,je=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(je||(je={})),He=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{ze=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(tg){}function Ge(e){return function(t){if(!/\S/.test(t))return je.Space;if(function(e){if(ze)return ze.test(e);for(var t=0;t<e.length;t++){var n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||He.test(n)))return!0}return!1}(t))return je.Word;for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return je.Word;return je.Other}}var Ke=function(){function e(t,n,r,i,a,o){k(this,e),this.config=t,this.doc=n,this.selection=r,this.values=i,this.status=t.statusTemplate.slice(),this.computeSlot=a,o&&(o._state=this);for(var s=0;s<this.config.dynamicSlots.length;s++)be(this,s<<1);this.computeSlot=null}return b(e,[{key:"field",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return be(this,n),we(this,n);if(t)throw new RangeError("Field is not present in this state")}},{key:"update",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Be(this,t,!0)}},{key:"applyTransaction",value:function(t){var n,r,i=this,a=this.config,o=a,u=o.base,l=o.compartments,c=s(t.effects);try{for(c.s();!(n=c.n()).done;){var f=n.value;f.is(ye.reconfigure)?(a&&(l=new Map,a.compartments.forEach((function(e,t){return l.set(t,e)})),a=null),l.set(f.value.compartment,f.value.extension)):f.is(Re.reconfigure)?(a=null,u=f.value):f.is(Re.appendConfig)&&(a=null,u=Fe(u).concat(f.value))}}catch(h){c.e(h)}finally{c.f()}a?r=t.startState.values.slice():r=new e(a=_e.resolve(u,l,this),this.doc,this.selection,a.dynamicSlots.map((function(){return null})),(function(e,t){return t.reconfigure(e,i)}),null).values;new e(a,t.newDoc,t.newSelection,r,(function(e,n){return n.update(e,t)}),t)}},{key:"replaceSelection",value:function(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((function(t){return{changes:{from:t.from,to:t.to,insert:e},range:te.cursor(t.from+e.length)}}))}},{key:"changeByRange",value:function(e){for(var t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],a=Fe(n.effects),o=1;o<t.ranges.length;o++){for(var s=e(t.ranges[o]),u=this.changes(s.changes),l=u.map(r),c=0;c<o;c++)i[c]=i[c].map(l);var f=r.mapDesc(u,!0);i.push(s.range.map(f)),r=r.compose(l),a=Re.mapEffects(a,l).concat(Re.mapEffects(Fe(s.effects),f))}return{changes:r,selection:te.create(i,t.mainIndex),effects:a}}},{key:"changes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof X?t:X.of(t,this.doc.length,this.facet(e.lineSeparator))}},{key:"toText",value:function(t){return w.of(t.split(this.facet(e.lineSeparator)||G))}},{key:"sliceDoc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}},{key:"facet",value:function(e){var t=this.config.address[e.id];return null==t?e.default:(be(this,t),we(this,t))}},{key:"toJSON",value:function(e){var t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(var n in e){var r=e[n];r instanceof ce&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}},{key:"tabSize",get:function(){return this.facet(e.tabSize)}},{key:"lineBreak",get:function(){return this.facet(e.lineSeparator)||"\n"}},{key:"readOnly",get:function(){return this.facet(Ee)}},{key:"phrase",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o=s(this.facet(e.phrases));try{for(o.s();!(a=o.n()).done;){var u=a.value;if(Object.prototype.hasOwnProperty.call(u,t)){t=u[t];break}}}catch(l){o.e(l)}finally{o.f()}return r.length&&(t=t.replace(/\$(\$|\d*)/g,(function(e,t){if("$"==t)return"$";var n=+(t||1);return n>r.length?e:r[n-1]}))),t}},{key:"languageDataAt",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[],a=s(this.facet(xe));try{for(a.s();!(n=a.n()).done;){var o,u=n.value,l=s(u(this,t,r));try{for(l.s();!(o=l.n()).done;){var c=o.value;Object.prototype.hasOwnProperty.call(c,e)&&i.push(c[e])}}catch(f){l.e(f)}finally{l.f()}}}catch(f){a.e(f)}finally{a.f()}return i}},{key:"charCategorizer",value:function(e){return Ge(this.languageDataAt("wordChars",e).join(""))}},{key:"wordAt",value:function(e){for(var t=this.doc.lineAt(e),n=t.text,r=t.from,i=t.length,a=this.charCategorizer(e),o=e-r,s=e-r;o>0;){var u=D(n,o,!1);if(a(n.slice(u,o))!=je.Word)break;o=u}for(;s<i;){var l=D(n,s);if(a(n.slice(s,l))!=je.Word)break;s=l}return o==s?null:te.range(o+r,s+r)}}],[{key:"fromJSON",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");var i=[];if(r){var a=function(e){var n=r[e],a=t[e];i.push(n.init((function(e){return n.spec.fromJSON(a,e)})))};for(var o in r)a(o)}return e.create({doc:t.doc,selection:te.fromJSON(t.selection),extensions:n.extensions?i.concat([n.extensions]):i})}},{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=_e.resolve(t.extensions||[],new Map),r=t.doc instanceof w?t.doc:w.of((t.doc||"").split(n.staticFacet(e.lineSeparator)||G)),i=t.selection?t.selection instanceof te?t.selection:te.single(t.selection.anchor,t.selection.head):te.single(0);return ne(i,r.length),n.staticFacet(Ae)||(i=i.asSingle()),new e(n,r,i,n.dynamicSlots.map((function(){return null})),(function(e,t){return t.create(e)}),null)}}]),e}();function We(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={},a=s(e);try{for(a.s();!(n=a.n()).done;)for(var o=n.value,u=0,l=Object.keys(o);u<l.length;u++){var c=l[u],f=o[c],h=i[c];if(void 0===h)i[c]=f;else if(h===f||void 0===f);else{if(!Object.hasOwnProperty.call(r,c))throw new Error("Config merge conflict for field "+c);i[c]=r[c](h,f)}}}catch(p){a.e(p)}finally{a.f()}for(var d in t)void 0===i[d]&&(i[d]=t[d]);return i}Ke.allowMultipleSelections=Ae,Ke.tabSize=ie.define({combine:function(e){return e.length?e[0]:4}}),Ke.lineSeparator=Se,Ke.readOnly=Ee,Ke.phrases=ie.define({compare:function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((function(n){return e[n]==t[n]}))}}),Ke.languageData=xe,Ke.changeFilter=Le,Ke.transactionFilter=Oe,Ke.transactionExtender=Te,ye.reconfigure=Re.define();var Xe=function(){function e(){k(this,e)}return b(e,[{key:"eq",value:function(e){return this==e}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return qe.create(e,t,this)}}]),e}();Xe.prototype.startSide=Xe.prototype.endSide=0,Xe.prototype.point=!1,Xe.prototype.mapMode=K.TrackDel;var qe=function(){function e(t,n,r){k(this,e),this.from=t,this.to=n,this.value=r}return b(e,null,[{key:"create",value:function(t,n,r){return new e(t,n,r)}}]),e}();function Qe(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}var $e=function(){function e(t,n,r,i){k(this,e),this.from=t,this.to=n,this.value=r,this.maxPoint=i}return b(e,[{key:"length",get:function(){return this.to[this.to.length-1]}},{key:"findIndex",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n?this.to:this.from,a=r,o=i.length;;){if(a==o)return a;var s=a+o>>1,u=i[s]-e||(n?this.value[s].endSide:this.value[s].startSide)-t;if(s==a)return u>=0?a:o;u>=0?o=s:a=s+1}}},{key:"between",value:function(e,t,n,r){for(var i=this.findIndex(t,-1e9,!0),a=this.findIndex(n,1e9,!1,i);i<a;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}},{key:"map",value:function(t,n){for(var r=[],i=[],a=[],o=-1,s=-1,u=0;u<this.value.length;u++){var l=this.value[u],c=this.from[u]+t,f=this.to[u]+t,h=void 0,d=void 0;if(c==f){var p=n.mapPos(c,l.startSide,l.mapMode);if(null==p)continue;if(h=d=p,l.startSide!=l.endSide&&(d=n.mapPos(c,l.endSide))<h)continue}else if((h=n.mapPos(c,l.startSide))>(d=n.mapPos(f,l.endSide))||h==d&&l.startSide>0&&l.endSide<=0)continue;(d-h||l.endSide-l.startSide)<0||(o<0&&(o=h),l.point&&(s=Math.max(s,d-h)),r.push(l),i.push(h-o),a.push(d-o))}return{mapped:r.length?new e(i,a,r,s):null,pos:o}}}]),e}(),Je=function(){function e(t,n,r,i){k(this,e),this.chunkPos=t,this.chunk=n,this.nextLayer=r,this.maxPoint=i}return b(e,[{key:"length",get:function(){var e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}},{key:"size",get:function(){if(this.isEmpty)return 0;var e,t=this.nextLayer.size,n=s(this.chunk);try{for(n.s();!(e=n.n()).done;){t+=e.value.value.length}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"chunkEnd",value:function(e){return this.chunkPos[e]+this.chunk[e].length}},{key:"update",value:function(t){var n=t.add,r=void 0===n?[]:n,i=t.sort,a=void 0!==i&&i,o=t.filterFrom,s=void 0===o?0:o,u=t.filterTo,l=void 0===u?this.length:u,c=t.filter;if(0==r.length&&!c)return this;if(a&&(r=r.slice().sort(Qe)),this.isEmpty)return r.length?e.of(r):this;for(var f=new tt(this,null,-1).goto(0),h=0,d=[],p=new Ze;f.value||h<r.length;)if(h<r.length&&(f.from-r[h].from||f.startSide-r[h].value.startSide)>=0){var v=r[h++];p.addInner(v.from,v.to,v.value)||d.push(v)}else 1==f.rangeIndex&&f.chunkIndex<this.chunk.length&&(h==r.length||this.chunkEnd(f.chunkIndex)<r[h].from)&&(!c||s>this.chunkEnd(f.chunkIndex)||l<this.chunkPos[f.chunkIndex])&&p.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!c||s>f.to||l<f.from||c(f.from,f.to,f.value))&&(p.addInner(f.from,f.to,f.value)||d.push(qe.create(f.from,f.to,f.value))),f.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?e.empty:this.nextLayer.update({add:d,filter:c,filterFrom:s,filterTo:l}))}},{key:"map",value:function(t){if(t.empty||this.isEmpty)return this;for(var n=[],r=[],i=-1,a=0;a<this.chunk.length;a++){var o=this.chunkPos[a],s=this.chunk[a],u=t.touchesRange(o,o+s.length);if(!1===u)i=Math.max(i,s.maxPoint),n.push(s),r.push(t.mapPos(o));else if(!0===u){var l=s.map(o,t),c=l.mapped,f=l.pos;c&&(i=Math.max(i,c.maxPoint),n.push(c),r.push(f))}}var h=this.nextLayer.map(t);return 0==n.length?h:new e(r,n,h||e.empty,i)}},{key:"between",value:function(e,t,n){if(!this.isEmpty){for(var r=0;r<this.chunk.length;r++){var i=this.chunkPos[r],a=this.chunk[r];if(t>=i&&e<=i+a.length&&!1===a.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}},{key:"iter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return nt.from([this]).goto(e)}},{key:"isEmpty",get:function(){return this.nextLayer==this}}],[{key:"create",value:function(t,n,r,i){return new e(t,n,r,i)}},{key:"iter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return nt.from(e).goto(t)}},{key:"compare",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=e.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i})),o=t.filter((function(e){return e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i})),s=et(a,o,n),u=new it(a,s,i),l=new it(o,s,i);n.iterGaps((function(e,t,n){return at(u,e,l,t,n,r)})),n.empty&&0==n.length&&at(u,0,l,0,0,r)}},{key:"eq",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;null==r&&(r=1e9);var i=e.filter((function(e){return!e.isEmpty&&t.indexOf(e)<0})),a=t.filter((function(t){return!t.isEmpty&&e.indexOf(t)<0}));if(i.length!=a.length)return!1;if(!i.length)return!0;for(var o=et(i,a),s=new it(i,o,0).goto(n),u=new it(a,o,0).goto(n);;){if(s.to!=u.to||!ot(s.active,u.active)||s.point&&(!u.point||!s.point.eq(u.point)))return!1;if(s.to>r)return!0;s.next(),u.next()}}},{key:"spans",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=new it(e,null,i).goto(t),o=t,s=a.openStart;;){var u=Math.min(a.to,n);if(a.point?(r.point(o,u,a.point,a.activeForPoint(a.to),s,a.pointRank),s=a.openEnd(u)+(a.to>u?1:0)):u>o&&(r.span(o,u,a.active,s),s=a.openEnd(u)),a.to>n)break;o=a.to,a.next()}return s}},{key:"of",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Ze,i=s(e instanceof qe?[e]:n?Ye(e):e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.add(a.from,a.to,a.value)}}catch(o){i.e(o)}finally{i.f()}return r.finish()}}]),e}();function Ye(e){if(e.length>1)for(var t=e[0],n=1;n<e.length;n++){var r=e[n];if(Qe(t,r)>0)return e.slice().sort(Qe);t=r}return e}Je.empty=new Je([],[],null,-1),Je.empty.nextLayer=Je.empty;var Ze=function(){function e(){k(this,e),this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}return b(e,[{key:"finishChunk",value:function(e){this.chunks.push(new $e(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(t,n,r){this.addInner(t,n,r)||(this.nextLayer||(this.nextLayer=new e)).add(t,n,r)}},{key:"addInner",value:function(e,t,n){var r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}},{key:"addChunk",value:function(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);var n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}},{key:"finish",value:function(){return this.finishInner(Je.empty)}},{key:"finishInner",value:function(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;var t=Je.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}]),e}();function et(e,t,n){var r,i=new Map,a=s(e);try{for(a.s();!(r=a.n()).done;)for(var o=r.value,u=0;u<o.chunk.length;u++)o.chunk[u].maxPoint<=0&&i.set(o.chunk[u],o.chunkPos[u])}catch(v){a.e(v)}finally{a.f()}var l,c=new Set,f=s(t);try{for(f.s();!(l=f.n()).done;)for(var h=l.value,d=0;d<h.chunk.length;d++){var p=i.get(h.chunk[d]);null==p||(n?n.mapPos(p):p)!=h.chunkPos[d]||(null===n||void 0===n?void 0:n.touchesRange(p,p+h.chunk[d].length))||c.add(h.chunk[d])}}catch(v){f.e(v)}finally{f.f()}return c}var tt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;k(this,e),this.layer=t,this.skip=n,this.minPoint=r,this.rank=i}return b(e,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}},{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}},{key:"gotoInner",value:function(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){var r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){var i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}},{key:"forward",value:function(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}},{key:"next",value:function(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}var e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"setRangeIndex",value:function(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}},{key:"nextChunk",value:function(){this.chunkIndex++,this.rangeIndex=0,this.next()}},{key:"compare",value:function(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}]),e}(),nt=function(){function e(t){k(this,e),this.heap=t}return b(e,[{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"goto",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9,r=s(this.heap);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.goto(e,n)}}catch(o){r.e(o)}finally{r.f()}for(var a=this.heap.length>>1;a>=0;a--)rt(this.heap,a);return this.next(),this}},{key:"forward",value:function(e,t){var n,r=s(this.heap);try{for(r.s();!(n=r.n()).done;){n.value.forward(e,t)}}catch(a){r.e(a)}finally{r.f()}for(var i=this.heap.length>>1;i>=0;i--)rt(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{var e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),rt(this.heap,0)}}}],[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=[],a=0;a<t.length;a++)for(var o=t[a];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new tt(o,n,r,a));return 1==i.length?i[0]:new e(i)}}]),e}();function rt(e,t){for(var n=e[t];;){var r=1+(t<<1);if(r>=e.length)break;var i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}var it=function(){function e(t,n,r){k(this,e),this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=nt.from(t,n,r)}return b(e,[{key:"goto",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}},{key:"forward",value:function(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}},{key:"removeActive",value:function(e){st(this.active,e),st(this.activeTo,e),st(this.activeRank,e),this.minActive=lt(this.active,this.activeTo)}},{key:"addActive",value:function(e){for(var t=0,n=this.cursor,r=n.value,i=n.to,a=n.rank;t<this.activeRank.length&&this.activeRank[t]<=a;)t++;ut(this.active,t,r),ut(this.activeTo,t,i),ut(this.activeRank,t,a),e&&ut(e,t,this.cursor.from),this.minActive=lt(this.active,this.activeTo)}},{key:"next",value:function(){var e=this.to,t=this.point;this.point=null;for(var n=this.openStart<0?[]:null,r=0;;){var i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&st(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}var a=this.cursor.value;if(a.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}if(n){for(var o=0;o<n.length&&n[o]<e;)o++;this.openStart=o+r}}},{key:"activeForPoint",value:function(e){if(!this.active.length)return this.active;for(var t=[],n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}},{key:"openEnd",value:function(e){for(var t=0,n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}]),e}();function at(e,t,n,r,i,a){e.goto(t),n.goto(r);for(var o=r+i,s=r,u=r-t;;){var l=e.to+u-n.to||e.endSide-n.endSide,c=l<0?e.to+u:n.to,f=Math.min(c,o);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&ot(e.activeForPoint(e.to+u),n.activeForPoint(n.to))||a.comparePoint(s,f,e.point,n.point):f>s&&!ot(e.active,n.active)&&a.compareRange(s,f,e.active,n.active),c>o)break;s=c,l<=0&&e.next(),l>=0&&n.next()}}function ot(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function st(e,t){for(var n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function ut(e,t,n){for(var r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=n}function lt(e,t){for(var n=-1,r=1e9,i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function ct(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0,i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=D(e,i));return r}function ft(e,t,n,r){for(var i=0,a=0;;){if(a>=t)return i;if(i==e.length)break;a+=9==e.charCodeAt(i)?n-a%n:1,i=D(e,i)}return!0===r?-1:e.length}for(var ht="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),dt="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),pt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{},vt=function(){function e(t,n){k(this,e),this.rules=[];var r=(n||{}).finish;function i(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function a(e,t,n,o){var s=[],u=/^@(\w+)\b/.exec(e[0]),l=u&&"keyframes"==u[1];if(u&&null==t)return n.push(e[0]+";");for(var c in t){var f=t[c];if(/&/.test(c))a(c.split(/,\s*/).map((function(t){return e.map((function(e){return t.replace(/&/,e)}))})).reduce((function(e,t){return e.concat(t)})),f,n);else if(f&&"object"==typeof f){if(!u)throw new RangeError("The value of a property ("+c+") should be a primitive value.");a(i(c),f,s,l)}else null!=f&&s.push(c.replace(/_.*/,"").replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))+": "+f+";")}(s.length||l)&&n.push((!r||u||o?e:e.map(r)).join(", ")+" {"+s.join(" ")+"}")}for(var o in t)a(i(o),t[o],this.rules)}return b(e,[{key:"getRules",value:function(){return this.rules.join("\n")}}],[{key:"newName",value:function(){var e=pt[ht]||1;return pt[ht]=e+1,"\u037c"+e.toString(36)}},{key:"mount",value:function(e,t){(e[dt]||new mt(e)).mount(Array.isArray(t)?t:[t])}}]),e}(),gt=null,mt=function(){function e(t){if(k(this,e),!t.head&&t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(gt)return t.adoptedStyleSheets=[gt.sheet].concat(t.adoptedStyleSheets),t[dt]=gt;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),gt=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");var n=t.head||t;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],t[dt]=this}return b(e,[{key:"mount",value:function(e){for(var t=this.sheet,n=0,r=0,i=0;i<e.length;i++){var a=e[i],o=this.modules.indexOf(a);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,a),t)for(var s=0;s<a.rules.length;s++)t.insertRule(a.rules[s],n++)}else{for(;r<o;)n+=this.modules[r++].rules.length;n+=a.rules.length,r++}}if(!t){for(var u="",l=0;l<this.modules.length;l++)u+=this.modules[l].getRules()+"\n";this.styleTag.textContent=u}}}]),e}(),yt={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},kt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},_t="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),bt="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),wt="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),xt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),At="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),St=_t&&(xt||+_t[1]<57)||wt&&xt,Lt=0;Lt<10;Lt++)yt[48+Lt]=yt[96+Lt]=String(Lt);for(Lt=1;Lt<=24;Lt++)yt[Lt+111]="F"+Lt;for(Lt=65;Lt<=90;Lt++)yt[Lt]=String.fromCharCode(Lt+32),kt[Lt]=String.fromCharCode(Lt);for(var Ot in yt)kt.hasOwnProperty(Ot)||(kt[Ot]=yt[Ot]);function Tt(e){return(11==e.nodeType?e.getSelection?e:e.ownerDocument:e).getSelection()}function Et(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Ct(e,t){if(!t.anchorNode)return!1;try{return Et(e,t.anchorNode)}catch(tg){return!1}}function Mt(e){return 3==e.nodeType?Ht(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Nt(e,t,n,r){return!!n&&(Pt(e,t,n,r,-1)||Pt(e,t,n,r,1))}function Rt(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Pt(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:It(e))){if("DIV"==e.nodeName)return!1;var a=e.parentNode;if(!a||1!=a.nodeType)return!1;t=Rt(e)+(i<0?0:1),e=a}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?It(e):0}}}function It(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var Dt={left:0,right:0,top:0,bottom:0};function Ut(e,t){var n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function Bt(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}var Vt,Ft=function(){function e(){k(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return b(e,[{key:"eq",value:function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}},{key:"setRange",value:function(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}},{key:"set",value:function(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}]),e}(),zt=null;function jt(e){if(e.setActive)return e.setActive();if(zt)return e.focus(zt);for(var t=[],n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==zt?{get preventScroll(){return zt={preventScroll:!0},!0}}:void 0),!zt){zt=!1;for(var r=0;r<t.length;){var i=t[r++],a=t[r++],o=t[r++];i.scrollTop!=a&&(i.scrollTop=a),i.scrollLeft!=o&&(i.scrollLeft=o)}}}function Ht(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=Vt||(Vt=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function Gt(e,t,n){var r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);var a=new KeyboardEvent("keyup",r);return a.synthetic=!0,e.dispatchEvent(a),i.defaultPrevented||a.defaultPrevented}function Kt(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function Wt(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}var Xt=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];k(this,e),this.node=t,this.offset=n,this.precise=r}return b(e,null,[{key:"before",value:function(t,n){return new e(t.parentNode,Rt(t),n)}},{key:"after",value:function(t,n){return new e(t.parentNode,Rt(t)+1,n)}}]),e}(),qt=[],Qt=function(){function e(){k(this,e),this.parent=null,this.dom=null,this.dirty=2}return b(e,[{key:"editorView",get:function(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"posBefore",value:function(e){var t,n=this.posAtStart,r=s(this.children);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i==e)return n;n+=i.length+i.breakAfter}}catch(a){r.e(a)}finally{r.f()}throw new RangeError("Invalid child in posBefore")}},{key:"posAfter",value:function(e){return this.posBefore(e)+e.length}},{key:"coordsAt",value:function(e,t){return null}},{key:"sync",value:function(t){if(2&this.dirty){var n,r,i=this.dom,a=null,o=s(this.children);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(u.dirty){if(!u.dom&&(n=a?a.nextSibling:i.firstChild)){var l=e.get(n);l&&(l.parent||l.constructor!=u.constructor)||u.reuseDOM(n)}u.sync(t),u.dirty=0}if(n=a?a.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=u.dom&&(t.written=!0),u.dom.parentNode==i)for(;n&&n!=u.dom;)n=$t(n);else i.insertBefore(u.dom,n);a=u.dom}}catch(d){o.e(d)}finally{o.f()}for((n=a?a.nextSibling:i.firstChild)&&t&&t.node==i&&(t.written=!0);n;)n=$t(n)}else if(1&this.dirty){var c,f=s(this.children);try{for(f.s();!(c=f.n()).done;){var h=c.value;h.dirty&&(h.sync(t),h.dirty=0)}}catch(d){f.e(d)}finally{f.f()}}}},{key:"reuseDOM",value:function(e){}},{key:"localPosFromDOM",value:function(t,n){var r;if(t==this.dom)r=this.dom.childNodes[n];else{for(var i=0==It(t)?0:0==n?-1:1;;){var a=t.parentNode;if(a==this.dom)break;0==i&&a.firstChild!=a.lastChild&&(i=t==a.firstChild?-1:1),t=a}r=i<0?t:t.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!e.get(r);)r=r.nextSibling;if(!r)return this.length;for(var o=0,s=0;;o++){var u=this.children[o];if(u.dom==r)return s;s+=u.length+u.breakAfter}}},{key:"domBoundsAround",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=-1,a=-1,o=-1,s=0,u=n,l=n;s<this.children.length;s++){var c=this.children[s],f=u+c.length;if(u<e&&f>t)return c.domBoundsAround(e,t,u);if(f>=e&&-1==r&&(r=s,i=u),u>t&&c.dom.parentNode==this.dom){a=s,o=l;break}l=f,u=f+c.breakAfter}return{from:i,to:o<0?n+this.length:o,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}},{key:"markDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dirty|=2,this.markParentsDirty(e)}},{key:"markParentsDirty",value:function(e){for(var t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}},{key:"setParent",value:function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}},{key:"rootView",get:function(){for(var e=this;;){var t=e.parent;if(!t)return e;e=t}}},{key:"replaceChildren",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt;this.markDirty();for(var i=e;i<t;i++){var a=this.children[i];a.parent==this&&a.destroy()}(n=this.children).splice.apply(n,[e,t-e].concat(l(r)));for(var o=0;o<r.length;o++)r[o].setParent(this)}},{key:"ignoreMutation",value:function(e){return!1}},{key:"ignoreEvent",value:function(e){return!1}},{key:"childCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new Jt(this.children,e,this.children.length)}},{key:"childPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}},{key:"toString",value:function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"isEditable",get:function(){return!0}},{key:"merge",value:function(e,t,n,r,i,a){return!1}},{key:"become",value:function(e){return!1}},{key:"getSide",value:function(){return 0}},{key:"destroy",value:function(){this.parent=null}}],[{key:"get",value:function(e){return e.cmView}}]),e}();function $t(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}Qt.prototype.breakAfter=0;var Jt=function(){function e(t,n,r){k(this,e),this.children=t,this.pos=n,this.i=r,this.off=0}return b(e,[{key:"findPos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}]),e}();function Yt(e,t,n,r,i,a,o,s,u){var l=e.children,c=l.length?l[t]:null,f=a.length?a[a.length-1]:null,h=f?f.breakAfter:o;if(!(t==r&&c&&!o&&!h&&a.length<2&&c.merge(n,i,a.length?f:null,0==n,s,u))){if(r<l.length){var d=l[r];d&&i<d.length?(t==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,u)?a[a.length-1]=d:(i&&d.merge(0,i,null,!1,0,u),a.push(d))):(null===d||void 0===d?void 0:d.breakAfter)&&(f?f.breakAfter=1:o=1),r++}for(c&&(c.breakAfter=o,n>0&&(!o&&a.length&&c.merge(n,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(n<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(n,c.length,null,!1,s,0),t++));t<r&&a.length;)if(l[r-1].become(a[a.length-1]))r--,a.pop(),u=a.length?0:s;else{if(!l[t].become(a[0]))break;t++,a.shift(),s=a.length?0:u}!a.length&&t&&r<l.length&&!l[t-1].breakAfter&&l[r].merge(0,0,l[t-1],!1,s,u)&&t--,(t<r||a.length)&&e.replaceChildren(t,r,a)}}function Zt(e,t,n,r,i,a){var o,u=e.childCursor(),l=u.findPos(n,1),c=l.i,f=l.off,h=u.findPos(t,-1),d=h.i,p=h.off,v=t-n,g=s(r);try{for(g.s();!(o=g.n()).done;){v+=o.value.length}}catch(m){g.e(m)}finally{g.f()}e.length+=v,Yt(e,d,p,c,f,r,0,i,a)}var en="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},tn="undefined"!=typeof document?document:{documentElement:{style:{}}},nn=/Edge\/(\d+)/.exec(en.userAgent),rn=/MSIE \d/.test(en.userAgent),an=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(en.userAgent),on=!!(rn||an||nn),sn=!on&&/gecko\/(\d+)/i.test(en.userAgent),un=!on&&/Chrome\/(\d+)/.exec(en.userAgent),ln="webkitFontSmoothing"in tn.documentElement.style,cn=!on&&/Apple Computer/.test(en.vendor),fn=cn&&(/Mobile\/\w+/.test(en.userAgent)||en.maxTouchPoints>2),hn={mac:fn||/Mac/.test(en.platform),windows:/Win/.test(en.platform),linux:/Linux|X11/.test(en.platform),ie:on,ie_version:rn?tn.documentMode||6:an?+an[1]:nn?+nn[1]:0,gecko:sn,gecko_version:sn?+(/Firefox\/(\d+)/.exec(en.userAgent)||[0,0])[1]:0,chrome:!!un,chrome_version:un?+un[1]:0,ios:fn,android:/Android\b/.test(en.userAgent),webkit:ln,safari:cn,webkit_version:ln?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=tn.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},dn=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).text=e,r}return b(n,[{key:"length",get:function(){return this.text.length}},{key:"createDOM",value:function(e){this.setDOM(e||document.createTextNode(this.text))}},{key:"sync",value:function(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}},{key:"reuseDOM",value:function(e){3==e.nodeType&&this.createDOM(e)}},{key:"merge",value:function(e,t,r){return(!r||r instanceof n&&!(this.length-(t-e)+r.length>256))&&(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}},{key:"split",value:function(e){var t=new n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}},{key:"localPosFromDOM",value:function(e,t){return e==this.dom?t:t?this.text.length:0}},{key:"domAtPos",value:function(e){return new Xt(this.dom,e)}},{key:"domBoundsAround",value:function(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(e,t){return vn(this.dom,e,t)}}]),n}(Qt),pn=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;k(this,n),(r=t.call(this)).mark=e,r.children=i,r.length=a;var o,u=s(i);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.setParent(c(r))}}catch(f){u.e(f)}finally{u.f()}return r}return b(n,[{key:"setAttrs",value:function(e){if(Wt(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(var t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}},{key:"reuseDOM",value:function(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}},{key:"sync",value:function(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),d(f(n.prototype),"sync",this).call(this,e)}},{key:"merge",value:function(e,t,r,i,a,o){return(!r||!(!(r instanceof n&&r.mark.eq(this.mark))||e&&a<=0||t<this.length&&o<=0))&&(Zt(this,e,t,r?r.children:[],a-1,o-1),this.markDirty(),!0)}},{key:"split",value:function(e){var t,r=[],i=0,a=-1,o=0,u=s(this.children);try{for(u.s();!(t=u.n()).done;){var l=t.value,c=i+l.length;c>e&&r.push(i<e?l.split(e-i):l),a<0&&i>=e&&(a=o),i=c,o++}}catch(h){u.e(h)}finally{u.f()}var f=this.length-e;return this.length=e,a>-1&&(this.children.length=a,this.markDirty()),new n(this.mark,r,f)}},{key:"domAtPos",value:function(e){return bn(this.dom,this.children,e)}},{key:"coordsAt",value:function(e,t){return xn(this,e,t)}}]),n}(Qt);function vn(e,t,n){var r=e.nodeValue.length;t>r&&(t=r);var i=t,a=t,o=0;0==t&&n<0||t==r&&n>=0?hn.chrome||hn.gecko||(t?(i--,o=1):a<r&&(a++,o=-1)):n<0?i--:a<r&&a++;var s=Ht(e,i,a).getClientRects();if(!s.length)return Dt;var u=s[(o?o<0:n>=0)?0:s.length-1];return hn.safari&&!o&&0==u.width&&(u=Array.prototype.find.call(s,(function(e){return e.width}))||u),o?Ut(u,o<0):u||null}var gn=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).widget=e,a.length=r,a.side=i,a.prevWidget=null,a}return b(n,[{key:"split",value:function(e){var t=n.create(this.widget,this.length-e,this.side);return this.length-=e,t}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(e,t,r,i,a,o){return!(r&&(!(r instanceof n&&this.widget.compare(r.widget))||e>0&&a<=0||t<this.length&&o<=0))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}},{key:"become",value:function(e){return e.length==this.length&&e instanceof n&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(e){return this.widget.ignoreEvent(e)}},{key:"overrideDOMText",get:function(){if(0==this.length)return w.empty;for(var e=this;e.parent;)e=e.parent;var t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):w.empty}},{key:"domAtPos",value:function(e){return 0==e?Xt.before(this.dom):Xt.after(this.dom,e==this.length)}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(e,t){var n=this.dom.getClientRects(),r=null;if(!n.length)return Dt;for(var i=e>0?n.length-1:0;r=n[i],!(e>0?0==i:i==n.length-1||r.top<r.bottom);i+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:Ut(r,0==e)}},{key:"isEditable",get:function(){return!1}},{key:"destroy",value:function(){d(f(n.prototype),"destroy",this).call(this),this.dom&&this.widget.destroy(this.dom)}}],[{key:"create",value:function(e,t,r){return new(e.customView||n)(e,t,r)}}]),n}(Qt),mn=function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"domAtPos",value:function(e){var t=this.widget,n=t.topView,r=t.text;return n?yn(e,0,n,r,(function(e,t){return e.domAtPos(t)}),(function(e){return new Xt(r,Math.min(e,r.nodeValue.length))})):new Xt(r,Math.min(e,r.nodeValue.length))}},{key:"sync",value:function(){this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(e,t){var n=this.widget,r=n.topView,i=n.text;return r?kn(e,t,r,i):Math.min(t,this.length)}},{key:"ignoreMutation",value:function(){return!1}},{key:"overrideDOMText",get:function(){return null}},{key:"coordsAt",value:function(e,t){var n=this.widget,r=n.topView,i=n.text;return r?yn(e,t,r,i,(function(e,t,n){return e.coordsAt(t,n)}),(function(e,t){return vn(i,e,t)})):vn(i,e,t)}},{key:"destroy",value:function(){var e;d(f(n.prototype),"destroy",this).call(this),null===(e=this.widget.topView)||void 0===e||e.destroy()}},{key:"isEditable",get:function(){return!0}}]),n}(gn);function yn(e,t,n,r,i,a){if(n instanceof pn){var o,u=s(n.children);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=Et(l.dom,r),f=c?r.nodeValue.length:l.length;if(e<f||e==f&&l.getSide()<=0)return c?yn(e,t,l,r,i,a):i(l,e,t);e-=f}}catch(h){u.e(h)}finally{u.f()}return i(n,n.length,-1)}return n.dom==r?a(e,t):i(n,e,t)}function kn(e,t,n,r){if(n instanceof pn){var i,a=s(n.children);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=0,l=Et(o.dom,r);if(Et(o.dom,e))return u+(l?kn(e,t,o,r):o.localPosFromDOM(e,t));u+=l?r.nodeValue.length:o.length}}catch(c){a.e(c)}finally{a.f()}}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}var _n=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).side=e,r}return b(n,[{key:"length",get:function(){return 0}},{key:"merge",value:function(){return!1}},{key:"become",value:function(e){return e instanceof n&&e.side==this.side}},{key:"split",value:function(){return new n(this.side)}},{key:"sync",value:function(){if(!this.dom){var e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}},{key:"getSide",value:function(){return this.side}},{key:"domAtPos",value:function(e){return Xt.before(this.dom)}},{key:"localPosFromDOM",value:function(){return 0}},{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(e){var t=this.dom.getBoundingClientRect(),n=function(e,t){var n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){var i=n.children[r+t];if(i instanceof dn){var a=i.coordsAt(t<0?i.length:0,t);if(a)return a}r+=t}else{if(!(n instanceof pn&&n.parent)){var o=n.dom.lastChild;if(o&&"BR"==o.nodeName)return o.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}},{key:"overrideDOMText",get:function(){return w.empty}}]),n}(Qt);function bn(e,t,n){for(var r=0,i=0;r<t.length;r++){var a=t[r],o=i+a.length;if(!(o==i&&a.getSide()<=0)){if(n>i&&n<o&&a.dom.parentNode==e)return a.domAtPos(n-i);if(n<=i)break;i=o}}for(;r>0;r--){var s=t[r-1].dom;if(s.parentNode==e)return Xt.after(s)}return new Xt(e,0)}function wn(e,t,n){var r,i=e.children;n>0&&t instanceof pn&&i.length&&(r=i[i.length-1])instanceof pn&&r.mark.eq(t.mark)?wn(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function xn(e,t,n){for(var r=0,i=0;i<e.children.length;i++){var a=e.children[i],o=r+a.length,s=void 0;if((n<=0||o==e.length||a.getSide()>0?o>=t:o>t)&&(t<o||i+1==e.children.length||(s=e.children[i+1]).length||s.getSide()>0)){var u=0;if(o==r){if(a.getSide()<=0)continue;u=n=-a.getSide()}var l=a.coordsAt(Math.max(0,t-r),n);return u&&l?Ut(l,n<0):l}r=o}var c=e.dom.lastChild;if(!c)return e.dom.getBoundingClientRect();var f=Mt(c);return f[f.length-1]||null}function An(e,t){for(var n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Sn(e,t){if(e==t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(var i=0,a=n;i<a.length;i++){var o=a[i];if(-1==r.indexOf(o)||e[o]!==t[o])return!1}return!0}function Ln(e,t,n){var r=null;if(t)for(var i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(var a in n)t&&t[a]==n[a]||e.setAttribute(r=a,n[a]);return!!r}dn.prototype.children=gn.prototype.children=_n.prototype.children=qt;var On=function(){function e(){k(this,e)}return b(e,[{key:"eq",value:function(e){return!1}},{key:"updateDOM",value:function(e){return!1}},{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e)}},{key:"estimatedHeight",get:function(){return-1}},{key:"ignoreEvent",value:function(e){return!0}},{key:"customView",get:function(){return null}},{key:"destroy",value:function(e){}}]),e}(),Tn=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Tn||(Tn={})),En=function(e){v(n,e);var t=y(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this)).startSide=e,o.endSide=r,o.widget=i,o.spec=a,o}return b(n,[{key:"heightRelevant",get:function(){return!1}},{key:"hasHeight",value:function(){return!!this.widget&&this.widget.estimatedHeight>-1}}],[{key:"mark",value:function(e){return new Cn(e)}},{key:"widget",value:function(e){var t=e.side||0,n=!!e.block;return new Nn(e,t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,t,n,e.widget||null,!1)}},{key:"replace",value:function(e){var t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{var i=Rn(e,r);t=(i.start?r?-3e8:-1:5e8)-1,n=1+(i.end?r?2e8:1:-6e8)}return new Nn(e,t,n,r,e.widget||null,!0)}},{key:"line",value:function(e){return new Mn(e)}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Je.of(e,t)}}]),n}(Xe);En.none=Je.empty;var Cn=function(e){v(n,e);var t=y(n);function n(e){var r;k(this,n);var i=Rn(e),a=i.start,o=i.end;return(r=t.call(this,a?-1:5e8,o?1:-6e8,null,e)).tagName=e.tagName||"span",r.class=e.class||"",r.attrs=e.attributes||null,r}return b(n,[{key:"eq",value:function(e){return this==e||e instanceof n&&this.tagName==e.tagName&&this.class==e.class&&Sn(this.attrs,e.attrs)}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return d(f(n.prototype),"range",this).call(this,e,t)}}]),n}(En);Cn.prototype.point=!1;var Mn=function(e){v(n,e);var t=y(n);function n(e){return k(this,n),t.call(this,-2e8,-2e8,null,e)}return b(n,[{key:"eq",value:function(e){return e instanceof n&&Sn(this.spec.attributes,e.spec.attributes)}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return d(f(n.prototype),"range",this).call(this,e,t)}}]),n}(En);Mn.prototype.mapMode=K.TrackBefore,Mn.prototype.point=!0;var Nn=function(e){v(n,e);var t=y(n);function n(e,r,i,a,o,s){var u;return k(this,n),(u=t.call(this,r,i,o,e)).block=a,u.isReplace=s,u.mapMode=a?r<=0?K.TrackBefore:K.TrackAfter:K.TrackDel,u}return b(n,[{key:"type",get:function(){return this.startSide<this.endSide?Tn.WidgetRange:this.startSide<=0?Tn.WidgetBefore:Tn.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}},{key:"eq",value:function(e){return e instanceof n&&(t=this.widget,r=e.widget,t==r||!!(t&&r&&t.compare(r)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,r}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return d(f(n.prototype),"range",this).call(this,e,t)}}]),n}(En);function Rn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.inclusiveStart,r=e.inclusiveEnd;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==r&&void 0!==r?r:t}}function Pn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Nn.prototype.point=!0;var In=function(e){v(n,e);var t=y(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).children=[],e.length=0,e.prevAttrs=void 0,e.attrs=null,e.breakAfter=0,e}return b(n,[{key:"merge",value:function(e,t,r,i,a,o){if(r){if(!(r instanceof n))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Zt(this,e,t,r?r.children:[],a,o),!0}},{key:"split",value:function(e){var t=new n;if(t.breakAfter=this.breakAfter,0==this.length)return t;var r=this.childPos(e),i=r.i,a=r.off;a&&(t.append(this.children[i].split(a),0),this.children[i].merge(a,this.children[i].length,null,!1,0,0),i++);for(var o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}},{key:"transferDOM",value:function(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(e){Sn(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}},{key:"append",value:function(e,t){wn(this,e,t)}},{key:"addLineDeco",value:function(e){var t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=An(t,this.attrs||{})),n&&(this.attrs=An({class:n},this.attrs||{}))}},{key:"domAtPos",value:function(e){return bn(this.dom,this.children,e)}},{key:"reuseDOM",value:function(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}},{key:"sync",value:function(e){var t;this.dom?4&this.dirty&&(Wt(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Ln(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),d(f(n.prototype),"sync",this).call(this,e);for(var r=this.dom.lastChild;r&&Qt.get(r)instanceof pn;)r=r.lastChild;if(!r||!this.length||"BR"!=r.nodeName&&0==(null===(t=Qt.get(r))||void 0===t?void 0:t.isEditable)&&(!hn.ios||!this.children.some((function(e){return e instanceof dn})))){var i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}},{key:"measureTextSize",value:function(){if(0==this.children.length||this.length>20)return null;var e,t=0,n=s(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!(r instanceof dn))return null;var i=Mt(r.dom);if(1!=i.length)return null;t+=i[0].width}}catch(a){n.e(a)}finally{n.f()}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}}},{key:"coordsAt",value:function(e,t){return xn(this,e,t)}},{key:"become",value:function(e){return!1}},{key:"type",get:function(){return Tn.Text}}],[{key:"find",value:function(e,t){for(var r=0,i=0;r<e.children.length;r++){var a=e.children[r],o=i+a.length;if(o>=t){if(a instanceof n)return a;if(o>t)break}i=o+a.breakAfter}return null}}]),n}(Qt),Dn=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).widget=e,a.length=r,a.type=i,a.breakAfter=0,a.prevWidget=null,a}return b(n,[{key:"merge",value:function(e,t,r,i,a,o){return!(r&&(!(r instanceof n&&this.widget.compare(r.widget))||e>0&&a<=0||t<this.length&&o<=0))&&(this.length=e+(r?r.length:0)+(this.length-t),!0)}},{key:"domAtPos",value:function(e){return 0==e?Xt.before(this.dom):Xt.after(this.dom,e==this.length)}},{key:"split",value:function(e){var t=this.length-e;this.length=e;var r=new n(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}},{key:"children",get:function(){return qt}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):w.empty}},{key:"domBoundsAround",value:function(){return null}},{key:"become",value:function(e){return e instanceof n&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(e){return this.widget.ignoreEvent(e)}},{key:"destroy",value:function(){d(f(n.prototype),"destroy",this).call(this),this.dom&&this.widget.destroy(this.dom)}}]),n}(Qt),Un=function(){function e(t,n,r,i){k(this,e),this.doc=t,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=n}return b(e,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Dn&&e.type==Tn.WidgetBefore)}},{key:"getLine",value:function(){return this.curLine||(this.content.push(this.curLine=new In),this.atCursorPos=!0),this.curLine}},{key:"flushBuffer",value:function(e){this.pendingBuffer&&(this.curLine.append(Bn(new _n(-1),e),e.length),this.pendingBuffer=0)}},{key:"addBlockWidget",value:function(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}},{key:"finish",value:function(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}},{key:"buildText",value:function(e,t,n){for(;e>0;){if(this.textOff==this.text.length){var r=this.cursor.next(this.skip),i=r.value,a=r.lineBreak,o=r.done;if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=i,this.textOff=0}var s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(Bn(new dn(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}}},{key:"span",value:function(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}},{key:"point",value:function(e,t,n,r,i,a){if(this.disallowBlockEffectsFor[a]&&n instanceof Nn){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}var o=t-e;if(n instanceof Nn)if(n.block){var s=n.type;s!=Tn.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Dn(n.widget||new Vn("div"),o,s))}else{var u=gn.create(n.widget||new Vn("span"),o,n.startSide),l=this.atCursorPos&&!u.isEditable&&i<=r.length&&(e<t||n.startSide>0),c=!u.isEditable&&(e<t||n.startSide<=0),f=this.getLine();2!=this.pendingBuffer||l||(this.pendingBuffer=0),this.flushBuffer(r),l&&(f.append(Bn(new _n(1),r),i),i=r.length+Math.max(0,i-r.length)),f.append(Bn(u,r),i),this.atCursorPos=c,this.pendingBuffer=c?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}}],[{key:"build",value:function(t,n,r,i,a){var o=new e(t,n,r,a);return o.openEnd=Je.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}]),e}();function Bn(e,t){var n,r=s(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e=new pn(i,[e],e.length)}}catch(a){r.e(a)}finally{r.f()}return e}var Vn=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).tag=e,r}return b(n,[{key:"eq",value:function(e){return e.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(e){return e.nodeName.toLowerCase()==this.tag}}]),n}(On),Fn=ie.define(),zn=ie.define(),jn=ie.define(),Hn=ie.define(),Gn=ie.define(),Kn=ie.define(),Wn=ie.define({combine:function(e){return e.some((function(e){return e}))}}),Xn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;k(this,e),this.range=t,this.y=n,this.x=r,this.yMargin=i,this.xMargin=a}return b(e,[{key:"map",value:function(t){return t.empty?this:new e(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}]),e}(),qn=Re.define({map:function(e,t){return e.map(t)}});function Qn(e,t,n){var r=e.facet(Hn);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}var $n=ie.define({combine:function(e){return!e.length||e[0]}}),Jn=0,Yn=ie.define(),Zn=function(){function e(t,n,r,i){k(this,e),this.id=t,this.create=n,this.domEventHandlers=r,this.extension=i(this)}return b(e,null,[{key:"define",value:function(t,n){var r=n||{},i=r.eventHandlers,a=r.provide,o=r.decorations;return new e(Jn++,t,i,(function(e){var t=[Yn.of(e)];return o&&t.push(rr.of((function(t){var n=t.plugin(e);return n?o(n):En.none}))),a&&t.push(a(e)),t}))}},{key:"fromClass",value:function(t,n){return e.define((function(e){return new t(e)}),n)}}]),e}(),er=function(){function e(t){k(this,e),this.spec=t,this.mustUpdate=null,this.value=null}return b(e,[{key:"update",value:function(e){if(this.value){if(this.mustUpdate){var t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Qn(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(tg){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Qn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}},{key:"destroy",value:function(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(n){Qn(e.state,n,"CodeMirror plugin crashed")}}},{key:"deactivate",value:function(){this.spec=this.value=null}}]),e}(),tr=ie.define(),nr=ie.define(),rr=ie.define(),ir=ie.define(),ar=ie.define(),or=ie.define(),sr=function(){function e(t,n,r,i){k(this,e),this.fromA=t,this.toA=n,this.fromB=r,this.toB=i}return b(e,[{key:"join",value:function(t){return new e(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}},{key:"addToSet",value:function(e){for(var t=e.length,n=this;t>0;t--){var r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}}],[{key:"extendWithRanges",value:function(t,n){if(0==n.length)return t;for(var r=[],i=0,a=0,o=0,s=0;;i++){for(var u=i==t.length?null:t[i],l=o-s,c=u?u.fromB:1e9;a<n.length&&n[a]<c;){var f=n[a],h=n[a+1],d=Math.max(s,f),p=Math.min(c,h);if(d<=p&&new e(d+l,p+l,d,p).addToSet(r),h>c)break;a+=2}if(!u)return r;new e(u.fromA,u.toA,u.fromB,u.toB).addToSet(r),o=u.toA,s=u.toB}}}]),e}(),ur=function(){function e(t,n,r){k(this,e),this.view=t,this.state=n,this.transactions=r,this.flags=0,this.startState=t.state,this.changes=X.empty(this.startState.doc.length);var i,a=s(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.changes=this.changes.compose(o.changes)}}catch(c){a.e(c)}finally{a.f()}var u=[];this.changes.iterChangedRanges((function(e,t,n,r){return u.push(new sr(e,t,n,r))})),this.changedRanges=u;var l=t.hasFocus;l!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=l,this.flags|=1)}return b(e,[{key:"viewportChanged",get:function(){return(4&this.flags)>0}},{key:"heightChanged",get:function(){return(2&this.flags)>0}},{key:"geometryChanged",get:function(){return this.docChanged||(10&this.flags)>0}},{key:"focusChanged",get:function(){return(1&this.flags)>0}},{key:"docChanged",get:function(){return!this.changes.empty}},{key:"selectionSet",get:function(){return this.transactions.some((function(e){return e.selection}))}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}],[{key:"create",value:function(t,n,r){return new e(t,n,r)}}]),e}(),lr=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(lr||(lr={})),cr=lr.LTR,fr=lr.RTL;function hr(e){for(var t=[],n=0;n<e.length;n++)t.push(1<<+e[n]);return t}for(var dr=hr("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pr=hr("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vr=Object.create(null),gr=[],mr=0,yr=["()","[]","{}"];mr<yr.length;mr++){var kr=yr[mr],_r=kr.charCodeAt(0),br=kr.charCodeAt(1);vr[_r]=br,vr[br]=-_r}function wr(e){return e<=247?dr[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?pr[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8203||8204==e?256:1}var xr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ar=function(){function e(t,n,r){k(this,e),this.from=t,this.to=n,this.level=r}return b(e,[{key:"dir",get:function(){return this.level%2?fr:cr}},{key:"side",value:function(e,t){return this.dir==t==e?this.to:this.from}}],[{key:"find",value:function(e,t,n,r){for(var i=-1,a=0;a<e.length;a++){var o=e[a];if(o.from<=t&&o.to>=t){if(o.level==n)return a;(i<0||(0!=r?r<0?o.from<t:o.to>t:e[i].level>o.level))&&(i=a)}}if(i<0)throw new RangeError("Index out of range");return i}}]),e}(),Sr=[];function Lr(e,t){var n=e.length,r=t==cr?1:2,i=t==cr?2:1;if(!e||1==r&&!xr.test(e))return Or(n);for(var a=0,o=r,s=r;a<n;a++){var u=wr(e.charCodeAt(a));512==u?u=o:8==u&&4==s&&(u=16),Sr[a]=4==u?2:u,7&u&&(s=u),o=u}for(var l=0,c=r,f=r;l<n;l++){var h=Sr[l];if(128==h)l<n-1&&c==Sr[l+1]&&24&c?h=Sr[l]=c:Sr[l]=256;else if(64==h){for(var d=l+1;d<n&&64==Sr[d];)d++;for(var p=l&&8==c||d<n&&8==Sr[d]?1==f?1:8:256,v=l;v<d;v++)Sr[v]=p;l=d-1}else 8==h&&1==f&&(Sr[l]=1);c=h,7&h&&(f=h)}for(var g,m,y,k=0,_=0,b=0;k<n;k++)if(m=vr[g=e.charCodeAt(k)])if(m<0){for(var w=_-3;w>=0;w-=3)if(gr[w+1]==-m){var x=gr[w+2],A=2&x?r:4&x?1&x?i:r:0;A&&(Sr[k]=Sr[gr[w]]=A),_=w;break}}else{if(189==gr.length)break;gr[_++]=k,gr[_++]=g,gr[_++]=b}else if(2==(y=Sr[k])||1==y){var S=y==r;b=S?0:1;for(var L=_-3;L>=0;L-=3){var O=gr[L+2];if(2&O)break;if(S)gr[L+2]|=2;else{if(4&O)break;gr[L+2]|=4}}}for(var T=0;T<n;T++)if(256==Sr[T]){for(var E=T+1;E<n&&256==Sr[E];)E++;for(var C=1==(T?Sr[T-1]:r),M=C==(1==(E<n?Sr[E]:r))?C?1:2:r,N=T;N<E;N++)Sr[N]=M;T=E-1}var R=[];if(1==r)for(var P=0;P<n;){for(var I=P,D=1!=Sr[P++];P<n&&D==(1!=Sr[P]);)P++;if(D)for(var U=P;U>I;){for(var B=U,V=2!=Sr[--U];U>I&&V==(2!=Sr[U-1]);)U--;R.push(new Ar(U,B,V?2:1))}else R.push(new Ar(I,P,0))}else for(var F=0;F<n;){for(var z=F,j=2==Sr[F++];F<n&&j==(2==Sr[F]);)F++;R.push(new Ar(z,F,j?1:2))}return R}function Or(e){return[new Ar(0,e,0)]}var Tr="";function Er(e,t,n,r,i){var a,o=r.head-e.from,s=-1;if(0==o){if(!i||!e.length)return null;t[0].level!=n&&(o=t[0].side(!1,n),s=0)}else if(o==e.length){if(i)return null;var u=t[t.length-1];u.level!=n&&(o=u.side(!0,n),s=t.length-1)}s<0&&(s=Ar.find(t,o,null!==(a=r.bidiLevel)&&void 0!==a?a:-1,r.assoc));var l=t[s];o==l.side(i,n)&&(o=(l=t[s+=i?1:-1]).side(!i,n));var c=i==(l.dir==n),f=D(e.text,o,c);if(Tr=e.text.slice(Math.min(o,f),Math.max(o,f)),f!=l.side(i,n))return te.cursor(f+e.from,c?-1:1,l.level);var h=s==(i?t.length-1:0)?null:t[s+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?te.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):te.cursor(f+e.from,i?-1:1,l.level):te.cursor(i?e.to:e.from,i?-1:1,n)}var Cr="\uffff",Mr=function(){function e(t,n){k(this,e),this.points=t,this.text="",this.lineSeparator=n.facet(Ke.lineSeparator)}return b(e,[{key:"append",value:function(e){this.text+=e}},{key:"lineBreak",value:function(){this.text+=Cr}},{key:"readRange",value:function(e,t){if(!e)return this;for(var n=e.parentNode,r=e;;){this.findPointBefore(n,r),this.readNode(r);var i=r.nextSibling;if(i==t)break;var a=Qt.get(r),o=Qt.get(i);(a&&o?a.breakAfter:(a?a.breakAfter:Nr(r))||Nr(i)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}},{key:"readTextNode",value:function(e){var t,n=e.nodeValue,r=s(this.points);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length))}}catch(p){r.e(p)}finally{r.f()}for(var a=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){var u=-1,l=1,c=void 0;if(this.lineSeparator?(u=n.indexOf(this.lineSeparator,a),l=this.lineSeparator.length):(c=o.exec(n))&&(u=c.index,l=c[0].length),this.append(n.slice(a,u<0?n.length:u)),u<0)break;if(this.lineBreak(),l>1){var f,h=s(this.points);try{for(h.s();!(f=h.n()).done;){var d=f.value;d.node==e&&d.pos>this.text.length&&(d.pos-=l-1)}}catch(p){h.e(p)}finally{h.f()}}a=u+l}}},{key:"readNode",value:function(e){if(!e.cmIgnore){var t=Qt.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(var r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}}},{key:"findPointBefore",value:function(e,t){var n,r=s(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}}catch(a){r.e(a)}finally{r.f()}}},{key:"findPointInside",value:function(e,t){var n,r=s(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}catch(a){r.e(a)}finally{r.f()}}}]),e}();function Nr(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}var Rr=b((function e(t,n){k(this,e),this.node=t,this.offset=n,this.pos=-1})),Pr=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).view=e,r.compositionDeco=En.none,r.decorations=[],r.dynamicDecorationMap=[],r.minWidth=0,r.minWidthFrom=0,r.minWidthTo=0,r.impreciseAnchor=null,r.impreciseHead=null,r.forceSelection=!1,r.lastUpdate=Date.now(),r.setDOM(e.contentDOM),r.children=[new In],r.children[0].setParent(c(r)),r.updateDeco(),r.updateInner([new sr(0,0,0,e.state.doc.length)],0),r}return b(n,[{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}},{key:"update",value:function(e){var t=this,n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((function(e){var n=e.fromA;return e.toA<t.minWidthFrom||n>t.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=En.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){var n=Ur(e);if(!n)return En.none;var r=n.from,i=n.to,a=n.node,o=n.text,s=t.mapPos(r,1),u=Math.max(s,t.mapPos(i,-1)),l=e.state,c=3==a.nodeType?a.nodeValue:new Mr([],l).readRange(a.firstChild,null).text;if(u-s<c.length)if(l.doc.sliceString(s,Math.min(l.doc.length,s+c.length),Cr)==c)u=s+c.length;else{if(l.doc.sliceString(Math.max(0,u-c.length),u,Cr)!=c)return En.none;s=u-c.length}else if(l.doc.sliceString(s,u,Cr)!=c)return En.none;var f=Qt.get(a);f instanceof mn?f=f.widget.topView:f&&(f.parent=null);return En.set(En.replace({widget:new Br(a,o,f),inclusive:!0}).range(s,u))}(this.view,e.changes)),(hn.ie||hn.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);var r=function(e,t,n){var r=new zr;return Je.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return n=sr.extendWithRanges(n,r),(0!=this.dirty||0!=n.length)&&(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}},{key:"updateInner",value:function(e,t){var n=this;this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);var r=this.view.observer;r.ignore((function(){n.dom.style.height=n.view.viewState.contentHeight+"px",n.dom.style.flexBasis=n.minWidth?n.minWidth+"px":"";var e=hn.chrome||hn.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;n.sync(e),n.dirty=0,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(n.forceSelection=!0),n.dom.style.height=""}));var i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length){var a,o=s(this.children);try{for(o.s();!(a=o.n()).done;){var u=a.value;u instanceof Dn&&u.widget instanceof Dr&&i.push(u.dom)}}catch(l){o.e(l)}finally{o.f()}}r.updateGaps(i)}},{key:"updateChildren",value:function(e,t){for(var n=this.childCursor(t),r=e.length-1;;r--){var i=r>=0?e[r]:null;if(!i)break;var a=i.fromA,o=i.toA,s=i.fromB,u=i.toB,l=Un.build(this.view.state.doc,s,u,this.decorations,this.dynamicDecorationMap),c=l.content,f=l.breakAtStart,h=l.openStart,d=l.openEnd,p=n.findPos(o,1),v=p.i,g=p.off,m=n.findPos(a,-1);Yt(this,m.i,m.off,v,g,c,f,h,d)}}},{key:"updateSelection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&this.view.observer.readSelectionRange(),!(!n&&!this.mayControlSelection()||hn.ios&&this.view.inputState.rapidCompositionStart)){var r=this.forceSelection;this.forceSelection=!1;var i=this.view.state.selection.main,a=this.domAtPos(i.anchor),o=i.empty?a:this.domAtPos(i.head);if(hn.gecko&&i.empty&&Ir(a)){var s=document.createTextNode("");this.view.observer.ignore((function(){return a.node.insertBefore(s,a.node.childNodes[a.offset]||null)})),a=o=new Xt(s,0),r=!0}var u=this.view.observer.selectionRange;!r&&u.focusNode&&Nt(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Nt(o.node,o.offset,u.focusNode,u.focusOffset)||(this.view.observer.ignore((function(){hn.android&&hn.chrome&&e.dom.contains(u.focusNode)&&jr(u.focusNode,e.dom)&&(e.dom.blur(),e.dom.focus({preventScroll:!0}));var t=Tt(e.root);if(i.empty){if(hn.gecko){var n=Fr(a.node,a.offset);if(n&&3!=n){var r=Vr(a.node,a.offset,1==n?1:-1);r&&(a=new Xt(r,1==n?0:r.nodeValue.length))}}t.collapse(a.node,a.offset),null!=i.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=i.bidiLevel)}else if(t.extend)t.collapse(a.node,a.offset),t.extend(o.node,o.offset);else{var s=document.createRange();if(i.anchor>i.head){var l=[o,a];a=l[0],o=l[1]}s.setEnd(o.node,o.offset),s.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(s)}})),this.view.observer.setSelectionRange(a,o)),this.impreciseAnchor=a.precise?null:new Xt(u.anchorNode,u.anchorOffset),this.impreciseHead=o.precise?null:new Xt(u.focusNode,u.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){if(!this.compositionDeco.size){var e=this.view.state.selection.main,t=Tt(this.root);if(e.empty&&e.assoc&&t.modify){var n=In.find(this,e.head);if(n){var r=n.posAtStart;if(e.head!=r&&e.head!=r+n.length){var i=this.coordsAt(e.head,-1),a=this.coordsAt(e.head,1);if(i&&a&&!(i.bottom>a.top)){var o=this.domAtPos(e.head+e.assoc);t.collapse(o.node,o.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}}}}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet($n)?this.root.activeElement==this.dom:Ct(this.dom,this.view.observer.selectionRange)}},{key:"nearest",value:function(e){for(var t=e;t;){var n=Qt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}},{key:"posFromDOM",value:function(e,t){var n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}},{key:"domAtPos",value:function(e){for(var t=this.childCursor().findPos(e,-1),n=t.i,r=t.off;n<this.children.length-1;){var i=this.children[n];if(r<i.length||i instanceof In)break;n++,r=0}return this.children[n].domAtPos(r)}},{key:"coordsAt",value:function(e,t){for(var n=this.length,r=this.children.length-1;;r--){var i=this.children[r],a=n-i.breakAfter-i.length;if(e>a||e==a&&i.type!=Tn.WidgetBefore&&i.type!=Tn.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Tn.WidgetBefore&&t>-2))return i.coordsAt(e-a,t);n=a}}},{key:"measureVisibleLineHeights",value:function(e){for(var t=[],n=e.from,r=e.to,i=this.view.contentDOM.clientWidth,a=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,s=this.view.textDirection==lr.LTR,u=0,l=0;l<this.children.length;l++){var c=this.children[l],f=u+c.length;if(f>r)break;if(u>=n){var h=c.dom.getBoundingClientRect();if(t.push(h.height),a){var d=c.dom.lastChild,p=d?Mt(d):[];if(p.length){var v=p[p.length-1],g=s?v.right-h.left:h.right-v.left;g>o&&(o=g,this.minWidth=i,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+c.breakAfter}return t}},{key:"textDirectionAt",value:function(e){var t=this.childPos(e,1).i;return"rtl"==getComputedStyle(this.children[t].dom).direction?lr.RTL:lr.LTR}},{key:"measureTextSize",value:function(){var e,t=this,n=s(this.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r instanceof In){var i=r.measureTextSize();if(i)return i}}}catch(l){n.e(l)}finally{n.f()}var a,o,u=document.createElement("div");return u.className="cm-line",u.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((function(){t.dom.appendChild(u);var e=Mt(u.firstChild)[0];a=u.getBoundingClientRect().height,o=e?e.width/27:7,u.remove()})),{lineHeight:a,charWidth:o}}},{key:"childCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new Jt(this.children,e,t)}},{key:"computeBlockGapDeco",value:function(){for(var e=[],t=this.view.viewState,n=0,r=0;;r++){var i=r==t.viewports.length?null:t.viewports[r],a=i?i.from-1:this.length;if(a>n){var o=t.lineBlockAt(a).bottom-t.lineBlockAt(n).top;e.push(En.replace({widget:new Dr(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!i)break;n=i.to+1}return En.set(e)}},{key:"updateDeco",value:function(){for(var e=this,t=this.view.state.facet(rr).map((function(t,n){return(e.dynamicDecorationMap[n]="function"==typeof t)?t(e.view):t})),n=t.length;n<t.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[].concat(l(t),[this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco])}},{key:"scrollIntoView",value:function(e){var t,n=this,r=e.range,i=this.coordsAt(r.head,r.empty?r.assoc:r.head>r.anchor?-1:1);if(i){!r.empty&&(t=this.coordsAt(r.anchor,r.anchor>r.head?-1:1))&&(i={left:Math.min(i.left,t.left),top:Math.min(i.top,t.top),right:Math.max(i.right,t.right),bottom:Math.max(i.bottom,t.bottom)});var a,o=0,u=0,l=0,c=0,f=s(this.view.state.facet(ar).map((function(e){return e(n.view)})));try{for(f.s();!(a=f.n()).done;){var h=a.value;if(h){var d=h.left,p=h.right,v=h.top,g=h.bottom;null!=d&&(o=Math.max(o,d)),null!=p&&(u=Math.max(u,p)),null!=v&&(l=Math.max(l,v)),null!=g&&(c=Math.max(c,g))}}}catch(y){f.e(y)}finally{f.f()}var m={left:i.left-o,top:i.top-l,right:i.right+u,bottom:i.bottom+c};!function(e,t,n,r,i,a,o,s){for(var u=e.ownerDocument,l=u.defaultView,c=e;c;)if(1==c.nodeType){var f=void 0,h=c==u.body;if(h)f=Bt(l);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}var d=c.getBoundingClientRect();f={left:d.left,right:d.left+c.clientWidth,top:d.top,bottom:d.top+c.clientHeight}}var p=0,v=0;if("nearest"==i)t.top<f.top?(v=-(f.top-t.top+o),n>0&&t.bottom>f.bottom+v&&(v=t.bottom-f.bottom+v+o)):t.bottom>f.bottom&&(v=t.bottom-f.bottom+o,n<0&&t.top-v<f.top&&(v=-(f.top+v-t.top+o)));else{var g=t.bottom-t.top,m=f.bottom-f.top;v=("center"==i&&g<=m?t.top+g/2-m/2:"start"==i||"center"==i&&n<0?t.top-o:t.bottom-m+o)-f.top}if("nearest"==r?t.left<f.left?(p=-(f.left-t.left+a),n>0&&t.right>f.right+p&&(p=t.right-f.right+p+a)):t.right>f.right&&(p=t.right-f.right+a,n<0&&t.left<f.left+p&&(p=-(f.left+p-t.left+a))):p=("center"==r?t.left+(t.right-t.left)/2-(f.right-f.left)/2:"start"==r==s?t.left-a:t.right-(f.right-f.left)+a)-f.left,p||v)if(h)l.scrollBy(p,v);else{if(v){var y=c.scrollTop;c.scrollTop+=v,v=c.scrollTop-y}if(p){var k=c.scrollLeft;c.scrollLeft+=p,p=c.scrollLeft-k}t={left:t.left-p,top:t.top-v,right:t.right-p,bottom:t.bottom-v}}if(h)break;c=c.assignedSlot||c.parentNode,r=i="nearest"}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,m,r.head<r.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==lr.LTR)}}}]),n}(Qt);function Ir(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}var Dr=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).height=e,r}return b(n,[{key:"toDOM",value:function(){var e=document.createElement("div");return this.updateDOM(e),e}},{key:"eq",value:function(e){return e.height==this.height}},{key:"updateDOM",value:function(e){return e.style.height=this.height+"px",!0}},{key:"estimatedHeight",get:function(){return this.height}}]),n}(On);function Ur(e){var t=e.observer.selectionRange,n=t.focusNode&&Vr(t.focusNode,t.focusOffset,0);if(!n)return null;var r=e.docView.nearest(n);if(!r)return null;if(r instanceof In){for(var i=n;i.parentNode!=r.dom;)i=i.parentNode;for(var a=i.previousSibling;a&&!Qt.get(a);)a=a.previousSibling;var o=a?Qt.get(a).posAtEnd:r.posAtStart;return{from:o,to:o,node:i,text:n}}for(;;){var s=r.parent;if(!s)return null;if(s instanceof In)break;r=s}var u=r.posAtStart;return{from:u,to:u+r.length,node:r.dom,text:n}}var Br=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).top=e,a.text=r,a.topView=i,a}return b(n,[{key:"eq",value:function(e){return this.top==e.top&&this.text==e.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",value:function(){return!1}},{key:"customView",get:function(){return mn}}]),n}(On);function Vr(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=It(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}function Fr(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}var zr=function(){function e(){k(this,e),this.changes=[]}return b(e,[{key:"compareRange",value:function(e,t){Pn(e,t,this.changes)}},{key:"comparePoint",value:function(e,t){Pn(e,t,this.changes)}}]),e}();function jr(e,t){for(var n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}function Hr(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Gr(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Kr(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Wr(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Xr(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function qr(e,t,n){for(var r,i,a,o,s,u,l,c,f=e.firstChild;f;f=f.nextSibling)for(var h=Mt(f),d=0;d<h.length;d++){var p=h[d];i&&Kr(i,p)&&(p=Wr(Xr(p,i.bottom),i.top));var v=Hr(t,p),g=Gr(n,p);if(0==v&&0==g)return 3==f.nodeType?Qr(f,t,n):qr(f,t,n);(!r||o>g||o==g&&a>v)&&(r=f,i=p,a=v,o=g),0==v?n>p.bottom&&(!l||l.bottom<p.bottom)?(s=f,l=p):n<p.top&&(!c||c.top>p.top)&&(u=f,c=p):l&&Kr(l,p)?l=Xr(l,p.bottom):c&&Kr(c,p)&&(c=Wr(c,p.top))}if(l&&l.bottom>=n?(r=s,i=l):c&&c.top<=n&&(r=u,i=c),!r)return{node:e,offset:0};var m=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?Qr(r,m,n):a||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:qr(r,m,n)}function Qr(e,t,n){for(var r=e.nodeValue.length,i=-1,a=1e9,o=0,s=0;s<r;s++)for(var u=Ht(e,s,s+1).getClientRects(),l=0;l<u.length;l++){var c=u[l];if(c.top!=c.bottom){o||(o=t-c.left);var f=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&f<a){var h=t>=(c.left+c.right)/2,d=h;if(hn.chrome||hn.gecko)Ht(e,s).getBoundingClientRect().left==c.right&&(d=!h);if(f<=0)return{node:e,offset:s+(d?1:0)};i=s+(d?1:0),a=f}}}return{node:e,offset:i>-1?i:o>0?e.nodeValue.length:0}}function $r(e,t,n){var r,i,a=t.x,o=t.y,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,u=e.contentDOM.getBoundingClientRect(),l=u.top+e.viewState.paddingTop,c=e.viewState.docHeight,f=o-l;if(f<0)return 0;if(f>c)return e.state.doc.length;for(var h=e.defaultLineHeight/2,d=!1;(i=e.elementAtHeight(f)).type!=Tn.Text;)for(;!((f=s>0?i.bottom+h:i.top-h)>=0&&f<=c);){if(d)return n?null:0;d=!0,s=-s}o=l+f;var p=i.from;if(p<e.viewport.from)return 0==e.viewport.from?0:n?null:Jr(e,u,i,a,o);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:Jr(e,u,i,a,o);var v=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:v,m=g.elementFromPoint(a,o);m&&!e.contentDOM.contains(m)&&(m=null),m||(a=Math.max(u.left+1,Math.min(u.right-1,a)),(m=g.elementFromPoint(a,o))&&!e.contentDOM.contains(m)&&(m=null));var y,k=-1;if(m&&0!=(null===(r=e.docView.nearest(m))||void 0===r?void 0:r.isEditable))if(v.caretPositionFromPoint){var _=v.caretPositionFromPoint(a,o);_&&(y=_.offsetNode,k=_.offset)}else if(v.caretRangeFromPoint){var b=v.caretRangeFromPoint(a,o);b&&(y=b.startContainer,k=b.startOffset,hn.safari&&Yr(y,k,a)&&(y=void 0))}if(!y||!e.docView.dom.contains(y)){var w=In.find(e.docView,p);if(!w)return f>i.top+i.height/2?i.to:i.from;var x=qr(w.dom,a,o);y=x.node,k=x.offset}return e.docView.posFromDOM(y,k)}function Jr(e,t,n,r,i){var a=Math.round((r-t.left)*e.defaultCharacterWidth);e.lineWrapping&&n.height>1.5*e.defaultLineHeight&&(a+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength);var o=e.state.sliceDoc(n.from,n.to);return n.from+ft(o,a,e.state.tabSize)}function Yr(e,t,n){var r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(var i=e.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return Ht(e,r-1,r).getBoundingClientRect().left>n}function Zr(e,t,n,r){var i=e.state.doc.lineAt(t.head),a=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(a){var o=e.dom.getBoundingClientRect(),s=e.textDirectionAt(i.from),u=e.posAtCoords({x:n==(s==lr.LTR)?o.right-1:o.left+1,y:(a.top+a.bottom)/2});if(null!=u)return te.cursor(u,n?-1:1)}var l=In.find(e.docView,t.head),c=l?n?l.posAtEnd:l.posAtStart:n?i.to:i.from;return te.cursor(c,n?-1:1)}function ei(e,t,n,r){for(var i=e.state.doc.lineAt(t.head),a=e.bidiSpans(i),o=e.textDirectionAt(i.from),s=t,u=null;;){var l=Er(i,a,o,s,n),c=Tr;if(!l){if(i.number==(n?e.state.doc.lines:1))return s;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),a=e.bidiSpans(i),l=te.cursor(n?i.from:i.to)}if(u){if(!u(c))return s}else{if(!r)return l;u=r(c)}s=l}}function ti(e,t,n){for(var r=e.state.facet(ir).map((function(t){return t(e)}));;){var i,a=!1,o=s(r);try{for(o.s();!(i=o.n()).done;){i.value.between(n.from-1,n.from+1,(function(e,r,i){n.from>e&&n.from<r&&(n=t.from>n.from?te.cursor(e,1):te.cursor(r,-1),a=!0)}))}}catch(u){o.e(u)}finally{o.f()}if(!a)return n}}var ni=function(){function e(t){var n=this;k(this,e),this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;var r=function(e){var r=si[e];t.contentDOM.addEventListener(e,(function(i){oi(t,i)&&!n.ignoreDuringComposition(i)&&("keydown"==e&&n.keydown(t,i)||(n.mustFlushObserver(i)&&t.observer.forceFlush(),n.runCustomHandlers(e,t,i)?i.preventDefault():r(t,i)))})),n.registeredEvents.push(e)};for(var i in si)r(i);hn.chrome&&hn.chrome_version>=102&&t.scrollDOM.addEventListener("wheel",(function(){n.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(n.chromeScrollHack),n.chromeScrollHack=setTimeout((function(){n.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=t.hasFocus,hn.safari&&t.contentDOM.addEventListener("input",(function(){return null}))}return b(e,[{key:"setSelectionOrigin",value:function(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(e,t){var n,r,i=this;this.customHandlers=[];var a,o=s(t);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(r=null===(n=u.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:u.value,handlers:r});var l=function(t){i.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(i.registeredEvents.push(t),e.contentDOM.addEventListener(t,(function(n){oi(e,n)&&i.runCustomHandlers(t,e,n)&&n.preventDefault()})))};for(var c in r)l(c)}}}catch(f){o.e(f)}finally{o.f()}}},{key:"runCustomHandlers",value:function(e,t,n){var r,i=s(this.customHandlers);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.handlers[e];if(o)try{if(o.call(a.plugin,n,t)||n.defaultPrevented)return!0}catch(u){Qn(t.state,u)}}}catch(l){i.e(l)}finally{i.f()}return!1}},{key:"runScrollHandlers",value:function(e,t){var n,r=s(this.customHandlers);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.handlers.scroll;if(a)try{a.call(i.plugin,t,e)}catch(o){Qn(e.state,o)}}}catch(u){r.e(u)}finally{r.f()}}},{key:"keydown",value:function(e,t){var n,r=this;return this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3||(!hn.android||!hn.chrome||t.synthetic||13!=t.keyCode&&8!=t.keyCode?!(!hn.ios||!(n=ri.find((function(e){return e.keyCode==t.keyCode})))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=n,setTimeout((function(){return r.flushIOSKey(e)}),250),!0):(e.observer.delayAndroidKey(t.key,t.keyCode),!0))}},{key:"flushIOSKey",value:function(e){var t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Gt(e.contentDOM,t.key,t.keyCode))}},{key:"ignoreDuringComposition",value:function(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(hn.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}},{key:"mustFlushObserver",value:function(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!hn.ios}},{key:"startMouseSelection",value:function(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}},{key:"update",value:function(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]),e}(),ri=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],ii=[16,17,18,20,91,92,224,225],ai=function(){function e(t,n,r,i){k(this,e),this.view=t,this.style=r,this.mustSelect=i,this.lastEvent=n;var a=t.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=t.state.facet(Ke.allowMultipleSelections)&&function(e,t){var n=e.state.facet(Fn);return n.length?n[0](t):hn.mac?t.metaKey:t.ctrlKey}(t,n),this.dragMove=function(e,t){var n=e.state.facet(zn);return n.length?n[0](t):hn.mac?!t.altKey:!t.ctrlKey}(t,n),this.dragging=!(!function(e,t){if(e.state.selection.main.empty)return!1;var n=Tt(e.root);if(0==n.rangeCount)return!0;for(var r=n.getRangeAt(0).getClientRects(),i=0;i<r.length;i++){var a=r[i];if(a.left<=t.clientX&&a.right>=t.clientX&&a.top<=t.clientY&&a.bottom>=t.clientY)return!0}return!1}(t,n)||1!=_i(n))&&null,!1===this.dragging&&(n.preventDefault(),this.select(n))}return b(e,[{key:"move",value:function(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}},{key:"up",value:function(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}},{key:"destroy",value:function(){var e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}},{key:"select",value:function(e){var t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}},{key:"update",value:function(e){var t=this;e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((function(){return t.select(t.lastEvent)}),20)}}]),e}();function oi(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Qt.get(r))&&n.ignoreEvent(t))return!1;return!0}var si=Object.create(null),ui=hn.ie&&hn.ie_version<15||hn.ios&&hn.webkit_version<604;function li(e,t){var n,r=e.state,i=1,a=r.toText(t),o=a.lines==r.selection.ranges.length,s=null!=wi&&r.selection.ranges.every((function(e){return e.empty}))&&wi==a.toString();if(s){var u=-1;n=r.changeByRange((function(e){var n=r.doc.lineAt(e.from);if(n.from==u)return{range:e};u=n.from;var s=r.toText((o?a.line(i++).text:t)+r.lineBreak);return{changes:{from:n.from,insert:s},range:te.cursor(e.from+s.length)}}))}else n=o?r.changeByRange((function(e){var t=a.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:te.cursor(e.from+t.length)}})):r.replaceSelection(a);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}si.keydown=function(e,t){e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():ii.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};var ci=0;function fi(e,t,n,r){if(1==r)return te.cursor(t,n);if(2==r)return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.charCategorizer(t),i=e.doc.lineAt(t),a=t-i.from;if(0==i.length)return te.cursor(t);0==a?n=1:a==i.length&&(n=-1);var o=a,s=a;n<0?o=D(i.text,a,!1):s=D(i.text,a);for(var u=r(i.text.slice(o,s));o>0;){var l=D(i.text,o,!1);if(r(i.text.slice(l,o))!=u)break;o=l}for(;s<i.length;){var c=D(i.text,s);if(r(i.text.slice(s,c))!=u)break;s=c}return te.range(o+i.from,s+i.from)}(e.state,t,n);var i=In.find(e.docView,t),a=e.state.doc.lineAt(i?i.posAtEnd:t),o=i?i.posAtStart:a.from,s=i?i.posAtEnd:a.to;return s<e.state.doc.length&&s==a.to&&s++,te.range(o,s)}si.touchstart=function(e,t){ci=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},si.touchmove=function(e){e.inputState.setSelectionOrigin("select.pointer")},si.mousedown=function(e,t){if(e.observer.flush(),!(ci>Date.now()-2e3&&1==_i(t))){var n,r=null,i=s(e.state.facet(jn));try{for(i.s();!(n=i.n()).done;){if(r=(0,n.value)(e,t))break}}catch(o){i.e(o)}finally{i.f()}if(r||0!=t.button||(r=function(e,t){var n=vi(e,t),r=_i(t),i=e.state.selection,a=n,o=t;return{update:function(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),o=null)},get:function(t,s,u){var l;if(o&&t.clientX==o.clientX&&t.clientY==o.clientY?l=a:(l=a=vi(e,t),o=t),!l||!n)return i;var c=fi(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!s){var f=fi(e,n.pos,n.bias,r),h=Math.min(f.from,c.from),d=Math.max(f.to,c.to);c=h<c.from?te.range(h,d):te.range(d,h)}return s?i.replaceRange(i.main.extend(c.from,c.to)):u?i.addRange(c):te.create([c])}}}(e,t)),r){var a=e.root.activeElement!=e.contentDOM;a&&e.observer.ignore((function(){return jt(e.contentDOM)})),e.inputState.startMouseSelection(new ai(e,t,r,a))}}};var hi=function(e,t){return e>=t.top&&e<=t.bottom},di=function(e,t,n){return hi(t,n)&&e>=n.left&&e<=n.right};function pi(e,t,n,r){var i=In.find(e.docView,t);if(!i)return 1;var a=t-i.posAtStart;if(0==a)return 1;if(a==i.length)return-1;var o=i.coordsAt(a,-1);if(o&&di(n,r,o))return-1;var s=i.coordsAt(a,1);return s&&di(n,r,s)?1:o&&hi(r,o)?-1:1}function vi(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:pi(e,n,t.clientX,t.clientY)}}var gi=hn.ie&&hn.ie_version<=11,mi=null,yi=0,ki=0;function _i(e){if(!gi)return e.detail;var t=mi,n=ki;return mi=e,ki=Date.now(),yi=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(yi+1)%3:1}function bi(e,t,n,r){if(n){var i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();var a=e.inputState.mouseSelection,o=r&&a&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,s={from:i,insert:n},u=e.state.changes(o?[o,s]:s);e.focus(),e.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}}si.dragstart=function(e,t){var n=e.state.selection.main,r=e.inputState.mouseSelection;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},si.drop=function(e,t){if(t.dataTransfer){if(e.state.readOnly)return t.preventDefault();var n=t.dataTransfer.files;n&&n.length?function(){t.preventDefault();for(var r=Array(n.length),i=0,a=function(){++i==n.length&&bi(e,t,r.filter((function(e){return null!=e})).join(e.state.lineBreak),!1)},o=function(e){var t=new FileReader;t.onerror=a,t.onload=function(){/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),a()},t.readAsText(n[e])},s=0;s<n.length;s++)o(s)}():bi(e,t,t.dataTransfer.getData("Text"),!0)}},si.paste=function(e,t){if(e.state.readOnly)return t.preventDefault();e.observer.flush();var n=ui?null:t.clipboardData;n?(li(e,n.getData("text/plain")),t.preventDefault()):function(e){var t=e.dom.parentNode;if(t){var n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.remove(),li(e,n.value)}),50)}}(e)};var wi=null;function xi(e){setTimeout((function(){e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function Ai(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}si.copy=si.cut=function(e,t){var n=function(e){var t,n=[],r=[],i=!1,a=s(e.selection.ranges);try{for(a.s();!(t=a.n()).done;){var o=t.value;o.empty||(n.push(e.sliceDoc(o.from,o.to)),r.push(o))}}catch(d){a.e(d)}finally{a.f()}if(!n.length){var u,l=-1,c=s(e.selection.ranges);try{for(c.s();!(u=c.n()).done;){var f=u.value.from,h=e.doc.lineAt(f);h.number>l&&(n.push(h.text),r.push({from:h.from,to:Math.min(e.doc.length,h.to+1)})),l=h.number}}catch(d){c.e(d)}finally{c.f()}i=!0}return{text:n.join(e.lineBreak),ranges:r,linewise:i}}(e.state),r=n.text,i=n.ranges,a=n.linewise;if(r||a){wi=a?r:null;var o=ui?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",r)):function(e,t){var n=e.dom.parentNode;if(n){var r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((function(){r.remove(),e.focus()}),50)}}(e,r),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})}},si.focus=xi,si.blur=function(e){e.observer.clearSelectionRange(),xi(e)},si.compositionstart=si.compositionupdate=function(e){null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Ai(e,!0)))},si.compositionend=function(e){e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((function(){e.inputState.composing<0&&Ai(e,!1)}),50)},si.contextmenu=function(e){e.inputState.lastContextMenu=Date.now()},si.beforeinput=function(e,t){var n,r;if(hn.chrome&&hn.android&&(r=ri.find((function(e){return e.inputType==t.inputType})))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){var i=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((function(){var t;((null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0)>i+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};var Si=["pre-wrap","normal","pre-line","break-spaces"],Li=function(){function e(){k(this,e),this.doc=w.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}return b(e,[{key:"heightForGap",value:function(e,t){var n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}},{key:"heightForLine",value:function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(e){return this.doc=e,this}},{key:"mustRefreshForWrapping",value:function(e){return Si.indexOf(e)>-1!=this.lineWrapping}},{key:"mustRefreshForHeights",value:function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}},{key:"refresh",value:function(e,t,n,r,i){var a=Si.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.lineLength=r,o){this.heightSamples={};for(var s=0;s<i.length;s++){var u=i[s];u<0?s++:this.heightSamples[Math.floor(10*u)]=!0}}return o}}]),e}(),Oi=function(){function e(t,n){k(this,e),this.from=t,this.heights=n,this.index=0}return b(e,[{key:"more",get:function(){return this.index<this.heights.length}}]),e}(),Ti=function(){function e(t,n,r,i,a){k(this,e),this.from=t,this.length=n,this.top=r,this.height=i,this.type=a}return b(e,[{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}},{key:"join",value:function(t){var n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new e(this.from,this.length+t.length,this.top,this.height+t.height,n)}}]),e}(),Ei=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Ei||(Ei={})),Ci=.001,Mi=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;k(this,e),this.length=t,this.height=n,this.flags=r}return b(e,[{key:"outdated",get:function(){return(2&this.flags)>0},set:function(e){this.flags=(e?2:0)|-3&this.flags}},{key:"setHeight",value:function(e,t){this.height!=t&&(Math.abs(this.height-t)>Ci&&(e.heightChanged=!0),this.height=t)}},{key:"replace",value:function(t,n,r){return e.of(r)}},{key:"decomposeLeft",value:function(e,t){t.push(this)}},{key:"decomposeRight",value:function(e,t){t.push(this)}},{key:"applyChanges",value:function(e,t,n,r){for(var i=this,a=r.length-1;a>=0;a--){var o=r[a],s=o.fromA,u=o.toA,l=o.fromB,c=o.toB,f=i.lineAt(s,Ei.ByPosNoHeight,t,0,0),h=f.to>=u?f:i.lineAt(u,Ei.ByPosNoHeight,t,0,0);for(c+=h.to-u,u=h.to;a>0&&f.from<=r[a-1].toA;)s=r[a-1].fromA,l=r[a-1].fromB,a--,s<f.from&&(f=i.lineAt(s,Ei.ByPosNoHeight,t,0,0));l+=f.from-s,s=f.from;var d=Ui.build(n,e,l,c);i=i.replace(s,u,d)}return i.updateHeight(n,0)}}],[{key:"empty",value:function(){return new Ri(0,0)}},{key:"of",value:function(t){if(1==t.length)return t[0];for(var n=0,r=t.length,i=0,a=0;;)if(n==r)if(i>2*a){var o=t[n-1];o.break?t.splice(--n,1,o.left,null,o.right):t.splice(--n,1,o.left,o.right),r+=1+o.break,i-=o.size}else{if(!(a>2*i))break;var s=t[r];s.break?t.splice(r,1,s.left,null,s.right):t.splice(r,1,s.left,s.right),r+=2+s.break,a-=s.size}else if(i<a){var u=t[n++];u&&(i+=u.size)}else{var l=t[--r];l&&(a+=l.size)}var c=0;return null==t[n-1]?(c=1,n--):null==t[n]&&(c=1,r++),new Ii(e.of(t.slice(0,n)),c,e.of(t.slice(r)))}}]),e}();Mi.prototype.size=1;var Ni=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r)).type=i,a}return b(n,[{key:"blockAt",value:function(e,t,n,r){return new Ti(r,this.length,n,this.height,this.type)}},{key:"lineAt",value:function(e,t,n,r,i){return this.blockAt(0,n,r,i)}},{key:"forEachLine",value:function(e,t,n,r,i,a){e<=i+this.length&&t>=i&&a(this.blockAt(0,n,r,i))}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]),n}(Mi),Ri=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r,Tn.Text)).collapsed=0,i.widgetHeight=0,i}return b(n,[{key:"replace",value:function(e,t,r){var i=r[0];return 1==r.length&&(i instanceof n||i instanceof Pi&&4&i.flags)&&Math.abs(this.length-i.length)<10?(i instanceof Pi?i=new n(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Mi.of(r)}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]),n}(Ni),Pi=function(e){v(n,e);var t=y(n);function n(e){return k(this,n),t.call(this,e,0)}return b(n,[{key:"lines",value:function(e,t){var n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}},{key:"blockAt",value:function(e,t,n,r){var i=this.lines(t,r),a=i.firstLine,o=i.lastLine,s=i.lineHeight,u=Math.max(0,Math.min(o-a,Math.floor((e-n)/s))),l=t.line(a+u),c=l.from,f=l.length;return new Ti(c,f,n+s*u,s,Tn.Text)}},{key:"lineAt",value:function(e,t,n,r,i){if(t==Ei.ByHeight)return this.blockAt(e,n,r,i);if(t==Ei.ByPosNoHeight){var a=n.lineAt(e),o=a.from,s=a.to;return new Ti(o,s-o,0,0,Tn.Text)}var u=this.lines(n,i),l=u.firstLine,c=u.lineHeight,f=n.lineAt(e),h=f.from,d=f.length,p=f.number;return new Ti(h,d,r+c*(p-l),c,Tn.Text)}},{key:"forEachLine",value:function(e,t,n,r,i,a){for(var o=this.lines(n,i),s=o.firstLine,u=o.lineHeight,l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){var f=n.lineAt(l);l==e&&(r+=u*(f.number-s)),a(new Ti(f.from,f.length,r,u,Tn.Text)),r+=u,l=f.to+1}}},{key:"replace",value:function(e,t,r){var i=this.length-t;if(i>0){var a=r[r.length-1];a instanceof n?r[r.length-1]=new n(a.length+i):r.push(null,new n(i-1))}if(e>0){var o=r[0];o instanceof n?r[0]=new n(e+o.length):r.unshift(new n(e-1),null)}return Mi.of(r)}},{key:"decomposeLeft",value:function(e,t){t.push(new n(e-1),null)}},{key:"decomposeRight",value:function(e,t){t.push(null,new n(this.length-e-1))}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,a=t+this.length;if(i&&i.from<=t+this.length&&i.more){var o=[],s=Math.max(t,i.from),u=-1,l=e.heightChanged;for(i.from>t&&o.push(new n(i.from-t-1).updateHeight(e,t));s<=a&&i.more;){var c=e.doc.lineAt(s).length;o.length&&o.push(null);var f=i.heights[i.index++];-1==u?u=f:Math.abs(f-u)>=Ci&&(u=-2);var h=new Ri(c,f);h.outdated=!1,o.push(h),s+=c+1}s<=a&&o.push(null,new n(a-s).updateHeight(e,s));var d=Mi.of(o);return e.heightChanged=l||u<0||Math.abs(d.height-this.height)>=Ci||Math.abs(u-this.lines(e.doc,t).lineHeight)>=Ci,d}return(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]),n}(Mi),Ii=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e.length+r+i.length,e.height+i.height,r|(e.outdated||i.outdated?2:0))).left=e,a.right=i,a.size=e.size+i.size,a}return b(n,[{key:"break",get:function(){return 1&this.flags}},{key:"blockAt",value:function(e,t,n,r){var i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}},{key:"lineAt",value:function(e,t,n,r,i){var a=r+this.left.height,o=i+this.left.length+this.break,s=t==Ei.ByHeight?e<a:e<o,u=s?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,a,o);if(this.break||(s?u.to<o:u.from>o))return u;var l=t==Ei.ByPosNoHeight?Ei.ByPosNoHeight:Ei.ByPos;return s?u.join(this.right.lineAt(o,l,n,a,o)):this.left.lineAt(o,l,n,r,i).join(u)}},{key:"forEachLine",value:function(e,t,n,r,i,a){var o=r+this.left.height,s=i+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,n,r,i,a),t>=s&&this.right.forEachLine(e,t,n,o,s,a);else{var u=this.lineAt(s,Ei.ByPos,n,r,i);e<u.from&&this.left.forEachLine(e,u.from-1,n,r,i,a),u.to>=e&&u.from<=t&&a(u),t>u.to&&this.right.forEachLine(u.to+1,t,n,o,s,a)}}},{key:"replace",value:function(e,t,n){var r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));var i=[];e>0&&this.decomposeLeft(e,i);var a,o=i.length,u=s(n);try{for(u.s();!(a=u.n()).done;){var l=a.value;i.push(l)}}catch(f){u.e(f)}finally{u.f()}if(e>0&&Di(i,o-1),t<this.length){var c=i.length;this.decomposeRight(t,i),Di(i,c)}return Mi.of(i)}},{key:"decomposeLeft",value:function(e,t){var n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&e>=++n&&t.push(null),e>n&&this.right.decomposeLeft(e-n,t)}},{key:"decomposeRight",value:function(e,t){var n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}},{key:"balanced",value:function(e,t){return e.size>2*t.size||t.size>2*e.size?Mi.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}},{key:"updateHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this.left,a=this.right,o=t+i.length+this.break,s=null;return r&&r.from<=t+i.length&&r.more?s=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=o+a.length&&r.more?s=a=a.updateHeight(e,o,n,r):a.updateHeight(e,o,n),s?this.balanced(i,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}},{key:"toString",value:function(){return this.left+(this.break?" ":"-")+this.right}}]),n}(Mi);function Di(e,t){var n,r;null==e[t]&&(n=e[t-1])instanceof Pi&&(r=e[t+1])instanceof Pi&&e.splice(t-1,3,new Pi(n.length+1+r.length))}var Ui=function(){function e(t,n){k(this,e),this.pos=t,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}return b(e,[{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"span",value:function(e,t){if(this.lineStart>-1){var n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ri?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Ri(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}},{key:"point",value:function(e,t,n){if(e<t||n.heightRelevant){var r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);var i=t-e;n.block?this.addBlock(new Ni(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(this.lineStart>-1)){var e=this.oracle.doc.lineAt(this.pos),t=e.from,n=e.to;this.lineStart=t,this.lineEnd=n,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Ri(this.pos-t,-1)),this.writtenTo=this.pos}}},{key:"blankContent",value:function(e,t){var n=new Pi(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}},{key:"ensureLine",value:function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ri)return e;var t=new Ri(0,-1);return this.nodes.push(t),t}},{key:"addBlock",value:function(e){this.enterLine(),e.type!=Tn.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Tn.WidgetBefore&&(this.covering=e)}},{key:"addLineDeco",value:function(e,t){var n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}},{key:"finish",value:function(e){var t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Ri||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ri(0,-1));var n,r=e,i=s(this.nodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;a instanceof Ri&&a.updateHeight(this.oracle,r),r+=a?a.length:1}}catch(o){i.e(o)}finally{i.f()}return this.nodes}}],[{key:"build",value:function(t,n,r,i){var a=new e(r,t);return Je.spans(n,r,i,a,0),a.finish(r)}}]),e}();function Bi(e,t,n){var r=new Vi;return Je.compare(e,t,n,r,0),r.changes}var Vi=function(){function e(){k(this,e),this.changes=[]}return b(e,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Pn(e,t,this.changes,5)}}]),e}();function Fi(e,t){for(var n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),a=Math.max(0,n.top),o=Math.min(innerHeight,n.bottom),s=e.ownerDocument.body,u=e.parentNode;u&&u!=s;)if(1==u.nodeType){var l=u,c=window.getComputedStyle(l);if((l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth)&&"visible"!=c.overflow){var f=l.getBoundingClientRect();r=Math.max(r,f.left),i=Math.min(i,f.right),a=Math.max(a,f.top),o=Math.min(o,f.bottom)}u="absolute"==c.position||"fixed"==c.position?l.offsetParent:l.parentNode}else{if(11!=u.nodeType)break;u=u.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:a-(n.top+t),bottom:Math.max(a,o)-(n.top+t)}}function zi(e,t){var n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}var ji=function(){function e(t,n,r){k(this,e),this.from=t,this.to=n,this.size=r}return b(e,[{key:"draw",value:function(e){return En.replace({widget:new Hi(this.size,e)}).range(this.from,this.to)}}],[{key:"same",value:function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}}]),e}(),Hi=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).size=e,i.vertical=r,i}return b(n,[{key:"eq",value:function(e){return e.size==this.size&&e.vertical==this.vertical}},{key:"toDOM",value:function(){var e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]),n}(On),Gi=function(){function e(t){k(this,e),this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Li,this.scaler=Qi,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=lr.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=t.facet(rr).filter((function(e){return"function"!=typeof e})),this.heightMap=Mi.empty().applyChanges(this.stateDeco,w.empty,this.heightOracle.setDoc(t.doc),[new sr(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=En.set(this.lineGaps.map((function(e){return e.draw(!1)}))),this.computeVisibleRanges()}return b(e,[{key:"updateForViewport",value:function(){for(var e=this,t=[this.viewport],n=this.state.selection.main,r=function(r){var i=r?n.head:n.anchor;if(!t.some((function(e){var t=e.from,n=e.to;return i>=t&&i<=n}))){var a=e.lineBlockAt(i),o=a.from,s=a.to;t.push(new Ki(o,s))}},i=0;i<=1;i++)r(i);this.viewports=t.sort((function(e,t){return e.from-t.from})),this.scaler=this.heightMap.height<=7e6?Qi:new $i(this.heightOracle.doc,this.heightMap,this.viewports)}},{key:"updateViewportLines",value:function(){var e=this;this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(function(t){e.viewportLines.push(1==e.scaler.scale?t:Ji(t,e.scaler))}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;var n=this.stateDeco;this.stateDeco=this.state.facet(rr).filter((function(e){return"function"!=typeof e}));var r=e.changedRanges,i=sr.extendWithRanges(r,Bi(n,this.stateDeco,e?e.changes:X.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=a&&(e.flags|=2);var o=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));var s=!e.changes.empty||2&e.flags||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),s&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}},{key:"measure",value:function(e){var t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?lr.RTL:lr.LTR;var a=this.heightOracle.mustRefreshForWrapping(i),o=a||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;var u=0,l=0,c=parseInt(n.paddingTop)||0,f=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==f||(this.paddingTop=c,this.paddingBottom=f,u|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(o=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=8);var h=(this.printing?zi:Fi)(t,this.paddingTop),d=h.top-this.pixelViewport.top,p=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;var v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(o=!0)),!this.inView)return 0;var g=t.clientWidth;if(this.contentDOMWidth==g&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=g,this.editorHeight=e.scrollDOM.clientHeight,u|=8),o){var m=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(m)&&(a=!0),a||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){var y=e.docView.measureTextSize(),k=y.lineHeight,_=y.charWidth;(a=r.refresh(i,k,_,g/_,m))&&(e.docView.minWidth=0,u|=8)}d>0&&p>0?l=Math.max(d,p):d<0&&p<0&&(l=Math.min(d,p)),r.heightChanged=!1;var b,w=s(this.viewports);try{for(w.s();!(b=w.n()).done;){var x=b.value,A=x.from==this.viewport.from?m:e.docView.measureVisibleLineHeights(x);this.heightMap=this.heightMap.updateHeight(r,0,a,new Oi(x.from,A))}}catch(L){w.e(L)}finally{w.f()}r.heightChanged&&(u|=2)}var S=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return S&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&u||S)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}},{key:"visibleTop",get:function(){return this.scaler.fromDOM(this.pixelViewport.top)}},{key:"visibleBottom",get:function(){return this.scaler.fromDOM(this.pixelViewport.bottom)}},{key:"getViewport",value:function(e,t){var n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,a=this.visibleTop,o=this.visibleBottom,s=new Ki(r.lineAt(a-1e3*n,Ei.ByHeight,i,0,0).from,r.lineAt(o+1e3*(1-n),Ei.ByHeight,i,0,0).to);if(t){var u=t.range.head;if(u<s.from||u>s.to){var l,c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(u,Ei.ByPos,i,0,0);l="center"==t.y?(f.top+f.bottom)/2-c/2:"start"==t.y||"nearest"==t.y&&u<s.from?f.top:f.bottom-c,s=new Ki(r.lineAt(l-500,Ei.ByHeight,i,0,0).from,r.lineAt(l+c+500,Ei.ByHeight,i,0,0).to)}}return s}},{key:"mapViewport",value:function(e,t){var n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ki(this.heightMap.lineAt(n,Ei.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Ei.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(e){var t=e.from,n=e.to,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;var i=this.heightMap.lineAt(t,Ei.ByPos,this.state.doc,0,0),a=i.top,o=this.heightMap.lineAt(n,Ei.ByPos,this.state.doc,0,0),s=o.bottom,u=this.visibleTop,l=this.visibleBottom;return(0==t||a<=u-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(r,250)))&&a>u-2e3&&s<l+2e3}},{key:"mapLineGaps",value:function(e,t){if(!e.length||t.empty)return e;var n,r=[],i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t.touchesRange(a.from,a.to)||r.push(new ji(t.mapPos(a.from),t.mapPos(a.to),a.size))}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"ensureLineGaps",value:function(e){var t=this,n=[];if(this.defaultTextDirection!=lr.LTR)return n;var r,i=s(this.viewportLines);try{var a=function(){var i=r.value;if(i.length<4e3)return"continue";var a=function(e,t,n){var r=[],i=e,a=0;Je.spans(n,e,t,{span:function(){},point:function(e,t){e>i&&(r.push({from:i,to:e}),a+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),a+=t-i);return{total:a,ranges:r}}(i.from,i.to,t.stateDeco);if(a.total<4e3)return"continue";var o=void 0,u=void 0;if(t.heightOracle.lineWrapping){var l=2e3/t.heightOracle.lineLength*t.heightOracle.lineHeight;o=Wi(a,(t.visibleTop-i.top-l)/i.height),u=Wi(a,(t.visibleBottom-i.top+l)/i.height)}else{var c=a.total*t.heightOracle.charWidth,f=2e3*t.heightOracle.charWidth;o=Wi(a,(t.pixelViewport.left-f)/c),u=Wi(a,(t.pixelViewport.right+f)/c)}var h=[];o>i.from&&h.push({from:i.from,to:o}),u<i.to&&h.push({from:u,to:i.to});var d=t.state.selection.main;d.from>=i.from&&d.from<=i.to&&qi(h,d.from-10,d.from+10),!d.empty&&d.to>=i.from&&d.to<=i.to&&qi(h,d.to-10,d.to+10);for(var p=function(){var r=g[v],o=r.from,u=r.to;u-o>1e3&&n.push(function(e,t){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(a){r.e(a)}finally{r.f()}return}(e,(function(e){return e.from>=i.from&&e.to<=i.to&&Math.abs(e.from-o)<1e3&&Math.abs(e.to-u)<1e3}))||new ji(o,u,t.gapSize(i,o,u,a)))},v=0,g=h;v<g.length;v++)p()};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}},{key:"gapSize",value:function(e,t,n,r){var i=Xi(r,n)-Xi(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}},{key:"updateLineGaps",value:function(e){var t=this;ji.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=En.set(e.map((function(e){return e.draw(t.heightOracle.lineWrapping)}))))}},{key:"computeVisibleRanges",value:function(){var e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));var t=[];Je.spans(e,this.viewport.from,this.viewport.to,{span:function(e,n){t.push({from:e,to:n})},point:function(){}},20);var n=t.length!=this.visibleRanges.length||this.visibleRanges.some((function(e,n){return e.from!=t[n].from||e.to!=t[n].to}));return this.visibleRanges=t,n?4:0}},{key:"lineBlockAt",value:function(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((function(t){return t.from<=e&&t.to>=e}))||Ji(this.heightMap.lineAt(e,Ei.ByPos,this.state.doc,0,0),this.scaler)}},{key:"lineBlockAtHeight",value:function(e){return Ji(this.heightMap.lineAt(this.scaler.fromDOM(e),Ei.ByHeight,this.state.doc,0,0),this.scaler)}},{key:"elementAtHeight",value:function(e){return Ji(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}},{key:"docHeight",get:function(){return this.scaler.toDOM(this.heightMap.height)}},{key:"contentHeight",get:function(){return this.docHeight+this.paddingTop+this.paddingBottom}}]),e}(),Ki=b((function e(t,n){k(this,e),this.from=t,this.to=n}));function Wi(e,t){var n=e.total,r=e.ranges;if(t<=0)return r[0].from;if(t>=1)return r[r.length-1].to;for(var i=Math.floor(n*t),a=0;;a++){var o=r[a],s=o.from,u=o.to-s;if(i<=u)return s+i;i-=u}}function Xi(e,t){var n,r=0,i=s(e.ranges);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.from,u=a.to;if(t<=u){r+=t-o;break}r+=u-o}}catch(l){i.e(l)}finally{i.f()}return r/e.total}function qi(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if(i.from<n&&i.to>t){var a=[];i.from<t&&a.push({from:i.from,to:t}),i.to>n&&a.push({from:n,to:i.to}),e.splice.apply(e,[r,1].concat(a)),r+=a.length-1}}}var Qi={toDOM:function(e){return e},fromDOM:function(e){return e},scale:1},$i=function(){function e(t,n,r){k(this,e);var i=0,a=0,o=0;this.viewports=r.map((function(e){var r=e.from,a=e.to,o=n.lineAt(r,Ei.ByPos,t,0,0).top,s=n.lineAt(a,Ei.ByPos,t,0,0).bottom;return i+=s-o,{from:r,to:a,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-i)/(n.height-i);var u,l=s(this.viewports);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.domTop=o+(c.top-a)*this.scale,o=c.domBottom=c.domTop+(c.bottom-c.top),a=c.bottom}}catch(f){l.e(f)}finally{l.f()}}return b(e,[{key:"toDOM",value:function(e){for(var t=0,n=0,r=0;;t++){var i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}},{key:"fromDOM",value:function(e){for(var t=0,n=0,r=0;;t++){var i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}]),e}();function Ji(e,t){if(1==t.scale)return e;var n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Ti(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((function(e){return Ji(e,t)})):e.type)}var Yi=ie.define({combine:function(e){return e.join(" ")}}),Zi=ie.define({combine:function(e){return e.indexOf(!0)>-1}}),ea=vt.newName(),ta=vt.newName(),na=vt.newName(),ra={"&light":"."+ta,"&dark":"."+na};function ia(e,t,n){return new vt(t,{finish:function(t){return/&/.test(t)?t.replace(/&\w*/,(function(t){if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t}})}var aa=ia("."+ea,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ra),oa={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},sa=hn.ie&&hn.ie_version<=11,ua=function(){function e(t,n,r){var i=this;k(this,e),this.view=t,this.onChange=n,this.onScrollChanged=r,this.active=!1,this.selectionRange=new Ft,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((function(e){var n,r=s(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;i.queue.push(a)}}catch(o){r.e(o)}finally{r.f()}(hn.ie&&hn.ie_version<=11||hn.ios&&t.composing)&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?i.flushSoon():i.flush()})),sa&&(this.onCharData=function(e){i.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((function(){i.view.docView.lastUpdate<Date.now()-75&&i.onResize()})),this.resize.observe(t.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((function(e){i.parentCheck<0&&(i.parentCheck=setTimeout(i.listenForScroll.bind(i),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=i.intersecting&&(i.intersecting=!i.intersecting,i.intersecting!=i.view.inView&&i.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((function(e){e.length>0&&e[e.length-1].intersectionRatio>0&&i.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}return b(e,[{key:"onScroll",value:function(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}},{key:"onResize",value:function(){var e=this;this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((function(){e.resizeTimeout=-1,e.view.requestMeasure()}),50))}},{key:"onPrint",value:function(){var e=this;this.view.viewState.printing=!0,this.view.measure(),setTimeout((function(){e.view.viewState.printing=!1,e.view.requestMeasure()}),500)}},{key:"updateGaps",value:function(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((function(t,n){return t!=e[n]})))){this.gapIntersection.disconnect();var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.gapIntersection.observe(r)}}catch(i){n.e(i)}finally{n.f()}this.gaps=e}}},{key:"onSelectionChange",value:function(e){if(this.readSelectionRange()&&!this.delayedAndroidKey){var t=this.view,n=this.selectionRange;if(t.state.facet($n)?t.root.activeElement==this.dom:Ct(t.dom,n)){var r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((hn.ie&&hn.ie_version<=11||hn.android&&hn.chrome)&&!t.state.selection.main.empty&&n.focusNode&&Nt(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}}}},{key:"readSelectionRange",value:function(){var e=this.view.root,t=Tt(e),n=hn.safari&&11==e.nodeType&&function(){for(var e=document.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){var t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;var r=t.startContainer,i=t.startOffset,a=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);if(Nt(s.node,s.offset,a,o)){var u=[a,o,r,i];r=u[0],i=u[1],a=u[2],o=u[3]}return{anchorNode:r,anchorOffset:i,focusNode:a,focusOffset:o}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}},{key:"setSelectionRange",value:function(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}},{key:"clearSelectionRange",value:function(){this.selectionRange.set(null,0,null,0)}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var e=0,t=null,n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){var r,i=s(this.scrollTargets);try{for(i.s();!(r=i.n()).done;){r.value.removeEventListener("scroll",this.onScroll)}}catch(u){i.e(u)}finally{i.f()}var a,o=s(this.scrollTargets=t);try{for(o.s();!(a=o.n()).done;){a.value.addEventListener("scroll",this.onScroll)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"ignore",value:function(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||(this.observer.observe(this.dom,oa),sa&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),sa&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clear",value:function(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}},{key:"delayAndroidKey",value:function(e,t){var n=this;this.delayedAndroidKey||requestAnimationFrame((function(){var e=n.delayedAndroidKey;n.delayedAndroidKey=null,n.delayedFlush=-1,n.flush()||Gt(n.view.contentDOM,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}},{key:"flushSoon",value:function(){var e=this;this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((function(){e.delayedFlush=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"processRecords",value:function(){var e,t=this.queue,n=s(this.observer.takeRecords());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r)}}catch(h){n.e(h)}finally{n.f()}t.length&&(this.queue=[]);var i,a=-1,o=-1,u=!1,l=s(t);try{for(l.s();!(i=l.n()).done;){var c=i.value,f=this.readMutation(c);f&&(f.typeOver&&(u=!0),-1==a?(a=f.from,o=f.to):(a=Math.min(f.from,a),o=Math.max(f.to,o)))}}catch(h){l.e(h)}finally{l.f()}return{from:a,to:o,typeOver:u}}},{key:"flush",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!(this.delayedFlush>=0||this.delayedAndroidKey)){e&&this.readSelectionRange();var t=this.processRecords(),n=t.from,r=t.to,i=t.typeOver,a=this.selectionChanged&&Ct(this.dom,this.selectionRange);if(!(n<0)||a){this.selectionChanged=!1;var o=this.view.state,s=this.onChange(n,r,i);return this.view.state==o&&this.view.update([]),s}}}},{key:"readMutation",value:function(e){var t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){var n=la(t,e.previousSibling||e.target.previousSibling,-1),r=la(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}},{key:"destroy",value:function(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();var r,i=s(this.scrollTargets);try{for(i.s();!(r=i.n()).done;){r.value.removeEventListener("scroll",this.onScroll)}}catch(a){i.e(a)}finally{i.f()}window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}]),e}();function la(e,t,n){for(;t;){var r=Qt.get(t);if(r&&r.parent==e)return r;var i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function ca(e,t,n,r){var i,a,o=e.state.selection.main;if(t>-1){var s=e.docView.domBoundsAround(t,n,0);if(!s||e.state.readOnly)return!1;var u=s.from,l=s.to,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){var t=[];if(e.root.activeElement!=e.contentDOM)return t;var n=e.observer.selectionRange,r=n.anchorNode,i=n.anchorOffset,a=n.focusNode,o=n.focusOffset;r&&(t.push(new Rr(r,i)),a==r&&o==i||t.push(new Rr(a,o)));return t}(e),f=new Mr(c,e.state);f.readRange(s.startDOM,s.endDOM);var h=o.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||hn.android&&f.text.length<l-u)&&(h=o.to,d="end");var p=function(e,t,n,r){var i=Math.min(e.length,t.length),a=0;for(;a<i&&e.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==i&&e.length==t.length)return null;var o=e.length,s=t.length;for(;o>0&&s>0&&e.charCodeAt(o-1)==t.charCodeAt(s-1);)o--,s--;if("end"==r){n-=o+Math.max(0,a-Math.min(o,s))-a}if(o<a&&e.length<t.length){s=(a-=n<=a&&n>=o?a-n:0)+(s-o),o=a}else if(s<a){o=(a-=n<=a&&n>=s?a-n:0)+(o-s),s=a}return{from:a,toA:o,toB:s}}(e.state.doc.sliceString(u,l,Cr),f.text,h-u,d);p&&(hn.chrome&&13==e.inputState.lastKeyCode&&p.toB==p.from+2&&"\uffff\uffff"==f.text.slice(p.from,p.toB)&&p.toB--,i={from:u+p.from,to:u+p.toA,insert:w.of(f.text.slice(p.from,p.toB).split(Cr))}),a=function(e,t){if(0==e.length)return null;var n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?te.single(n+t,r+t):null}(c,u)}else if(e.hasFocus||!e.state.facet($n)){var v=e.observer.selectionRange,g=e.docView,m=g.impreciseHead,y=g.impreciseAnchor,k=m&&m.node==v.focusNode&&m.offset==v.focusOffset||!Et(e.contentDOM,v.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(v.focusNode,v.focusOffset),_=y&&y.node==v.anchorNode&&y.offset==v.anchorOffset||!Et(e.contentDOM,v.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(v.anchorNode,v.anchorOffset);k==o.head&&_==o.anchor||(a=te.single(_,k))}if(!i&&!a)return!1;if(!i&&r&&!o.empty&&a&&a.main.empty?i={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:i&&i.from>=o.from&&i.to<=o.to&&(i.from!=o.from||i.to!=o.to)&&o.to-o.from-(i.to-i.from)<=4?i={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,o.to))}:(hn.mac||hn.android)&&i&&i.from==i.to&&i.from==o.head-1&&"."==i.insert.toString()&&(i={from:o.from,to:o.to,insert:w.of([" "])}),i){var b=e.state;if(hn.ios&&e.inputState.flushIOSKey(e))return!0;if(hn.android&&(i.from==o.from&&i.to==o.to&&1==i.insert.length&&2==i.insert.lines&&Gt(e.contentDOM,"Enter",13)||i.from==o.from-1&&i.to==o.to&&0==i.insert.length&&Gt(e.contentDOM,"Backspace",8)||i.from==o.from&&i.to==o.to+1&&0==i.insert.length&&Gt(e.contentDOM,"Delete",46)))return!0;var x,A=i.insert.toString();if(e.state.facet(Kn).some((function(t){return t(e,i.from,i.to,A)})))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=o.from&&i.to<=o.to&&i.to-i.from>=(o.to-o.from)/3&&(!a||a.main.empty&&a.main.from==i.from+i.insert.length)&&e.inputState.composing<0){var S=o.from<i.from?b.sliceDoc(o.from,i.from):"",L=o.to>i.to?b.sliceDoc(i.to,o.to):"";x=b.replaceSelection(e.state.toText(S+i.insert.sliceString(0,void 0,e.state.lineBreak)+L))}else{var O=b.changes(i),T=a&&!b.selection.main.eq(a.main)&&a.main.to<=O.newLength?a.main:void 0;if(b.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=o.to&&i.to>=o.to-10){var E=e.state.sliceDoc(i.from,i.to),C=Ur(e)||e.state.doc.lineAt(o.head),M=o.to-i.to,N=o.to-o.from;x=b.changeByRange((function(t){if(t.from==o.from&&t.to==o.to)return{changes:O,range:T||t.map(O)};var n=t.to-M,r=n-E.length;if(t.to-t.from!=N||e.state.sliceDoc(r,n)!=E||C&&t.to>=C.from&&t.from<=C.to)return{range:t};var a=b.changes({from:r,to:n,insert:i.insert}),s=t.to-o.to;return{changes:a,range:T?te.range(Math.max(0,T.anchor+s),Math.max(0,T.head+s)):t.map(a)}}))}else x={changes:O,selection:T&&b.selection.replaceRange(T)}}var R="input.type";return e.composing&&(R+=".compose",e.inputState.compositionFirstChange&&(R+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(x,{scrollIntoView:!0,userEvent:R}),!0}if(a&&!a.main.eq(o)){var P=!1,I="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(P=!0),I=e.inputState.lastSelectionOrigin),e.dispatch({selection:a,scrollIntoView:P,userEvent:I}),!0}return!1}var fa=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,e),this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=n.dispatch||function(e){return t.update([e])},this.dispatch=this.dispatch.bind(this),this.root=n.root||Kt(n.parent)||document,this.viewState=new Gi(n.state||Ke.create()),this.plugins=this.state.facet(Yn).map((function(e){return new er(e)}));var r,i=s(this.plugins);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.update(this)}}catch(o){i.e(o)}finally{i.f()}this.observer=new ua(this,(function(e,n,r){return ca(t,e,n,r)}),(function(e){t.inputState.runScrollHandlers(t,e),t.observer.intersecting&&t.measure()})),this.inputState=new ni(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Pr(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),n.parent&&n.parent.appendChild(this.dom)}return b(e,[{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing>0}},{key:"compositionStarted",get:function(){return this.inputState.composing>=0}},{key:"dispatch",value:function(){var e;this._dispatch(1==arguments.length&&(arguments.length<=0?void 0:arguments[0])instanceof Pe?arguments.length<=0?void 0:arguments[0]:(e=this.state).update.apply(e,arguments))}},{key:"update",value:function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");var t,n,r=!1,i=!1,a=this.state,o=s(e);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(u.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=u.state}}catch(k){o.e(k)}finally{o.f()}if(this.destroyed)this.viewState.state=a;else{if(this.observer.clear(),a.facet(Ke.phrases)!=this.state.facet(Ke.phrases))return this.setState(a);t=ur.create(this,a,e);var l=this.viewState.scrollTarget;try{this.updateState=2;var c,f=s(e);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(l&&(l=l.map(h.changes)),h.scrollIntoView){var d=h.state.selection.main;l=new Xn(d.empty?d:te.cursor(d.head,d.head>d.anchor?-1:1))}var p,v=s(h.effects);try{for(v.s();!(p=v.n()).done;){var g=p.value;g.is(qn)&&(l=g.value)}}catch(k){v.e(k)}finally{v.f()}}}catch(k){f.e(k)}finally{f.f()}this.viewState.update(t,l),this.bidiCache=pa.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),r=this.docView.update(t),this.state.facet(or)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(r,e.some((function(e){return e.isUserEvent("select.pointer")})))}finally{this.updateState=0}if(t.startState.facet(Yi)!=t.state.facet(Yi)&&(this.viewState.mustMeasureContent=!0),(r||i||l||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty){var m,y=s(this.state.facet(Gn));try{for(y.s();!(m=y.n()).done;){(0,m.value)(t)}}catch(k){y.e(k)}finally{y.f()}}}}},{key:"setState",value:function(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)this.viewState.state=e;else{this.updateState=2;var t=this.hasFocus;try{var n,r=s(this.plugins);try{for(r.s();!(n=r.n()).done;){n.value.destroy(this)}}catch(o){r.e(o)}finally{r.f()}this.viewState=new Gi(e),this.plugins=e.facet(Yn).map((function(e){return new er(e)})),this.pluginMap.clear();var i,a=s(this.plugins);try{for(a.s();!(i=a.n()).done;){i.value.update(this)}}catch(o){a.e(o)}finally{a.f()}this.docView=new Pr(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}}},{key:"updatePlugins",value:function(e){var t=e.startState.facet(Yn),n=e.state.facet(Yn);if(t!=n){var r,i=[],a=s(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=t.indexOf(o);if(u<0)i.push(new er(o));else{var l=this.plugins[u];l.mustUpdate=e,i.push(l)}}}catch(g){a.e(g)}finally{a.f()}var c,f=s(this.plugins);try{for(f.s();!(c=f.n()).done;){var h=c.value;h.mustUpdate!=e&&h.destroy(this)}}catch(g){f.e(g)}finally{f.f()}this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else{var d,p=s(this.plugins);try{for(p.s();!(d=p.n()).done;){d.value.mustUpdate=e}}catch(g){p.e(g)}finally{p.f()}}for(var v=0;v<this.plugins.length;v++)this.plugins[v].update(this)}},{key:"measure",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.destroyed){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.flush();var n=null;try{for(var r=0;;r++){this.updateState=1;var i=this.viewport,a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(r>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}var o=[];if(!(4&a)){var u=[o,this.measureRequests];this.measureRequests=u[0],o=u[1]}var l=o.map((function(t){try{return t.read(e)}catch(n){return Qn(e.state,n),da}})),c=ur.create(this,this.state,[]),f=!1,h=!1;c.flags|=a,n?n.flags|=a:n=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),f=this.docView.update(c));for(var d=0;d<o.length;d++)if(l[d]!=da)try{var p=o[d];p.write&&p.write(l[d],this)}catch(y){Qn(this.state,y)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,h=!0),f&&this.docView.updateSelection(!0),this.viewport.from==i.from&&this.viewport.to==i.to&&!h&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty){var v,g=s(this.state.facet(Gn));try{for(g.s();!(v=g.n()).done;){var m=v.value;m(n)}}catch(k){g.e(k)}finally{g.f()}}}}},{key:"themeClasses",get:function(){return ea+" "+(this.state.facet(Zi)?na:ta)+" "+this.state.facet(Yi)}},{key:"updateAttrs",value:function(){var e=this,t=va(this,tr,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet($n)?"true":"false",class:"cm-content",style:"".concat(hn.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),va(this,nr,n);var r=this.observer.ignore((function(){var r=Ln(e.contentDOM,e.contentAttrs,n),i=Ln(e.dom,e.editorAttrs,t);return r||i}));return this.editorAttrs=t,this.contentAttrs=n,r}},{key:"showAnnouncements",value:function(t){var n,r=!0,i=s(t);try{for(i.s();!(n=i.n()).done;){var a,o=s(n.value.effects);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u.is(e.announce))r&&(this.announceDOM.textContent=""),r=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=u.value}}catch(l){o.e(l)}finally{o.f()}}}catch(l){i.e(l)}finally{i.f()}}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(or),vt.mount(this.root,this.styleModules.concat(aa).reverse())}},{key:"readMeasured",value:function(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}},{key:"requestMeasure",value:function(e){var t=this;if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((function(){return t.measure()}))),e){if(null!=e.key)for(var n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key)return void(this.measureRequests[n]=e);this.measureRequests.push(e)}}},{key:"plugin",value:function(e){var t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((function(t){return t.spec==e}))||null),t&&t.update(this).value}},{key:"documentTop",get:function(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}},{key:"documentPadding",get:function(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}},{key:"elementAtHeight",value:function(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}},{key:"lineBlockAtHeight",value:function(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}},{key:"viewportLineBlocks",get:function(){return this.viewState.viewportLines}},{key:"lineBlockAt",value:function(e){return this.viewState.lineBlockAt(e)}},{key:"contentHeight",get:function(){return this.viewState.contentHeight}},{key:"moveByChar",value:function(e,t,n){return ti(this,e,ei(this,e,t,n))}},{key:"moveByGroup",value:function(e,t){var n=this;return ti(this,e,ei(this,e,t,(function(t){return function(e,t,n){var r=e.state.charCategorizer(t),i=r(n);return function(e){var t=r(e);return i==je.Space&&(i=t),i==t}}(n,e.head,t)})))}},{key:"moveToLineBoundary",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Zr(this,e,t,n)}},{key:"moveVertically",value:function(e,t,n){return ti(this,e,function(e,t,n,r){var i=t.head,a=n?1:-1;if(i==(n?e.state.doc.length:0))return te.cursor(i,t.assoc);var o,s=t.goalColumn,u=e.contentDOM.getBoundingClientRect(),l=e.coordsAtPos(i),c=e.documentTop;if(l)null==s&&(s=l.left-u.left),o=a<0?l.top:l.bottom;else{var f=e.viewState.lineBlockAt(i);null==s&&(s=Math.min(u.right-u.left,e.defaultCharacterWidth*(i-f.from))),o=(a<0?f.top:f.bottom)+c}for(var h=u.left+s,d=null!==r&&void 0!==r?r:e.defaultLineHeight>>1,p=0;;p+=10){var v=o+(d+p)*a,g=$r(e,{x:h,y:v},!1,a);if(v<u.top||v>u.bottom||(a<0?g<i:g>i))return te.cursor(g,t.assoc,void 0,s)}}(this,e,t,n))}},{key:"domAtPos",value:function(e){return this.docView.domAtPos(e)}},{key:"posAtDOM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}},{key:"posAtCoords",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),$r(this,e,t)}},{key:"coordsAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;var r=this.state.doc.lineAt(e),i=this.bidiSpans(r),a=i[Ar.find(i,e-r.from,-1,t)];return Ut(n,a.dir==lr.LTR==t>0)}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.defaultTextDirection}},{key:"textDirectionAt",value:function(e){return!this.state.facet(Wn)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"bidiSpans",value:function(e){if(e.length>ha)return Or(e.length);var t,n=this.textDirectionAt(e.from),r=s(this.bidiCache);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.from==e.from&&i.dir==n)return i.order}}catch(o){r.e(o)}finally{r.f()}var a=Lr(e.text,n);return this.bidiCache.push(new pa(e.from,e.to,n,a)),a}},{key:"hasFocus",get:function(){var e;return(document.hasFocus()||hn.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}},{key:"focus",value:function(){var e=this;this.observer.ignore((function(){jt(e.contentDOM),e.docView.updateSelection()}))}},{key:"destroy",value:function(){var e,t=s(this.plugins);try{for(t.s();!(e=t.n()).done;){e.value.destroy(this)}}catch(n){t.e(n)}finally{t.f()}this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}}],[{key:"scrollIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qn.of(new Xn("number"==typeof e?te.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}},{key:"domEventHandlers",value:function(e){return Zn.define((function(){return{}}),{eventHandlers:e})}},{key:"theme",value:function(e,t){var n=vt.newName(),r=[Yi.of(n),or.of(ia(".".concat(n),e))];return t&&t.dark&&r.push(Zi.of(!0)),r}},{key:"baseTheme",value:function(e){return ge.lowest(or.of(ia("."+ea,e,ra)))}}]),e}();fa.styleModule=or,fa.inputHandler=Kn,fa.perLineTextDirection=Wn,fa.exceptionSink=Hn,fa.updateListener=Gn,fa.editable=$n,fa.mouseSelectionStyle=jn,fa.dragMovesSelection=zn,fa.clickAddsSelectionRange=Fn,fa.decorations=rr,fa.atomicRanges=ir,fa.scrollMargins=ar,fa.darkTheme=Zi,fa.contentAttributes=nr,fa.editorAttributes=tr,fa.lineWrapping=fa.contentAttributes.of({class:"cm-lineWrapping"}),fa.announce=Re.define();var ha=4096,da={},pa=function(){function e(t,n,r,i){k(this,e),this.from=t,this.to=n,this.dir=r,this.order=i}return b(e,null,[{key:"update",value:function(t,n){if(n.empty)return t;for(var r=[],i=t.length?t[t.length-1].dir:lr.LTR,a=Math.max(0,t.length-10);a<t.length;a++){var o=t[a];o.dir!=i||n.touchesRange(o.from,o.to)||r.push(new e(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.order))}return r}}]),e}();function va(e,t,n){for(var r=e.state.facet(t),i=r.length-1;i>=0;i--){var a=r[i],o="function"==typeof a?a(e):a;o&&An(o,n)}return n}var ga=hn.mac?"mac":hn.windows?"win":hn.linux?"linux":"key";function ma(e,t){var n,r,i,a,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var u=0;u<o.length-1;++u){var l=o[u];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))i=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);"mac"==t?a=!0:r=!0}}return n&&(s="Alt-"+s),r&&(s="Ctrl-"+s),a&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function ya(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}var ka=fa.domEventHandlers({keydown:function(e,t){return Sa(wa(t.state),e,t,"editor")}}),_a=ie.define({enables:ka}),ba=new WeakMap;function wa(e){var t=e.facet(_a),n=ba.get(t);return n||ba.set(t,n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga,r=Object.create(null),i=Object.create(null),a=function(e,t){var n=i[e];if(null==n)i[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=function(e,t,i,o){for(var s=r[e]||(r[e]=Object.create(null)),u=t.split(/ (?!$)/).map((function(e){return ma(e,n)})),l=function(t){var n=u.slice(0,t).join(" ");a(n,!0),s[n]||(s[n]={preventDefault:!0,commands:[function(t){var r=xa={view:t,prefix:n,scope:e};return setTimeout((function(){xa==r&&(xa=null)}),Aa),!0}]})},c=1;c<u.length;c++)l(c);var f=u.join(" ");a(f,!1);var h=s[f]||(s[f]={preventDefault:!1,commands:[]});h.commands.push(i),o&&(h.preventDefault=!0)},u=s(e);try{for(u.s();!(t=u.n()).done;){var l=t.value,c=l[n]||l.key;if(c){var f,h=s(l.scope?l.scope.split(" "):["editor"]);try{for(h.s();!(f=h.n()).done;){var d=f.value;o(d,c,l.run,l.preventDefault),l.shift&&o(d,"Shift-"+c,l.shift,l.preventDefault)}}catch(p){h.e(p)}finally{h.f()}}}}catch(p){u.e(p)}finally{u.f()}return r}(t.reduce((function(e,t){return e.concat(t)}),[]))),n}var xa=null,Aa=4e3;function Sa(e,t,n,r){var i=function(e){var t=!(St&&(e.ctrlKey||e.altKey||e.metaKey)||(bt||At)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?kt:yt)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),a=1==i.length&&" "!=i,o="",u=!1;xa&&xa.view==n&&xa.scope==r&&(o=xa.prefix+" ",(u=ii.indexOf(t.keyCode)<0)&&(xa=null));var l,c=function(e){if(e){var t,r=s(e.commands);try{for(r.s();!(t=r.n()).done;){if((0,t.value)(n))return!0}}catch(i){r.e(i)}finally{r.f()}e.preventDefault&&(u=!0)}return!1},f=e[r];if(f){if(c(f[o+ya(i,t,!a)]))return!0;if(a&&(t.shiftKey||t.altKey||t.metaKey)&&(l=yt[t.keyCode])&&l!=i){if(c(f[o+ya(l,t,!0)]))return!0}else if(a&&t.shiftKey&&c(f[o+ya(i,t,!0)]))return!0}return u}var La=!hn.ios,Oa=ie.define({combine:function(e){return We(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(e,t){return Math.min(e,t)},drawRangeCursor:function(e,t){return e||t}})}});function Ta(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Oa.of(e),Ca,Na]}var Ea=function(){function e(t,n,r,i,a){k(this,e),this.left=t,this.top=n,this.width=r,this.height=i,this.className=a}return b(e,[{key:"draw",value:function(){var e=document.createElement("div");return e.className=this.className,this.adjust(e),e}},{key:"adjust",value:function(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}},{key:"eq",value:function(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}]),e}(),Ca=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=t.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=t.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),t.requestMeasure(this.measureReq),this.setBlinkRate()}return b(e,[{key:"setBlinkRate",value:function(){this.cursorLayer.style.animationDuration=this.view.state.facet(Oa).cursorBlinkRate+"ms"}},{key:"update",value:function(e){var t=e.startState.facet(Oa)!=e.state.facet(Oa);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((function(e){return e.scrollIntoView}))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}},{key:"readPos",value:function(){var e,t=this,n=this.view.state,r=n.facet(Oa),i=n.selection.ranges.map((function(e){return e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];var n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==lr.LTR,a=e.contentDOM,o=a.getBoundingClientRect(),u=Ra(e),l=window.getComputedStyle(a.firstChild),c=o.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),f=o.right-parseInt(l.paddingRight),h=Ia(e,n),d=Ia(e,r),p=h.type==Tn.Text?h:null,v=d.type==Tn.Text?d:null;e.lineWrapping&&(p&&(p=Pa(e,n,p)),v&&(v=Pa(e,r,v)));if(p&&v&&p.from==v.from)return _(b(t.from,t.to,p));var g=p?b(t.from,null,p):w(h,!1),m=v?b(null,t.to,v):w(d,!0),y=[];return(p||h).to<(v||d).from-1?y.push(k(c,g.bottom,f,m.top)):g.bottom<m.top&&e.elementAtHeight((g.bottom+m.top)/2).type==Tn.Text&&(g.bottom=m.top=(g.bottom+m.top)/2),_(g).concat(y).concat(_(m));function k(e,t,n,r){return new Ea(e-u.left,t-u.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function _(e){for(var t=e.top,n=e.bottom,r=e.horizontal,i=[],a=0;a<r.length;a+=2)i.push(k(r[a],t,r[a+1],n));return i}function b(t,n,r){var a=1e9,o=-1e9,u=[];function l(t,n,s,l,h){var d=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(s,s==r.from?2:-2);a=Math.min(d.top,p.top,a),o=Math.max(d.bottom,p.bottom,o),h==lr.LTR?u.push(i&&n?c:d.left,i&&l?f:p.right):u.push(!i&&l?c:p.left,!i&&n?f:d.right)}var h,d=null!==t&&void 0!==t?t:r.from,p=null!==n&&void 0!==n?n:r.to,v=s(e.visibleRanges);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.to>d&&g.from<p)for(var m=Math.max(g.from,d),y=Math.min(g.to,p);;){var k,_=e.state.doc.lineAt(m),b=s(e.bidiSpans(_));try{for(b.s();!(k=b.n()).done;){var w=k.value,x=w.from+_.from,A=w.to+_.from;if(x>=y)break;A>m&&l(Math.max(x,m),null==t&&x<=d,Math.min(A,y),null==n&&A>=p,w.dir)}}catch(S){b.e(S)}finally{b.f()}if((m=_.to+1)>=y)break}}}catch(S){v.e(S)}finally{v.f()}return 0==u.length&&l(d,null==t,p,null==n,e.textDirection),{top:a,bottom:o,horizontal:u}}function w(e,t){var n=o.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(t.view,e)})).reduce((function(e,t){return e.concat(t)})),a=[],o=s(n.selection.ranges);try{for(o.s();!(e=o.n()).done;){var u=e.value,l=u==n.selection.main;if(u.empty?!l||La:r.drawRangeCursor){var c=Da(this.view,u,l);c&&a.push(c)}}}catch(f){o.e(f)}finally{o.f()}return{rangePieces:i,cursors:a}}},{key:"drawSel",value:function(e){var t=this,n=e.rangePieces,r=e.cursors;if(n.length!=this.rangePieces.length||n.some((function(e,n){return!e.eq(t.rangePieces[n])}))){this.selectionLayer.textContent="";var i,a=s(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.selectionLayer.appendChild(o.draw())}}catch(h){a.e(h)}finally{a.f()}this.rangePieces=n}if(r.length!=this.cursors.length||r.some((function(e,n){return!e.eq(t.cursors[n])}))){var u=this.cursorLayer.children;if(u.length!==r.length){this.cursorLayer.textContent="";var l,c=s(r);try{for(c.s();!(l=c.n()).done;){var f=l.value;this.cursorLayer.appendChild(f.draw())}}catch(h){c.e(h)}finally{c.f()}}else r.forEach((function(e,t){return e.adjust(u[t])}));this.cursors=r}}},{key:"destroy",value:function(){this.selectionLayer.remove(),this.cursorLayer.remove()}}]),e}()),Ma={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};La&&(Ma[".cm-line"].caretColor="transparent !important");var Na=ge.highest(fa.theme(Ma));function Ra(e){var t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==lr.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Pa(e,t,n){var r=te.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:Tn.Text}}function Ia(e,t){var n=e.lineBlockAt(t);if(Array.isArray(n.type)){var r,i=s(n.type);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.to>t||a.to==t&&(a.to==n.to||a.type==Tn.Text))return a}}catch(o){i.e(o)}finally{i.f()}}return n}function Da(e,t,n){var r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;var i=Ra(e);return new Ea(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}var Ua=Re.define({map:function(e,t){return null==e?null:t.mapPos(e)}}),Ba=ce.define({create:function(){return null},update:function(e,t){return null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((function(e,t){return t.is(Ua)?t.value:e}),e)}}),Va=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}return b(e,[{key:"update",value:function(e){var t,n=e.state.field(Ba);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Ba)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}},{key:"readPos",value:function(){var e=this.view.state.field(Ba),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;var n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}},{key:"drawCursor",value:function(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}},{key:"destroy",value:function(){this.cursor&&this.cursor.remove()}},{key:"setDropPos",value:function(e){this.view.state.field(Ba)!=e&&this.view.dispatch({effects:Ua.of(e)})}}]),e}(),{eventHandlers:{dragover:function(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave:function(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend:function(){this.setDropPos(null)},drop:function(){this.setDropPos(null)}}});function Fa(){return[Ba,Va]}function za(e,t,n,r,i){t.lastIndex=0;for(var a,o=e.iterRange(n,r),s=n;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=t.exec(o.value);)i(s+a.index,s+a.index+a[0].length,a)}var ja=function(){function e(t){k(this,e);var n=t.regexp,r=t.decoration,i=t.boundary,a=t.maxLength,o=void 0===a?1e3:a;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=n,this.getDeco="function"==typeof r?r:function(){return r},this.boundary=i,this.maxLength=o}return b(e,[{key:"createDeco",value:function(e){var t,n=this,r=new Ze,i=s(function(e,t){var n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;var r,i=[],a=s(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.from,l=o.to;u=Math.max(e.state.doc.lineAt(u).from,u-t),l=Math.min(e.state.doc.lineAt(l).to,l+t),i.length&&i[i.length-1].to>=u?i[i.length-1].to=l:i.push({from:u,to:l})}}catch(c){a.e(c)}finally{a.f()}return i}(e,this.maxLength));try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.from,u=a.to;za(e.state.doc,this.regexp,o,u,(function(t,i,a){return r.add(t,i,n.getDeco(a,e,t))}))}}catch(l){i.e(l)}finally{i.f()}return r.finish()}},{key:"updateDeco",value:function(e,t){var n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((function(t,i,a,o){o>e.view.viewport.from&&a<e.view.viewport.to&&(n=Math.min(a,n),r=Math.max(o,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}},{key:"updateRange",value:function(e,t,n,r){var i,a=this,o=s(e.visibleRanges);try{for(o.s();!(i=o.n()).done;){var u=i.value,l=Math.max(u.from,n),c=Math.min(u.to,r);c>l&&function(){var n=e.state.doc.lineAt(l),r=n.to<c?e.state.doc.lineAt(c):n,i=Math.max(u.from,n.from),o=Math.min(u.to,r.to);if(a.boundary){for(;l>n.from;l--)if(a.boundary.test(n.text[l-1-n.from])){i=l;break}for(;c<r.to;c++)if(a.boundary.test(r.text[c-r.from])){o=c;break}}var s=[],f=void 0;if(n==r)for(a.regexp.lastIndex=i-n.from;(f=a.regexp.exec(n.text))&&f.index<o-n.from;){var h=f.index+n.from;s.push(a.getDeco(f,e,h).range(h,h+f[0].length))}else za(e.state.doc,a.regexp,i,o,(function(t,n,r){return s.push(a.getDeco(r,e,t).range(t,n))}));t=t.update({filterFrom:i,filterTo:o,filter:function(e,t){return e<i||t>o},add:s})}()}}catch(f){o.e(f)}finally{o.f()}return t}}]),e}(),Ha=null!=/x/.unicode?"gu":"g",Ga=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\ufeff\ufff9-\ufffc]",Ha),Ka={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},Wa=null;var Xa=ie.define({combine:function(e){var t=We(e,{render:null,specialChars:Ga,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Wa&&"undefined"!=typeof document&&document.body){var t=document.body.style;Wa=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Wa||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Ha)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Ha)),t}});function qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Xa.of(e),$a()]}var Qa=null;function $a(){return Qa||(Qa=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.decorations=En.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Xa)),this.decorations=this.decorator.createDeco(t)}return b(e,[{key:"makeDecorator",value:function(e){var t=this;return new ja({regexp:e.specialChars,decoration:function(n,r,i){var a=r.state.doc,o=z(n[0],0);if(9==o){var s=a.lineAt(i),u=r.state.tabSize,l=ct(s.text,u,i-s.from);return En.replace({widget:new Ya((u-l%u)*t.view.defaultCharacterWidth)})}return t.decorationCache[o]||(t.decorationCache[o]=En.replace({widget:new Ja(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}},{key:"update",value:function(e){var t=e.state.facet(Xa);e.startState.facet(Xa)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}}]),e}(),{decorations:function(e){return e.decorations}}))}var Ja=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).options=e,i.code=r,i}return b(n,[{key:"eq",value:function(e){return e.code==this.code}},{key:"toDOM",value:function(e){var t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Ka[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;var i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}},{key:"ignoreEvent",value:function(){return!1}}]),n}(On),Ya=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).width=e,r}return b(n,[{key:"eq",value:function(e){return e.width==this.width}},{key:"toDOM",value:function(){var e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}},{key:"ignoreEvent",value:function(){return!1}}]),n}(On);function Za(){return to}var eo=En.line({class:"cm-activeLine"}),to=Zn.fromClass(function(){function e(t){k(this,e),this.decorations=this.getDeco(t)}return b(e,[{key:"update",value:function(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t,n=-1,r=[],i=s(e.state.selection.ranges);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!a.empty)return En.none;var o=e.lineBlockAt(a.head);o.from>n&&(r.push(eo.range(o.from)),n=o.from)}}catch(u){i.e(u)}finally{i.f()}return En.set(r)}}]),e}(),{decorations:function(e){return e.decorations}}),no=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).content=e,r}return b(n,[{key:"toDOM",value:function(){var e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}},{key:"ignoreEvent",value:function(){return!1}}]),n}(On);var ro=2e3;function io(e,t){var n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,a=i>ro?-1:i==r.length?function(e,t){var n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):ct(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:a,off:i}}function ao(e,t){var n=io(e,t),r=e.state.selection;return n?{update:function(e){if(e.docChanged){var t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get:function(t,i,a){var o=io(e,t);if(!o)return r;var s=function(e,t,n){var r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),a=[];if(t.off>ro||n.off>ro||t.col<0||n.col<0)for(var o=Math.min(t.off,n.off),s=Math.max(t.off,n.off),u=r;u<=i;u++){var l=e.doc.line(u);l.length<=s&&a.push(te.range(l.from+o,l.to+s))}else for(var c=Math.min(t.col,n.col),f=Math.max(t.col,n.col),h=r;h<=i;h++){var d=e.doc.line(h),p=ft(d.text,c,e.tabSize,!0);if(p>-1){var v=ft(d.text,f,e.tabSize);a.push(te.range(d.from+p,d.from+v))}}return a}(e.state,n,o);return s.length?a?te.create(s.concat(r.ranges)):te.create(s):r}}:null}function oo(e){var t=(null===e||void 0===e?void 0:e.eventFilter)||function(e){return e.altKey&&0==e.button};return fa.mouseSelectionStyle.of((function(e,n){return t(n)?ao(e,n):null}))}var so={Alt:[18,function(e){return e.altKey}],Control:[17,function(e){return e.ctrlKey}],Shift:[16,function(e){return e.shiftKey}],Meta:[91,function(e){return e.metaKey}]},uo={style:"cursor: crosshair"};function lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o(so[e.key||"Alt"],2),n=t[0],r=t[1],i=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.isDown=!1}return b(e,[{key:"set",value:function(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}}]),e}(),{eventHandlers:{keydown:function(e){this.set(e.keyCode==n||r(e))},keyup:function(e){e.keyCode!=n&&r(e)||this.set(!1)}}});return[i,fa.contentAttributes.of((function(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.isDown)?uo:null}))]}var co="-10000px",fo=function(){function e(t,n,r){k(this,e),this.facet=n,this.createTooltipView=r,this.input=t.state.facet(n),this.tooltips=this.input.filter((function(e){return e})),this.tooltipViews=this.tooltips.map(r)}return b(e,[{key:"update",value:function(e){var t=e.state.facet(this.facet),n=t.filter((function(e){return e}));if(t===this.input){var r,i=s(this.tooltipViews);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.update&&a.update(e)}}catch(m){i.e(m)}finally{i.f()}return!1}for(var o=[],u=0;u<n.length;u++){var l=n[u],c=-1;if(l){for(var f=0;f<this.tooltips.length;f++){var h=this.tooltips[f];h&&h.create==l.create&&(c=f)}if(c<0)o[u]=this.createTooltipView(l);else{var d=o[u]=this.tooltipViews[c];d.update&&d.update(e)}}}var p,v=s(this.tooltipViews);try{for(v.s();!(p=v.n()).done;){var g=p.value;o.indexOf(g)<0&&g.dom.remove()}}catch(m){v.e(m)}finally{v.f()}return this.input=t,this.tooltips=n,this.tooltipViews=o,!0}}]),e}();function ho(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}var po=ie.define({combine:function(e){var t,n,r;return{position:hn.ios?"absolute":(null===(t=e.find((function(e){return e.position})))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((function(e){return e.parent})))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((function(e){return e.tooltipSpace})))||void 0===r?void 0:r.tooltipSpace)||ho}}}),vo=Zn.fromClass(function(){function e(t){var n,r=this;k(this,e),this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;var i=t.state.facet(po);this.position=i.position,this.parent=i.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new fo(t,yo,(function(e){return r.createTooltip(e)})),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>r.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(n=t.dom.ownerDocument.defaultView)||void 0===n||n.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}return b(e,[{key:"createContainer",value:function(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}},{key:"observeIntersection",value:function(){if(this.intersectionObserver){this.intersectionObserver.disconnect();var e,t=s(this.manager.tooltipViews);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.intersectionObserver.observe(n.dom)}}catch(r){t.e(r)}finally{t.f()}}}},{key:"measureSoon",value:function(){var e=this;this.measureTimeout<0&&(this.measureTimeout=setTimeout((function(){e.measureTimeout=-1,e.maybeMeasure()}),50))}},{key:"update",value:function(e){e.transactions.length&&(this.lastTransaction=Date.now());var t=this.manager.update(e);t&&this.observeIntersection();var n=t||e.geometryChanged,r=e.state.facet(po);if(r.position!=this.position){this.position=r.position;var i,a=s(this.manager.tooltipViews);try{for(a.s();!(i=a.n()).done;){i.value.dom.style.position=this.position}}catch(c){a.e(c)}finally{a.f()}n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();var o,u=s(this.manager.tooltipViews);try{for(u.s();!(o=u.n()).done;){var l=o.value;this.container.appendChild(l.dom)}}catch(c){u.e(c)}finally{u.f()}n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}},{key:"createTooltip",value:function(e){var t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){var n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=co,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}},{key:"destroy",value:function(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);var n,r=s(this.manager.tooltipViews);try{for(r.s();!(n=r.n()).done;){n.value.dom.remove()}}catch(i){r.e(i)}finally{r.f()}null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}},{key:"readMeasure",value:function(){var e=this,t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((function(t,n){var r=e.manager.tooltipViews[n];return r.getCoords?r.getCoords(t.pos):e.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((function(e){return e.dom.getBoundingClientRect()})),space:this.view.state.facet(po).tooltipSpace(this.view)}}},{key:"writeMeasure",value:function(e){for(var t=e.editor,n=e.space,r=[],i=0;i<this.manager.tooltips.length;i++){var a=this.manager.tooltips[i],o=this.manager.tooltipViews[i],u=o.dom,l=e.pos[i],c=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1)u.style.top=co;else{var f=a.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=c.right-c.left,p=c.bottom-c.top,v=o.offset||mo,g=this.view.textDirection==lr.LTR,m=c.width>n.right-n.left?g?n.left:n.right-c.width:g?Math.min(l.left-(f?14:0)+v.x,n.right-d):Math.max(n.left,l.left-d+(f?14:0)-v.x),y=!!a.above;!a.strictSide&&(y?l.top-(c.bottom-c.top)-v.y<n.top:l.bottom+(c.bottom-c.top)+v.y>n.bottom)&&y==n.bottom-l.bottom>l.top-n.top&&(y=!y);var k=y?l.top-p-h-v.y:l.bottom+h+v.y,_=m+d;if(!0!==o.overlap){var b,w=s(r);try{for(w.s();!(b=w.n()).done;){var x=b.value;x.left<_&&x.right>m&&x.top<k+p&&x.bottom>k&&(k=y?x.top-p-2-h:x.bottom+h+2)}}catch(A){w.e(A)}finally{w.f()}}"absolute"==this.position?(u.style.top=k-e.parent.top+"px",u.style.left=m-e.parent.left+"px"):(u.style.top=k+"px",u.style.left=m+"px"),f&&(f.style.left="".concat(l.left+(g?v.x:-v.x)-(m+14-7),"px")),!0!==o.overlap&&r.push({left:m,top:k,right:_,bottom:k+p}),u.classList.toggle("cm-tooltip-above",y),u.classList.toggle("cm-tooltip-below",!y),o.positioned&&o.positioned()}}}},{key:"maybeMeasure",value:function(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView))){var e,t=s(this.manager.tooltipViews);try{for(t.s();!(e=t.n()).done;){e.value.dom.style.top=co}}catch(n){t.e(n)}finally{t.f()}}}}]),e}(),{eventHandlers:{scroll:function(){this.maybeMeasure()}}}),go=fa.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),mo={x:0,y:0},yo=ie.define({enables:[vo,go]}),ko=ie.define(),_o=function(){function e(t){var n=this;k(this,e),this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fo(t,ko,(function(e){return n.createHostedView(e)}))}return b(e,[{key:"createHostedView",value:function(e){var t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}},{key:"mount",value:function(e){var t,n=s(this.manager.tooltipViews);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.mount&&r.mount(e)}}catch(i){n.e(i)}finally{n.f()}this.mounted=!0}},{key:"positioned",value:function(){var e,t=s(this.manager.tooltipViews);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.positioned&&n.positioned()}}catch(r){t.e(r)}finally{t.f()}}},{key:"update",value:function(e){this.manager.update(e)}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),bo=yo.compute([ko],(function(e){var t=e.facet(ko).filter((function(e){return e}));return 0===t.length?null:{pos:Math.min.apply(Math,l(t.map((function(e){return e.pos})))),end:Math.max.apply(Math,l(t.filter((function(e){return null!=e.end})).map((function(e){return e.end})))),create:_o.create,above:t[0].above,arrow:t.some((function(e){return e.arrow}))}})),wo=function(){function e(t,n,r,i,a){k(this,e),this.view=t,this.source=n,this.field=r,this.setHover=i,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}return b(e,[{key:"update",value:function(){var e=this;this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((function(){return e.startHover()}),20))}},{key:"active",get:function(){return this.view.state.field(this.field)}},{key:"checkHover",value:function(){if(this.hoverTimeout=-1,!this.active){var e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}}},{key:"startHover",value:function(){var e=this;clearTimeout(this.restartTimeout);var t=this.lastMove,n=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null!=n){var r=this.view.coordsAtPos(n);if(!(null==r||t.y<r.top||t.y>r.bottom||t.x<r.left-this.view.defaultCharacterWidth||t.x>r.right+this.view.defaultCharacterWidth)){var i=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((function(e){return e.from<=n&&e.to>=n})),a=i&&i.dir==lr.RTL?-1:1,o=this.source(this.view,n,t.x<r.left?-a:a);if(null===o||void 0===o?void 0:o.then){var s=this.pending={pos:n};o.then((function(t){e.pending==s&&(e.pending=null,t&&e.view.dispatch({effects:e.setHover.of(t)}))}),(function(t){return Qn(e.view.state,t,"hover tooltip")}))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}}}},{key:"mousemove",value:function(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));var n=this.active;if(n&&!function(e){for(var t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){var r=(n||this.pending).pos,i=null!==(t=null===n||void 0===n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,a){var o=document.createRange(),s=e.domAtPos(t),u=e.domAtPos(n);o.setEnd(u.node,u.offset),o.setStart(s.node,s.offset);var l=o.getClientRects();o.detach();for(var c=0;c<l.length;c++){var f=l[c];if(Math.max(f.top-i,i-f.bottom,f.left-r,r-f.right)<=a)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}},{key:"mouseleave",value:function(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}},{key:"destroy",value:function(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}]),e}();function xo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Re.define(),r=ce.define({create:function(){return null},update:function(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){var i=r.changes.mapPos(e.pos,-1,K.TrackDel);if(null==i)return null;var a=Object.assign(Object.create(null),e);a.pos=i,null!=e.end&&(a.end=r.changes.mapPos(e.end)),e=a}var o,u=s(r.effects);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.is(n)&&(e=l.value),l.is(So)&&(e=null)}}catch(c){u.e(c)}finally{u.f()}return e},provide:function(e){return ko.from(e)}});return[r,Zn.define((function(i){return new wo(i,e,r,n,t.hoverTime||300)})),bo]}function Ao(e,t){var n=e.plugin(vo);if(!n)return null;var r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}var So=Re.define();var Lo=ie.define({combine:function(e){var t,n,r,i=s(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;t=t||a.topContainer,n=n||a.bottomContainer}}catch(o){i.e(o)}finally{i.f()}return{topContainer:t,bottomContainer:n}}});function Oo(e,t){var n=e.plugin(To),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}var To=Zn.fromClass(function(){function e(t){k(this,e),this.input=t.state.facet(Mo),this.specs=this.input.filter((function(e){return e})),this.panels=this.specs.map((function(e){return e(t)}));var n=t.state.facet(Lo);this.top=new Eo(t,!0,n.topContainer),this.bottom=new Eo(t,!1,n.bottomContainer),this.top.sync(this.panels.filter((function(e){return e.top}))),this.bottom.sync(this.panels.filter((function(e){return!e.top})));var r,i=s(this.panels);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.dom.classList.add("cm-panel"),a.mount&&a.mount()}}catch(o){i.e(o)}finally{i.f()}}return b(e,[{key:"update",value:function(e){var t=e.state.facet(Lo);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Eo(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Eo(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();var n=e.state.facet(Mo);if(n!=this.input){var r,i=n.filter((function(e){return e})),a=[],o=[],u=[],l=[],c=s(i);try{for(c.s();!(r=c.n()).done;){var f=r.value,h=this.specs.indexOf(f),d=void 0;h<0?(d=f(e.view),l.push(d)):(d=this.panels[h]).update&&d.update(e),a.push(d),(d.top?o:u).push(d)}}catch(_){c.e(_)}finally{c.f()}this.specs=i,this.panels=a,this.top.sync(o),this.bottom.sync(u);for(var p=0,v=l;p<v.length;p++){var g=v[p];g.dom.classList.add("cm-panel"),g.mount&&g.mount()}}else{var m,y=s(this.panels);try{for(y.s();!(m=y.n()).done;){var k=m.value;k.update&&k.update(e)}}catch(_){y.e(_)}finally{y.f()}}}},{key:"destroy",value:function(){this.top.sync([]),this.bottom.sync([])}}]),e}(),{provide:function(e){return fa.scrollMargins.of((function(t){var n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))}}),Eo=function(){function e(t,n,r){k(this,e),this.view=t,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}return b(e,[{key:"sync",value:function(e){var t,n=s(this.panels);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.destroy&&e.indexOf(r)<0&&r.destroy()}}catch(i){n.e(i)}finally{n.f()}this.panels=e,this.syncDOM()}},{key:"syncDOM",value:function(){if(0!=this.panels.length){if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";var e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}var t,n=this.dom.firstChild,r=s(this.panels);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.dom.parentNode==this.dom){for(;n!=i.dom;)n=Co(n);n=n.nextSibling}else this.dom.insertBefore(i.dom,n)}}catch(a){r.e(a)}finally{r.f()}for(;n;)n=Co(n)}else this.dom&&(this.dom.remove(),this.dom=void 0)}},{key:"scrollMargin",value:function(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}},{key:"syncClasses",value:function(){if(this.container&&this.classes!=this.view.themeClasses){var e,t=s(this.classes.split(" "));try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&this.container.classList.remove(n)}}catch(o){t.e(o)}finally{t.f()}var r,i=s((this.classes=this.view.themeClasses).split(" "));try{for(i.s();!(r=i.n()).done;){var a=r.value;a&&this.container.classList.add(a)}}catch(o){i.e(o)}finally{i.f()}}}}]),e}();function Co(e){var t=e.nextSibling;return e.remove(),t}var Mo=ie.define({enables:To}),No=function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e)}},{key:"eq",value:function(e){return!1}},{key:"destroy",value:function(e){}}]),n}(Xe);No.prototype.elementClass="",No.prototype.toDOM=void 0,No.prototype.mapMode=K.TrackBefore,No.prototype.startSide=No.prototype.endSide=-1,No.prototype.point=!0;var Ro=ie.define(),Po={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Je.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Io=ie.define();function Do(e){return[Bo(),Io.of(Object.assign(Object.assign({},Po),e))]}var Uo=ie.define({combine:function(e){return e.some((function(e){return e}))}});function Bo(e){var t=[Vo];return e&&!1===e.fixed&&t.push(Uo.of(!0)),t}var Vo=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Io).map((function(e){return new Ho(t,e)}));var n,r=s(this.gutters);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.dom.appendChild(i.dom)}}catch(a){r.e(a)}finally{r.f()}this.fixed=!t.state.facet(Uo),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}return b(e,[{key:"update",value:function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Uo)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}},{key:"syncGutters",value:function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r,i=Je.iter(this.view.state.facet(Ro),this.view.viewport.from),a=[],o=this.gutters.map((function(e){return new jo(e,t.view.viewport,-t.view.documentPadding.top)})),u=s(this.view.viewportLineBlocks);try{for(u.s();!(r=u.n()).done;){var l=r.value,c=void 0;if(Array.isArray(l.type)){var f,h=s(l.type);try{for(h.s();!(f=h.n()).done;){var d=f.value;if(d.type==Tn.Text){c=d;break}}}catch(y){h.e(y)}finally{h.f()}}else c=l.type==Tn.Text?l:void 0;if(c){a.length&&(a=[]),zo(i,a,l.from);var p,v=s(o);try{for(v.s();!(p=v.n()).done;){p.value.line(this.view,c,a)}}catch(y){v.e(y)}finally{v.f()}}}}catch(y){u.e(y)}finally{u.f()}var g,m=s(o);try{for(m.s();!(g=m.n()).done;){g.value.finish()}}catch(y){m.e(y)}finally{m.f()}e&&this.view.scrollDOM.insertBefore(this.dom,n)}},{key:"updateGutters",value:function(e){var t=e.startState.facet(Io),n=e.state.facet(Io),r=e.docChanged||e.heightChanged||e.viewportChanged||!Je.eq(e.startState.facet(Ro),e.state.facet(Ro),e.view.viewport.from,e.view.viewport.to);if(t==n){var i,a=s(this.gutters);try{for(a.s();!(i=a.n()).done;){i.value.update(e)&&(r=!0)}}catch(y){a.e(y)}finally{a.f()}}else{r=!0;var o,u=[],l=s(n);try{for(l.s();!(o=l.n()).done;){var c=o.value,f=t.indexOf(c);f<0?u.push(new Ho(this.view,c)):(this.gutters[f].update(e),u.push(this.gutters[f]))}}catch(y){l.e(y)}finally{l.f()}var h,d=s(this.gutters);try{for(d.s();!(h=d.n()).done;){var p=h.value;p.dom.remove(),u.indexOf(p)<0&&p.destroy()}}catch(y){d.e(y)}finally{d.f()}for(var v=0,g=u;v<g.length;v++){var m=g[v];this.dom.appendChild(m.dom)}this.gutters=u}return r}},{key:"destroy",value:function(){var e,t=s(this.gutters);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}this.dom.remove()}}]),e}(),{provide:function(e){return fa.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==lr.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function Fo(e){return Array.isArray(e)?e:[e]}function zo(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var jo=function(){function e(t,n,r){k(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Je.iter(t.markers,n.from)}return b(e,[{key:"line",value:function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),zo(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var a=this.gutter;if(0!=r.length||a.config.renderEmptyElements){var o=t.top-this.height;if(this.i==a.elements.length){var s=new Go(e,t.height,o,r);a.elements.push(s),a.dom.appendChild(s.dom)}else a.elements[this.i].update(e,t.height,o,r);this.height=t.bottom,this.i++}}},{key:"finish",value:function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}]),e}(),Ho=function(){function e(t,n){var r=this;k(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");var i=function(e){r.dom.addEventListener(e,(function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var a in n.domEventHandlers)i(a);this.markers=Fo(n.markers(t)),n.initialSpacer&&(this.spacer=new Go(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}return b(e,[{key:"update",value:function(e){var t=this.markers;if(this.markers=Fo(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!Je.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}},{key:"destroy",value:function(){var e,t=s(this.elements);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(n){t.e(n)}finally{t.f()}}}]),e}(),Go=function(){function e(t,n,r,i){k(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}return b(e,[{key:"update",value:function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}},{key:"setMarkers",value:function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,a=0;;){var o=a,s=i<t.length?t[i++]:null,u=!1;if(s){var l=s.elementClass;l&&(n+=" "+l);for(var c=a;c<this.markers.length;c++)if(this.markers[c].compare(s)){o=c,u=!0;break}}else o=this.markers.length;for(;a<o;){var f=this.markers[a++];if(f.toDOM){f.destroy(r);var h=r.nextSibling;r.remove(),r=h}}if(!s)break;s.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(s.toDOM(e),r)),u&&a++}this.dom.className=n,this.markers=t}},{key:"destroy",value:function(){this.setMarkers(null,[])}}]),e}();var Ko=ie.define(),Wo=ie.define({combine:function(e){return We(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e),r=function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i};for(var i in t)r(i);return n}})}}),Xo=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).number=e,r}return b(n,[{key:"eq",value:function(e){return this.number==e.number}},{key:"toDOM",value:function(){return document.createTextNode(this.number)}}]),n}(No);function qo(e,t){return e.state.facet(Wo).formatNumber(t,e.state)}var Qo=Io.compute([Wo],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(Ko)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new Xo(qo(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(Wo)!=e.state.facet(Wo)},initialSpacer:function(e){return new Xo(qo(e,Jo(e.state.doc.lines)))},updateSpacer:function(e,t){var n=qo(t.view,Jo(t.view.state.doc.lines));return n==e.number?e:new Xo(n)},domEventHandlers:e.facet(Wo).domEventHandlers}}));function $o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Wo.of(e),Bo(),Qo]}function Jo(e){for(var t=9;t<e;)t=10*t+9;return t}var Yo=new(function(e){v(n,e);var t=y(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return b(n)}(No)),Zo=Ro.compute(["selection"],(function(e){var t,n=[],r=-1,i=s(e.selection.ranges);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.empty){var o=e.doc.lineAt(a.head).from;o>r&&(r=o,n.push(Yo.range(o)))}}}catch(u){i.e(u)}finally{i.f()}return Je.of(n)}));function es(){return Zo}function ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ns=0,rs=b((function e(t,n){k(this,e),this.from=t,this.to=n})),is=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,e),this.id=ns++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||function(){throw new Error("This node type doesn't define a deserialize function")}}return b(e,[{key:"add",value:function(e){var t=this;if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=os.match(e)),function(n){var r=e(n);return void 0===r?null:[t,r]}}}]),e}();is.closedBy=new is({deserialize:function(e){return e.split(" ")}}),is.openedBy=new is({deserialize:function(e){return e.split(" ")}}),is.group=new is({deserialize:function(e){return e.split(" ")}}),is.contextHash=new is({perNode:!0}),is.lookAhead=new is({perNode:!0}),is.mounted=new is({perNode:!0});var as=Object.create(null),os=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;k(this,e),this.name=t,this.props=n,this.id=r,this.flags=i}return b(e,[{key:"prop",value:function(e){return this.props[e.id]}},{key:"isTop",get:function(){return(1&this.flags)>0}},{key:"isSkipped",get:function(){return(2&this.flags)>0}},{key:"isError",get:function(){return(4&this.flags)>0}},{key:"isAnonymous",get:function(){return(8&this.flags)>0}},{key:"is",value:function(e){if("string"==typeof e){if(this.name==e)return!0;var t=this.prop(is.group);return!!t&&t.indexOf(e)>-1}return this.id==e}}],[{key:"define",value:function(t){var n=t.props&&t.props.length?Object.create(null):as,r=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),i=new e(t.name||"",n,t.id,r);if(t.props){var a,o=s(t.props);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(Array.isArray(u)||(u=u(i)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[u[0].id]=u[1]}}}catch(l){o.e(l)}finally{o.f()}}return i}},{key:"match",value:function(e){var t=Object.create(null);for(var n in e){var r,i=s(n.split(" "));try{for(i.s();!(r=i.n()).done;){var a=r.value;t[a]=e[n]}}catch(o){i.e(o)}finally{i.f()}}return function(e){for(var n=e.prop(is.group),r=-1;r<(n?n.length:0);r++){var i=t[r<0?e.name:n[r]];if(i)return i}}}}]),e}();os.none=new os("",Object.create(null),0,8);var ss,us=function(){function e(t){k(this,e),this.types=t;for(var n=0;n<t.length;n++)if(t[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}return b(e,[{key:"extend",value:function(){for(var t=[],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a,o=s(this.types);try{for(o.s();!(a=o.n()).done;){var u,l=a.value,c=null,f=s(r);try{for(f.s();!(u=f.n()).done;){var h=u.value,d=h(l);d&&(c||(c=Object.assign({},l.props)),c[d[0].id]=d[1])}}catch(p){f.e(p)}finally{f.f()}t.push(c?new os(l.name,c,l.id,l.flags):l)}}catch(p){o.e(p)}finally{o.f()}return new e(t)}}]),e}(),ls=new WeakMap,cs=new WeakMap;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(ss||(ss={}));var fs=function(){function e(t,n,r,i,a){if(k(this,e),this.type=t,this.children=n,this.positions=r,this.length=i,this.props=null,a&&a.length){this.props=Object.create(null);var u,l=s(a);try{for(l.s();!(u=l.n()).done;){var c=o(u.value,2),f=c[0],h=c[1];this.props["number"==typeof f?f:f.id]=h}}catch(d){l.e(d)}finally{l.f()}}}return b(e,[{key:"toString",value:function(){var e=this.prop(is.mounted);if(e&&!e.overlay)return e.tree.toString();var t,n="",r=s(this.children);try{for(r.s();!(t=r.n()).done;){var i=t.value.toString();i&&(n&&(n+=","),n+=i)}}catch(a){r.e(a)}finally{r.f()}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}},{key:"cursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ws(this.topNode,e)}},{key:"cursorAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ls.get(this)||this.topNode,r=new ws(n);return r.moveTo(e,t),ls.set(this,r._tree),r}},{key:"topNode",get:function(){return new ms(this,0,0,null)}},{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=gs(ls.get(this)||this.topNode,e,t,!1);return ls.set(this,n),n}},{key:"resolveInner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=gs(cs.get(this)||this.topNode,e,t,!0);return cs.set(this,n),n}},{key:"iterate",value:function(e){for(var t=e.enter,n=e.leave,r=e.from,i=void 0===r?0:r,a=e.to,o=void 0===a?this.length:a,s=this.cursor((e.mode||0)|ss.IncludeAnonymous);;){var u=!1;if(s.from<=o&&s.to>=i&&(s.type.isAnonymous||!1!==t(s))){if(s.firstChild())continue;u=!0}for(;u&&n&&!s.type.isAnonymous&&n(s),!s.nextSibling();){if(!s.parent())return;u=!0}}}},{key:"prop",value:function(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}},{key:"propValues",get:function(){var e=[];if(this.props)for(var t in this.props)e.push([+t,this.props[t]]);return e}},{key:"balance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:Os(os.none,this.children,this.positions,0,this.children.length,0,this.length,(function(n,r,i){return new e(t.type,n,r,i,t.propValues)}),n.makeTree||function(t,n,r){return new e(os.none,t,n,r)})}}],[{key:"build",value:function(e){return As(e)}}]),e}();fs.empty=new fs(os.none,[],[],0);var hs=function(){function e(t,n){k(this,e),this.buffer=t,this.index=n}return b(e,[{key:"id",get:function(){return this.buffer[this.index-4]}},{key:"start",get:function(){return this.buffer[this.index-3]}},{key:"end",get:function(){return this.buffer[this.index-2]}},{key:"size",get:function(){return this.buffer[this.index-1]}},{key:"pos",get:function(){return this.index}},{key:"next",value:function(){this.index-=4}},{key:"fork",value:function(){return new e(this.buffer,this.index)}}]),e}(),ds=function(){function e(t,n,r){k(this,e),this.buffer=t,this.length=n,this.set=r}return b(e,[{key:"type",get:function(){return os.none}},{key:"toString",value:function(){for(var e=[],t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}},{key:"childString",value:function(e){var t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;for(var a=[];e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return i+"("+a.join(",")+")"}},{key:"findChild",value:function(e,t,n,r,i){for(var a=this.buffer,o=-1,s=e;s!=t&&!(ps(i,r,a[s+1],a[s+2])&&(o=s,n>0));s=a[s+3]);return o}},{key:"slice",value:function(t,n,r,i){for(var a=this.buffer,o=new Uint16Array(n-t),s=t,u=0;s<n;)o[u++]=a[s++],o[u++]=a[s++]-r,o[u++]=a[s++]-r,o[u++]=a[s++]-t;return new e(o,i-r,this.set)}}]),e}();function ps(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function vs(e,t){for(var n=e.childBefore(t);n;){var r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(e=n,n=r.prevSibling):n=r}return e}function gs(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){var a=!r&&e instanceof ms&&e.index<0?null:e.parent;if(!a)return e;e=a}var o=r?0:ss.IgnoreOverlays;if(r)for(var s=e,u=s.parent;u;u=(s=u).parent)s instanceof ms&&s.index<0&&(null===(i=u.enter(t,n,o))||void 0===i?void 0:i.from)!=s.from&&(e=u);for(;;){var l=e.enter(t,n,o);if(!l)return e;e=l}}var ms=function(){function e(t,n,r,i){k(this,e),this._tree=t,this.from=n,this.index=r,this._parent=i}return b(e,[{key:"type",get:function(){return this._tree.type}},{key:"name",get:function(){return this._tree.type.name}},{key:"to",get:function(){return this.from+this._tree.length}},{key:"nextChild",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this;;){for(var s=o._tree,u=s.children,l=s.positions,c=n>0?u.length:-1;t!=c;t+=n){var f=u[t],h=l[t]+o.from;if(ps(i,r,h,h+f.length))if(f instanceof ds){if(a&ss.ExcludeBuffers)continue;var d=f.findChild(0,f.buffer.length,n,r-h,i);if(d>-1)return new bs(new _s(o,f,t,h),null,d)}else if(a&ss.IncludeAnonymous||!f.type.isAnonymous||xs(f)){var p=void 0;if(!(a&ss.IgnoreMounts)&&f.props&&(p=f.prop(is.mounted))&&!p.overlay)return new e(p.tree,h,t,o);var v=new e(f,h,t,o);return a&ss.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(n<0?f.children.length-1:0,n,r,i)}}if(a&ss.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+n:n<0?-1:o._parent._tree.children.length,!(o=o._parent))return null}}},{key:"firstChild",get:function(){return this.nextChild(0,1,0,4)}},{key:"lastChild",get:function(){return this.nextChild(this._tree.children.length-1,-1,0,4)}},{key:"childAfter",value:function(e){return this.nextChild(0,1,e,2)}},{key:"childBefore",value:function(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}},{key:"enter",value:function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(i&ss.IgnoreOverlays)&&(r=this._tree.prop(is.mounted))&&r.overlay){var a,o=t-this.from,u=s(r.overlay);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=l.from,f=l.to;if((n>0?c<=o:c<o)&&(n<0?f>=o:f>o))return new e(r.tree,r.overlay[0].from+this.from,-1,this)}}catch(h){u.e(h)}finally{u.f()}}return this.nextChild(0,1,t,n,i)}},{key:"nextSignificantParent",value:function(){for(var e=this;e.type.isAnonymous&&e._parent;)e=e._parent;return e}},{key:"parent",get:function(){return this._parent?this._parent.nextSignificantParent():null}},{key:"nextSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}},{key:"prevSibling",get:function(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}},{key:"cursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ws(this,e)}},{key:"tree",get:function(){return this._tree}},{key:"toTree",value:function(){return this._tree}},{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return gs(this,e,t,!1)}},{key:"resolveInner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return gs(this,e,t,!0)}},{key:"enterUnfinishedNodesBefore",value:function(e){return vs(this,e)}},{key:"getChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=ys(this,e,t,n);return r.length?r[0]:null}},{key:"getChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ys(this,e,t,n)}},{key:"toString",value:function(){return this._tree.toString()}},{key:"node",get:function(){return this}},{key:"matchContext",value:function(e){return ks(this,e)}}]),e}();function ys(e,t,n,r){var i=e.cursor(),a=[];if(!i.firstChild())return a;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return a;for(;;){if(null!=r&&i.type.is(r))return a;if(i.type.is(t)&&a.push(i.node),!i.nextSibling())return null==r?a:[]}}function ks(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1,r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}var _s=b((function e(t,n,r,i){k(this,e),this.parent=t,this.buffer=n,this.index=r,this.start=i})),bs=function(){function e(t,n,r){k(this,e),this.context=t,this._parent=n,this.index=r,this.type=t.buffer.set.types[t.buffer.buffer[r]]}return b(e,[{key:"name",get:function(){return this.type.name}},{key:"from",get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]}},{key:"to",get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]}},{key:"child",value:function(t,n,r){var i=this.context.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],t,n-this.context.start,r);return a<0?null:new e(this.context,this,a)}},{key:"firstChild",get:function(){return this.child(1,0,4)}},{key:"lastChild",get:function(){return this.child(-1,0,4)}},{key:"childAfter",value:function(e){return this.child(1,e,2)}},{key:"childBefore",value:function(e){return this.child(-1,e,-2)}},{key:"enter",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r&ss.ExcludeBuffers)return null;var i=this.context.buffer,a=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,t-this.context.start,n);return a<0?null:new e(this.context,this,a)}},{key:"parent",get:function(){return this._parent||this.context.parent.nextSignificantParent()}},{key:"externalSibling",value:function(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}},{key:"nextSibling",get:function(){var t=this.context.buffer,n=t.buffer[this.index+3];return n<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new e(this.context,this._parent,n):this.externalSibling(1)}},{key:"prevSibling",get:function(){var t=this.context.buffer,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new e(this.context,this._parent,t.findChild(n,this.index,-1,0,4))}},{key:"cursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new ws(this,e)}},{key:"tree",get:function(){return null}},{key:"toTree",value:function(){var e=[],t=[],n=this.context.buffer,r=this.index+4,i=n.buffer[this.index+3];if(i>r){var a=n.buffer[this.index+1],o=n.buffer[this.index+2];e.push(n.slice(r,i,a,o)),t.push(0)}return new fs(this.type,e,t,this.to-this.from)}},{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return gs(this,e,t,!1)}},{key:"resolveInner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return gs(this,e,t,!0)}},{key:"enterUnfinishedNodesBefore",value:function(e){return vs(this,e)}},{key:"toString",value:function(){return this.context.buffer.childString(this.index)}},{key:"getChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=ys(this,e,t,n);return r.length?r[0]:null}},{key:"getChildren",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ys(this,e,t,n)}},{key:"node",get:function(){return this}},{key:"matchContext",value:function(e){return ks(this,e)}}]),e}(),ws=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(k(this,e),this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof ms)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(var r=t._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=t,this.yieldBuf(t.index)}}return b(e,[{key:"name",get:function(){return this.type.name}},{key:"yieldNode",value:function(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}},{key:"yieldBuf",value:function(e,t){this.index=e;var n=this.buffer,r=n.start,i=n.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}},{key:"yield",value:function(e){return!!e&&(e instanceof ms?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}},{key:"toString",value:function(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}},{key:"enterChild",value:function(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));var r=this.buffer.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}},{key:"firstChild",value:function(){return this.enterChild(1,0,4)}},{key:"lastChild",value:function(){return this.enterChild(-1,0,4)}},{key:"childAfter",value:function(e){return this.enterChild(1,e,2)}},{key:"childBefore",value:function(e){return this.enterChild(-1,e,-2)}},{key:"enter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&ss.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}},{key:"parent",value:function(){if(!this.buffer)return this.yieldNode(this.mode&ss.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var e=this.mode&ss.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}},{key:"sibling",value:function(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));var t=this.buffer.buffer,n=this.stack.length-1;if(e<0){var r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{var i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}},{key:"nextSibling",value:function(){return this.sibling(1)}},{key:"prevSibling",value:function(){return this.sibling(-1)}},{key:"atLastNode",value:function(e){var t,n,r=this.buffer;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(var i=0;i<this.index;i++)if(r.buffer.buffer[i+3]<this.index)return!1;t=r.index,n=r.parent}else{var a=this._tree;t=a.index,n=a._parent}for(;n;t=(o=n).index,n=o._parent,o){var o;if(t>-1)for(var s=t+e,u=e<0?-1:n._tree.children.length;s!=u;s+=e){var l=n._tree.children[s];if(this.mode&ss.IncludeAnonymous||l instanceof ds||!l.type.isAnonymous||xs(l))return!1}}return!0}},{key:"move",value:function(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}},{key:"next",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}},{key:"prev",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}},{key:"moveTo",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}},{key:"node",get:function(){if(!this.buffer)return this._tree;var e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(var r=this.index,i=this.stack.length;i>=0;){for(var a=e;a;a=a._parent)if(a.index==r){if(r==this.index)return a;t=a,n=i+1;break e}r=this.stack[--i]}for(var o=n;o<this.stack.length;o++)t=new bs(this.buffer,t,this.stack[o]);return this.bufferNode=new bs(this.buffer,t,this.index)}},{key:"tree",get:function(){return this.buffer?null:this._tree._tree}},{key:"iterate",value:function(e,t){for(var n=0;;){var r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}},{key:"matchContext",value:function(e){if(!this.buffer)return ks(this.node,e);for(var t=this.buffer.buffer,n=t.set.types,r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return ks(this.node,e,r);var a=n[t.buffer[this.stack[i]]];if(!a.isAnonymous){if(e[r]&&e[r]!=a.name)return!1;r--}}return!0}}]),e}();function xs(e){return e.children.some((function(e){return e instanceof ds||!e.type.isAnonymous||xs(e)}))}function As(e){var t,n=e.buffer,r=e.nodeSet,i=e.maxBufferLength,a=void 0===i?1024:i,o=e.reused,s=void 0===o?[]:o,u=e.minRepeatType,l=void 0===u?r.types.length:u,c=Array.isArray(n)?new hs(n,n.length):n,f=r.types,h=0,d=0;function p(e,t,n,i,o){for(var u=c.id,y=c.start,k=c.end,_=c.size,b=d;_<0;){if(c.next(),-1==_){var w=s[u];return n.push(w),void i.push(y-e)}if(-3==_)return void(h=u);if(-4==_)return void(d=u);throw new RangeError("Unrecognized record size: ".concat(_))}var x,A,S=f[u],L=y-e;if(k-y<=a&&(A=function(e,t){var n=c.fork(),r=0,i=0,o=0,s=n.end-a,u={size:0,start:0,skip:0};e:for(var f=n.pos-e;n.pos>f;){var h=n.size;if(n.id==t&&h>=0)u.size=r,u.start=i,u.skip=o,o+=4,r+=4,n.next();else{var d=n.pos-h;if(h<0||d<f||n.start<s)break;var p=n.id>=l?4:0,v=n.start;for(n.next();n.pos>d;){if(n.size<0){if(-3!=n.size)break e;p+=4}else n.id>=l&&(p+=4);n.next()}i=v,r+=h,o+=p}}(t<0||r==e)&&(u.size=r,u.start=i,u.skip=o);return u.size>4?u:void 0}(c.pos-t,o))){for(var O=new Uint16Array(A.size-A.skip),T=c.pos-A.size,E=O.length;c.pos>T;)E=m(A.start,O,E);x=new ds(O,k-A.start,r),L=A.start-e}else{var C=c.pos-_;c.next();for(var M=[],N=[],R=u>=l?u:-1,P=0,I=k;c.pos>C;)R>=0&&c.id==R&&c.size>=0?(c.end<=I-a&&(v(M,N,y,P,c.end,I,R,b),P=M.length,I=c.end),c.next()):p(y,C,M,N,R);if(R>=0&&P>0&&P<M.length&&v(M,N,y,P,y,I,R,b),M.reverse(),N.reverse(),R>-1&&P>0){var D=function(e){return function(t,n,r){var i,a,o=0,s=t.length-1;if(s>=0&&(i=t[s])instanceof fs){if(!s&&i.type==e&&i.length==r)return i;(a=i.prop(is.lookAhead))&&(o=n[s]+i.length+a)}return g(e,t,n,r,o)}}(S);x=Os(S,M,N,0,M.length,0,k-y,D,D)}else x=g(S,M,N,k-y,b-k)}n.push(x),i.push(L)}function v(e,t,n,i,a,o,s,u){for(var l=[],c=[];e.length>i;)l.push(e.pop()),c.push(t.pop()+n-a);e.push(g(r.types[s],l,c,o-a,u-o)),t.push(a-n)}function g(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;if(h){var o=[is.contextHash,h];a=a?[o].concat(a):[o]}if(i>25){var s=[is.lookAhead,i];a=a?[s].concat(a):[s]}return new fs(e,t,n,r,a)}function m(e,t,n){var r=c.id,i=c.start,a=c.end,o=c.size;if(c.next(),o>=0&&r<l){var s=n;if(o>4)for(var u=c.pos-(o-4);c.pos>u;)n=m(e,t,n);t[--n]=s,t[--n]=a-e,t[--n]=i-e,t[--n]=r}else-3==o?h=r:-4==o&&(d=r);return n}for(var y=[],k=[];c.pos>0;)p(e.start||0,e.bufferStart||0,y,k,-1);var _=null!==(t=e.length)&&void 0!==t?t:y.length?k[0]+y[0].length:0;return new fs(f[e.topID],y.reverse(),k.reverse(),_)}var Ss=new WeakMap;function Ls(e,t){if(!e.isAnonymous||t instanceof ds||t.type!=e)return 1;var n=Ss.get(t);if(null==n){n=1;var r,i=s(t.children);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.type!=e||!(a instanceof fs)){n=1;break}n+=Ls(e,a)}}catch(o){i.e(o)}finally{i.f()}Ss.set(t,n)}return n}function Os(e,t,n,r,i,a,o,s,u){for(var l=0,c=r;c<i;c++)l+=Ls(e,t[c]);var f=Math.ceil(1.5*l/8),h=[],d=[];return function t(n,r,i,o,s){for(var l=i;l<o;){var c=l,p=r[l],v=Ls(e,n[l]);for(l++;l<o;l++){var g=Ls(e,n[l]);if(v+g>=f)break;v+=g}if(l==c+1){if(v>f){var m=n[c];t(m.children,m.positions,0,m.children.length,r[c]+s);continue}h.push(n[c])}else{var y=r[l-1]+n[l-1].length-p;h.push(Os(e,n,r,c,l,p,y,null,u))}d.push(p+s-a)}}(t,n,r,i,0),(s||u)(h,d,o)}var Ts=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];k(this,e),this.from=t,this.to=n,this.tree=r,this.offset=i,this.open=(a?1:0)|(o?2:0)}return b(e,[{key:"openStart",get:function(){return(1&this.open)>0}},{key:"openEnd",get:function(){return(2&this.open)>0}}],[{key:"addTree",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[new e(0,t.length,t,0,!1,i)],o=s(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;u.to>t.length&&a.push(u)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"applyChanges",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!n.length)return t;for(var i=[],a=1,o=t.length?t[0]:null,s=0,u=0,l=0;;s++){var c=s<n.length?n[s]:null,f=c?c.fromA:1e9;if(f-u>=r)for(;o&&o.from<f;){var h=o;if(u>=h.from||f<=h.to||l){var d=Math.max(h.from,u)-l,p=Math.min(h.to,f)-l;h=d>=p?null:new e(d,p,h.tree,h.offset+l,s>0,!!c)}if(h&&i.push(h),o.to>f)break;o=a<t.length?t[a++]:null}if(!c)break;u=c.toA,l=c.toA-c.toB}return i}}]),e}(),Es=function(){function e(){k(this,e)}return b(e,[{key:"startParse",value:function(e,t,n){return"string"==typeof e&&(e=new Cs(e)),n=n?n.length?n.map((function(e){return new rs(e.from,e.to)})):[new rs(0,0)]:[new rs(0,e.length)],this.createParse(e,t||[],n)}},{key:"parse",value:function(e,t,n){for(var r=this.startParse(e,t,n);;){var i=r.advance();if(i)return i}}}]),e}(),Cs=function(){function e(t){k(this,e),this.string=t}return b(e,[{key:"length",get:function(){return this.string.length}},{key:"chunk",value:function(e){return this.string.slice(e)}},{key:"lineChunks",get:function(){return!1}},{key:"read",value:function(e,t){return this.string.slice(e,t)}}]),e}();new is({perNode:!0});var Ms=0,Ns=function(){function e(t,n,r){k(this,e),this.set=t,this.base=n,this.modified=r,this.id=Ms++}return b(e,null,[{key:"define",value:function(t){if(null===t||void 0===t?void 0:t.base)throw new Error("Can not derive from a modified tag");var n=new e([],null,[]);if(n.set.push(n),t){var r,i=s(t.set);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.set.push(a)}}catch(o){i.e(o)}finally{i.f()}}return n}},{key:"defineModifier",value:function(){var e=new Ps;return function(t){return t.modified.indexOf(e)>-1?t:Ps.get(t.base||t,t.modified.concat(e).sort((function(e,t){return e.id-t.id})))}}}]),e}(),Rs=0,Ps=function(){function e(){k(this,e),this.instances=[],this.id=Rs++}return b(e,null,[{key:"get",value:function(t,n){if(!n.length)return t;var r=n[0].instances.find((function(e){return e.base==t&&(r=n,i=e.modified,r.length==i.length&&r.every((function(e,t){return e==i[t]})));var r,i}));if(r)return r;var i,a=[],o=new Ns(a,t,n),u=s(n);try{for(u.s();!(i=u.n()).done;){i.value.instances.push(o)}}catch(g){u.e(g)}finally{u.f()}var l,c=Is(n),f=s(t.set);try{for(f.s();!(l=f.n()).done;){var h,d=l.value,p=s(c);try{for(p.s();!(h=p.n()).done;){var v=h.value;a.push(e.get(d,v))}}catch(g){p.e(g)}finally{p.f()}}}catch(g){f.e(g)}finally{f.f()}return o}}]),e}();function Is(e){for(var t=[e],n=0;n<e.length;n++){var r,i=s(Is(e.slice(0,n).concat(e.slice(n+1))));try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push(a)}}catch(o){i.e(o)}finally{i.f()}}return t}function Ds(e){var t=Object.create(null);for(var n in e){var r=e[n];Array.isArray(r)||(r=[r]);var i,a=s(n.split(" "));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o){for(var u=[],l=2,c=o,f=0;;){if("..."==c&&f>0&&f+3==o.length){l=1;break}var h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!h)throw new RangeError("Invalid path: "+o);if(u.push("*"==h[0]?"":'"'==h[0][0]?JSON.parse(h[0]):h[0]),(f+=h[0].length)==o.length)break;var d=o[f++];if(f==o.length&&"!"==d){l=0;break}if("/"!=d)throw new RangeError("Invalid path: "+o);c=o.slice(f)}var p=u.length-1,v=u[p];if(!v)throw new RangeError("Invalid path: "+o);var g=new Bs(r,l,p>0?u.slice(0,p):null);t[v]=g.sort(t[v])}}}catch(m){a.e(m)}finally{a.f()}}return Us.add(t)}var Us=new is,Bs=function(){function e(t,n,r,i){k(this,e),this.tags=t,this.mode=n,this.context=r,this.next=i}return b(e,[{key:"sort",value:function(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}},{key:"depth",get:function(){return this.context?this.context.length:0}}]),e}();function Vs(e,t){var n,r=Object.create(null),i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(Array.isArray(a.tag)){var o,u=s(a.tag);try{for(u.s();!(o=u.n()).done;){var l=o.value;r[l.id]=a.class}}catch(p){u.e(p)}finally{u.f()}}else r[a.tag.id]=a.class}}catch(p){i.e(p)}finally{i.f()}var c=t||{},f=c.scope,h=c.all,d=void 0===h?null:h;return{style:function(e){var t,n=d,i=s(e);try{for(i.s();!(t=i.n()).done;){var a,o=s(t.value.set);try{for(o.s();!(a=o.n()).done;){var u=a.value,l=r[u.id];if(l){n=n?n+" "+l:l;break}}}catch(p){o.e(p)}finally{o.f()}}}catch(p){i.e(p)}finally{i.f()}return n},scope:f}}function Fs(e,t){var n,r=null,i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.style(t);a&&(r=r?r+" "+a:a)}}catch(o){i.e(o)}finally{i.f()}return r}function zs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,a=new Hs(r,Array.isArray(t)?t:[t],n);a.highlightRange(e.cursor(),r,i,"",a.highlighters),a.flush(i)}var js,Hs=function(){function e(t,n,r){k(this,e),this.at=t,this.highlighters=n,this.span=r,this.class=""}return b(e,[{key:"startSpan",value:function(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}},{key:"flush",value:function(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}},{key:"highlightRange",value:function(e,t,n,r,i){var a=e.type,o=e.from,s=e.to;if(!(o>=n||s<=t)){a.isTop&&(i=this.highlighters.filter((function(e){return!e.scope||e.scope(a)})));for(var u=r,l=a.prop(Us),c=!1;l;){if(!l.context||e.matchContext(l.context)){var f=Fs(i,l.tags);f&&(u&&(u+=" "),u+=f,1==l.mode?r+=(r?" ":"")+f:0==l.mode&&(c=!0));break}l=l.next}if(this.startSpan(e.from,u),!c){var h=e.tree&&e.tree.prop(is.mounted);if(h&&h.overlay){for(var d=e.node.enter(h.overlay[0].from+o,1),p=this.highlighters.filter((function(e){return!e.scope||e.scope(h.tree.type)})),v=e.firstChild(),g=0,m=o;;g++){var y=g<h.overlay.length?h.overlay[g]:null,k=y?y.from+o:s,_=Math.max(t,m),b=Math.min(n,k);if(_<b&&v)for(;e.from<b&&(this.highlightRange(e,_,b,r,i),this.startSpan(Math.min(n,e.to),u),!(e.to>=k)&&e.nextSibling()););if(!y||k>n)break;(m=y.to+o)>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+o),Math.min(n,m),r,p),this.startSpan(m,u))}v&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),u)}}while(e.nextSibling());e.parent()}}}}}]),e}(),Gs=Ns.define,Ks=Gs(),Ws=Gs(),Xs=Gs(Ws),qs=Gs(Ws),Qs=Gs(),$s=Gs(Qs),Js=Gs(Qs),Ys=Gs(),Zs=Gs(Ys),eu=Gs(),tu=Gs(),nu=Gs(),ru=Gs(nu),iu=Gs(),au={comment:Ks,lineComment:Gs(Ks),blockComment:Gs(Ks),docComment:Gs(Ks),name:Ws,variableName:Gs(Ws),typeName:Xs,tagName:Gs(Xs),propertyName:qs,attributeName:Gs(qs),className:Gs(Ws),labelName:Gs(Ws),namespace:Gs(Ws),macroName:Gs(Ws),literal:Qs,string:$s,docString:Gs($s),character:Gs($s),attributeValue:Gs($s),number:Js,integer:Gs(Js),float:Gs(Js),bool:Gs(Qs),regexp:Gs(Qs),escape:Gs(Qs),color:Gs(Qs),url:Gs(Qs),keyword:eu,self:Gs(eu),null:Gs(eu),atom:Gs(eu),unit:Gs(eu),modifier:Gs(eu),operatorKeyword:Gs(eu),controlKeyword:Gs(eu),definitionKeyword:Gs(eu),moduleKeyword:Gs(eu),operator:tu,derefOperator:Gs(tu),arithmeticOperator:Gs(tu),logicOperator:Gs(tu),bitwiseOperator:Gs(tu),compareOperator:Gs(tu),updateOperator:Gs(tu),definitionOperator:Gs(tu),typeOperator:Gs(tu),controlOperator:Gs(tu),punctuation:nu,separator:Gs(nu),bracket:ru,angleBracket:Gs(ru),squareBracket:Gs(ru),paren:Gs(ru),brace:Gs(ru),content:Ys,heading:Zs,heading1:Gs(Zs),heading2:Gs(Zs),heading3:Gs(Zs),heading4:Gs(Zs),heading5:Gs(Zs),heading6:Gs(Zs),contentSeparator:Gs(Ys),list:Gs(Ys),quote:Gs(Ys),emphasis:Gs(Ys),strong:Gs(Ys),link:Gs(Ys),monospace:Gs(Ys),strikethrough:Gs(Ys),inserted:Gs(),deleted:Gs(),changed:Gs(),invalid:Gs(),meta:iu,documentMeta:Gs(iu),annotation:Gs(iu),processingInstruction:Gs(iu),definition:Ns.defineModifier(),constant:Ns.defineModifier(),function:Ns.defineModifier(),standard:Ns.defineModifier(),local:Ns.defineModifier(),special:Ns.defineModifier()},ou=(Vs([{tag:au.link,class:"tok-link"},{tag:au.heading,class:"tok-heading"},{tag:au.emphasis,class:"tok-emphasis"},{tag:au.strong,class:"tok-strong"},{tag:au.keyword,class:"tok-keyword"},{tag:au.atom,class:"tok-atom"},{tag:au.bool,class:"tok-bool"},{tag:au.url,class:"tok-url"},{tag:au.labelName,class:"tok-labelName"},{tag:au.inserted,class:"tok-inserted"},{tag:au.deleted,class:"tok-deleted"},{tag:au.literal,class:"tok-literal"},{tag:au.string,class:"tok-string"},{tag:au.number,class:"tok-number"},{tag:[au.regexp,au.escape,au.special(au.string)],class:"tok-string2"},{tag:au.variableName,class:"tok-variableName"},{tag:au.local(au.variableName),class:"tok-variableName tok-local"},{tag:au.definition(au.variableName),class:"tok-variableName tok-definition"},{tag:au.special(au.variableName),class:"tok-variableName2"},{tag:au.definition(au.propertyName),class:"tok-propertyName tok-definition"},{tag:au.typeName,class:"tok-typeName"},{tag:au.namespace,class:"tok-namespace"},{tag:au.className,class:"tok-className"},{tag:au.macroName,class:"tok-macroName"},{tag:au.propertyName,class:"tok-propertyName"},{tag:au.operator,class:"tok-operator"},{tag:au.comment,class:"tok-comment"},{tag:au.meta,class:"tok-meta"},{tag:au.invalid,class:"tok-invalid"},{tag:au.punctuation,class:"tok-punctuation"}]),new is);function su(e){return ie.define({combine:e?function(t){return t.concat(e)}:void 0})}var uu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];k(this,e),this.data=t,Ke.prototype.hasOwnProperty("tree")||Object.defineProperty(Ke.prototype,"tree",{get:function(){return fu(this)}}),this.parser=n,this.extension=[_u.of(this),Ke.languageData.of((function(e,t,n){return e.facet(lu(e,t,n))}))].concat(r)}return b(e,[{key:"isActiveAt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return lu(e,t,n)==this.data}},{key:"findRegions",value:function(e){var t=this,n=e.facet(_u);if((null===n||void 0===n?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];var r=[];return function e(n,i){if(n.prop(ou)!=t.data){var a=n.prop(is.mounted);if(a){if(a.tree.prop(ou)==t.data){if(a.overlay){var o,u=s(a.overlay);try{for(u.s();!(o=u.n()).done;){var l=o.value;r.push({from:l.from+i,to:l.to+i})}}catch(d){u.e(d)}finally{u.f()}}else r.push({from:i,to:i+n.length});return}if(a.overlay){var c=r.length;if(e(a.tree,a.overlay[0].from+i),r.length>c)return}}for(var f=0;f<n.children.length;f++){var h=n.children[f];h instanceof fs&&e(h,n.positions[f]+i)}}else r.push({from:i,to:i+n.length})}(fu(e),0),r}},{key:"allowsNesting",get:function(){return!0}}]),e}();function lu(e,t,n){var r=e.facet(_u);if(!r)return null;var i=r.data;if(r.allowsNesting)for(var a=fu(e).topNode;a;a=a.enter(t,n,ss.ExcludeBuffers))i=a.type.prop(ou)||i;return i}uu.setState=Re.define();var cu=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).parser=r,i}return b(n,[{key:"configure",value:function(e){return new n(this.data,this.parser.configure(e))}},{key:"allowsNesting",get:function(){return this.parser.hasWrappers()}}],[{key:"define",value:function(e){var t=su(e.languageData);return new n(t,e.parser.configure({props:[ou.add((function(e){return e.isTop?t:void 0}))]}))}}]),n}(uu);function fu(e){var t=e.field(uu.state,!1);return t?t.tree:fs.empty}var hu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length;k(this,e),this.doc=t,this.length=n,this.cursorPos=0,this.string="",this.cursor=t.iter()}return b(e,[{key:"syncTo",value:function(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}},{key:"chunk",value:function(e){return this.syncTo(e),this.string}},{key:"lineChunks",get:function(){return!0}},{key:"read",value:function(e,t){var n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}]),e}(),du=null,pu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;k(this,e),this.parser=t,this.state=n,this.fragments=r,this.tree=i,this.treeLen=a,this.viewport=o,this.skipped=s,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}return b(e,[{key:"startParse",value:function(){return this.parser.startParse(new hu(this.state.doc),this.fragments)}},{key:"work",value:function(e,t){var n=this;return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=fs.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((function(){var r;if("number"==typeof e){var i=Date.now()+e;e=function(){return Date.now()>i}}for(n.parse||(n.parse=n.startParse()),null!=t&&(null==n.parse.stoppedAt||n.parse.stoppedAt>t)&&t<n.state.doc.length&&n.parse.stopAt(t);;){var a=n.parse.advance();if(a){if(n.fragments=n.withoutTempSkipped(Ts.addTree(a,n.fragments,null!=n.parse.stoppedAt)),n.treeLen=null!==(r=n.parse.stoppedAt)&&void 0!==r?r:n.state.doc.length,n.tree=a,n.parse=null,!(n.treeLen<(null!==t&&void 0!==t?t:n.state.doc.length)))return!0;n.parse=n.startParse()}if(e())return!1}}))}},{key:"takeTree",value:function(){var e,t,n=this;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((function(){for(;!(t=n.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ts.addTree(this.tree,this.fragments,!0)),this.parse=null)}},{key:"withContext",value:function(e){var t=du;du=this;try{return e()}finally{du=t}}},{key:"withoutTempSkipped",value:function(e){for(var t;t=this.tempSkipped.pop();)e=vu(e,t.from,t.to);return e}},{key:"changes",value:function(t,n){var r=this.fragments,i=this.tree,a=this.treeLen,o=this.viewport,u=this.skipped;if(this.takeTree(),!t.empty){var l=[];if(t.iterChangedRanges((function(e,t,n,r){return l.push({fromA:e,toA:t,fromB:n,toB:r})})),r=Ts.applyChanges(r,l),i=fs.empty,a=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){u=[];var c,f=s(this.skipped);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=t.mapPos(h.from,1),p=t.mapPos(h.to,-1);d<p&&u.push({from:d,to:p})}}catch(v){f.e(v)}finally{f.f()}}}return new e(this.parser,n,r,i,a,o,u,this.scheduleOn)}},{key:"updateViewport",value:function(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;for(var t=this.skipped.length,n=0;n<this.skipped.length;n++){var r=this.skipped[n],i=r.from,a=r.to;i<e.to&&a>e.from&&(this.fragments=vu(this.fragments,i,a),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}},{key:"reset",value:function(){this.parse&&(this.takeTree(),this.parse=null)}},{key:"skipUntilInView",value:function(e,t){this.skipped.push({from:e,to:t})}},{key:"isDone",value:function(e){e=Math.min(e,this.state.doc.length);var t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}}],[{key:"create",value:function(t,n,r){return new e(t,n,[],fs.empty,0,r,[],null)}},{key:"getSkippingParser",value:function(e){return new(function(t){v(r,t);var n=y(r);function r(){return k(this,r),n.apply(this,arguments)}return b(r,[{key:"createParse",value:function(t,n,r){var i=r[0].from,a=r[r.length-1].to,o={parsedPos:i,advance:function(){var t=du;if(t){var n,o=s(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;t.tempSkipped.push(u)}}catch(l){o.e(l)}finally{o.f()}e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=a,new fs(os.none,[],[],a-i)},stoppedAt:null,stopAt:function(){}};return o}}]),r}(Es))}},{key:"get",value:function(){return du}}]),e}();function vu(e,t,n){return Ts.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}var gu=function(){function e(t){k(this,e),this.context=t,this.tree=t.tree}return b(e,[{key:"apply",value:function(t){if(!t.docChanged&&this.tree==this.context.tree)return this;var n=this.context.changes(t.changes,t.state),r=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new e(n)}}],[{key:"init",value:function(t){var n=Math.min(3e3,t.doc.length),r=pu.create(t.facet(_u).parser,t,{from:0,to:n});return r.work(20,n)||r.takeTree(),new e(r)}}]),e}();uu.state=ce.define({create:gu.init,update:function(e,t){var n,r=s(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.is(uu.setState))return i.value}}catch(a){r.e(a)}finally{r.f()}return t.startState.facet(_u)!=t.state.facet(_u)?gu.init(t.state):e.apply(t)}});var mu=function(e){var t=setTimeout((function(){return e()}),500);return function(){return clearTimeout(t)}};"undefined"!=typeof requestIdleCallback&&(mu=function(e){var t=-1,n=setTimeout((function(){t=requestIdleCallback(e,{timeout:400})}),100);return function(){return t<0?clearTimeout(n):cancelIdleCallback(t)}});var yu="undefined"!=typeof navigator&&(null===(js=navigator.scheduling)||void 0===js?void 0:js.isInputPending)?function(){return navigator.scheduling.isInputPending()}:null,ku=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}return b(e,[{key:"update",value:function(e){var t=this.view.state.field(uu.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}},{key:"scheduleWork",value:function(){if(!this.working){var e=this.view.state,t=e.field(uu.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=mu(this.work))}}},{key:"work",value:function(e){this.working=null;var t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),!(this.chunkBudget<=0)){var n=this.view,r=n.state,i=n.viewport.to,a=r.field(uu.state);if(a.tree!=a.context.tree||!a.context.isDone(i+1e5)){var o=Date.now()+Math.min(this.chunkBudget,100,e&&!yu?Math.max(25,e.timeRemaining()-5):1e9),s=a.context.treeLen<i&&r.doc.length>i+1e3,u=a.context.work((function(){return yu&&yu()||Date.now()>o}),i+(s?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:uu.setState.of(new gu(a.context))})),this.chunkBudget>0&&(!u||s)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}}}},{key:"checkAsyncSchedule",value:function(e){var t=this;e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((function(){return t.scheduleWork()})).catch((function(e){return Qn(t.view.state,e)})).then((function(){return t.workScheduled--})),e.scheduleOn=null)}},{key:"destroy",value:function(){this.working&&this.working()}},{key:"isWorking",value:function(){return!!(this.working||this.workScheduled>0)}}]),e}(),{eventHandlers:{focus:function(){this.scheduleWork()}}}),_u=ie.define({combine:function(e){return e.length?e[0]:null},enables:[uu.state,ku]}),bu=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];k(this,e),this.language=t,this.support=n,this.extension=[t,n]})),wu=ie.define(),xu=ie.define({combine:function(e){if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function Au(e){var t=e.facet(xu);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Su(e,t){var n="",r=e.tabSize;if(9==e.facet(xu).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(var i=0;i<t;i++)n+=" ";return n}function Lu(e,t){e instanceof Ke&&(e=new Ou(e));var n,r=s(e.state.facet(wu));try{for(r.s();!(n=r.n()).done;){var i=(0,n.value)(e,t);if(null!=i)return i}}catch(o){r.e(o)}finally{r.f()}var a=fu(e.state);return a?function(e,t,n){return Cu(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,a,t):null}var Ou=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};k(this,e),this.state=t,this.options=n,this.unit=Au(t)}return b(e,[{key:"lineAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(e),r=this.options,i=r.simulateBreak,a=r.simulateDoubleBreak;return null!=i&&i>=n.from&&i<=n.to?a&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}},{key:"textAfterPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";var n=this.lineAt(e,t),r=n.text,i=n.from;return r.slice(e-i,Math.min(r.length,e+100-i))}},{key:"column",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.lineAt(e,t),r=n.text,i=n.from,a=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(a+=o-this.countColumn(r,r.search(/\S|$/))),a}},{key:"countColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return ct(e,this.state.tabSize,t)}},{key:"lineIndent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.lineAt(e,t),r=n.text,i=n.from,a=this.options.overrideIndentation;if(a){var o=a(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}},{key:"simulatedBreak",get:function(){return this.options.simulateBreak||null}}]),e}(),Tu=new is;function Eu(e){var t=e.type.prop(Tu);if(t)return t;var n,r=e.firstChild;if(r&&(n=r.type.prop(is.closedBy))){var i=e.lastChild,a=i&&n.indexOf(i.name)>-1;return function(e){return Pu(e,!0,1,void 0,a&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?i.from:void 0)}}return null==e.parent?Mu:null}function Cu(e,t,n){for(;e;e=e.parent){var r=Eu(e);if(r)return r(Nu.create(n,t,e))}return null}function Mu(){return 0}var Nu=function(e){v(n,e);var t=y(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e.state,e.options)).base=e,a.pos=r,a.node=i,a}return b(n,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var e=this.state.doc.lineAt(this.node.from);;){for(var t=this.node.resolve(e.from);t.parent&&t.parent.from==t.from;)t=t.parent;if(Ru(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}},{key:"continue",value:function(){var e=this.node.parent;return e?Cu(e,this.pos,this.base):0}}],[{key:"create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ou);function Ru(e,t){for(var n=t;n;n=n.parent)if(e==n)return!0;return!1}function Pu(e,t,n,r,i){var a=e.textAfter,o=a.match(/^\s*/)[0].length,s=r&&a.slice(o,o+r.length)==r||i==e.pos+o,u=t?function(e){var t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;for(var i=e.options.simulateBreak,a=e.state.doc.lineAt(n.from),o=null==i||i<=a.from?a.to:Math.min(a.to,i),s=n.to;;){var u=t.childAfter(s);if(!u||u==r)return null;if(!u.type.isSkipped)return u.from<o?n:null;s=u.to}}(e):null;return u?s?e.column(u.from):e.column(u.to):e.baseIndent+(s?0:e.unit*n)}function Iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.except,n=e.units,r=void 0===n?1:n;return function(e){var n=t&&t.test(e.textAfter);return e.baseIndent+(n?0:r*e.unit)}}function Du(){return Ke.transactionFilter.of((function(e){if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;var t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;var n=e.newDoc,r=e.newSelection.main.head,i=n.lineAt(r);if(r>i.from+200)return e;var a=n.sliceString(i.from,r);if(!t.some((function(e){return e.test(a)})))return e;var o,u=e.state,l=-1,c=[],f=s(u.selection.ranges);try{for(f.s();!(o=f.n()).done;){var h=o.value.head,d=u.doc.lineAt(h);if(d.from!=l){l=d.from;var p=Lu(u,d.from);if(null!=p){var v=/^\s*/.exec(d.text)[0],g=Su(u,p);v!=g&&c.push({from:d.from,to:d.from+v.length,insert:g})}}}}catch(m){f.e(m)}finally{f.f()}return c.length?[e,{changes:c,sequential:!0}]:e}))}var Uu=ie.define(),Bu=new is;function Vu(e){var t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function Fu(e,t,n){var r,i=s(e.facet(Uu));try{for(i.s();!(r=i.n()).done;){var a=(0,r.value)(e,t,n);if(a)return a}}catch(o){i.e(o)}finally{i.f()}return function(e,t,n){var r=fu(e);if(r.length<n)return null;for(var i=null,a=r.resolveInner(n);a;a=a.parent)if(!(a.to<=n||a.from>n)){if(i&&a.from<t)break;var o=a.type.prop(Bu);if(o&&(a.to<r.length-50||r.length==e.doc.length||!Vu(a))){var s=o(a,e);s&&s.from<=n&&s.from>=t&&s.to>n&&(i=s)}}return i}(e,t,n)}function zu(e,t){var n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}var ju=Re.define({map:zu}),Hu=Re.define({map:zu});function Gu(e){var t,n=[],r=s(e.state.selection.ranges);try{var i=function(){var r=t.value.head;if(n.some((function(e){return e.from<=r&&e.to>=r})))return"continue";n.push(e.lineBlockAt(r))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n}var Ku=ce.define({create:function(){return En.none},update:function(e,t){e=e.map(t.changes);var n,r=s(t.effects);try{var i=function(){var t=n.value;t.is(ju)&&!function(e,t,n){var r=!1;return e.between(t,t,(function(e,i){e==t&&i==n&&(r=!0)})),r}(e,t.value.from,t.value.to)?e=e.update({add:[Zu.range(t.value.from,t.value.to)]}):t.is(Hu)&&(e=e.update({filter:function(e,n){return t.value.from!=e||t.value.to!=n},filterFrom:t.value.from,filterTo:t.value.to}))};for(r.s();!(n=r.n()).done;)i()}catch(u){r.e(u)}finally{r.f()}if(t.selection){var a=!1,o=t.selection.main.head;e.between(o,o,(function(e,t){e<o&&t>o&&(a=!0)})),a&&(e=e.update({filterFrom:o,filterTo:o,filter:function(e,t){return t<=o||e>=o}}))}return e},provide:function(e){return fa.decorations.from(e)}});function Wu(e,t,n){var r,i=null;return null===(r=e.field(Ku,!1))||void 0===r||r.between(t,n,(function(e,t){(!i||i.from>e)&&(i={from:e,to:t})})),i}function Xu(e,t){return e.field(Ku,!1)?t:t.concat(Re.appendConfig.of(Yu()))}function qu(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return fa.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(r," ").concat(e.state.phrase("to")," ").concat(i,"."))}var Qu=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:function(e){var t,n=s(Gu(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=Fu(e.state,r.from,r.to);if(i)return e.dispatch({effects:Xu(e.state,[ju.of(i),qu(e,i)])}),!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:function(e){if(!e.state.field(Ku,!1))return!1;var t,n=[],r=s(Gu(e));try{for(r.s();!(t=r.n()).done;){var i=t.value,a=Wu(e.state,i.from,i.to);a&&n.push(Hu.of(a),qu(e,a,!1))}}catch(o){r.e(o)}finally{r.f()}return n.length&&e.dispatch({effects:n}),n.length>0}},{key:"Ctrl-Alt-[",run:function(e){for(var t=e.state,n=[],r=0;r<t.doc.length;){var i=e.lineBlockAt(r),a=Fu(t,i.from,i.to);a&&n.push(ju.of(a)),r=(a?e.lineBlockAt(a.to):i).to+1}return n.length&&e.dispatch({effects:Xu(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:function(e){var t=e.state.field(Ku,!1);if(!t||!t.size)return!1;var n=[];return t.between(0,e.state.doc.length,(function(e,t){n.push(Hu.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],$u={placeholderDOM:null,placeholderText:"\u2026"},Ju=ie.define({combine:function(e){return We(e,$u)}});function Yu(e){var t=[Ku,rl];return e&&t.push(Ju.of(e)),t}var Zu=En.replace({widget:new(function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"toDOM",value:function(e){var t=e.state,n=t.facet(Ju),r=function(t){var n=e.lineBlockAt(e.posAtDOM(t.target)),r=Wu(e.state,n.from,n.to);r&&e.dispatch({effects:Hu.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);var i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}]),n}(On))}),el={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{}},tl=function(e){v(n,e);var t=y(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).config=e,i.open=r,i}return b(n,[{key:"eq",value:function(e){return this.config==e.config&&this.open==e.open}},{key:"toDOM",value:function(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);var t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}]),n}(No);function nl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},el),e),n=new tl(t,!0),r=new tl(t,!1),i=Zn.fromClass(function(){function e(t){k(this,e),this.from=t.viewport.from,this.markers=this.buildMarkers(t)}return b(e,[{key:"update",value:function(e){(e.docChanged||e.viewportChanged||e.startState.facet(_u)!=e.state.facet(_u)||e.startState.field(Ku,!1)!=e.state.field(Ku,!1)||fu(e.startState)!=fu(e.state))&&(this.markers=this.buildMarkers(e.view))}},{key:"buildMarkers",value:function(e){var t,i=new Ze,a=s(e.viewportLineBlocks);try{for(a.s();!(t=a.n()).done;){var o=t.value,u=Wu(e.state,o.from,o.to)?r:Fu(e.state,o.from,o.to)?n:null;u&&i.add(o.from,o.from,u)}}catch(l){a.e(l)}finally{a.f()}return i.finish()}}]),e}()),a=t.domEventHandlers;return[i,Do({class:"cm-foldGutter",markers:function(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||Je.empty},initialSpacer:function(){return new tl(t,!1)},domEventHandlers:Object.assign(Object.assign({},a),{click:function(e,t,n){if(a.click&&a.click(e,t,n))return!0;var r=Wu(e.state,t.from,t.to);if(r)return e.dispatch({effects:Hu.of(r)}),!0;var i=Fu(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:ju.of(i)}),!0)}})}),Yu()]}var rl=fa.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}}),il=function(){function e(t,n){var r;function i(e){var t=vt.newName();return(r||(r=Object.create(null)))["."+t]=e,t}k(this,e);var a="string"==typeof n.all?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof uu?function(e){return e.prop(ou)==o.data}:o?function(e){return e==o}:void 0,this.style=Vs(t.map((function(e){return{tag:e.tag,class:e.class||i(Object.assign({},e,{tag:null}))}})),{all:a}).style,this.module=r?new vt(r):null,this.themeType=n.themeType}return b(e,null,[{key:"define",value:function(t,n){return new e(t,n||{})}}]),e}(),al=ie.define(),ol=ie.define({combine:function(e){return e.length?[e[0]]:null}});function sl(e){var t=e.facet(al);return t.length?t:e.facet(ol)}function ul(e,t){var n,r=[cl];return e instanceof il&&(e.module&&r.push(fa.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?r.push(ol.of(e)):n?r.push(al.computeN([fa.darkTheme],(function(t){return t.facet(fa.darkTheme)==("dark"==n)?[e]:[]}))):r.push(al.of(e)),r}var ll=function(){function e(t){k(this,e),this.markCache=Object.create(null),this.tree=fu(t.state),this.decorations=this.buildDeco(t,sl(t.state))}return b(e,[{key:"update",value:function(e){var t=fu(e.state),n=sl(e.state),r=n!=sl(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}},{key:"buildDeco",value:function(e,t){var n=this;if(!t||!this.tree.length)return En.none;var r,i=new Ze,a=s(e.visibleRanges);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.from,l=o.to;zs(this.tree,t,(function(e,t,r){i.add(e,t,n.markCache[r]||(n.markCache[r]=En.mark({class:r})))}),u,l)}}catch(c){a.e(c)}finally{a.f()}return i.finish()}}]),e}(),cl=ge.high(Zn.fromClass(ll,{decorations:function(e){return e.decorations}})),fl=il.define([{tag:au.meta,color:"#7a757a"},{tag:au.link,textDecoration:"underline"},{tag:au.heading,textDecoration:"underline",fontWeight:"bold"},{tag:au.emphasis,fontStyle:"italic"},{tag:au.strong,fontWeight:"bold"},{tag:au.strikethrough,textDecoration:"line-through"},{tag:au.keyword,color:"#708"},{tag:[au.atom,au.bool,au.url,au.contentSeparator,au.labelName],color:"#219"},{tag:[au.literal,au.inserted],color:"#164"},{tag:[au.string,au.deleted],color:"#a11"},{tag:[au.regexp,au.escape,au.special(au.string)],color:"#e40"},{tag:au.definition(au.variableName),color:"#00f"},{tag:au.local(au.variableName),color:"#30a"},{tag:[au.typeName,au.namespace],color:"#085"},{tag:au.className,color:"#167"},{tag:[au.special(au.variableName),au.macroName],color:"#256"},{tag:au.definition(au.propertyName),color:"#00c"},{tag:au.comment,color:"#940"},{tag:au.invalid,color:"#f00"}]),hl=fa.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dl=1e4,pl="()[]{}",vl=ie.define({combine:function(e){return We(e,{afterCursor:!0,brackets:pl,maxScanDistance:dl,renderMatch:yl})}}),gl=En.mark({class:"cm-matchingBracket"}),ml=En.mark({class:"cm-nonmatchingBracket"});function yl(e){var t=[],n=e.matched?gl:ml;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}var kl=ce.define({create:function(){return En.none},update:function(e,t){if(!t.docChanged&&!t.selection)return e;var n,r=[],i=t.state.facet(vl),a=s(t.state.selection.ranges);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.empty){var u=xl(t.state,o.head,-1,i)||o.head>0&&xl(t.state,o.head-1,1,i)||i.afterCursor&&(xl(t.state,o.head,1,i)||o.head<t.state.doc.length&&xl(t.state,o.head+1,-1,i));u&&(r=r.concat(i.renderMatch(u,t.state)))}}}catch(l){a.e(l)}finally{a.f()}return En.set(r,!0)},provide:function(e){return fa.decorations.from(e)}}),_l=[kl,hl];function bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[vl.of(e),_l]}function wl(e,t,n){var r=e.prop(t<0?is.openedBy:is.closedBy);if(r)return r;if(1==e.name.length){var i=n.indexOf(e.name);if(i>-1&&i%2==(t<0?1:0))return[n[i+t]]}return null}function xl(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.maxScanDistance||dl,a=r.brackets||pl,o=fu(e),s=o.resolveInner(t,n),u=s;u;u=u.parent){var l=wl(u.type,n,a);if(l&&u.from<u.to)return Al(e,t,n,u,l,a)}return Sl(e,t,n,o,s.type,i,a)}function Al(e,t,n,r,i,a){var o=r.parent,s={from:r.from,to:r.to},u=0,l=null===o||void 0===o?void 0:o.cursor();if(l&&(n<0?l.childBefore(r.from):l.childAfter(r.to)))do{if(n<0?l.to<=r.from:l.from>=r.to){if(0==u&&i.indexOf(l.type.name)>-1&&l.from<l.to)return{start:s,end:{from:l.from,to:l.to},matched:!0};if(wl(l.type,n,a))u++;else if(wl(l.type,-n,a)&&0==--u)return{start:s,end:l.from==l.to?void 0:{from:l.from,to:l.to},matched:!1}}}while(n<0?l.prevSibling():l.nextSibling());return{start:s,matched:!1}}function Sl(e,t,n,r,i,a,o){var s=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),u=o.indexOf(s);if(u<0||u%2==0!=n>0)return null;for(var l={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),f=0,h=0;!c.next().done&&h<=a;){var d=c.value;n<0&&(h+=d.length);for(var p=t+h*n,v=n>0?0:d.length-1,g=n>0?d.length:-1;v!=g;v+=n){var m=o.indexOf(d[v]);if(!(m<0||r.resolve(p+v,1).type!=i))if(m%2==0==n>0)f++;else{if(1==f)return{start:l,end:{from:p+v,to:p+v+1},matched:m>>1==u>>1};f--}}n>0&&(h+=d.length)}return c.done?{start:l,matched:!1}:null}function Ll(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i,o=r;o<t;o++)9==e.charCodeAt(o)?a+=n-a%n:a++;return a}var Ol=function(){function e(t,n,r){k(this,e),this.string=t,this.tabSize=n,this.indentUnit=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}return b(e,[{key:"eol",value:function(){return this.pos>=this.string.length}},{key:"sol",value:function(){return 0==this.pos}},{key:"peek",value:function(){return this.string.charAt(this.pos)||void 0}},{key:"next",value:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}},{key:"eat",value:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e instanceof RegExp?e.test(t):e(t)))return++this.pos,t}},{key:"eatWhile",value:function(e){for(var t=this.pos;this.eat(e););return this.pos>t}},{key:"eatSpace",value:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}},{key:"skipToEnd",value:function(){this.pos=this.string.length}},{key:"skipTo",value:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}},{key:"backUp",value:function(e){this.pos-=e}},{key:"column",value:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ll(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}},{key:"indentation",value:function(){return Ll(this.string,null,this.tabSize)}},{key:"match",value:function(e,t,n){if("string"==typeof e){var r=function(e){return n?e.toLowerCase():e};return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}},{key:"current",value:function(){return this.string.slice(this.start,this.pos)}}]),e}();function Tl(e){if("object"!=typeof e)return e;var t={};for(var n in e){var r=e[n];t[n]=r instanceof Array?r.slice():r}return t}var El=function(e){v(n,e);var t=y(n);function n(e){var r;k(this,n);var i,a,o=su(e.languageData),s={token:(a=e).token,blankLine:a.blankLine||function(){},startState:a.startState||function(){return!0},copyState:a.copyState||Tl,indent:a.indent||function(){return null},languageData:a.languageData||{},tokenTable:a.tokenTable||Pl},u=new(function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"createParse",value:function(e,t,n){return new Nl(i,e,t,n)}}]),n}(Es));return(r=t.call(this,o,u,[wu.of((function(e,t){return r.getIndent(e,t)}))])).topNode=function(e){var t=os.define({id:Il.length,name:"Document",props:[ou.add((function(){return e}))]});return Il.push(t),t}(o),i=c(r),r.streamParser=s,r.stateAfter=new is({perNode:!0}),r.tokenTable=e.tokenTable?new Gl(s.tokenTable):Kl,r}return b(n,[{key:"getIndent",value:function(e,t){for(var n=fu(e.state),r=n.resolve(t);r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;var i,a,o=Cl(this,n,0,r.from,t);if(o?(a=o.state,i=o.pos+1):(a=this.streamParser.startState(e.unit),i=0),t-i>1e4)return null;for(;i<t;){var s=e.state.doc.lineAt(i),u=Math.min(t,s.to);if(s.length)for(var l=new Ol(s.text,e.state.tabSize,e.unit);l.pos<u-s.from;)Rl(this.streamParser.token,l,a);else this.streamParser.blankLine(a,e.unit);if(u==t)break;i=s.to+1}var c=e.lineAt(t).text;return this.streamParser.indent(a,/^\s*(.*)/.exec(c)[1],e)}},{key:"allowsNesting",get:function(){return!1}}],[{key:"define",value:function(e){return new n(e)}}]),n}(uu);function Cl(e,t,n,r,i){var a=n>=r&&n+t.length<=i&&t.prop(e.stateAfter);if(a)return{state:e.streamParser.copyState(a),pos:n+t.length};for(var o=t.children.length-1;o>=0;o--){var s=t.children[o],u=n+t.positions[o],l=s instanceof fs&&u<i&&Cl(e,s,u,r,i);if(l)return l}return null}function Ml(e,t,n,r,i){if(i&&n<=0&&r>=t.length)return t;i||t.type!=e.topNode||(i=!0);for(var a=t.children.length-1;a>=0;a--){var o=t.positions[a],s=t.children[a],u=void 0;if(o<r&&s instanceof fs){if(!(u=Ml(e,s,n-o,r-o,i)))break;return i?new fs(t.type,t.children.slice(0,a).concat(u),t.positions.slice(0,a+1),o+u.length):u}}return null}var Nl=function(){function e(t,n,r,i){k(this,e),this.lang=t,this.input=n,this.fragments=r,this.ranges=i,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=i[i.length-1].to;var a=pu.get(),o=i[0].from,u=function(e,t,n,r){var i,a=s(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=o.from+(o.openStart?25:0),l=o.to-(o.openEnd?25:0),c=u<=n&&l>n&&Cl(e,o.tree,0-o.offset,n,l),f=void 0;if(c&&(f=Ml(e,o.tree,n+o.offset,c.pos+o.offset,!1)))return{state:c.state,tree:f}}}catch(h){a.e(h)}finally{a.f()}return{state:e.streamParser.startState(r?Au(r):4),tree:fs.empty}}(t,r,o,null===a||void 0===a?void 0:a.state),l=u.state,c=u.tree;this.state=l,this.parsedPos=this.chunkStart=o+c.length;for(var f=0;f<c.children.length;f++)this.chunks.push(c.children[f]),this.chunkPos.push(c.positions[f]);a&&this.parsedPos<a.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Au(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}return b(e,[{key:"advance",value:function(){var e=pu.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}},{key:"stopAt",value:function(e){this.stoppedAt=e}},{key:"lineAfter",value:function(e){var t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{var n=t.indexOf("\n");n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}},{key:"nextLine",value:function(){for(var e=this.parsedPos,t=this.lineAfter(e),n=e+t.length,r=this.rangeIndex;;){var i=this.ranges[r].to;if(i>=n)break;if(t=t.slice(0,i-(n-t.length)),++r==this.ranges.length)break;var a=this.ranges[r].from,o=this.lineAfter(a);t+=o,n=a+o.length}return{line:t,end:n}}},{key:"skipGapsTo",value:function(e,t,n){for(;;){var r=this.ranges[this.rangeIndex].to,i=e+t;if(n>0?r>i:r>=i)break;t+=this.ranges[++this.rangeIndex].from-r}return t}},{key:"moveRangeIndex",value:function(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}},{key:"emitToken",value:function(e,t,n,r,i){if(this.ranges.length>1){t+=i=this.skipGapsTo(t,i,1);var a=this.chunk.length;n+=i=this.skipGapsTo(n,i,-1),r+=this.chunk.length-a}return this.chunk.push(e,t,n,r),i}},{key:"parseLine",value:function(e){var t=this.nextLine(),n=t.line,r=t.end,i=0,a=this.lang.streamParser,o=new Ol(n,e?e.state.tabSize:4,e?Au(e.state):2);if(o.eol())a.blankLine(this.state,o.indentUnit);else for(;!o.eol();){var s=Rl(a.token,o,this.state);if(s&&(i=this.emitToken(this.lang.tokenTable.resolve(s),this.parsedPos+o.start,this.parsedPos+o.pos,4,i)),o.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}},{key:"finishChunk",value:function(){var e=fs.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Dl,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new fs(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}},{key:"finish",value:function(){return new fs(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}]),e}();function Rl(e,t,n){t.start=t.pos;for(var r=0;r<10;r++){var i=e(t,n);if(t.pos>t.start)return i}throw new Error("Stream parser failed to advance stream.")}for(var Pl=Object.create(null),Il=[os.none],Dl=new us(Il),Ul=[],Bl=Object.create(null),Vl=0,Fl=[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]];Vl<Fl.length;Vl++){var zl=o(Fl[Vl],2),jl=zl[0],Hl=zl[1];Bl[jl]=Xl(Pl,Hl)}var Gl=function(){function e(t){k(this,e),this.extra=t,this.table=Object.assign(Object.create(null),Bl)}return b(e,[{key:"resolve",value:function(e){return e?this.table[e]||(this.table[e]=Xl(this.extra,e)):0}}]),e}(),Kl=new Gl(Pl);function Wl(e,t){Ul.indexOf(e)>-1||(Ul.push(e),console.warn(t))}function Xl(e,t){var n,r=null,i=s(t.split("."));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=e[a]||au[a];o?"function"==typeof o?r?r=o(r):Wl(a,"Modifier ".concat(a," used at start of tag")):r?Wl(a,"Tag ".concat(a," used as modifier")):r=o:Wl(a,"Unknown highlighting tag ".concat(a))}}catch(c){i.e(c)}finally{i.f()}if(!r)return 0;var u=t.replace(/ /g,"_"),l=os.define({id:Il.length,name:u,props:[Ds(ts({},u,r))]});return Il.push(l),l.id}function ql(e,t){return function(n){var r=n.state,i=n.dispatch;if(r.readOnly)return!1;var a=e(t,r);return!!a&&(i(r.update(a)),!0)}}var Ql=ql(tc,0),$l=ql(ec,0),Jl=ql((function(e,t){return ec(e,t,function(e){var t,n=[],r=s(e.selection.ranges);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=e.doc.lineAt(i.from),o=i.to<=a.to?a:e.doc.lineAt(i.to),u=n.length-1;u>=0&&n[u].to>a.from?n[u].to=o.to:n.push({from:a.from,to:o.to})}}catch(l){r.e(l)}finally{r.f()}return n}(t))}),0);function Yl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.main.head,n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function Zl(e,t,n,r){var i,a,o=t.open,s=t.close,u=e.sliceDoc(n-50,n),l=e.sliceDoc(r,r+50),c=/\s*$/.exec(u)[0].length,f=/^\s*/.exec(l)[0].length,h=u.length-c;if(u.slice(h-o.length,h)==o&&l.slice(f,f+s.length)==s)return{open:{pos:n-c,margin:c&&1},close:{pos:r+f,margin:f&&1}};r-n<=100?i=a=e.sliceDoc(n,r):(i=e.sliceDoc(n,n+50),a=e.sliceDoc(r-50,r));var d=/^\s*/.exec(i)[0].length,p=/\s*$/.exec(a)[0].length,v=a.length-p-s.length;return i.slice(d,d+o.length)==o&&a.slice(v,v+s.length)==s?{open:{pos:n+d+o.length,margin:/\s/.test(i.charAt(d+o.length))?1:0},close:{pos:r-p-s.length,margin:/\s/.test(a.charAt(v-1))?1:0}}:null}function ec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=n.map((function(e){return Yl(t,e.from).block}));if(!r.every((function(e){return e})))return null;var i=n.map((function(e,n){return Zl(t,r[n],e.from,e.to)}));if(2!=e&&!i.every((function(e){return e})))return{changes:t.changes(n.map((function(e,t){return i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]})))};if(1!=e&&i.some((function(e){return e}))){for(var a,o=[],s=0;s<i.length;s++)if(a=i[s]){var u=r[s],l=a,c=l.open,f=l.close;o.push({from:c.pos-u.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+u.close.length})}return{changes:o}}return null}function tc(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,i=[],a=-1,o=s(r);try{for(o.s();!(n=o.n()).done;){for(var u=n.value,l=u.from,c=u.to,f=i.length,h=1e9,d=l;d<=c;){var p=t.doc.lineAt(d);if(p.from>a&&(l==c||c>p.from)){a=p.from;var v=Yl(t,d).line;if(!v)continue;var g=/^\s*/.exec(p.text)[0].length,m=g==p.length,y=p.text.slice(g,g+v.length)==v?g:-1;g<p.text.length&&g<h&&(h=g),i.push({line:p,comment:y,token:v,indent:g,empty:m,single:!1})}d=p.to+1}if(h<1e9)for(var k=f;k<i.length;k++)i[k].indent<i[k].line.text.length&&(i[k].indent=h);i.length==f+1&&(i[f].single=!0)}}catch(V){o.e(V)}finally{o.f()}if(2!=e&&i.some((function(e){return e.comment<0&&(!e.empty||e.single)}))){var _,b=[],w=s(i);try{for(w.s();!(_=w.n()).done;){var x=_.value,A=x.line,S=x.token,L=x.indent,O=x.empty,T=x.single;!T&&O||b.push({from:A.from+L,insert:S+" "})}}catch(V){w.e(V)}finally{w.f()}var E=t.changes(b);return{changes:E,selection:t.selection.map(E,1)}}if(1!=e&&i.some((function(e){return e.comment>=0}))){var C,M=[],N=s(i);try{for(N.s();!(C=N.n()).done;){var R=C.value,P=R.line,I=R.comment,D=R.token;if(I>=0){var U=P.from+I,B=U+D.length;" "==P.text[B-P.from]&&B++,M.push({from:U,to:B})}}}catch(V){N.e(V)}finally{N.f()}return{changes:M}}return null}var nc=Ce.define(),rc=Ce.define(),ic=ie.define(),ac=ie.define({combine:function(e){return We(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});var oc=ce.define({create:function(){return wc.empty},update:function(e,t){var n=t.state.facet(ac),r=t.annotation(nc);if(r){var i=t.docChanged?te.single(function(e){var t=0;return e.iterChangedRanges((function(e,n){return t=n})),t}(t.changes)):void 0,a=dc.fromTransaction(t,i),o=r.side,s=0==o?e.undone:e.done;return s=a?pc(s,s.length,n.minDepth,a):mc(s,t.startState.selection),new wc(0==o?r.rest:s,0==o?s:r.rest)}var u=t.annotation(rc);if("full"!=u&&"before"!=u||(e=e.isolate()),!1===t.annotation(Pe.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);var l=dc.fromTransaction(t),c=t.annotation(Pe.time),f=t.annotation(Pe.userEvent);return l?e=e.addChanges(l,c,f,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,c,f,n.newGroupDelay)),"full"!=u&&"after"!=u||(e=e.isolate()),e},toJSON:function(e){return{done:e.done.map((function(e){return e.toJSON()})),undone:e.undone.map((function(e){return e.toJSON()}))}},fromJSON:function(e){return new wc(e.done.map(dc.fromJSON),e.undone.map(dc.fromJSON))}});function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[oc,ac.of(e),fa.domEventHandlers({beforeinput:function(e,t){var n="historyUndo"==e.inputType?lc:"historyRedo"==e.inputType?cc:null;return!!n&&(e.preventDefault(),n(t))}})]}function uc(e,t){return function(n){var r=n.state,i=n.dispatch;if(!t&&r.readOnly)return!1;var a=r.field(oc,!1);if(!a)return!1;var o=a.pop(e,r,t);return!!o&&(i(o),!0)}}var lc=uc(0,!1),cc=uc(1,!1),fc=uc(0,!0),hc=uc(1,!0);var dc=function(){function e(t,n,r,i,a){k(this,e),this.changes=t,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=a}return b(e,[{key:"setSelAfter",value:function(t){return new e(this.changes,this.effects,this.mapped,this.startSelection,t)}},{key:"toJSON",value:function(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((function(e){return e.toJSON()}))}}}],[{key:"fromJSON",value:function(t){return new e(t.changes&&X.fromJSON(t.changes),[],t.mapped&&W.fromJSON(t.mapped),t.startSelection&&te.fromJSON(t.startSelection),t.selectionsAfter.map(te.fromJSON))}},{key:"fromTransaction",value:function(t,n){var r,i=gc,a=s(t.startState.facet(ic));try{for(a.s();!(r=a.n()).done;){var o=(0,r.value)(t);o.length&&(i=i.concat(o))}}catch(u){a.e(u)}finally{a.f()}return!i.length&&t.changes.empty?null:new e(t.changes.invert(t.startState.doc),i,void 0,n||t.startState.selection,gc)}},{key:"selection",value:function(t){return new e(void 0,gc,void 0,void 0,t)}}]),e}();function pc(e,t,n,r){var i=t+1>n+20?t-n-1:0,a=e.slice(i,t);return a.push(r),a}function vc(e,t){return e.length?t.length?e.concat(t):e:t}var gc=[];function mc(e,t){if(e.length){var n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),pc(e,e.length-1,1e9,n.setSelAfter(r)))}return[dc.selection([t])]}function yc(e){var t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function kc(e,t){if(!e.length)return e;for(var n=e.length,r=gc;n;){var i=_c(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){var a=e.slice(0,n);return a[n-1]=i,a}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[dc.selection(r)]:gc}function _c(e,t,n){var r=vc(e.selectionsAfter.length?e.selectionsAfter.map((function(e){return e.map(t)})):gc,n);if(!e.changes)return dc.selection(r);var i=e.changes.map(t),a=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(a):a;return new dc(i,Re.mapEffects(e.effects,t),o,e.startSelection.map(a),r)}var bc=/^(input\.type|delete)($|\.)/,wc=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;k(this,e),this.done=t,this.undone=n,this.prevTime=r,this.prevUserEvent=i}return b(e,[{key:"isolate",value:function(){return this.prevTime?new e(this.done,this.undone):this}},{key:"addChanges",value:function(t,n,r,i,a){var o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&t.changes&&(!r||bc.test(r))&&(!s.selectionsAfter.length&&n-this.prevTime<i&&function(e,t){var n=[],r=!1;return e.iterChangedRanges((function(e,t){return n.push(e,t)})),t.iterChangedRanges((function(e,t,i,a){for(var o=0;o<n.length;){var s=n[o++],u=n[o++];a>=s&&i<=u&&(r=!0)}})),r}(s.changes,t.changes)||"input.type.compose"==r)?pc(o,o.length-1,a,new dc(t.changes.compose(s.changes),vc(t.effects,s.effects),s.mapped,s.startSelection,gc)):pc(o,o.length,a,t),new e(o,gc,n,r)}},{key:"addSelection",value:function(t,n,r,i){var a,o,s=this.done.length?this.done[this.done.length-1].selectionsAfter:gc;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&(a=s[s.length-1],o=t,a.ranges.length==o.ranges.length&&0===a.ranges.filter((function(e,t){return e.empty!=o.ranges[t].empty})).length)?this:new e(mc(this.done,t),this.undone,n,r)}},{key:"addMapping",value:function(t){return new e(kc(this.done,t),kc(this.undone,t),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(e,t,n){var r=0==e?this.done:this.undone;if(0==r.length)return null;var i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:nc.of({side:e,rest:yc(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){var a=1==r.length?gc:r.slice(0,r.length-1);return i.mapped&&(a=kc(a,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:nc.of({side:e,rest:a}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}]),e}();wc.empty=new wc(gc,gc);var xc=[{key:"Mod-z",run:lc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:cc,preventDefault:!0},{key:"Mod-u",run:fc,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:hc,preventDefault:!0}];function Ac(e,t){return te.create(e.ranges.map(t),e.mainIndex)}function Sc(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Lc(e,t){var n=e.state,r=e.dispatch,i=Ac(n.selection,t);return!i.eq(n.selection)&&(r(Sc(n,i)),!0)}function Oc(e,t){return te.cursor(t?e.to:e.from)}function Tc(e,t){return Lc(e,(function(n){return n.empty?e.moveByChar(n,t):Oc(n,t)}))}function Ec(e){return e.textDirectionAt(e.state.selection.main.head)==lr.LTR}var Cc=function(e){return Tc(e,!Ec(e))},Mc=function(e){return Tc(e,Ec(e))};function Nc(e,t){return Lc(e,(function(n){return n.empty?e.moveByGroup(n,t):Oc(n,t)}))}function Rc(e,t,n){if(t.type.prop(n))return!0;var r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Pc(e,t,n){for(var r=fu(e).resolveInner(t.head),i=n?is.closedBy:is.openedBy,a=t.head;;){var o=n?r.childAfter(a):r.childBefore(a);if(!o)break;Rc(e,o,i)?r=o:a=n?o.to:o.from}var s,u;return u=r.type.prop(i)&&(s=n?xl(e,r.from,1):xl(e,r.to,-1))&&s.matched?n?s.end.to:s.end.from:n?r.to:r.from,te.cursor(u,n?-1:1)}function Ic(e,t){return Lc(e,(function(n){if(!n.empty)return Oc(n,t);var r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}var Dc=function(e){return Ic(e,!1)},Uc=function(e){return Ic(e,!0)};function Bc(e,t){var n=e.state,r=Ac(n.selection,(function(n){return n.empty?e.moveVertically(n,t,Math.min(e.dom.clientHeight,innerHeight)):Oc(n,t)}));if(r.eq(n.selection))return!1;var i,a=e.coordsAtPos(n.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return a&&a.top>o.top&&a.bottom<o.bottom&&a.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(i=fa.scrollIntoView(r.main.head,{y:"start",yMargin:a.top-o.top})),e.dispatch(Sc(n,r),{effects:i}),!0}var Vc=function(e){return Bc(e,!1)},Fc=function(e){return Bc(e,!0)};function zc(e,t,n){var r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){var a=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;a&&t.head!=r.from+a&&(i=te.cursor(r.from+a))}return i}var jc=function(e){return Lc(e,(function(t){return zc(e,t,!0)}))},Hc=function(e){return Lc(e,(function(t){return zc(e,t,!1)}))};function Gc(e,t,n){var r=!1,i=Ac(e.selection,(function(t){var i=xl(e,t.head,-1)||xl(e,t.head,1)||t.head>0&&xl(e,t.head-1,1)||t.head<e.doc.length&&xl(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;var a=i.start.from==t.head?i.end.to:i.end.from;return n?te.range(t.anchor,a):te.cursor(a)}));return!!r&&(t(Sc(e,i)),!0)}function Kc(e,t){var n=Ac(e.state.selection,(function(e){var n=t(e);return te.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(Sc(e.state,n)),!0)}function Wc(e,t){return Kc(e,(function(n){return e.moveByChar(n,t)}))}var Xc=function(e){return Wc(e,!Ec(e))},qc=function(e){return Wc(e,Ec(e))};function Qc(e,t){return Kc(e,(function(n){return e.moveByGroup(n,t)}))}function $c(e,t){return Kc(e,(function(n){return e.moveVertically(n,t)}))}var Jc=function(e){return $c(e,!1)},Yc=function(e){return $c(e,!0)};function Zc(e,t){return Kc(e,(function(n){return e.moveVertically(n,t,Math.min(e.dom.clientHeight,innerHeight))}))}var ef=function(e){return Zc(e,!1)},tf=function(e){return Zc(e,!0)},nf=function(e){return Kc(e,(function(t){return zc(e,t,!0)}))},rf=function(e){return Kc(e,(function(t){return zc(e,t,!1)}))},af=function(e){var t=e.state;return(0,e.dispatch)(Sc(t,{anchor:0})),!0},of=function(e){var t=e.state;return(0,e.dispatch)(Sc(t,{anchor:t.doc.length})),!0},sf=function(e){var t=e.state;return(0,e.dispatch)(Sc(t,{anchor:t.selection.main.anchor,head:0})),!0},uf=function(e){var t=e.state;return(0,e.dispatch)(Sc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function lf(e,t){var n=e.state,r=e.dispatch;if(n.readOnly)return!1;var i="delete.selection",a=n.changeByRange((function(e){var n=e.from,r=e.to;if(n==r){var a=t(n);a<n?i="delete.backward":a>n&&(i="delete.forward"),n=Math.min(n,a),r=Math.max(r,a)}return n==r?{range:e}:{changes:{from:n,to:r},range:te.cursor(n)}}));return!a.changes.empty&&(r(n.update(a,{scrollIntoView:!0,userEvent:i})),!0)}function cf(e,t,n){if(e instanceof fa){var r,i=s(e.state.facet(fa.atomicRanges).map((function(t){return t(e)})));try{for(i.s();!(r=i.n()).done;){r.value.between(t,t,(function(e,r){e<t&&r>t&&(t=n?r:e)}))}}catch(a){i.e(a)}finally{i.f()}}return t}var ff=function(e,t){return lf(e,(function(n){var r,i,a=e.state,o=a.doc.lineAt(n);if(!t&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(r=o.text.slice(0,n-o.from))){if("\t"==r[r.length-1])return n-1;for(var s=ct(r,a.tabSize)%Au(a)||Au(a),u=0;u<s&&" "==r[r.length-1-u];u++)n--;i=n}else(i=D(o.text,n-o.from,t,t)+o.from)==n&&o.number!=(t?a.doc.lines:1)&&(i+=t?1:-1);return cf(e,i,t)}))},hf=function(e){return ff(e,!1)},df=function(e){return ff(e,!0)},pf=function(e,t){return lf(e,(function(n){for(var r=n,i=e.state,a=i.doc.lineAt(r),o=i.charCategorizer(r),s=null;;){if(r==(t?a.to:a.from)){r==n&&a.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}var u=D(a.text,r-a.from,t)+a.from,l=a.text.slice(Math.min(r,u)-a.from,Math.max(r,u)-a.from),c=o(l);if(null!=s&&c!=s)break;" "==l&&r==n||(s=c),r=u}return cf(e,r,t)}))},vf=function(e){return pf(e,!1)},gf=function(e){return lf(e,(function(t){var n=e.lineBlockAt(t).to;return cf(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}))};function mf(e){var t,n=[],r=-1,i=s(e.selection.ranges);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=e.doc.lineAt(a.from),u=e.doc.lineAt(a.to);if(a.empty||a.to!=u.from||(u=e.doc.lineAt(a.to-1)),r>=o.number){var l=n[n.length-1];l.to=u.to,l.ranges.push(a)}else n.push({from:o.from,to:u.to,ranges:[a]});r=u.number+1}}catch(c){i.e(c)}finally{i.f()}return n}function yf(e,t,n){if(e.readOnly)return!1;var r,i=[],a=[],o=s(mf(e));try{for(o.s();!(r=o.n()).done;){var u=r.value;if(n?u.to!=e.doc.length:0!=u.from){var l=e.doc.lineAt(n?u.to+1:u.from-1),c=l.length+1;if(n){i.push({from:u.to,to:l.to},{from:u.from,insert:l.text+e.lineBreak});var f,h=s(u.ranges);try{for(h.s();!(f=h.n()).done;){var d=f.value;a.push(te.range(Math.min(e.doc.length,d.anchor+c),Math.min(e.doc.length,d.head+c)))}}catch(m){h.e(m)}finally{h.f()}}else{i.push({from:l.from,to:u.from},{from:u.to,insert:e.lineBreak+l.text});var p,v=s(u.ranges);try{for(v.s();!(p=v.n()).done;){var g=p.value;a.push(te.range(g.anchor-c,g.head-c))}}catch(m){v.e(m)}finally{v.f()}}}}}catch(m){o.e(m)}finally{o.f()}return!!i.length&&(t(e.update({changes:i,scrollIntoView:!0,selection:te.create(a,e.selection.mainIndex),userEvent:"move.line"})),!0)}function kf(e,t,n){if(e.readOnly)return!1;var r,i=[],a=s(mf(e));try{for(a.s();!(r=a.n()).done;){var o=r.value;n?i.push({from:o.from,insert:e.doc.slice(o.from,o.to)+e.lineBreak}):i.push({from:o.to,insert:e.lineBreak+e.doc.slice(o.from,o.to)})}}catch(u){a.e(u)}finally{a.f()}return t(e.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var _f=bf(!1);function bf(e){return function(t){var n=t.state,r=t.dispatch;if(n.readOnly)return!1;var i=n.changeByRange((function(t){var r=t.from,i=t.to,a=n.doc.lineAt(r),o=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};var n,r=fu(e).resolveInner(t),i=r.childBefore(t),a=r.childAfter(t);return i&&a&&i.to<=t&&a.from>=t&&(n=i.type.prop(is.closedBy))&&n.indexOf(a.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(a.from).from?{from:i.to,to:a.from}:null}(n,r);e&&(r=i=(i<=a.to?a:n.doc.lineAt(i)).to);var s=new Ou(n,{simulateBreak:r,simulateDoubleBreak:!!o}),u=Lu(s,r);for(null==u&&(u=/^\s*/.exec(n.doc.lineAt(r).text)[0].length);i<a.to&&/\s/.test(a.text[i-a.from]);)i++;o?(r=o.from,i=o.to):r>a.from&&r<a.from+100&&!/\S/.test(a.text.slice(0,r))&&(r=a.from);var l=["",Su(n,u)];return o&&l.push(Su(n,s.lineIndent(a.from,-1))),{changes:{from:r,to:i,insert:w.of(l)},range:te.cursor(r+1+l[1].length)}}));return r(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function wf(e,t){var n=-1;return e.changeByRange((function(r){for(var i=[],a=r.from;a<=r.to;){var o=e.doc.lineAt(a);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),a=o.to+1}var s=e.changes(i);return{changes:i,range:te.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}}))}var xf=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(wf(t,(function(e,n){n.push({from:e.from,insert:t.facet(xu)})})),{userEvent:"input.indent"})),!0)},Af=function(e){var t=e.state,n=e.dispatch;return!t.readOnly&&(n(t.update(wf(t,(function(e,n){var r=/^\s*/.exec(e.text)[0];if(r){for(var i=ct(r,t.tabSize),a=0,o=Su(t,Math.max(0,i-Au(t)));a<r.length&&a<o.length&&r.charCodeAt(a)==o.charCodeAt(a);)a++;n.push({from:e.from+a,to:e.from+r.length,insert:o.slice(a)})}})),{userEvent:"delete.dedent"})),!0)},Sf=[{key:"Ctrl-b",run:Cc,shift:Xc,preventDefault:!0},{key:"Ctrl-f",run:Mc,shift:qc},{key:"Ctrl-p",run:Dc,shift:Jc},{key:"Ctrl-n",run:Uc,shift:Yc},{key:"Ctrl-a",run:function(e){return Lc(e,(function(t){return te.cursor(e.lineBlockAt(t.head).from,1)}))},shift:function(e){return Kc(e,(function(t){return te.cursor(e.lineBlockAt(t.head).from)}))}},{key:"Ctrl-e",run:function(e){return Lc(e,(function(t){return te.cursor(e.lineBlockAt(t.head).to,-1)}))},shift:function(e){return Kc(e,(function(t){return te.cursor(e.lineBlockAt(t.head).to)}))}},{key:"Ctrl-d",run:df},{key:"Ctrl-h",run:hf},{key:"Ctrl-k",run:gf},{key:"Ctrl-Alt-h",run:vf},{key:"Ctrl-o",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=t.changeByRange((function(e){return{changes:{from:e.from,to:e.to,insert:w.of(["",""])},range:te.cursor(e.from)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=t.changeByRange((function(e){if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};var n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:D(r.text,n-r.from,!1)+r.from,a=n==r.to?n+1:D(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:a,insert:t.doc.slice(n,a).append(t.doc.slice(i,n))},range:te.cursor(a)}}));return!r.changes.empty&&(n(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Fc}],Lf=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:function(e){return Lc(e,(function(t){return Pc(e.state,t,!Ec(e))}))},shift:function(e){return Kc(e,(function(t){return Pc(e.state,t,!Ec(e))}))}},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:function(e){return Lc(e,(function(t){return Pc(e.state,t,Ec(e))}))},shift:function(e){return Kc(e,(function(t){return Pc(e.state,t,Ec(e))}))}},{key:"Alt-ArrowUp",run:function(e){return yf(e.state,e.dispatch,!1)}},{key:"Shift-Alt-ArrowUp",run:function(e){return kf(e.state,e.dispatch,!1)}},{key:"Alt-ArrowDown",run:function(e){return yf(e.state,e.dispatch,!0)}},{key:"Shift-Alt-ArrowDown",run:function(e){return kf(e.state,e.dispatch,!0)}},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch,r=t.selection,i=null;return r.ranges.length>1?i=te.create([r.main]):r.main.empty||(i=te.create([te.cursor(r.main.head)])),!!i&&(n(Sc(t,i)),!0)}},{key:"Mod-Enter",run:bf(!0)},{key:"Alt-l",mac:"Ctrl-l",run:function(e){var t=e.state,n=e.dispatch,r=mf(t).map((function(e){var n=e.from,r=e.to;return te.range(n,Math.min(r+1,t.doc.length))}));return n(t.update({selection:te.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:function(e){var t=e.state,n=e.dispatch,r=Ac(t.selection,(function(e){for(var n,r=fu(t).resolveInner(e.head,1);!(r.from<e.from&&r.to>=e.to||r.to>e.to&&r.from<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return te.range(r.to,r.from)}));return n(Sc(t,r)),!0},preventDefault:!0},{key:"Mod-[",run:Af},{key:"Mod-]",run:xf},{key:"Mod-Alt-\\",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=Object.create(null),i=new Ou(t,{overrideIndentation:function(e){var t=r[e];return null==t?-1:t}}),a=wf(t,(function(e,n,a){var o=Lu(i,e.from);if(null!=o){/\S/.test(e.text)||(o=0);var s=/^\s*/.exec(e.text)[0],u=Su(t,o);(s!=u||a.from<e.from+s.length)&&(r[e.from]=o,n.push({from:e.from,to:e.from+s.length,insert:u}))}}));return a.changes.empty||n(t.update(a,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:function(e){if(e.state.readOnly)return!1;var t=e.state,n=t.changes(mf(t).map((function(e){var n=e.from,r=e.to;return n>0?n--:r<t.doc.length&&r++,{from:n,to:r}}))),r=Ac(t.selection,(function(t){return e.moveVertically(t,!0)})).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:function(e){return Gc(e.state,e.dispatch,!1)}},{key:"Mod-/",run:function(e){var t=Yl(e.state);return t.line?Ql(e):!!t.block&&Jl(e)}},{key:"Alt-A",run:$l}].concat([{key:"ArrowLeft",run:Cc,shift:Xc,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:function(e){return Nc(e,!Ec(e))},shift:function(e){return Qc(e,!Ec(e))}},{mac:"Cmd-ArrowLeft",run:Hc,shift:rf},{key:"ArrowRight",run:Mc,shift:qc,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:function(e){return Nc(e,Ec(e))},shift:function(e){return Qc(e,Ec(e))}},{mac:"Cmd-ArrowRight",run:jc,shift:nf},{key:"ArrowUp",run:Dc,shift:Jc,preventDefault:!0},{mac:"Cmd-ArrowUp",run:af,shift:sf},{mac:"Ctrl-ArrowUp",run:Vc,shift:ef},{key:"ArrowDown",run:Uc,shift:Yc,preventDefault:!0},{mac:"Cmd-ArrowDown",run:of,shift:uf},{mac:"Ctrl-ArrowDown",run:Fc,shift:tf},{key:"PageUp",run:Vc,shift:ef},{key:"PageDown",run:Fc,shift:tf},{key:"Home",run:Hc,shift:rf,preventDefault:!0},{key:"Mod-Home",run:af,shift:sf},{key:"End",run:jc,shift:nf,preventDefault:!0},{key:"Mod-End",run:of,shift:uf},{key:"Enter",run:_f},{key:"Mod-a",run:function(e){var t=e.state;return(0,e.dispatch)(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:hf,shift:hf},{key:"Delete",run:df},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vf},{key:"Mod-Delete",mac:"Alt-Delete",run:function(e){return pf(e,!0)}},{mac:"Mod-Backspace",run:function(e){return lf(e,(function(t){var n=e.lineBlockAt(t).from;return cf(e,t>n?n:Math.max(0,t-1),!1)}))}},{mac:"Mod-Delete",run:gf}].concat(Sf.map((function(e){return{mac:e.key,run:e.run,shift:e.shift}})))),Of={key:"Tab",run:xf,shift:Af};function Tf(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)Ef(e,arguments[t]);return e}function Ef(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)Ef(e,t[n])}}var Cf="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFKD")}:function(e){return e},Mf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,a=arguments.length>4?arguments[4]:void 0;k(this,e),this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(r,i),this.bufferStart=r,this.normalize=a?function(e){return a(Cf(e))}:Cf,this.query=this.normalize(n)}return b(e,[{key:"peek",value:function(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return z(this.buffer,this.bufferPos)}},{key:"next",value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}},{key:"nextOverlapping",value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=j(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=H(e);for(var r=this.normalize(t),i=0,a=n;;i++){var o=r.charCodeAt(i),s=this.match(o,a);if(s)return this.value=s,this;if(i==r.length-1)break;a==n&&i<t.length&&t.charCodeAt(i)==o&&a++}}}},{key:"match",value:function(e,t){for(var n=null,r=0;r<this.matches.length;r+=2){var i=this.matches[r],a=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}]),e}();"undefined"!=typeof Symbol&&(Mf.prototype[Symbol.iterator]=function(){return this});var Nf={from:-1,to:-1,match:/.*/.exec("")},Rf="gm"+(null==/x/.unicode?"":"u"),Pf=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length;if(k(this,e),this.to=a,this.curLine="",this.done=!1,this.value=Nf,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Uf(t,n,r,i,a);this.re=new RegExp(n,Rf+((null===r||void 0===r?void 0:r.ignoreCase)?"i":"")),this.iter=t.iter();var o=t.lineAt(i);this.curLineStart=o.from,this.matchPos=i,this.getLine(this.curLineStart)}return b(e,[{key:"getLine",value:function(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}},{key:"nextLine",value:function(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}},{key:"next",value:function(){for(var e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;var t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){var n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}]),e}(),If=new WeakMap,Df=function(){function e(t,n){k(this,e),this.from=t,this.text=n}return b(e,[{key:"to",get:function(){return this.from+this.text.length}}],[{key:"get",value:function(t,n,r){var i=If.get(t);if(!i||i.from>=r||i.to<=n){var a=new e(n,t.sliceString(n,r));return If.set(t,a),a}if(i.from==n&&i.to==r)return i;var o=i.text,s=i.from;return s>n&&(o=t.sliceString(n,s)+o,s=n),i.to<r&&(o+=t.sliceString(i.to,r)),If.set(t,new e(s,o)),new e(n,o.slice(n-s,r-s))}}]),e}(),Uf=function(){function e(t,n,r,i,a){k(this,e),this.text=t,this.to=a,this.done=!1,this.value=Nf,this.matchPos=i,this.re=new RegExp(n,Rf+((null===r||void 0===r?void 0:r.ignoreCase)?"i":"")),this.flat=Df.get(t,i,this.chunkEnd(i+5e3))}return b(e,[{key:"chunkEnd",value:function(e){return e>=this.to?this.to:this.text.lineAt(e).to}},{key:"next",value:function(){for(;;){var e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){var n=this.flat.from+t.index,r=n+t[0].length;return this.value={from:n,to:r,match:t},this.matchPos=r+(n==r?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Df.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}]),e}();function Bf(e){var t=Tf("input",{class:"cm-textfield",name:"line"});function n(){var n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(n){var r=e.state,i=r.doc.lineAt(r.selection.main.head),a=o(n,5),s=a[1],u=a[2],l=a[3],c=a[4],f=l?+l.slice(1):0,h=u?+u:i.number;if(u&&c){var d=h/100;s&&(d=d*("-"==s?-1:1)+i.number/r.doc.lines),h=Math.round(r.doc.lines*d)}else u&&s&&(h=h*("-"==s?-1:1)+i.number);var p=r.doc.line(Math.max(1,Math.min(r.doc.lines,h)));e.dispatch({effects:Vf.of(!1),selection:te.cursor(p.from+Math.max(0,Math.min(f,p.length))),scrollIntoView:!0}),e.focus()}}return{dom:Tf("form",{class:"cm-gotoLine",onkeydown:function(t){27==t.keyCode?(t.preventDefault(),e.dispatch({effects:Vf.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:function(e){e.preventDefault(),n()}},Tf("label",e.state.phrase("Go to line"),": ",t)," ",Tf("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Pf.prototype[Symbol.iterator]=Uf.prototype[Symbol.iterator]=function(){return this});var Vf=Re.define(),Ff=ce.define({create:function(){return!0},update:function(e,t){var n,r=s(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.is(Vf)&&(e=i.value)}}catch(a){r.e(a)}finally{r.f()}return e},provide:function(e){return Mo.from(e,(function(e){return e?Bf:null}))}}),zf=fa.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),jf={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Hf=ie.define({combine:function(e){return We(e,jf,{highlightWordAroundCursor:function(e,t){return e||t},minSelectionLength:Math.min,maxMatches:Math.min})}});function Gf(e){var t=[Qf,qf];return e&&t.push(Hf.of(e)),t}var Kf=En.mark({class:"cm-selectionMatch"}),Wf=En.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Xf(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=je.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=je.Word)}var qf=Zn.fromClass(function(){function e(t){k(this,e),this.decorations=this.getDeco(t)}return b(e,[{key:"update",value:function(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}},{key:"getDeco",value:function(e){var t=e.state.facet(Hf),n=e.state,r=n.selection;if(r.ranges.length>1)return En.none;var i,a=r.main,o=null;if(a.empty){if(!t.highlightWordAroundCursor)return En.none;var u=n.wordAt(a.head);if(!u)return En.none;o=n.charCategorizer(a.head),i=n.sliceDoc(u.from,u.to)}else{var l=a.to-a.from;if(l<t.minSelectionLength||l>200)return En.none;if(t.wholeWords){if(i=n.sliceDoc(a.from,a.to),!Xf(o=n.charCategorizer(a.head),n,a.from,a.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==je.Word&&e(t.sliceDoc(r-1,r))==je.Word}(o,n,a.from,a.to))return En.none}else if(!(i=n.sliceDoc(a.from,a.to).trim()))return En.none}var c,f=[],h=s(e.visibleRanges);try{for(h.s();!(c=h.n()).done;)for(var d=c.value,p=new Mf(n.doc,i,d.from,d.to);!p.next().done;){var v=p.value,g=v.from,m=v.to;if((!o||Xf(o,n,g,m))&&(a.empty&&g<=a.from&&m>=a.to?f.push(Wf.range(g,m)):(g>=a.to||m<=a.from)&&f.push(Kf.range(g,m)),f.length>t.maxMatches))return En.none}}catch(y){h.e(y)}finally{h.f()}return En.set(f)}}]),e}(),{decorations:function(e){return e.decorations}}),Qf=fa.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});var $f=ie.define({combine:function(e){var t;return{top:e.reduce((function(e,t){return null!==e&&void 0!==e?e:t.top}),void 0)||!1,caseSensitive:e.reduce((function(e,t){return null!==e&&void 0!==e?e:t.caseSensitive}),void 0)||!1,createPanel:(null===(t=e.find((function(e){return e.createPanel})))||void 0===t?void 0:t.createPanel)||function(e){return new bh(e)}}}});var Jf=function(){function e(t){k(this,e),this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Rf),!0}catch(js){return!1}}(this.search)),this.unquoted=t.literal?this.search:this.search.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"}))}return b(e,[{key:"eq",value:function(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}},{key:"create",value:function(){return this.regexp?new nh(this):new eh(this)}},{key:"getCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return this.regexp?th(this,e,t,n):Zf(this,e,t,n)}}]),e}(),Yf=b((function e(t){k(this,e),this.spec=t}));function Zf(e,t,n,r){return new Mf(t,e.unquoted,n,r,e.caseSensitive?void 0:function(e){return e.toLowerCase()})}var eh=function(e){v(n,e);var t=y(n);function n(e){return k(this,n),t.call(this,e)}return b(n,[{key:"nextMatch",value:function(e,t,n){var r=Zf(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=Zf(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var r=n;;){for(var i=Math.max(t,r-1e4-this.spec.unquoted.length),a=Zf(this.spec,e,i,r),o=null;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(i==t)return null;r-=1e4}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}},{key:"getReplacement",value:function(e){return this.spec.replace}},{key:"matchAll",value:function(e,t){for(var n=Zf(this.spec,e,0,e.length),r=[];!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}},{key:"highlight",value:function(e,t,n,r){for(var i=Zf(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));!i.next().done;)r(i.value.from,i.value.to)}}]),n}(Yf);function th(e,t,n,r){return new Pf(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}var nh=function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"nextMatch",value:function(e,t,n){var r=th(this.spec,e,n,e.length).next();return r.done&&(r=th(this.spec,e,0,t).next()),r.done?null:r.value}},{key:"prevMatchInRange",value:function(e,t,n){for(var r=1;;r++){for(var i=Math.max(t,n-1e4*r),a=th(this.spec,e,i,n),o=null;!a.next().done;)o=a.value;if(o&&(i==t||o.from>i+10))return o;if(i==t)return null}}},{key:"prevMatch",value:function(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}},{key:"getReplacement",value:function(e){return this.spec.replace.replace(/\$([$&\d+])/g,(function(t,n){return"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t}))}},{key:"matchAll",value:function(e,t){for(var n=th(this.spec,e,0,e.length),r=[];!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}},{key:"highlight",value:function(e,t,n,r){for(var i=th(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));!i.next().done;)r(i.value.from,i.value.to)}}]),n}(Yf),rh=Re.define(),ih=Re.define(),ah=ce.define({create:function(e){return new oh(mh(e).create(),null)},update:function(e,t){var n,r=s(t.effects);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.is(rh)?e=new oh(i.value.create(),e.panel):i.is(ih)&&(e=new oh(e.query,i.value?gh:null))}}catch(a){r.e(a)}finally{r.f()}return e},provide:function(e){return Mo.from(e,(function(e){return e.panel}))}});var oh=b((function e(t,n){k(this,e),this.query=t,this.panel=n})),sh=En.mark({class:"cm-searchMatch"}),uh=En.mark({class:"cm-searchMatch cm-searchMatch-selected"}),lh=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.decorations=this.highlight(t.state.field(ah))}return b(e,[{key:"update",value:function(e){var t=e.state.field(ah);(t!=e.startState.field(ah)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}},{key:"highlight",value:function(e){var t=e.query;if(!e.panel||!t.spec.valid)return En.none;for(var n=this.view,r=new Ze,i=0,a=n.visibleRanges,o=a.length;i<o;i++){for(var s=a[i],u=s.from,l=s.to;i<o-1&&l>a[i+1].from-500;)l=a[++i].to;t.highlight(n.state.doc,u,l,(function(e,t){var i=n.state.selection.ranges.some((function(n){return n.from==e&&n.to==t}));r.add(e,t,i?uh:sh)}))}return r.finish()}}]),e}(),{decorations:function(e){return e.decorations}});function ch(e){return function(t){var n=t.state.field(ah,!1);return n&&n.query.spec.valid?e(t,n):yh(t)}}var fh=ch((function(e,t){var n=t.query,r=e.state.selection.main,i=r.from,a=r.to,o=n.nextMatch(e.state.doc,i,a);return!(!o||o.from==i&&o.to==a)&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:Ah(e,o),userEvent:"select.search"}),!0)})),hh=ch((function(e,t){var n=t.query,r=e.state,i=r.selection.main,a=i.from,o=i.to,s=n.prevMatch(r.doc,a,o);return!!s&&(e.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:Ah(e,s),userEvent:"select.search"}),!0)})),dh=ch((function(e,t){var n=t.query.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:te.create(n.map((function(e){return te.range(e.from,e.to)}))),userEvent:"select.search.matches"}),!0)})),ph=ch((function(e,t){var n=t.query,r=e.state,i=r.selection.main,a=i.from,o=i.to;if(r.readOnly)return!1;var s=n.nextMatch(r.doc,a,a);if(!s)return!1;var u,l,c=[];if(s.from==a&&s.to==o&&(l=r.toText(n.getReplacement(s)),c.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(r.doc,s.from,s.to)),s){var f=0==c.length||c[0].from>=s.to?0:s.to-s.from-l.length;u={anchor:s.from-f,head:s.to-f}}return e.dispatch({changes:c,selection:u,scrollIntoView:!!u,effects:s?Ah(e,s):void 0,userEvent:"input.replace"}),!0})),vh=ch((function(e,t){var n=t.query;if(e.state.readOnly)return!1;var r=n.matchAll(e.state.doc,1e9).map((function(e){return{from:e.from,to:e.to,insert:n.getReplacement(e)}}));return!!r.length&&(e.dispatch({changes:r,userEvent:"input.replace.all"}),!0)}));function gh(e){return e.state.facet($f).createPanel(e)}function mh(e,t){var n,r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),a=null!==(n=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==n?n:e.facet($f).caseSensitive;return t&&!i?t:new Jf({search:i.replace(/\n/g,"\\n"),caseSensitive:a})}var yh=function(e){var t=e.state.field(ah,!1);if(t&&t.panel){var n=Oo(e,gh);if(!n)return!1;var r=n.dom.querySelector("[name=search]");if(r!=e.root.activeElement){var i=mh(e.state,t.query.spec);i.valid&&e.dispatch({effects:rh.of(i)}),r.focus(),r.select()}}else e.dispatch({effects:[ih.of(!0),t?rh.of(mh(e.state,t.query.spec)):Re.appendConfig.of(Lh)]});return!0},kh=function(e){var t=e.state.field(ah,!1);if(!t||!t.panel)return!1;var n=Oo(e,gh);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:ih.of(!1)}),!0},_h=[{key:"Mod-f",run:yh,scope:"editor search-panel"},{key:"F3",run:fh,shift:hh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:fh,shift:hh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:kh,scope:"editor search-panel"},{key:"Mod-Shift-l",run:function(e){var t=e.state,n=e.dispatch,r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;for(var i=r.main,a=i.from,o=i.to,s=[],u=0,l=new Mf(t.doc,t.sliceDoc(a,o));!l.next().done;){if(s.length>1e3)return!1;l.value.from==a&&(u=s.length),s.push(te.range(l.value.from,l.value.to))}return n(t.update({selection:te.create(s,u),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:function(e){var t=Oo(e,Bf);if(!t){var n=[Vf.of(!0)];null==e.state.field(Ff,!1)&&n.push(Re.appendConfig.of([Ff,zf])),e.dispatch({effects:n}),t=Oo(e,Bf)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:function(e){var t=e.state,n=e.dispatch,r=t.selection.ranges;if(r.some((function(e){return e.from===e.to})))return function(e){var t=e.state,n=e.dispatch,r=t.selection,i=te.create(r.ranges.map((function(e){return t.wordAt(e.head)||te.cursor(e.head)})),r.mainIndex);return!i.eq(r)&&(n(t.update({selection:i})),!0)}({state:t,dispatch:n});var i=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some((function(e){return t.sliceDoc(e.from,e.to)!=i})))return!1;var a=function(e,t){for(var n=e.selection,r=n.main,i=n.ranges,a=e.wordAt(r.head),o=a&&a.from==r.from&&a.to==r.to,s=function(n,r){if(r.next(),!r.done){if(n&&i.some((function(e){return e.from==r.value.from})))return l=r,u=n,"continue";if(o){var a=e.wordAt(r.value.from);if(!a||a.from!=r.value.from||a.to!=r.value.to)return l=r,u=n,"continue"}return u=n,l=r,{v:r.value}}if(n)return l=r,u=n,{v:null};r=new Mf(e.doc,t,0,Math.max(0,i[i.length-1].from-1)),u=n=!0,l=r},u=!1,l=new Mf(e.doc,t,i[i.length-1].to);;){var c=s(u,l);if("continue"!==c&&"object"===typeof c)return c.v}}(t,i);return!!a&&(n(t.update({selection:t.selection.addRange(te.range(a.from,a.to),!1),effects:fa.scrollIntoView(a.to)})),!0)},preventDefault:!0}],bh=function(){function e(t){var n=this;k(this,e),this.view=t;var r=this.query=t.state.field(ah).query.spec;function i(e,t,n){return Tf("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=Tf("input",{value:r.search,placeholder:wh(t,"Find"),"aria-label":wh(t,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Tf("input",{value:r.replace,placeholder:wh(t,"Replace"),"aria-label":wh(t,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Tf("input",{type:"checkbox",name:"case",checked:r.caseSensitive,onchange:this.commit}),this.reField=Tf("input",{type:"checkbox",name:"re",checked:r.regexp,onchange:this.commit}),this.dom=Tf("div",{onkeydown:function(e){return n.keydown(e)},class:"cm-search"},[this.searchField,i("next",(function(){return fh(t)}),[wh(t,"next")]),i("prev",(function(){return hh(t)}),[wh(t,"previous")]),i("select",(function(){return dh(t)}),[wh(t,"all")]),Tf("label",null,[this.caseField,wh(t,"match case")]),Tf("label",null,[this.reField,wh(t,"regexp")])].concat(l(t.state.readOnly?[]:[Tf("br"),this.replaceField,i("replace",(function(){return ph(t)}),[wh(t,"replace")]),i("replaceAll",(function(){return vh(t)}),[wh(t,"replace all")]),Tf("button",{name:"close",onclick:function(){return kh(t)},"aria-label":wh(t,"close"),type:"button"},["\xd7"])])))}return b(e,[{key:"commit",value:function(){var e=new Jf({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:rh.of(e)}))}},{key:"keydown",value:function(e){var t,n,r;t=this.view,n=e,r="search-panel",Sa(wa(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?hh:fh)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),ph(this.view))}},{key:"update",value:function(e){var t,n=s(e.transactions);try{for(n.s();!(t=n.n()).done;){var r,i=s(t.value.effects);try{for(i.s();!(r=i.n()).done;){var a=r.value;a.is(rh)&&!a.value.eq(this.query)&&this.setQuery(a.value)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){n.e(o)}finally{n.f()}}},{key:"setQuery",value:function(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}},{key:"mount",value:function(){this.searchField.select()}},{key:"pos",get:function(){return 80}},{key:"top",get:function(){return this.view.state.facet($f).top}}]),e}();function wh(e,t){return e.state.phrase(t)}var xh=/[\s\.,:;?!]/;function Ah(e,t){var n=t.from,r=t.to,i=e.state.doc.lineAt(n).from,a=e.state.doc.lineAt(r).to,o=Math.max(i,n-30),s=Math.min(a,r+30),u=e.state.sliceDoc(o,s);if(o!=i)for(var l=0;l<30;l++)if(!xh.test(u[l+1])&&xh.test(u[l])){u=u.slice(l);break}if(s!=a)for(var c=u.length-1;c>u.length-30;c--)if(!xh.test(u[c-1])&&xh.test(u[c])){u=u.slice(0,c);break}return fa.announce.of("".concat(e.state.phrase("current match"),". ").concat(u," ").concat(e.state.phrase("on line")," ").concat(e.state.doc.lineAt(n).number))}var Sh=fa.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Lh=[ah,ge.lowest(lh),Sh],Oh=function(){function e(t,n,r){k(this,e),this.state=t,this.pos=n,this.explicit=r,this.abortListeners=[]}return b(e,[{key:"tokenBefore",value:function(e){for(var t=fu(this.state).resolveInner(this.pos,-1);t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}},{key:"matchBefore",value:function(e){var t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(Nh(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}},{key:"aborted",get:function(){return null==this.abortListeners}},{key:"addEventListener",value:function(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}]),e}();function Th(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function Eh(e){var t=e.map((function(e){return"string"==typeof e?{label:e}:e})),n=t.every((function(e){return/^\w+$/.test(e.label)}))?[/\w*$/,/\w+$/]:function(e){var t,n=Object.create(null),r=Object.create(null),i=s(e);try{for(i.s();!(t=i.n()).done;){var a=t.value.label;n[a[0]]=!0;for(var o=1;o<a.length;o++)r[a[o]]=!0}}catch(l){i.e(l)}finally{i.f()}var u=Th(n)+Th(r)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(t),r=o(n,2),i=r[0],a=r[1];return function(e){var n=e.matchBefore(a);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}var Ch=b((function e(t,n,r){k(this,e),this.completion=t,this.source=n,this.match=r}));function Mh(e){return e.selection.main.head}function Nh(e,t){var n,r=e.source,i=t&&"^"!=r[0],a="$"!=r[r.length-1];return i||a?new RegExp("".concat(i?"^":"","(?:").concat(r,")").concat(a?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}function Rh(e,t){var n,r,i,a,o=t.completion.apply||t.completion.label,s=t.source;"string"==typeof o?e.dispatch((n=e.state,r=o,i=s.from,a=s.to,Object.assign(Object.assign({},n.changeByRange((function(e){if(e==n.selection.main)return{changes:{from:i,to:a,insert:r},range:te.cursor(i+r.length)};var t=a-i;return!e.empty||t&&n.sliceDoc(e.from-t,e.from)!=n.sliceDoc(i,a)?{range:e}:{changes:{from:e.from-t,to:e.from,insert:r},range:te.cursor(e.from-t+r.length)}}))),{userEvent:"input.complete"}))):o(e,t.completion,s.from,s.to)}var Ph=new WeakMap;function Ih(e){if(!Array.isArray(e))return e;var t=Ph.get(e);return t||Ph.set(e,t=Eh(e)),t}var Dh=function(){function e(t){k(this,e),this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(var n=0;n<t.length;){var r=z(t,n),i=H(r);this.chars.push(r);var a=t.slice(n,n+i),o=a.toUpperCase();this.folded.push(z(o==a?a.toLowerCase():o,0)),n+=i}this.astral=t.length!=this.chars.length}return b(e,[{key:"match",value:function(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;var t=this.chars,n=this.folded,r=this.any,i=this.precise,a=this.byWord;if(1==t.length){var o=z(e,0);return o==t[0]?[0,0,H(o)]:o==n[0]?[-200,0,H(o)]:null}var s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];var u=t.length,l=0;if(s<0){for(var c=0,f=Math.min(e.length,200);c<f&&l<u;){var h=z(e,c);h!=t[l]&&h!=n[l]||(r[l++]=c),c+=H(h)}if(l<u)return null}for(var d=0,p=0,v=!1,g=0,m=-1,y=-1,k=/[a-z]/.test(e),_=!0,b=0,w=Math.min(e.length,200),x=0;b<w&&p<u;){var A=z(e,b);s<0&&(d<u&&A==t[d]&&(i[d++]=b),g<u&&(A==t[g]||A==n[g]?(0==g&&(m=b),y=b+1,g++):g=0));var S=void 0,L=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(S=j(A))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!b||1==L&&k||0==x&&0!=L)&&(t[p]==A||n[p]==A&&(v=!0)?a[p++]=b:a.length&&(_=!1)),x=L,b+=H(A)}return p==u&&0==a[0]&&_?this.result((v?-200:0)-100,a,e):g==u&&0==m?[-200-e.length,0,y]:s>-1?[-700-e.length,s,s+this.pattern.length]:g==u?[-900-e.length,m,y]:p==u?this.result((v?-200:0)-100-700+(_?0:-1100),a,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}},{key:"result",value:function(e,t,n){var r,i=[e-n.length],a=1,o=s(t);try{for(o.s();!(r=o.n()).done;){var u=r.value,l=u+(this.astral?H(z(n,u)):1);a>1&&i[a-1]==u?i[a-1]=l:(i[a++]=u,i[a++]=l)}}catch(c){o.e(c)}finally{o.f()}return i}}]),e}(),Uh=ie.define({combine:function(e){return We(e,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:function(){return""},aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:function(e,t){return e&&t},closeOnBlur:function(e,t){return e&&t},icons:function(e,t){return e&&t},optionClass:function(e,t){return function(n){return function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n))}},addToOptions:function(e,t){return e.concat(t)}})}});function Bh(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){var r=Math.floor(t/n);return{from:r*n,to:(r+1)*n}}var i=Math.floor((e-t)/n);return{from:e-(i+1)*n,to:e-i*n}}var Vh=function(){function e(t,n){var r=this;k(this,e),this.view=t,this.stateField=n,this.info=null,this.placeInfo={read:function(){return r.measureInfo()},write:function(e){return r.positionInfo(e)},key:this};var i=t.state.field(n),a=i.open,o=a.options,s=a.selected,u=t.state.facet(Uh);this.optionContent=function(e){var t=e.addToOptions.slice();return e.icons&&t.push({render:function(e){var t,n=document.createElement("div");return n.classList.add("cm-completionIcon"),e.type&&(t=n.classList).add.apply(t,l(e.type.split(/\s+/g).map((function(e){return"cm-completionIcon-"+e})))),n.setAttribute("aria-hidden","true"),n},position:20}),t.push({render:function(e,t,n){var r=document.createElement("span");r.className="cm-completionLabel";for(var i=e.label,a=0,o=1;o<n.length;){var s=n[o++],u=n[o++];s>a&&r.appendChild(document.createTextNode(i.slice(a,s)));var l=r.appendChild(document.createElement("span"));l.appendChild(document.createTextNode(i.slice(s,u))),l.className="cm-completionMatchedText",a=u}return a<i.length&&r.appendChild(document.createTextNode(i.slice(a))),r},position:50},{render:function(e){if(!e.detail)return null;var t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((function(e,t){return e.position-t.position})).map((function(e){return e.render}))}(u),this.optionClass=u.optionClass,this.range=Bh(o.length,s,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(function(e){for(var n,i=e.target;i&&i!=r.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<o.length)return Rh(t,o[+n[1]]),void e.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(o,i.id,this.range)),this.list.addEventListener("scroll",(function(){r.info&&r.view.requestMeasure(r.placeInfo)}))}return b(e,[{key:"mount",value:function(){this.updateSel()}},{key:"update",value:function(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}},{key:"positioned",value:function(){this.info&&this.view.requestMeasure(this.placeInfo)}},{key:"updateSel",value:function(){var e=this,t=this.view.state.field(this.stateField),n=t.open;if((n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Bh(n.options.length,n.selected,this.view.state.facet(Uh).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,t.id,this.range)),this.list.addEventListener("scroll",(function(){e.info&&e.view.requestMeasure(e.placeInfo)}))),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);var r=n.options[n.selected].completion,i=r.info;if(!i)return;var a="string"===typeof i?document.createTextNode(i):i(r);if(!a)return;"then"in a?a.then((function(n){n&&e.view.state.field(e.stateField,!1)==t&&e.addInfoPane(n)})).catch((function(t){return Qn(e.view.state,t,"completion info")})):this.addInfoPane(a)}}},{key:"addInfoPane",value:function(e){var t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}},{key:"updateSelectedOption",value:function(e){for(var t=null,n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}},{key:"measureInfo",value:function(){var e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;var t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;var i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,a=this.view.textDirection==lr.RTL,o=t.left,s=innerWidth-t.right;return a&&o<Math.min(n.width,s)?a=!1:!a&&s<Math.min(n.width,o)&&(a=!0),{top:i,left:a}}},{key:"positionInfo",value:function(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}},{key:"createListBox",value:function(e,t,n){var r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(var i=n.from;i<n.to;i++){var a=e[i],o=a.completion,u=a.match,l=r.appendChild(document.createElement("li"));l.id=t+"-"+i,l.setAttribute("role","option");var c=this.optionClass(o);c&&(l.className=c);var f,h=s(this.optionContent);try{for(h.s();!(f=h.n()).done;){var d=(0,f.value)(o,this.view.state,u);d&&l.appendChild(d)}}catch(p){h.e(p)}finally{h.f()}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}]),e}();function Fh(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}var zh=function(){function e(t,n,r,i,a){k(this,e),this.options=t,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=a}return b(e,[{key:"setSelected",value:function(t,n){return t==this.selected||t>=this.options.length?this:new e(this.options,Gh(n,t),this.tooltip,this.timestamp,t)}},{key:"map",value:function(t){return new e(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}],[{key:"build",value:function(t,n,r,i,a){var o=function(e,t){var n,r=[],i=0,a=s(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.hasResult())if(!1===o.result.filter){var u,l=o.result.getMatch,c=s(o.result.options);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=[1e9-i++];if(l){var d,p=s(l(f));try{for(p.s();!(d=p.n()).done;){var v=d.value;h.push(v)}}catch(L){p.e(L)}finally{p.f()}}r.push(new Ch(f,o,h))}}catch(L){c.e(L)}finally{c.f()}}else{var g,m=new Dh(t.sliceDoc(o.from,o.to)),y=void 0,k=s(o.result.options);try{for(k.s();!(g=k.n()).done;){var _=g.value;(y=m.match(_.label))&&(null!=_.boost&&(y[0]+=_.boost),r.push(new Ch(_,o,y)))}}catch(L){k.e(L)}finally{k.f()}}}}catch(L){a.e(L)}finally{a.f()}var b,w=[],x=null,A=s(r.sort(Wh));try{for(A.s();!(b=A.n()).done;){var S=b.value;!x||x.label!=S.completion.label||x.detail!=S.completion.detail||null!=x.type&&null!=S.completion.type&&x.type!=S.completion.type||x.apply!=S.completion.apply?w.push(S):Fh(S.completion)>Fh(x)&&(w[w.length-1]=S),x=S.completion}}catch(L){A.e(L)}finally{A.f()}return w}(t,n);if(!o.length)return null;var u,l=0;if(i&&i.selected)for(var c=i.options[i.selected].completion,f=0;f<o.length;f++)if(o[f].completion==c){l=f;break}return new e(o,Gh(r,l),{pos:t.reduce((function(e,t){return t.hasResult()?Math.min(e,t.from):e}),1e8),create:(u=ed,function(e){return new Vh(e,u)}),above:a.aboveCursor},i?i.timestamp:Date.now(),l)}}]),e}(),jh=function(){function e(t,n,r){k(this,e),this.active=t,this.id=n,this.open=r}return b(e,[{key:"update",value:function(t){var n=this,r=t.state,i=r.facet(Uh),a=(i.override||r.languageDataAt("autocomplete",Mh(r)).map(Ih)).map((function(e){return(n.active.find((function(t){return t.source==e}))||new qh(e,n.active.some((function(e){return 0!=e.state}))?1:0)).update(t,i)}));a.length==this.active.length&&a.every((function(e,t){return e==n.active[t]}))&&(a=this.active);var o=t.selection||a.some((function(e){return e.hasResult()&&t.changes.touchesRange(e.from,e.to)}))||!function(e,t){if(e==t)return!0;for(var n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;var i=n==e.length,a=r==t.length;if(i||a)return i==a;if(e[n++].result!=t[r++].result)return!1}}(a,this.active)?zh.build(a,r,this.id,this.open,i):this.open&&t.docChanged?this.open.map(t.changes):this.open;!o&&a.every((function(e){return 1!=e.state}))&&a.some((function(e){return e.hasResult()}))&&(a=a.map((function(e){return e.hasResult()?new qh(e.source,0):e})));var u,l=s(t.effects);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.is(Zh)&&(o=o&&o.setSelected(c.value,this.id))}}catch(f){l.e(f)}finally{l.f()}return a==this.active&&o==this.open?this:new e(a,this.id,o)}},{key:"tooltip",get:function(){return this.open?this.open.tooltip:null}},{key:"attrs",get:function(){return this.open?this.open.attrs:Hh}}],[{key:"start",value:function(){return new e(Kh,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}}]),e}();var Hh={"aria-autocomplete":"list"};function Gh(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}var Kh=[];function Wh(e,t){var n=t.match[0]-e.match[0];return n||e.completion.label.localeCompare(t.completion.label)}function Xh(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}var qh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;k(this,e),this.source=t,this.state=n,this.explicitPos=r}return b(e,[{key:"hasResult",value:function(){return!1}},{key:"update",value:function(t,n){var r=Xh(t),i=this;r?i=i.handleUserEvent(t,r,n):t.docChanged?i=i.handleChange(t):t.selection&&0!=i.state&&(i=new e(i.source,0));var a,o=s(t.effects);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(u.is($h))i=new e(i.source,1,u.value?Mh(t.state):-1);else if(u.is(Jh))i=new e(i.source,0);else if(u.is(Yh)){var l,c=s(u.value);try{for(c.s();!(l=c.n()).done;){var f=l.value;f.source==i.source&&(i=f)}}catch(h){c.e(h)}finally{c.f()}}}}catch(h){o.e(h)}finally{o.f()}return i}},{key:"handleUserEvent",value:function(t,n,r){return"delete"!=n&&r.activateOnTyping?new e(this.source,1):this.map(t.changes)}},{key:"handleChange",value:function(t){return t.changes.touchesRange(Mh(t.startState))?new e(this.source,0):this.map(t.changes)}},{key:"map",value:function(t){return t.empty||this.explicitPos<0?this:new e(this.source,this.state,t.mapPos(this.explicitPos))}}]),e}(),Qh=function(e){v(n,e);var t=y(n);function n(e,r,i,a,o){var s;return k(this,n),(s=t.call(this,e,2,r)).result=i,s.from=a,s.to=o,s}return b(n,[{key:"hasResult",value:function(){return!0}},{key:"handleUserEvent",value:function(e,t,r){var i,a=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=Mh(e.state);if((this.explicitPos<0?s<=a:s<this.from)||s>o||"delete"==t&&Mh(e.startState)==this.from)return new qh(this.source,"input"==t&&r.activateOnTyping?1:0);var u,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;var i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):Nh(e,!0).test(i)}(this.result.validFor,e.state,a,o)?new n(this.source,l,this.result,a,o):this.result.update&&(u=this.result.update(this.result,a,o,new Oh(e.state,s,l>=0)))?new n(this.source,l,u,u.from,null!==(i=u.to)&&void 0!==i?i:Mh(e.state)):new qh(this.source,1,l)}},{key:"handleChange",value:function(e){return e.changes.touchesRange(this.from,this.to)?new qh(this.source,0):this.map(e.changes)}},{key:"map",value:function(e){return e.empty?this:new n(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}]),n}(qh);var $h=Re.define(),Jh=Re.define(),Yh=Re.define({map:function(e,t){return e.map((function(e){return e.map(t)}))}}),Zh=Re.define(),ed=ce.define({create:function(){return jh.start()},update:function(e,t){return e.update(t)},provide:function(e){return[yo.from(e,(function(e){return e.tooltip})),fa.contentAttributes.from(e,(function(e){return e.attrs}))]}});function td(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return function(n){var r=n.state.field(ed,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;var i,a=1;"page"==t&&(i=Ao(n,r.open.tooltip))&&(a=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));var o=r.open.selected+a*(e?1:-1),s=r.open.options.length;return o<0?o="page"==t?0:s-1:o>=s&&(o="page"==t?s-1:0),n.dispatch({effects:Zh.of(o)}),!0}}var nd=b((function e(t,n){k(this,e),this.active=t,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0})),rd=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;var n,r=s(t.state.field(ed).active);try{for(r.s();!(n=r.n()).done;){var i=n.value;1==i.state&&this.startQuery(i)}}catch(a){r.e(a)}finally{r.f()}}return b(e,[{key:"update",value:function(e){var t=this,n=e.state.field(ed);if(e.selectionSet||e.docChanged||e.startState.field(ed)!=n){for(var r=e.transactions.some((function(e){return(e.selection||e.docChanged)&&!Xh(e)})),i=0;i<this.running.length;i++){var a=this.running[i];if(r||a.updates.length+e.transactions.length>50&&Date.now()-a.time>1e3){var o,u=s(a.context.abortListeners);try{for(u.s();!(o=u.n()).done;){var c=o.value;try{c()}catch(v){Qn(this.view.state,v)}}}catch(g){u.e(g)}finally{u.f()}a.context.abortListeners=null,this.running.splice(i--,1)}else{var f;(f=a.updates).push.apply(f,l(e.transactions))}}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=n.active.some((function(e){return 1==e.state&&!t.running.some((function(t){return t.active.source==e.source}))}))?setTimeout((function(){return t.startUpdate()}),50):-1,0!=this.composing){var h,d=s(e.transactions);try{for(d.s();!(h=d.n()).done;){var p=h.value;"input"==Xh(p)?this.composing=2:2==this.composing&&p.selection&&(this.composing=3)}}catch(g){d.e(g)}finally{d.f()}}}}},{key:"startUpdate",value:function(){var e=this;this.debounceUpdate=-1;var t,n=s(this.view.state.field(ed).active);try{var r=function(){var n=t.value;1!=n.state||e.running.some((function(e){return e.active.source==n.source}))||e.startQuery(n)};for(n.s();!(t=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}},{key:"startQuery",value:function(e){var t=this,n=this.view.state,r=Mh(n),i=new Oh(n,r,e.explicitPos==r),a=new nd(e,i);this.running.push(a),Promise.resolve(e.source(i)).then((function(e){a.context.aborted||(a.done=e||null,t.scheduleAccept())}),(function(e){t.view.dispatch({effects:Jh.of(null)}),Qn(t.view.state,e)}))}},{key:"scheduleAccept",value:function(){var e=this;this.running.every((function(e){return void 0!==e.done}))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((function(){return e.accept()}),50))}},{key:"accept",value:function(){var e,t=this;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;for(var n=[],r=this.view.state.facet(Uh),i=function(i){var o=t.running[i];if(void 0===o.done)return a=i,"continue";if(t.running.splice(i--,1),o.done){var u,l=new Qh(o.active.source,o.active.explicitPos,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:Mh(o.updates.length?o.updates[0].startState:t.view.state)),c=s(o.updates);try{for(c.s();!(u=c.n()).done;){var f=u.value;l=l.update(f,r)}}catch(m){c.e(m)}finally{c.f()}if(l.hasResult())return n.push(l),a=i,"continue"}var h=t.view.state.field(ed).active.find((function(e){return e.source==o.active.source}));if(h&&1==h.state)if(null==o.done){var d,p=new qh(o.active.source,0),v=s(o.updates);try{for(v.s();!(d=v.n()).done;){var g=d.value;p=p.update(g,r)}}catch(m){v.e(m)}finally{v.f()}1!=p.state&&n.push(p)}else t.startQuery(h);a=i},a=0;a<this.running.length;a++)i(a);n.length&&this.view.dispatch({effects:Yh.of(n)})}}]),e}(),{eventHandlers:{blur:function(){var e=this.view.state.field(ed,!1);e&&e.tooltip&&this.view.state.facet(Uh).closeOnBlur&&this.view.dispatch({effects:Jh.of(null)})},compositionstart:function(){this.composing=1},compositionend:function(){var e=this;3==this.composing&&setTimeout((function(){return e.view.dispatch({effects:$h.of(!1)})}),20),this.composing=0}}}),id=fa.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});var ad={brackets:["(","[","{","'",'"'],before:")]}:;>"},od=Re.define({map:function(e,t){var n=t.mapPos(e,-1,K.TrackAfter);return null==n?void 0:n}}),sd=Re.define({map:function(e,t){return t.mapPos(e)}}),ud=new(function(e){v(n,e);var t=y(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n)}(Xe));ud.startSide=1,ud.endSide=-1;var ld=ce.define({create:function(){return Je.empty},update:function(e,t){if(t.selection){var n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=Je.empty)}e=e.map(t.changes);var i,a=s(t.effects);try{var o=function(){var t=i.value;t.is(od)?e=e.update({add:[ud.range(t.value,t.value+1)]}):t.is(sd)&&(e=e.update({filter:function(e){return e!=t.value}}))};for(a.s();!(i=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return e}});function cd(){return[vd,ld]}var fd="()[]{}<>";function hd(e){for(var t=0;t<fd.length;t+=2)if(fd.charCodeAt(t)==e)return fd.charAt(t+1);return j(e<128?e:e+1)}function dd(e,t){return e.languageDataAt("closeBrackets",t)[0]||ad}var pd="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),vd=fa.inputHandler.of((function(e,t,n,r){if((pd?e.composing:e.compositionStarted)||e.state.readOnly)return!1;var i=e.state.selection.main;if(r.length>2||2==r.length&&1==H(z(r,0))||t!=i.from||n!=i.to)return!1;var a=function(e,t){var n,r=dd(e,e.selection.main.head),i=r.brackets||ad.brackets,a=s(i);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=hd(z(o,0));if(t==o)return u==o?bd(e,o,i.indexOf(o+o+o)>-1):kd(e,o,u,r.before||ad.before);if(t==u&&md(e,e.selection.main.from))return _d(e,o,u)}}catch(l){a.e(l)}finally{a.f()}return null}(e.state,r);return!!a&&(e.dispatch(a),!0)})),gd=[{key:"Backspace",run:function(e){var t=e.state,n=e.dispatch;if(t.readOnly)return!1;var r=dd(t,t.selection.main.head).brackets||ad.brackets,i=null,a=t.changeByRange((function(e){if(e.empty){var n,a=function(e,t){var n=e.sliceString(t-2,t);return H(z(n,0))==n.length?n:n.slice(1)}(t.doc,e.head),o=s(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(u==a&&yd(t.doc,e.head)==hd(z(u,0)))return{changes:{from:e.head-u.length,to:e.head+u.length},range:te.cursor(e.head-u.length),userEvent:"delete.backward"}}}catch(l){o.e(l)}finally{o.f()}}return{range:i=e}}));return i||n(t.update(a,{scrollIntoView:!0})),!i}}];function md(e,t){var n=!1;return e.field(ld).between(0,e.doc.length,(function(e){e==t&&(n=!0)})),n}function yd(e,t){var n=e.sliceString(t,t+2);return n.slice(0,H(z(n,0)))}function kd(e,t,n,r){var i=null,a=e.changeByRange((function(a){if(!a.empty)return{changes:[{insert:t,from:a.from},{insert:n,from:a.to}],effects:od.of(a.to+t.length),range:te.range(a.anchor+t.length,a.head+t.length)};var o=yd(e.doc,a.head);return!o||/\s/.test(o)||r.indexOf(o)>-1?{changes:{insert:t+n,from:a.head},effects:od.of(a.head+t.length),range:te.cursor(a.head+t.length)}:{range:i=a}}));return i?null:e.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function _d(e,t,n){var r=null,i=e.selection.ranges.map((function(t){return t.empty&&yd(e.doc,t.head)==n?te.cursor(t.head+n.length):r=t}));return r?null:e.update({selection:te.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((function(e){var t=e.from;return sd.of(t)}))})}function bd(e,t,n){var r=null,i=e.changeByRange((function(i){if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:od.of(i.to+t.length),range:te.range(i.anchor+t.length,i.head+t.length)};var a=i.head,o=yd(e.doc,a);if(o==t){if(wd(e,a))return{changes:{insert:t+t,from:a},effects:od.of(a+t.length),range:te.cursor(a+t.length)};if(md(e,a)){var s=n&&e.sliceDoc(a,a+3*t.length)==t+t+t;return{range:te.cursor(a+t.length*(s?3:1)),effects:sd.of(a)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&wd(e,a-2*t.length))return{changes:{insert:t+t+t+t,from:a},effects:od.of(a+t.length),range:te.cursor(a+t.length)};if(e.charCategorizer(a)(o)!=je.Word){var u=e.sliceDoc(a-1,a);if(u!=t&&e.charCategorizer(a)(u)!=je.Word&&!function(e,t,n){for(var r=fu(e).resolveInner(t,-1),i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;var a=r.to==t&&r.parent;if(!a)break;r=a}return!1}(e,a,t))return{changes:{insert:t+t,from:a},effects:od.of(a+t.length),range:te.cursor(a+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function wd(e,t){var n=fu(e).resolveInner(t+1);return n.parent&&n.from==t}function xd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[ed,Uh.of(e),rd,Sd,id]}var Ad=[{key:"Ctrl-Space",run:function(e){return!!e.state.field(ed,!1)&&(e.dispatch({effects:$h.of(!0)}),!0)}},{key:"Escape",run:function(e){var t=e.state.field(ed,!1);return!(!t||!t.active.some((function(e){return 0!=e.state})))&&(e.dispatch({effects:Jh.of(null)}),!0)}},{key:"ArrowDown",run:td(!0)},{key:"ArrowUp",run:td(!1)},{key:"PageDown",run:td(!0,"page")},{key:"PageUp",run:td(!1,"page")},{key:"Enter",run:function(e){var t=e.state.field(ed,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(Rh(e,t.open.options[t.open.selected]),!0)}}],Sd=ge.highest(_a.computeN([Uh],(function(e){return e.facet(Uh).defaultKeymap?[Ad]:[]})));var Ld=b((function e(t,n,r){k(this,e),this.from=t,this.to=n,this.diagnostic=r})),Od=function(){function e(t,n,r){k(this,e),this.diagnostics=t,this.panel=n,this.selected=r}return b(e,null,[{key:"init",value:function(t,n,r){var i=t,a=r.facet(zd).markerFilter;a&&(i=a(i));var o=En.set(i.map((function(e){return e.from==e.to||e.from==e.to-1&&r.doc.lineAt(e.from).to==e.from?En.widget({widget:new Gd(e),diagnostic:e}).range(e.from):En.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to)})),!0);return new e(o,n,Td(o))}}]),e}();function Td(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=null;return e.between(n,1e9,(function(e,n,i){var a=i.spec;if(!t||a.diagnostic==t)return r=new Ld(e,n,a.diagnostic),!1})),r}function Ed(e,t){return!(!e.effects.some((function(e){return e.is(Md)}))&&!e.changes.touchesRange(t.pos))}function Cd(e,t){return e.field(Pd,!1)?t:t.concat(Re.appendConfig.of([Pd,fa.decorations.compute([Pd],(function(e){var t=e.field(Pd),n=t.selected,r=t.panel;return n&&r&&n.from!=n.to?En.set([Id.range(n.from,n.to)]):En.none})),xo(Dd,{hideOn:Ed}),Qd]))}var Md=Re.define(),Nd=Re.define(),Rd=Re.define(),Pd=ce.define({create:function(){return new Od(En.none,null,null)},update:function(e,t){if(t.docChanged){var n=e.diagnostics.map(t.changes),r=null;if(e.selected){var i=t.changes.mapPos(e.selected.from,1);r=Td(n,e.selected.diagnostic,i)||Td(n,null,i)}e=new Od(n,e.panel,r)}var a,o=s(t.effects);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.is(Md)?e=Od.init(u.value,e.panel,t.state):u.is(Nd)?e=new Od(e.diagnostics,u.value?Wd.open:null,e.selected):u.is(Rd)&&(e=new Od(e.diagnostics,e.panel,u.value))}}catch(l){o.e(l)}finally{o.f()}return e},provide:function(e){return[Mo.from(e,(function(e){return e.panel})),fa.decorations.from(e,(function(e){return e.diagnostics}))]}});var Id=En.mark({class:"cm-lintRange cm-lintRange-active"});function Dd(e,t,n){var r=e.state.field(Pd).diagnostics,i=[],a=2e8,o=0;r.between(t-(n<0?1:0),t+(n>0?1:0),(function(e,r,s){var u=s.spec;t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(u.diagnostic),a=Math.min(e,a),o=Math.max(r,o))}));var s=e.state.facet(zd).tooltipFilter;return s&&(i=s(i)),i.length?{pos:a,end:o,above:e.state.doc.lineAt(a).to<o,create:function(){return{dom:Ud(e,i)}}}:null}function Ud(e,t){return Tf("ul",{class:"cm-tooltip-lint"},t.map((function(t){return Hd(e,t,!1)})))}var Bd=function(e){var t=e.state.field(Pd,!1);return!(!t||!t.panel)&&(e.dispatch({effects:Nd.of(!1)}),!0)},Vd=[{key:"Mod-Shift-m",run:function(e){var t=e.state.field(Pd,!1);t&&t.panel||e.dispatch({effects:Cd(e.state,[Nd.of(!0)])});var n=Oo(e,Wd.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:function(e){var t=e.state.field(Pd,!1);if(!t)return!1;var n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(!(r=t.diagnostics.iter(0)).value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],Fd=Zn.fromClass(function(){function e(t){k(this,e),this.view=t,this.timeout=-1,this.set=!0;var n=t.state.facet(zd).delay;this.lintTime=Date.now()+n,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,n)}return b(e,[{key:"run",value:function(){var e=this,t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;var n=this.view.state,r=n.facet(zd).sources;Promise.all(r.map((function(t){return Promise.resolve(t(e.view))}))).then((function(t){var r=t.reduce((function(e,t){return e.concat(t)}));e.view.state.doc==n.doc&&e.view.dispatch(function(e,t){return{effects:Cd(e,[Md.of(t)])}}(e.view.state,r))}),(function(t){Qn(e.view.state,t)}))}}},{key:"update",value:function(e){var t=e.state.facet(zd);(e.docChanged||t!=e.startState.facet(zd))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}},{key:"force",value:function(){this.set&&(this.lintTime=Date.now(),this.run())}},{key:"destroy",value:function(){clearTimeout(this.timeout)}}]),e}()),zd=ie.define({combine:function(e){return Object.assign({sources:e.map((function(e){return e.source}))},We(e.map((function(e){return e.config})),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:Fd});function jd(e){var t=[];if(e){var n,r=s(e);try{e:for(r.s();!(n=r.n()).done;){for(var i=n.value.name,a=function(e){var n=i[e];if(/[a-zA-Z]/.test(n)&&!t.some((function(e){return e.toLowerCase()==n.toLowerCase()})))return t.push(n),"continue|actions"},o=0;o<i.length;o++){if("continue|actions"===a(o))continue e}t.push("")}}catch(u){r.e(u)}finally{r.f()}}return t}function Hd(e,t,n){var r,i=n?jd(t.actions):[];return Tf("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Tf("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map((function(n,r){var a=function(r){r.preventDefault();var i=Td(e.state.field(Pd).diagnostics,t);i&&n.apply(e,i.from,i.to)},o=n.name,s=i[r]?o.indexOf(i[r]):-1,u=s<0?o:[o.slice(0,s),Tf("u",o.slice(s,s+1)),o.slice(s+1)];return Tf("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":" Action: ".concat(o).concat(s<0?"":' (access key "'.concat(i[r],')"'),".")},u)})),t.source&&Tf("div",{class:"cm-diagnosticSource"},t.source))}var Gd=function(e){v(n,e);var t=y(n);function n(e){var r;return k(this,n),(r=t.call(this)).diagnostic=e,r}return b(n,[{key:"eq",value:function(e){return e.diagnostic==this.diagnostic}},{key:"toDOM",value:function(){return Tf("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}]),n}(On),Kd=b((function e(t,n){k(this,e),this.diagnostic=n,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Hd(t,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")})),Wd=function(){function e(t){var n=this;k(this,e),this.view=t,this.items=[];this.list=Tf("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:function(e){if(27==e.keyCode)Bd(n.view),n.view.focus();else if(38==e.keyCode||33==e.keyCode)n.moveSelection((n.selectedIndex-1+n.items.length)%n.items.length);else if(40==e.keyCode||34==e.keyCode)n.moveSelection((n.selectedIndex+1)%n.items.length);else if(36==e.keyCode)n.moveSelection(0);else if(35==e.keyCode)n.moveSelection(n.items.length-1);else if(13==e.keyCode)n.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&n.selectedIndex>=0))return;for(var r=n.items[n.selectedIndex].diagnostic,i=jd(r.actions),a=0;a<i.length;a++)if(i[a].toUpperCase().charCodeAt(0)==e.keyCode){var o=Td(n.view.state.field(Pd).diagnostics,r);o&&r.actions[a].apply(t,o.from,o.to)}}e.preventDefault()},onclick:function(e){for(var t=0;t<n.items.length;t++)n.items[t].dom.contains(e.target)&&n.moveSelection(t)}}),this.dom=Tf("div",{class:"cm-panel-lint"},this.list,Tf("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:function(){return Bd(n.view)}},"\xd7")),this.update()}return b(e,[{key:"selectedIndex",get:function(){var e=this.view.state.field(Pd).selected;if(!e)return-1;for(var t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}},{key:"update",value:function(){var e=this,t=this.view.state.field(Pd),n=t.diagnostics,r=t.selected,i=0,a=!1,o=null;for(n.between(0,this.view.state.doc.length,(function(t,n,s){for(var u,l=s.spec,c=-1,f=i;f<e.items.length;f++)if(e.items[f].diagnostic==l.diagnostic){c=f;break}c<0?(u=new Kd(e.view,l.diagnostic),e.items.splice(i,0,u),a=!0):(u=e.items[c],c>i&&(e.items.splice(i,c-i),a=!0)),r&&u.diagnostic==r.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),o=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)a=!0,this.items.pop();0==this.items.length&&(this.items.push(new Kd(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),a=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:function(){return{sel:o.dom.getBoundingClientRect(),panel:e.list.getBoundingClientRect()}},write:function(t){var n=t.sel,r=t.panel;n.top<r.top?e.list.scrollTop-=r.top-n.top:n.bottom>r.bottom&&(e.list.scrollTop+=n.bottom-r.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),a&&this.sync()}},{key:"sync",value:function(){var e=this.list.firstChild;function t(){var t=e;e=t.nextSibling,t.remove()}var n,r=s(this.items);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e)}}catch(a){r.e(a)}finally{r.f()}for(;e;)t()}},{key:"moveSelection",value:function(e){if(!(this.selectedIndex<0)){var t=Td(this.view.state.field(Pd).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Rd.of(t)})}}}],[{key:"open",value:function(t){return new e(t)}}]),e}();function Xd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"';return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(t,">").concat(encodeURIComponent(e),"</svg>')")}function qd(e){return Xd('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}var Qd=fa.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:qd("#d11")},".cm-lintRange-warning":{backgroundImage:qd("orange")},".cm-lintRange-info":{backgroundImage:qd("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});var $d=[$o(),es(),qa(),sc(),nl(),Ta(),Fa(),Ke.allowMultipleSelections.of(!0),Du(),ul(fl,{fallback:!0}),bl(),cd(),xd(),oo(),lo(),Za(),Gf(),_a.of([].concat(l(gd),l(Lf),l(_h),l(xc),l(Qu),l(Ad),l(Vd)))],Jd="#e06c75",Yd="#abb2bf",Zd="#7d8799",ep="#d19a66",tp="#2c313a",np="#282c34",rp="#353a42",ip="#528bff",ap=[fa.theme({"&":{color:Yd,backgroundColor:np},".cm-content":{caretColor:ip},".cm-cursor, .cm-dropCursor":{borderLeftColor:ip},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:Yd},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:tp},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{backgroundColor:np,color:Zd,border:"none"},".cm-activeLineGutter":{backgroundColor:tp},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:rp},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:rp,borderBottomColor:rp},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:tp,color:Yd}}},{dark:!0}),ul(il.define([{tag:au.keyword,color:"#c678dd"},{tag:[au.name,au.deleted,au.character,au.propertyName,au.macroName],color:Jd},{tag:[au.function(au.variableName),au.labelName],color:"#61afef"},{tag:[au.color,au.constant(au.name),au.standard(au.name)],color:ep},{tag:[au.definition(au.name),au.separator],color:Yd},{tag:[au.typeName,au.className,au.number,au.changed,au.annotation,au.modifier,au.self,au.namespace],color:"#e5c07b"},{tag:[au.operator,au.operatorKeyword,au.url,au.escape,au.regexp,au.link,au.special(au.string)],color:"#56b6c2"},{tag:[au.meta,au.comment],color:Zd},{tag:au.strong,fontWeight:"bold"},{tag:au.emphasis,fontStyle:"italic"},{tag:au.strikethrough,textDecoration:"line-through"},{tag:au.link,color:Zd,textDecoration:"underline"},{tag:au.heading,fontWeight:"bold",color:Jd},{tag:[au.atom,au.bool,au.special(au.variableName)],color:ep},{tag:[au.processingInstruction,au.string,au.inserted],color:"#98c379"},{tag:au.invalid,color:"#ffffff"}]))],op=fa.theme({"&":{backgroundColor:"#fff"}},{dark:!1});function sp(e){var n=e.value,r=e.selection,i=e.onChange,a=e.onUpdate,s=e.extensions,u=void 0===s?[]:s,l=e.autoFocus,c=e.theme,f=void 0===c?"light":c,h=e.height,d=void 0===h?"":h,p=e.minHeight,v=void 0===p?"":p,g=e.maxHeight,m=void 0===g?"":g,y=e.placeholder,_=void 0===y?"":y,w=e.width,x=void 0===w?"":w,A=e.minWidth,S=void 0===A?"":A,L=e.maxWidth,O=void 0===L?"":L,T=e.editable,E=void 0===T||T,C=e.readOnly,M=void 0!==C&&C,N=e.indentWithTab,R=void 0===N||N,P=e.basicSetup,I=void 0===P||P,D=e.root,U=o((0,t.useState)(e.container),2),B=U[0],V=U[1],F=o((0,t.useState)(),2),z=F[0],j=F[1],H=o((0,t.useState)(),2),G=H[0],K=H[1],W=fa.theme({"&":{height:d,minHeight:v,maxHeight:m,width:x,minWidth:S,maxWidth:O}}),X=[fa.updateListener.of((function(e){if(e.docChanged&&"function"===typeof i){var t=e.state.doc.toString();i(t,e)}})),W];switch(R&&X.unshift(_a.of([Of])),I&&X.unshift($d),_&&X.unshift(function(e){return Zn.fromClass(function(){function t(n){k(this,t),this.view=n,this.placeholder=En.set([En.widget({widget:new no(e),side:1}).range(0)])}return b(t,[{key:"decorations",get:function(){return this.view.state.doc.length?En.none:this.placeholder}}]),t}(),{decorations:function(e){return e.decorations}})}(_)),f){case"light":X.push(op);break;case"dark":X.push(ap);break;default:X.push(f)}return!1===E&&X.push(fa.editable.of(!1)),M&&X.push(Ke.readOnly.of(!0)),a&&"function"===typeof a&&X.push(fa.updateListener.of(a)),X=X.concat(u),(0,t.useEffect)((function(){if(B&&!G){var e=Ke.create({doc:n,selection:r,extensions:X});if(K(e),!z){var t=new fa({state:e,parent:B,root:D});j(t)}}return function(){z&&j(void 0)}}),[B,G]),(0,t.useEffect)((function(){return function(){z&&(z.destroy(),j(void 0))}}),[z]),(0,t.useEffect)((function(){l&&z&&z.focus()}),[l,z]),(0,t.useEffect)((function(){var e=z?z.state.doc.toString():"";z&&n!==e&&z.dispatch({changes:{from:0,to:e.length,insert:n||""}})}),[n,z]),(0,t.useEffect)((function(){z&&z.dispatch({effects:Re.reconfigure.of(X)})}),[f,u,d,v,m,x,_,S,O,E,R,I]),{state:G,setState:K,view:z,setView:j,container:B,setContainer:V}}var up=n(184),lp=["className","value","selection","extensions","onChange","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root"],cp=t.forwardRef((function(e,n){var r=e.className,i=e.value,a=void 0===i?"":i,o=e.selection,s=e.extensions,l=void 0===s?[]:s,c=e.onChange,f=e.onUpdate,h=e.autoFocus,d=e.theme,p=void 0===d?"light":d,v=e.height,g=e.minHeight,m=e.maxHeight,y=e.width,k=e.minWidth,_=e.maxWidth,b=e.basicSetup,w=e.placeholder,x=e.indentWithTab,A=e.editable,S=e.readOnly,L=e.root,O=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,lp),T=(0,t.useRef)(null),E=sp({container:T.current,root:L,value:a,autoFocus:h,theme:p,height:v,minHeight:g,maxHeight:m,width:y,minWidth:k,maxWidth:_,basicSetup:b,placeholder:w,indentWithTab:x,editable:A,readOnly:S,selection:o,onChange:c,onUpdate:f,extensions:l}),C=E.state,M=E.view,N=E.container,R=E.setContainer;if((0,t.useImperativeHandle)(n,(function(){return{editor:N,state:C,view:M}}),[N,C,M]),(0,t.useEffect)((function(){R(T.current)}),[]),"string"!==typeof a)throw new Error("value must be typeof string but got "+typeof a);var P="string"===typeof p?"cm-theme-"+p:"cm-theme";return(0,up.jsx)("div",u({ref:T,className:P+(r?" "+r:"")},O))}));cp.displayName="CodeMirror";var fp,hp=cp,dp=function(){function e(t,n,r,i,a,o,s,u,l){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10?arguments[10]:void 0;k(this,e),this.p=t,this.stack=n,this.state=r,this.reducePos=i,this.pos=a,this.score=o,this.buffer=s,this.bufferBase=u,this.curContext=l,this.lookAhead=c,this.parent=f}return b(e,[{key:"toString",value:function(){return"[".concat(this.stack.filter((function(e,t){return t%3==0})).concat(this.state),"]@").concat(this.pos).concat(this.score?"!"+this.score:"")}},{key:"context",get:function(){return this.curContext?this.curContext.context:null}},{key:"pushState",value:function(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}},{key:"reduce",value:function(e){var t=e>>19,n=65535&e,r=this.p.parser,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);var a=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[a-2],s=this.stack[a-1],u=this.bufferBase+this.buffer.length-s;if(n<r.minRepeatTerm||131072&e){var l=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,o,l,u+4,!0)}if(262144&e)this.state=this.stack[a];else{var c=this.stack[a-3];this.state=r.getGoto(c,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,o)}},{key:"storeNode",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){var a=this,o=this.buffer.length;if(0==o&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&0==a.buffer[o-4]&&a.buffer[o-1]>-1){if(t==n)return;if(a.buffer[o-2]>=t)return void(a.buffer[o-2]=n)}}if(i&&this.pos!=n){var s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>n;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=n,this.buffer[s+3]=r}else this.buffer.push(e,t,n,r)}},{key:"shift",value:function(e,t,n){var r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){var i=e,a=this.p.parser;(n>this.pos||t<=a.maxNode)&&(this.pos=n,a.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}},{key:"apply",value:function(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}},{key:"useNode",value:function(e,t){var n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);var r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}},{key:"split",value:function(){for(var t=this,n=t.buffer.length;n>0&&t.buffer[n-2]>t.reducePos;)n-=4;for(var r=t.buffer.slice(n),i=t.bufferBase+n;t&&i==t.bufferBase;)t=t.parent;return new e(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,t)}},{key:"recoverByDelete",value:function(e,t){var n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}},{key:"canShift",value:function(e){for(var t=new vp(this);;){var n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}},{key:"recoverByInsert",value:function(e){if(this.stack.length>=300)return[];var t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){for(var n,r=[],i=0;i<t.length;i+=2)(n=t[i+1])!=this.state&&this.p.parser.hasAction(n,e)&&r.push(t[i],n);if(this.stack.length<120)for(var a=function(e){var n=t[e+1];r.some((function(e,t){return 1&t&&e==n}))||r.push(t[e],n)},o=0;r.length<8&&o<t.length;o+=2)a(o);t=r}for(var s=[],u=0;u<t.length&&s.length<4;u+=2){var l=t[u+1];if(l!=this.state){var c=this.split();c.pushState(l,this.pos),c.storeNode(0,c.pos,c.pos,4,!0),c.shiftContext(t[u],this.pos),c.score-=200,s.push(c)}}return s}},{key:"forceReduce",value:function(){var e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;var t=this.p.parser;if(!t.validAction(this.state,e)){var n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}},{key:"forceAll",value:function(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}},{key:"deadEnd",get:function(){if(3!=this.stack.length)return!1;var e=this.p.parser;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}},{key:"restart",value:function(){this.state=this.stack[0],this.stack.length=0}},{key:"sameState",value:function(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(var t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}},{key:"parser",get:function(){return this.p.parser}},{key:"dialectEnabled",value:function(e){return this.p.parser.dialect.flags[e]}},{key:"shiftContext",value:function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}},{key:"reduceContext",value:function(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}},{key:"emitContext",value:function(){var e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}},{key:"emitLookAhead",value:function(){var e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}},{key:"updateContext",value:function(e){if(e!=this.curContext.context){var t=new pp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}},{key:"setLookAhead",value:function(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}},{key:"close",value:function(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}],[{key:"start",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.parser.context;return new e(t,[],n,r,r,0,[],0,i?new pp(i,i.start):null,0,null)}}]),e}(),pp=b((function e(t,n){k(this,e),this.tracker=t,this.context=n,this.hash=t.strict?t.hash(n):0}));!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(fp||(fp={}));var vp=function(){function e(t){k(this,e),this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}return b(e,[{key:"reduce",value:function(e){var t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);var r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}]),e}(),gp=function(){function e(t,n,r){k(this,e),this.stack=t,this.pos=n,this.index=r,this.buffer=t.buffer,0==this.index&&this.maybeNext()}return b(e,[{key:"maybeNext",value:function(){var e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}},{key:"id",get:function(){return this.buffer[this.index-4]}},{key:"start",get:function(){return this.buffer[this.index-3]}},{key:"end",get:function(){return this.buffer[this.index-2]}},{key:"size",get:function(){return this.buffer[this.index-1]}},{key:"next",value:function(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}},{key:"fork",value:function(){return new e(this.stack,this.pos,this.index)}}],[{key:"create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.bufferBase+t.buffer.length;return new e(t,n,n-t.bufferBase)}}]),e}(),mp=b((function e(){k(this,e),this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0})),yp=new mp,kp=function(){function e(t,n){k(this,e),this.input=t,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=yp,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}return b(e,[{key:"resolveOffset",value:function(e,t){for(var n=this.range,r=this.rangeIndex,i=this.pos+e;i<n.from;){if(!r)return null;var a=this.ranges[--r];i-=n.from-a.to,n=a}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;var o=this.ranges[++r];i+=o.from-n.to,n=o}return i}},{key:"peek",value:function(e){var t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{var i=this.resolveOffset(e,1);if(null==i)return-1;if((t=i)>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{for(var a=this.rangeIndex,o=this.range;o.to<=t;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}},{key:"acceptToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}},{key:"getChunk",value:function(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){var e=this.chunk,t=this.chunkPos;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;var n=this.input.chunk(this.pos),r=this.pos+n.length;this.chunk=r>this.range.to?n.slice(0,this.range.to-this.pos):n,this.chunkPos=this.pos,this.chunkOff=0}}},{key:"readNext",value:function(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}},{key:"advance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}},{key:"setDone",value:function(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}},{key:"reset",value:function(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=yp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}},{key:"read",value:function(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);var n,r="",i=s(this.ranges);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.from>=t)break;a.to>e&&(r+=this.input.read(Math.max(a.from,e),Math.min(a.to,t)))}}catch(o){i.e(o)}finally{i.f()}return r}}]),e}(),_p=function(){function e(t,n){k(this,e),this.data=t,this.id=n}return b(e,[{key:"token",value:function(e,t){!function(e,t,n,r){var i=0,a=1<<r,o=n.p.parser,s=o.dialect;e:for(;0!=(a&e[i]);){for(var u=e[i+1],l=i+3;l<u;l+=2)if((e[l+1]&a)>0){var c=e[l];if(s.allows(c)&&(-1==t.token.value||t.token.value==c||o.overrides(c,t.token.value))){t.acceptToken(c);break}}for(var f=t.next,h=0,d=e[i+2];h<d;){var p=h+d>>1,v=u+p+(p<<1),g=e[v],m=e[v+1];if(f<g)d=p;else{if(!(f>=m)){i=e[v+2],t.advance();continue e}h=p+1}}break}}(this.data,e,t,this.id)}}]),e}();_p.prototype.contextual=_p.prototype.fallback=_p.prototype.extend=!1;function bp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uint16Array;if("string"!=typeof e)return e;for(var n=null,r=0,i=0;r<e.length;){for(var a=0;;){var o=e.charCodeAt(r++),s=!1;if(126==o){a=65535;break}o>=92&&o--,o>=34&&o--;var u=o-32;if(u>=46&&(u-=46,s=!0),a+=u,s)break;a*=46}n?n[i++]=a:n=new t(a)}return n}var wp,xp="undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/sandbox",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_URL:"/sandbox",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.LOG),Ap=null;function Sp(e,t,n){var r=e.cursor(ss.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(wp||(wp={}));var Lp,Op=function(){function e(t,n){k(this,e),this.fragments=t,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}return b(e,[{key:"nextFragment",value:function(){var e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Sp(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Sp(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}},{key:"nodeAt",value:function(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){var t=this.trees.length-1;if(t<0)return this.nextFragment(),null;var n=this.trees[t],r=this.index[t];if(r!=n.children.length){var i=n.children[r],a=this.start[t]+n.positions[r];if(a>e)return this.nextStart=a,null;if(i instanceof fs){if(a==e){if(a<this.safeFrom)return null;var o=a+i.length;if(o<=this.safeTo){var s=i.prop(is.lookAhead);if(!s||o+s<this.fragment.to)return i}}this.index[t]++,a+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+i.length}else this.trees.pop(),this.start.pop(),this.index.pop()}}}]),e}(),Tp=function(){function e(t,n){k(this,e),this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((function(e){return new mp}))}return b(e,[{key:"getActions",value:function(e){for(var t=0,n=null,r=e.p.parser,i=r.tokenizers,a=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,s=0,u=0;u<i.length;u++)if(0!=(1<<u&a)){var l=i[u],c=this.tokens[u];if((!n||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=a||c.context!=o)&&(this.updateCachedToken(c,l,e),c.mask=a,c.context=o),c.lookAhead>c.end+25&&(s=Math.max(c.lookAhead,s)),0!=c.value)){var f=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),n||e.pos!=this.stream.end||((n=new mp).value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}},{key:"getMainToken",value:function(e){if(this.mainToken)return this.mainToken;var t=new mp,n=e.pos,r=e.p;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}},{key:"updateCachedToken",value:function(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){for(var r=n.p.parser,i=0;i<r.specialized.length;i++)if(r.specialized[i]==e.value){var a=r.specializers[i](this.stream.read(e.start,e.end),n);if(a>=0&&n.p.parser.dialect.allows(a>>1)){0==(1&a)?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}},{key:"putAction",value:function(e,t,n,r){for(var i=0;i<r;i+=3)if(this.actions[i]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}},{key:"addActions",value:function(e,t,n,r){for(var i=e.state,a=e.p.parser,o=a.data,s=0;s<2;s++)for(var u=a.stateSlot(i,s?2:1);;u+=3){if(65535==o[u]){if(1!=o[u+1]){0==r&&2==o[u+1]&&(r=this.putAction(Rp(o,u+2),t,n,r));break}u=Rp(o,u+2)}o[u]==t&&(r=this.putAction(Rp(o,u+1),t,n,r))}return r}}]),e}();!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(Lp||(Lp={}));var Ep=function(){function e(t,n,r,i){k(this,e),this.parser=t,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new kp(n,i),this.tokens=new Tp(t,this.stream),this.topTerm=t.top[1];var a=i[0].from;this.stacks=[dp.start(this,t.top[0],a)],this.fragments=r.length&&this.stream.end-a>4*t.bufferLength?new Op(r,t.nodeSet):null}return b(e,[{key:"parsedPos",get:function(){return this.minStackPos}},{key:"advance",value:function(){for(var e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[],a=0;a<n.length;a++)for(var o=n[a];;){if(this.tokens.mainToken=null,o.pos>r)i.push(o);else{if(this.advanceStack(o,i,n))continue;e||(e=[],t=[]),e.push(o);var u=this.tokens.getMainToken(o);t.push(u.value,u.end)}break}if(!i.length){var l=e&&function(e){var t,n=null,r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=a&&i.pos>a)&&i.p.parser.stateFlag(i.state,2)&&(!n||n.score<i.score)&&(n=i)}}catch(o){r.e(o)}finally{r.f()}return n}(e);if(l)return this.stackToTree(l);if(this.parser.strict)throw xp&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){var c=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(c)return this.stackToTree(c.forceAll())}if(this.recovering){var f=1==this.recovering?1:3*this.recovering;if(i.length>f)for(i.sort((function(e,t){return t.score-e.score}));i.length>f;)i.pop();i.some((function(e){return e.reducePos>r}))&&this.recovering--}else if(i.length>1)e:for(var h=0;h<i.length-1;h++)for(var d=i[h],p=h+1;p<i.length;p++){var v=i[p];if(d.sameState(v)||d.buffer.length>500&&v.buffer.length>500){if(!((d.score-v.score||d.buffer.length-v.buffer.length)>0)){i.splice(h--,1);continue e}i.splice(p--,1)}}this.minStackPos=i[0].pos;for(var g=1;g<i.length;g++)i[g].pos<this.minStackPos&&(this.minStackPos=i[g].pos);return null}},{key:"stopAt",value:function(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}},{key:"advanceStack",value:function(e,t,n){var r=e.pos,i=this.parser,a=xp?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments)for(var o=e.curContext&&e.curContext.tracker.strict,s=o?e.curContext.hash:0,u=this.fragments.nodeAt(r);u;){var l=this.parser.nodeSet.types[u.type.id]==u.type?i.getGoto(e.state,u.type.id):-1;if(l>-1&&u.length&&(!o||(u.prop(is.contextHash)||0)==s))return e.useNode(u,l),xp&&console.log(a+this.stackID(e)+" (via reuse of ".concat(i.getName(u.type.id),")")),!0;if(!(u instanceof fs)||0==u.children.length||u.positions[0]>0)break;var c=u.children[0];if(!(c instanceof fs&&0==u.positions[0]))break;u=c}var f=i.stateSlot(e.state,4);if(f>0)return e.reduce(f),xp&&console.log(a+this.stackID(e)+" (via always-reduce ".concat(i.getName(65535&f),")")),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););for(var h=this.tokens.getActions(e),d=0;d<h.length;){var p=h[d++],v=h[d++],g=h[d++],m=d==h.length||!n,y=m?e:e.split();if(y.apply(p,v,g),xp&&console.log(a+this.stackID(y)+" (via ".concat(0==(65536&p)?"shift":"reduce of ".concat(i.getName(65535&p))," for ").concat(i.getName(v)," @ ").concat(r).concat(y==e?"":", split",")")),m)return!0;y.pos>r?t.push(y):n.push(y)}return!1}},{key:"advanceFully",value:function(e,t){for(var n=e.pos;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Cp(e,t),!0}}},{key:"runRecovery",value:function(e,t,n){for(var r=null,i=!1,a=0;a<e.length;a++){var o=e[a],u=t[a<<1],l=t[1+(a<<1)],c=xp?this.stackID(o)+" -> ":"";if(o.deadEnd){if(i)continue;if(i=!0,o.restart(),xp&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))continue}for(var f=o.split(),h=c,d=0;f.forceReduce()&&d<10;d++){if(xp&&console.log(h+this.stackID(f)+" (via force-reduce)"),this.advanceFully(f,n))break;xp&&(h=this.stackID(f)+" -> ")}var p,v=s(o.recoverByInsert(u));try{for(v.s();!(p=v.n()).done;){var g=p.value;xp&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,n)}}catch(m){v.e(m)}finally{v.f()}this.stream.end>o.pos?(l==o.pos&&(l++,u=0),o.recoverByDelete(u,l),xp&&console.log(c+this.stackID(o)+" (via recover-delete ".concat(this.parser.getName(u),")")),Cp(o,n)):(!r||r.score<o.score)&&(r=o)}return r}},{key:"stackToTree",value:function(e){return e.close(),fs.build({buffer:gp.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}},{key:"stackID",value:function(e){var t=(Ap||(Ap=new WeakMap)).get(e);return t||Ap.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}]),e}();function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}var Mp=function(){function e(t,n,r){k(this,e),this.source=t,this.flags=n,this.disabled=r}return b(e,[{key:"allows",value:function(e){return!this.disabled||0==this.disabled[e]}}]),e}(),Np=function(e){v(n,e);var t=y(n);function n(e){var r,i;if(k(this,n),(i=t.call(this)).wrappers=[],14!=e.version)throw new RangeError("Parser version (".concat(e.version,") doesn't match runtime version (",14,")"));var a=e.nodeNames.split(" ");i.minRepeatTerm=a.length;for(var o=0;o<e.repeatNodeCount;o++)a.push("");for(var u=Object.keys(e.topRules).map((function(t){return e.topRules[t][1]})),c=[],f=0;f<a.length;f++)c.push([]);function h(e,t,n){c[e].push([t,t.deserialize(String(n))])}if(e.nodeProps){var d,p=s(e.nodeProps);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=v[0];"string"==typeof g&&(g=is[g]);for(var m=1;m<v.length;){var y=v[m++];if(y>=0)h(y,g,v[m++]);else{for(var _=v[m+-y],b=-y;b>0;b--)h(v[m++],g,_);m++}}}}catch(A){p.e(A)}finally{p.f()}}i.nodeSet=new us(a.map((function(t,n){return os.define({name:n>=i.minRepeatTerm?void 0:t,id:n,props:c[n],top:u.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1})}))),e.propSources&&(i.nodeSet=(r=i.nodeSet).extend.apply(r,l(e.propSources))),i.strict=!1,i.bufferLength=1024;var w=bp(e.tokenData);if(i.context=e.context,i.specialized=new Uint16Array(e.specialized?e.specialized.length:0),i.specializers=[],e.specialized)for(var x=0;x<e.specialized.length;x++)i.specialized[x]=e.specialized[x].term,i.specializers[x]=e.specialized[x].get;return i.states=bp(e.states,Uint32Array),i.data=bp(e.stateData),i.goto=bp(e.goto),i.maxTerm=e.maxTerm,i.tokenizers=e.tokenizers.map((function(e){return"number"==typeof e?new _p(w,e):e})),i.topRules=e.topRules,i.dialects=e.dialects||{},i.dynamicPrecedences=e.dynamicPrecedences||null,i.tokenPrecTable=e.tokenPrec,i.termNames=e.termNames||null,i.maxNode=i.nodeSet.types.length-1,i.dialect=i.parseDialect(),i.top=i.topRules[Object.keys(i.topRules)[0]],i}return b(n,[{key:"createParse",value:function(e,t,n){var r,i=new Ep(this,e,t,n),a=s(this.wrappers);try{for(a.s();!(r=a.n()).done;){i=(0,r.value)(i,e,t,n)}}catch(o){a.e(o)}finally{a.f()}return i}},{key:"getGoto",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.goto;if(t>=r[0])return-1;for(var i=r[t+1];;){var a=r[i++],o=1&a,s=r[i++];if(o&&n)return s;for(var u=i+(a>>1);i<u;i++)if(r[i]==e)return s;if(o)return-1}}},{key:"hasAction",value:function(e,t){for(var n=this.data,r=0;r<2;r++)for(var i,a=this.stateSlot(e,r?2:1);;a+=3){if(65535==(i=n[a])){if(1!=n[a+1]){if(2==n[a+1])return Rp(n,a+2);break}i=n[a=Rp(n,a+2)]}if(i==t||0==i)return Rp(n,a+1)}return 0}},{key:"stateSlot",value:function(e,t){return this.states[6*e+t]}},{key:"stateFlag",value:function(e,t){return(this.stateSlot(e,0)&t)>0}},{key:"validAction",value:function(e,t){if(t==this.stateSlot(e,4))return!0;for(var n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=Rp(this.data,n+2)}if(t==Rp(this.data,n+1))return!0}}},{key:"nextStates",value:function(e){for(var t=this,n=[],r=this.stateSlot(e,1);;r+=3){if(65535==this.data[r]){if(1!=this.data[r+1])break;r=Rp(this.data,r+2)}0==(1&this.data[r+2])&&function(){var e=t.data[r+1];n.some((function(t,n){return 1&n&&t==e}))||n.push(t.data[r],e)}()}return n}},{key:"overrides",value:function(e,t){var n=Pp(this.data,this.tokenPrecTable,t);return n<0||Pp(this.data,this.tokenPrecTable,e)<n}},{key:"configure",value:function(e){var t,r=Object.assign(Object.create(n.prototype),this);if(e.props&&(r.nodeSet=(t=this.nodeSet).extend.apply(t,l(e.props))),e.top){var i=this.topRules[e.top];if(!i)throw new RangeError("Invalid top rule name ".concat(e.top));r.top=i}return e.tokenizers&&(r.tokenizers=this.tokenizers.map((function(t){var n=e.tokenizers.find((function(e){return e.from==t}));return n?n.to:t}))),e.contextTracker&&(r.context=e.contextTracker),e.dialect&&(r.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(r.strict=e.strict),e.wrap&&(r.wrappers=r.wrappers.concat(e.wrap)),null!=e.bufferLength&&(r.bufferLength=e.bufferLength),r}},{key:"hasWrappers",value:function(){return this.wrappers.length>0}},{key:"getName",value:function(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}},{key:"eofTerm",get:function(){return this.maxNode+1}},{key:"topNode",get:function(){return this.nodeSet.types[this.top[1]]}},{key:"dynamicPrecedence",value:function(e){var t=this.dynamicPrecedences;return null==t?0:t[e]||0}},{key:"parseDialect",value:function(e){var t=Object.keys(this.dialects),n=t.map((function(){return!1}));if(e){var r,i=s(e.split(" "));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t.indexOf(a);o>=0&&(n[o]=!0)}}catch(h){i.e(h)}finally{i.f()}}for(var u=null,l=0;l<t.length;l++)if(!n[l])for(var c,f=this.dialects[t[l]];65535!=(c=this.data[f++]);)(u||(u=new Uint8Array(this.maxTerm+1)))[c]=1;return new Mp(e,n,u)}}],[{key:"deserialize",value:function(e){return new n(e)}}]),n}(Es);function Rp(e,t){return e[t]|e[t+1]<<16}function Pp(e,t,n){for(var r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}var Ip=Ds({String:au.string,Number:au.number,"True False":au.bool,PropertyName:au.propertyName,Null:au.null,",":au.separator,"[ ]":au.squareBracket,"{ }":au.brace}),Dp=Np.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26a0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[Ip],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var Up=cu.define({parser:Dp.configure({props:[Tu.add({Object:Iu({except:/^\s*\}/}),Array:Iu({except:/^\s*\]/})}),Bu.add({"Object Array":function(e){var t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Bp(){return new bu(Up)}function Vp(e){return new RegExp("^(?:"+e.join("|")+")$","i")}var Fp=Vp(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]),zp=Vp(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]),jp=Vp(["function","if","repeat","do","\\(","{"]),Hp=Vp(["end","until","\\)","}"]),Gp=new RegExp("^(?:"+["end","until","\\)","}","else","elseif"].join("|")+")","i");function Kp(e){for(var t=0;e.eat("=");)++t;return e.eat("["),t}function Wp(e,t){var n,r=e.next();return"-"==r&&e.eat("-")?e.eat("[")&&e.eat("[")?(t.cur=Xp(Kp(e),"comment"))(e,t):(e.skipToEnd(),"comment"):'"'==r||"'"==r?(t.cur=(n=r,function(e,t){for(var r,i=!1;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.cur=Wp),"string"}))(e,t):"["==r&&/[\[=]/.test(e.peek())?(t.cur=Xp(Kp(e),"string"))(e,t):/\d/.test(r)?(e.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(r)?(e.eatWhile(/[\w\\\-_.]/),"variable"):null}function Xp(e,t){return function(n,r){for(var i,a=null;null!=(i=n.next());)if(null==a)"]"==i&&(a=0);else if("="==i)++a;else{if("]"==i&&a==e){r.cur=Wp;break}a=null}return t}}var qp={startState:function(e){return{basecol:0,indentDepth:0,cur:Wp}},token:function(e,t){if(e.eatSpace())return null;var n=t.cur(e,t),r=e.current();return"variable"==n&&(zp.test(r)?n="keyword":Fp.test(r)&&(n="builtin")),"comment"!=n&&"string"!=n&&(jp.test(r)?++t.indentDepth:Hp.test(r)&&--t.indentDepth),n},indent:function(e,t,n){var r=Gp.test(t);return e.basecol+n.unit*(e.indentDepth-(r?1:0))},languageData:{indentOnInput:/^\s*(?:end|until|else|\)|\})$/,commentTokens:{line:"--",block:{open:"--[[",close:"]]--"}}}},Qp="1.13.4",$p="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},Jp=Array.prototype,Yp=Object.prototype,Zp="undefined"!==typeof Symbol?Symbol.prototype:null,ev=Jp.push,tv=Jp.slice,nv=Yp.toString,rv=Yp.hasOwnProperty,iv="undefined"!==typeof ArrayBuffer,av="undefined"!==typeof DataView,ov=Array.isArray,sv=Object.keys,uv=Object.create,lv=iv&&ArrayBuffer.isView,cv=isNaN,fv=isFinite,hv=!{toString:null}.propertyIsEnumerable("toString"),dv=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],pv=Math.pow(2,53)-1;function vv(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var a=Array(t+1);for(i=0;i<t;i++)a[i]=arguments[i];return a[t]=r,e.apply(this,a)}}function gv(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function mv(e){return null===e}function yv(e){return void 0===e}function kv(e){return!0===e||!1===e||"[object Boolean]"===nv.call(e)}function _v(e){return!(!e||1!==e.nodeType)}function bv(e){var t="[object "+e+"]";return function(e){return nv.call(e)===t}}var wv=bv("String"),xv=bv("Number"),Av=bv("Date"),Sv=bv("RegExp"),Lv=bv("Error"),Ov=bv("Symbol"),Tv=bv("ArrayBuffer"),Ev=bv("Function"),Cv=$p.document&&$p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof Cv&&(Ev=function(e){return"function"==typeof e||!1});var Mv=Ev,Nv=bv("Object"),Rv=av&&Nv(new DataView(new ArrayBuffer(8))),Pv="undefined"!==typeof Map&&Nv(new Map),Iv=bv("DataView");var Dv=Rv?function(e){return null!=e&&Mv(e.getInt8)&&Tv(e.buffer)}:Iv,Uv=ov||bv("Array");function Bv(e,t){return null!=e&&rv.call(e,t)}var Vv=bv("Arguments");!function(){Vv(arguments)||(Vv=function(e){return Bv(e,"callee")})}();var Fv=Vv;function zv(e){return!Ov(e)&&fv(e)&&!isNaN(parseFloat(e))}function jv(e){return xv(e)&&cv(e)}function Hv(e){return function(){return e}}function Gv(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=pv}}function Kv(e){return function(t){return null==t?void 0:t[e]}}var Wv=Kv("byteLength"),Xv=Gv(Wv),qv=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Qv=iv?function(e){return lv?lv(e)&&!Dv(e):Xv(e)&&qv.test(nv.call(e))}:Hv(!1),$v=Kv("length");function Jv(e,t){t=function(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=dv.length,r=e.constructor,i=Mv(r)&&r.prototype||Yp,a="constructor";for(Bv(e,a)&&!t.contains(a)&&t.push(a);n--;)(a=dv[n])in e&&e[a]!==i[a]&&!t.contains(a)&&t.push(a)}function Yv(e){if(!gv(e))return[];if(sv)return sv(e);var t=[];for(var n in e)Bv(e,n)&&t.push(n);return hv&&Jv(e,t),t}function Zv(e){if(null==e)return!0;var t=$v(e);return"number"==typeof t&&(Uv(e)||wv(e)||Fv(e))?0===t:0===$v(Yv(e))}function eg(e,t){var n=Yv(t),r=n.length;if(null==e)return!r;for(var i=Object(e),a=0;a<r;a++){var o=n[a];if(t[o]!==i[o]||!(o in i))return!1}return!0}function tg(e){return e instanceof tg?e:this instanceof tg?void(this._wrapped=e):new tg(e)}function ng(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Wv(e))}tg.VERSION=Qp,tg.prototype.value=function(){return this._wrapped},tg.prototype.valueOf=tg.prototype.toJSON=tg.prototype.value,tg.prototype.toString=function(){return String(this._wrapped)};var rg="[object DataView]";function ig(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&ag(e,t,n,r)}function ag(e,t,n,r){e instanceof tg&&(e=e._wrapped),t instanceof tg&&(t=t._wrapped);var i=nv.call(e);if(i!==nv.call(t))return!1;if(Rv&&"[object Object]"==i&&Dv(e)){if(!Dv(t))return!1;i=rg}switch(i){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return Zp.valueOf.call(e)===Zp.valueOf.call(t);case"[object ArrayBuffer]":case rg:return ag(ng(e),ng(t),n,r)}var a="[object Array]"===i;if(!a&&Qv(e)){if(Wv(e)!==Wv(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(Mv(o)&&o instanceof o&&Mv(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),a){if((u=e.length)!==t.length)return!1;for(;u--;)if(!ig(e[u],t[u],n,r))return!1}else{var l,c=Yv(e);if(u=c.length,Yv(t).length!==u)return!1;for(;u--;)if(!Bv(t,l=c[u])||!ig(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0}function og(e,t){return ig(e,t)}function sg(e){if(!gv(e))return[];var t=[];for(var n in e)t.push(n);return hv&&Jv(e,t),t}function ug(e){var t=$v(e);return function(n){if(null==n)return!1;var r=sg(n);if($v(r))return!1;for(var i=0;i<t;i++)if(!Mv(n[e[i]]))return!1;return e!==dg||!Mv(n[lg])}}var lg="forEach",cg=["clear","delete"],fg=["get","has","set"],hg=cg.concat(lg,fg),dg=cg.concat(fg),pg=["add"].concat(cg,lg,"has"),vg=Pv?ug(hg):bv("Map"),gg=Pv?ug(dg):bv("WeakMap"),mg=Pv?ug(pg):bv("Set"),yg=bv("WeakSet");function kg(e){for(var t=Yv(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function _g(e){for(var t=Yv(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function bg(e){for(var t={},n=Yv(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function wg(e){var t=[];for(var n in e)Mv(e[n])&&t.push(n);return t.sort()}function xg(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;u<s;u++){var l=o[u];t&&void 0!==n[l]||(n[l]=a[l])}return n}}var Ag=xg(sg),Sg=xg(Yv),Lg=xg(sg,!0);function Og(e){if(!gv(e))return{};if(uv)return uv(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Tg(e,t){var n=Og(e);return t&&Sg(n,t),n}function Eg(e){return gv(e)?Uv(e)?e.slice():Ag({},e):e}function Cg(e,t){return t(e),e}function Mg(e){return Uv(e)?e:[e]}function Ng(e){return tg.toPath(e)}function Rg(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function Pg(e,t,n){var r=Rg(e,Ng(t));return yv(r)?n:r}function Ig(e,t){for(var n=(t=Ng(t)).length,r=0;r<n;r++){var i=t[r];if(!Bv(e,i))return!1;e=e[i]}return!!n}function Dg(e){return e}function Ug(e){return e=Sg({},e),function(t){return eg(t,e)}}function Bg(e){return e=Ng(e),function(t){return Rg(t,e)}}function Vg(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)}}return function(){return e.apply(t,arguments)}}function Fg(e,t,n){return null==e?Dg:Mv(e)?Vg(e,t,n):gv(e)&&!Uv(e)?Ug(e):Bg(e)}function zg(e,t){return Fg(e,t,1/0)}function jg(e,t,n){return tg.iteratee!==zg?tg.iteratee(e,t):Fg(e,t,n)}function Hg(e,t,n){t=jg(t,n);for(var r=Yv(e),i=r.length,a={},o=0;o<i;o++){var s=r[o];a[s]=t(e[s],s,e)}return a}function Gg(){}function Kg(e){return null==e?Gg:function(t){return Pg(e,t)}}function Wg(e,t,n){var r=Array(Math.max(0,e));t=Vg(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function Xg(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}tg.toPath=Mg,tg.iteratee=zg;var qg=Date.now||function(){return(new Date).getTime()};function Qg(e){var t=function(t){return e[t]},n="(?:"+Yv(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}var $g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Jg=Qg($g),Yg=Qg(bg($g)),Zg=tg.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},em=/(.)^/,tm={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},nm=/\\|'|\r|\n|\u2028|\u2029/g;function rm(e){return"\\"+tm[e]}var im=/^\s*(\w|\$)+\s*$/;function am(e,t,n){!t&&n&&(t=n),t=Lg({},t,tg.templateSettings);var r=RegExp([(t.escape||em).source,(t.interpolate||em).source,(t.evaluate||em).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,(function(t,n,r,o,s){return a+=e.slice(i,s).replace(nm,rm),i=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t})),a+="';\n";var o,s=t.variable;if(s){if(!im.test(s))throw new Error("variable is not a bare identifier: "+s)}else a="with(obj||{}){\n"+a+"}\n",s="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{o=new Function(s,"_",a)}catch(l){throw l.source=a,l}var u=function(e){return o.call(this,e,tg)};return u.source="function("+s+"){\n"+a+"}",u}function om(e,t,n){var r=(t=Ng(t)).length;if(!r)return Mv(n)?n.call(e):n;for(var i=0;i<r;i++){var a=null==e?void 0:e[t[i]];void 0===a&&(a=n,i=r),e=Mv(a)?a.call(e):a}return e}var sm=0;function um(e){var t=++sm+"";return e?e+t:t}function lm(e){var t=tg(e);return t._chain=!0,t}function cm(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var a=Og(e.prototype),o=e.apply(a,i);return gv(o)?o:a}var fm=vv((function(e,t){var n=fm.placeholder;return function r(){for(var i=0,a=t.length,o=Array(a),s=0;s<a;s++)o[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return cm(e,r,this,this,o)}}));fm.placeholder=tg;var hm=fm,dm=vv((function(e,t,n){if(!Mv(e))throw new TypeError("Bind must be called on a function");var r=vv((function(i){return cm(e,r,t,this,n.concat(i))}));return r})),pm=Gv($v);function vm(e,t,n,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(e)}else t=1/0;for(var i=r.length,a=0,o=$v(e);a<o;a++){var s=e[a];if(pm(s)&&(Uv(s)||Fv(s)))if(t>1)vm(s,t-1,n,r),i=r.length;else for(var u=0,l=s.length;u<l;)r[i++]=s[u++];else n||(r[i++]=s)}return r}var gm=vv((function(e,t){var n=(t=vm(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=dm(e[r],e)}return e}));function mm(e,t){var n=function n(r){var i=n.cache,a=""+(t?t.apply(this,arguments):r);return Bv(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return n.cache={},n}var ym=vv((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),km=hm(ym,tg,1);function _m(e,t,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:qg(),r=null,o=e.apply(i,a),r||(i=a=null)},l=function(){var l=qg();s||!1!==n.leading||(s=l);var c=t-(l-s);return i=this,a=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=l,o=e.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(r),s=0,r=i=a=null},l}function bm(e,t,n){var r,i,a,o,s,u=function u(){var l=qg()-i;t>l?r=setTimeout(u,t-l):(r=null,n||(o=e.apply(s,a)),r||(a=s=null))},l=vv((function(l){return s=this,a=l,i=qg(),r||(r=setTimeout(u,t),n&&(o=e.apply(s,a))),o}));return l.cancel=function(){clearTimeout(r),r=a=s=null},l}function wm(e,t){return hm(t,e)}function xm(e){return function(){return!e.apply(this,arguments)}}function Am(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Sm(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Lm(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Om=hm(Lm,2);function Tm(e,t,n){t=jg(t,n);for(var r,i=Yv(e),a=0,o=i.length;a<o;a++)if(t(e[r=i[a]],r,e))return r}function Em(e){return function(t,n,r){n=jg(n,r);for(var i=$v(t),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(n(t[a],a,t))return a;return-1}}var Cm=Em(1),Mm=Em(-1);function Nm(e,t,n,r){for(var i=(n=jg(n,r,1))(t),a=0,o=$v(e);a<o;){var s=Math.floor((a+o)/2);n(e[s])<i?a=s+1:o=s}return a}function Rm(e,t,n){return function(r,i,a){var o=0,s=$v(r);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return r[a=n(r,i)]===i?a:-1;if(i!==i)return(a=t(tv.call(r,o,s),jv))>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(r[a]===i)return a;return-1}}var Pm=Rm(1,Cm,Nm),Im=Rm(-1,Mm);function Dm(e,t,n){var r=(pm(e)?Cm:Tm)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function Um(e,t){return Dm(e,Ug(t))}function Bm(e,t,n){var r,i;if(t=Vg(t,n),pm(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var a=Yv(e);for(r=0,i=a.length;r<i;r++)t(e[a[r]],a[r],e)}return e}function Vm(e,t,n){t=jg(t,n);for(var r=!pm(e)&&Yv(e),i=(r||e).length,a=Array(i),o=0;o<i;o++){var s=r?r[o]:o;a[o]=t(e[s],s,e)}return a}function Fm(e){var t=function(t,n,r,i){var a=!pm(t)&&Yv(t),o=(a||t).length,s=e>0?0:o-1;for(i||(r=t[a?a[s]:s],s+=e);s>=0&&s<o;s+=e){var u=a?a[s]:s;r=n(r,t[u],u,t)}return r};return function(e,n,r,i){var a=arguments.length>=3;return t(e,Vg(n,i,4),r,a)}}var zm=Fm(1),jm=Fm(-1);function Hm(e,t,n){var r=[];return t=jg(t,n),Bm(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function Gm(e,t,n){return Hm(e,xm(jg(t)),n)}function Km(e,t,n){t=jg(t,n);for(var r=!pm(e)&&Yv(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(!t(e[o],o,e))return!1}return!0}function Wm(e,t,n){t=jg(t,n);for(var r=!pm(e)&&Yv(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(t(e[o],o,e))return!0}return!1}function Xm(e,t,n,r){return pm(e)||(e=kg(e)),("number"!=typeof n||r)&&(n=0),Pm(e,t,n)>=0}var qm=vv((function(e,t,n){var r,i;return Mv(t)?i=t:(t=Ng(t),r=t.slice(0,-1),t=t[t.length-1]),Vm(e,(function(e){var a=i;if(!a){if(r&&r.length&&(e=Rg(e,r)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))}));function Qm(e,t){return Vm(e,Bg(t))}function $m(e,t){return Hm(e,Ug(t))}function Jm(e,t,n){var r,i,a=-1/0,o=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=pm(e)?e:kg(e)).length;s<u;s++)null!=(r=e[s])&&r>a&&(a=r);else t=jg(t,n),Bm(e,(function(e,n,r){((i=t(e,n,r))>o||i===-1/0&&a===-1/0)&&(a=e,o=i)}));return a}function Ym(e,t,n){var r,i,a=1/0,o=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,u=(e=pm(e)?e:kg(e)).length;s<u;s++)null!=(r=e[s])&&r<a&&(a=r);else t=jg(t,n),Bm(e,(function(e,n,r){((i=t(e,n,r))<o||i===1/0&&a===1/0)&&(a=e,o=i)}));return a}var Zm=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ey(e){return e?Uv(e)?tv.call(e):wv(e)?e.match(Zm):pm(e)?Vm(e,Dg):kg(e):[]}function ty(e,t,n){if(null==t||n)return pm(e)||(e=kg(e)),e[Xg(e.length-1)];var r=ey(e),i=$v(r);t=Math.max(Math.min(t,i),0);for(var a=i-1,o=0;o<t;o++){var s=Xg(o,a),u=r[o];r[o]=r[s],r[s]=u}return r.slice(0,t)}function ny(e){return ty(e,1/0)}function ry(e,t,n){var r=0;return t=jg(t,n),Qm(Vm(e,(function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index})),"value")}function iy(e,t){return function(n,r,i){var a=t?[[],[]]:{};return r=jg(r,i),Bm(n,(function(t,i){var o=r(t,i,n);e(a,t,o)})),a}}var ay=iy((function(e,t,n){Bv(e,n)?e[n].push(t):e[n]=[t]})),oy=iy((function(e,t,n){e[n]=t})),sy=iy((function(e,t,n){Bv(e,n)?e[n]++:e[n]=1})),uy=iy((function(e,t,n){e[n?0:1].push(t)}),!0);function ly(e){return null==e?0:pm(e)?e.length:Yv(e).length}function cy(e,t,n){return t in n}var fy=vv((function(e,t){var n={},r=t[0];if(null==e)return n;Mv(r)?(t.length>1&&(r=Vg(r,t[1])),t=sg(e)):(r=cy,t=vm(t,!1,!1),e=Object(e));for(var i=0,a=t.length;i<a;i++){var o=t[i],s=e[o];r(s,o,e)&&(n[o]=s)}return n})),hy=vv((function(e,t){var n,r=t[0];return Mv(r)?(r=xm(r),t.length>1&&(n=t[1])):(t=Vm(vm(t,!1,!1),String),r=function(e,n){return!Xm(t,n)}),fy(e,r,n)}));function dy(e,t,n){return tv.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function py(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:dy(e,e.length-t)}function vy(e,t,n){return tv.call(e,null==t||n?1:t)}function gy(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:vy(e,Math.max(0,e.length-t))}function my(e){return Hm(e,Boolean)}function yy(e,t){return vm(e,t,!1)}var ky=vv((function(e,t){return t=vm(t,!0,!0),Hm(e,(function(e){return!Xm(t,e)}))})),_y=vv((function(e,t){return ky(e,t)}));function by(e,t,n,r){kv(t)||(r=n,n=t,t=!1),null!=n&&(n=jg(n,r));for(var i=[],a=[],o=0,s=$v(e);o<s;o++){var u=e[o],l=n?n(u,o,e):u;t&&!n?(o&&a===l||i.push(u),a=l):n?Xm(a,l)||(a.push(l),i.push(u)):Xm(i,u)||i.push(u)}return i}var wy=vv((function(e){return by(vm(e,!0,!0))}));function xy(e){for(var t=[],n=arguments.length,r=0,i=$v(e);r<i;r++){var a=e[r];if(!Xm(t,a)){var o;for(o=1;o<n&&Xm(arguments[o],a);o++);o===n&&t.push(a)}}return t}function Ay(e){for(var t=e&&Jm(e,$v).length||0,n=Array(t),r=0;r<t;r++)n[r]=Qm(e,r);return n}var Sy=vv(Ay);function Ly(e,t){for(var n={},r=0,i=$v(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function Oy(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),a=0;a<r;a++,e+=n)i[a]=e;return i}function Ty(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(tv.call(e,r,r+=t));return n}function Ey(e,t){return e._chain?tg(t).chain():t}function Cy(e){return Bm(wg(e),(function(t){var n=tg[t]=e[t];tg.prototype[t]=function(){var e=[this._wrapped];return ev.apply(e,arguments),Ey(this,n.apply(tg,e))}})),tg}Bm(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=Jp[e];tg.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Ey(this,n)}})),Bm(["concat","join","slice"],(function(e){var t=Jp[e];tg.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Ey(this,e)}}));var My=tg,Ny=Cy(e);Ny._=Ny;var Ry=Ny,Py=n(244),Iy="flb-input-filter";var Dy=Ry.debounce((function(e,t,n){var r,i=e.split("\n"),a=t+"\n\nreturn function(_, tag, ts, obj)\n  local js = require \"js\"\n\n  local function _is_array(t)\n    return t[1] ~= nil\n  end\n\n  local function _to_lua(o)\n    local t = js.typeof(o)\n    local rv\n    if t == 'undefined' or o == js.null then\n      rv = nil\n    elseif t == 'number' or t == 'boolean' or t == 'string' then\n      rv = o\n    elseif t == 'object' then\n      rv = {}\n      if js.instanceof(o, js.global.Array) then\n        for item in js.of(o) do\n          rv[#rv + 1] = _to_lua(item)\n        end\n      else\n        for key in js.of(js.global.Object:keys(o)) do\n          rv[key] = _to_lua(o[key])\n        end\n      end\n    else\n      error(\"Unsupported type\")\n    end\n    return rv\n  end\n\n  local function _to_js(o)\n    local t = type(o)\n\n    if t ~= 'table' then\n      return o\n    end\n\n    local rv\n    if _is_array(o) then\n      rv = js.new(js.global.Array)\n      for _, v in ipairs(o) do\n        rv:push(_to_js(v))\n      end\n    else\n      rv = js.new(js.global.Object)\n      for k, v in pairs(o) do\n        rv[k] = _to_js(v)\n      end\n    end\n    return rv\n  end\n\n  local code, ts, record = cb_filter(_to_lua(tag), _to_lua(ts), _to_lua(obj))\n  return _to_js({code, ts, record})\nend\n",u=Py.load(a)(),l=[],c=s(i);try{for(c.s();!(r=c.n()).done;){var f=r.value;if(f.trim()){var h=void 0;try{h=JSON.parse(f)}catch(w){console.error(w);continue}var d=o(u("my-tag",0,h),3),p=d[0],v=d[1],g=d[2],m=void 0,y=void 0;switch(p){case 0:m=0,y=h;break;case 1:m=v,y=g;break;case 2:m=0,y=g;break;default:continue}if(Array.isArray(g)){var k,_=s(g);try{for(_.s();!(k=_.n()).done;){var b=k.value;l.push(JSON.stringify([m,b]))}}catch(w){_.e(w)}finally{_.f()}}else l.push(JSON.stringify([m,y]))}}}catch(w){c.e(w)}finally{c.f()}localStorage.setItem(Iy,JSON.stringify({input:e,filter:t})),n(l.join("\n"))}),1e3);var Uy=function(){var e=o((0,t.useState)(""),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],s=i[1],u=o((0,t.useState)(""),2),l=u[0],c=u[1];return(0,t.useEffect)((function(){var e,t=localStorage.getItem(Iy);if(t)try{(e=JSON.parse(t)).input&&e.filter&&(r(e.input),s(e.filter))}catch(n){console.error(n)}else r('{"log": "line 1"}\n{"log": "line 2"}\n{"log": "line 3"}\n'),s("function cb_filter(tag, ts, record)\n  record.message = 'hello from lua'\n  return 1, ts, record\nend\n")}),[]),(0,t.useEffect)((function(){Dy(n,a,c)}),[n,a]),(0,up.jsxs)("div",{children:[(0,up.jsx)("h2",{children:"Input json (one JSON expression per line)"}),(0,up.jsx)(hp,{value:n,height:"200px",extensions:[Bp()],onChange:r}),(0,up.jsx)("h2",{children:"Lua filter"}),(0,up.jsx)(hp,{value:a,height:"200px",extensions:[El.define(qp)],onChange:s}),(0,up.jsx)("h2",{children:"Output json"}),(0,up.jsx)(hp,{value:l,height:"200px",readOnly:!0,extensions:[Bp()]}),(0,up.jsx)("button",{onClick:function(){localStorage.clear(),setTimeout((function(){window.location.reload()}),200)},children:"Reset"})]})},By=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,up.jsx)(t.StrictMode,{children:(0,up.jsx)(Uy,{})})),By()}()}();
//# sourceMappingURL=main.d2e86820.js.map